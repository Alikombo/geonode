(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{2100:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(412).FormattedMessage,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(g,e);var t,n,r,f,y=(t=g,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function g(){var e;o(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=y.call.apply(y,[this].concat(n))),"renderFormattedMsg",(function(e){var t=e.msgId,n=e.msgParams,r=e.children;return r&&"function"==typeof r?d.createElement(m,{id:t,values:n},(function(e){return r(e)})):d.createElement(m,{id:t,values:n})})),p(s(e),"renderMsg",(function(e){var t=e.msgId,n=e.children;return n&&"function"==typeof n?n(t):d.createElement("span",null,t||"")})),e}return n=g,(r=[{key:"render",value:function(){return this.context.intl?this.renderFormattedMsg(this.props):this.renderMsg(this.props)}}])&&a(n.prototype,r),f&&a(n,f),g}(d.Component);p(y,"propTypes",{msgId:f.string.isRequired,msgParams:f.object}),p(y,"contextTypes",{intl:f.object}),e.exports=y},2111:function(e,t,n){var r=n(2351);e.exports=r(n(757).OverlayTrigger)},2113:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a=n(1),i=n(757).ButtonGroup,s=n(2659),c=n(2468);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buttons,n=void 0===t?[]:t,l=e.btnGroupProps,u=void 0===l?{}:l,p=e.btnDefaultProps,f=void 0===p?{}:p,d=e.transitionProps,m=void 0===d?{transitionName:"toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}:d,y=function(){return n.map((function(e,t){var n=e.visible,i=void 0===n||n,c=e.Element,l=e.renderButton,u=o(e,["visible","Element","renderButton"]);return i?l||(c&&a.createElement(c,r({key:u.key||t},u))||a.createElement(s,r({key:u.key||t},f,u))):null}))};return a.createElement(i,u,m?a.createElement(c,m,y()):y())}},2116:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1);e.exports=function(e){var t=e.id,n=e.children,r=e.header,a=e.footer,s=e.columns,c=e.height,l=e.style,u=void 0===l?{}:l,p=e.className,f=e.bodyClassName,d=void 0===f?"ms2-border-layout-body":f;return i.createElement("div",{id:t,className:p,style:o({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden"},u)},r,i.createElement("div",{className:d,style:{display:"flex",flex:1,overflowY:"auto"}},i.createElement("main",{className:"ms2-border-layout-content",style:{flex:1}},c?i.createElement("div",{style:{height:c}},n):n),c?i.createElement("div",{style:{height:c}},s):s),a)}},2130:function(e,t){var n="FEATUREGRID:TOGGLE_MODE",r="FEATUREGRID:INIT_PLUGIN",o={EDIT:"EDIT",VIEW:"VIEW"};e.exports={SELECT_FEATURES:"FEATUREGRID:SELECT_FEATURES",DESELECT_FEATURES:"FEATUREGRID:DESELECT_FEATURES",CLEAR_SELECTION:"FEATUREGRID:CLEAR_SELECTION",TOGGLE_FEATURES_SELECTION:"FEATUREGRID:TOGGLE_FEATURES_SELECTION",SET_SELECTION_OPTIONS:"FEATUREGRID:SET_SELECTION_OPTIONS",SET_FEATURES:"SET_FEATURES",FEATURES_MODIFIED:"FEATUREGRID:FEATURES_MODIFIED",CREATE_NEW_FEATURE:"FEATUREGRID:NEW_FEATURE",SAVE_CHANGES:"FEATUREGRID:SAVE_CHANGES",CLEAR_CHANGES:"FEATUREGRID:CLEAR_CHANGES",SAVE_SUCCESS:"FEATUREGRID:SAVE_SUCCESS",SAVE_ERROR:"FEATUREGRID:SAVE_ERROR",DELETE_SELECTED_FEATURES_CONFIRM:"FEATUREGRID:DELETE_SELECTED_FEATURES_CONFIRM",DELETE_SELECTED_FEATURES:"FEATUREGRID:DELETE_SELECTED_FEATURES",DOCK_SIZE_FEATURES:"DOCK_SIZE_FEATURES",SORT_BY:"FEATUREGRID:SORT_BY",CHANGE_PAGE:"FEATUREGRID:CHANGE_PAGE",SET_LAYER:"FEATUREGRID:SET_LAYER",TOGGLE_TOOL:"FEATUREGRID:TOGGLE_TOOL",CUSTOMIZE_ATTRIBUTE:"FEATUREGRID:CUSTOMIZE_ATTRIBUTE",TOGGLE_MODE:n,MODES:o,SAVING:"FEATUREGRID:SAVING",SET_PERMISSION:"FEATUREGRID:SET_PERMISSION",setPermission:function(e){return{type:"FEATUREGRID:SET_PERMISSION",permission:e}},START_EDITING_FEATURE:"FEATUREGRID:START_EDITING_FEATURE",startEditingFeature:function(){return{type:"FEATUREGRID:START_EDITING_FEATURE"}},START_DRAWING_FEATURE:"FEATUREGRID:START_DRAWING_FEATURE",startDrawingFeature:function(){return{type:"FEATUREGRID:START_DRAWING_FEATURE"}},GEOMETRY_CHANGED:"FEATUREGRID:GEOMETRY_CHANGED",geometryChanged:function(e){return{type:"FEATUREGRID:GEOMETRY_CHANGED",features:e}},DELETE_GEOMETRY:"FEATUREGRID:DELETE_GEOMETRY",deleteGeometry:function(){return{type:"FEATUREGRID:DELETE_GEOMETRY"}},DELETE_GEOMETRY_FEATURE:"FEATUREGRID:DELETE_GEOMETRY_FEATURE",deleteGeometryFeature:function(e){return{type:"FEATUREGRID:DELETE_GEOMETRY_FEATURE",features:e}},CLEAR_CHANGES_CONFIRMED:"FEATUREGRID:CLEAR_CHANGES_CONFIRMED",clearChangeConfirmed:function(){return{type:"FEATUREGRID:CLEAR_CHANGES_CONFIRMED"}},CLOSE_FEATURE_GRID:"FEATUREGRID:CLOSE_GRID",closeFeatureGrid:function(){return{type:"FEATUREGRID:CLOSE_GRID"}},OPEN_FEATURE_GRID:"FEATUREGRID:OPEN_GRID",openFeatureGrid:function(){return{type:"FEATUREGRID:OPEN_GRID"}},CLOSE_FEATURE_GRID_CONFIRM:"ASK_CLOSE_FEATURE_GRID_CONFIRM",closeFeatureGridConfirm:function(){return{type:"ASK_CLOSE_FEATURE_GRID_CONFIRM"}},FEATURE_GRID_CLOSE_CONFIRMED:"FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",closeFeatureGridConfirmed:function(){return{type:"FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED"}},SET_UP:"FEATUREGRID:SET_UP",setUp:function(e){return{type:"FEATUREGRID:SET_UP",options:e}},DISABLE_TOOLBAR:"FEATUREGRID:DISABLE_TOOLBAR",disableToolbar:function(e){return{type:"FEATUREGRID:DISABLE_TOOLBAR",disabled:e}},OPEN_ADVANCED_SEARCH:"FEATUREGRID:ADVANCED_SEARCH",openAdvancedSearch:function(){return{type:"FEATUREGRID:ADVANCED_SEARCH"}},ZOOM_ALL:"FEATUREGRID:ZOOM_ALL",zoomAll:function(){return{type:"FEATUREGRID:ZOOM_ALL"}},UPDATE_FILTER:"QUERY:UPDATE_FILTER",updateFilter:function(e){return{type:"QUERY:UPDATE_FILTER",update:e}},SIZE_CHANGE:"FEATUREGRID:SIZE_CHANGE",sizeChange:function(e,t){return{type:"FEATUREGRID:SIZE_CHANGE",size:e,dockProps:t}},setLayer:function(e){return{type:"FEATUREGRID:SET_LAYER",id:e}},selectFeatures:function(e,t){return{type:"FEATUREGRID:SELECT_FEATURES",features:e,append:t}},deselectFeatures:function(e){return{type:"FEATUREGRID:DESELECT_FEATURES",features:e}},setSelectionOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,n=void 0!==t&&t;return{type:"FEATUREGRID:SET_SELECTION_OPTIONS",multiselect:n}},clearSelection:function(){return{type:"FEATUREGRID:CLEAR_SELECTION"}},toggleSelection:function(e){return{type:"FEATUREGRID:TOGGLE_FEATURES_SELECTION",features:e}},setFeatures:function(e){return{type:"SET_FEATURES",features:e}},featureModified:function(e,t){return{type:"FEATUREGRID:FEATURES_MODIFIED",features:e,updated:t}},createNewFeatures:function(e){return{type:"FEATUREGRID:NEW_FEATURE",features:e}},saveChanges:function(){return{type:"FEATUREGRID:SAVE_CHANGES"}},featureSaving:function(){return{type:"FEATUREGRID:SAVING"}},clearChanges:function(){return{type:"FEATUREGRID:CLEAR_CHANGES"}},saveSuccess:function(){return{type:"FEATUREGRID:SAVE_SUCCESS"}},saveError:function(){return{type:"FEATUREGRID:SAVE_ERROR"}},deleteFeaturesConfirm:function(){return{type:"FEATUREGRID:DELETE_SELECTED_FEATURES_CONFIRM"}},deleteFeatures:function(){return{type:"FEATUREGRID:DELETE_SELECTED_FEATURES"}},dockSizeFeatures:function(e){return{type:"DOCK_SIZE_FEATURES",dockSize:e}},sort:function(e,t){return{type:"FEATUREGRID:SORT_BY",sortBy:e,sortOrder:t}},changePage:function(e,t){return{type:"FEATUREGRID:CHANGE_PAGE",page:e,size:t}},toggleTool:function(e,t){return{type:"FEATUREGRID:TOGGLE_TOOL",tool:e,value:t}},customizeAttribute:function(e,t,n){return{type:"FEATUREGRID:CUSTOMIZE_ATTRIBUTE",name:e,key:t,value:n}},toggleEditMode:function(){return{type:n,mode:o.EDIT}},toggleViewMode:function(){return{type:n,mode:o.VIEW}},initPlugin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:r,options:e}},INIT_PLUGIN:r,hideSyncPopover:function(){return{type:"FEATUREGRID:HIDE_SYNC_POPOVER"}},HIDE_SYNC_POPOVER:"FEATUREGRID:HIDE_SYNC_POPOVER",toggleShowAgain:function(){return{type:"FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG"}},TOGGLE_SHOW_AGAIN_FLAG:"FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",START_SYNC_WMS:"FEATUREGRID:START_SYNC_WMS",startSyncWMS:function(){return{type:"FEATUREGRID:START_SYNC_WMS"}},STOP_SYNC_WMS:"FEATUREGRID:STOP_SYNC_WMS",storeAdvancedSearchFilter:function(e){return{type:"STORE_ADVANCED_SEARCH_FILTER",filterObj:e}},STORE_ADVANCED_SEARCH_FILTER:"STORE_ADVANCED_SEARCH_FILTER",moreFeatures:function(e){return{type:"LOAD_MORE_FEATURES",pages:e}},LOAD_MORE_FEATURES:"LOAD_MORE_FEATURES",fatureGridQueryResult:function(e,t){return{type:"FEATUREGRID:QUERY_RESULT",features:e,pages:t}},GRID_QUERY_RESULT:"FEATUREGRID:QUERY_RESULT",setTimeSync:function(e){return{type:"FEATUREGRID:SET_TIME_SYNC",value:e}},SET_TIME_SYNC:"FEATUREGRID:SET_TIME_SYNC"}},2132:function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n(1),a=n(407).branch,i=n(757).Tooltip,s=n(2111),c=n(2100),l=n(13).omit;e.exports=a((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tooltip,n=e.tooltipId;return t||n}),(function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.tooltip,a=t.tooltipId,l=t.tooltipPosition,u=void 0===l?"top":l,p=t.tooltipTrigger,f=t.keyProp,d=t.idDropDown,m=r(t,["tooltip","tooltipId","tooltipPosition","tooltipTrigger","keyProp","idDropDown"]);return o.createElement(s,{trigger:p,id:d,key:f,placement:u,overlay:o.createElement(i,{id:"tooltip-"+{keyProp:f}},a?o.createElement(c,{msgId:a}):n)},o.createElement(e,m))}}),(function(e){return function(t){return o.createElement(e,l(t,["tooltipId","tooltip"]),t.children)}}))},2137:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(13).head,s=n(268).mapSelector,c=n(196).parseLayoutValue,l=function(e){return e.maplayout&&e.maplayout.layout||{}},u=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=l(e),r=!!i(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})));return r};e.exports={mapLayoutSelector:l,mapLayoutValuesSelector:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){return o({},e,a({},t,n[t]))}),{})||{}},checkConditionsSelector:p,rightPanelOpenSelector:function(e){return p(e,[{key:"right",value:658}])},bottomPanelOpenSelector:function(e){return p(e,[{key:"bottom",value:30,type:"not"}])},boundingMapRectSelector:u,mapPaddingSelector:function(e){var t=s(e),n=u(e);return n&&t&&t.size&&{left:c(n.left,t.size.width),bottom:c(n.bottom,t.size.height),right:c(n.right,t.size.width),top:c(n.top,t.size.height)}}}},2141:function(e,t){var n=function(e){return e&&e.maptype&&e.maptype.mapType||"leaflet"};e.exports={mapTypeSelector:n,isCesium:function(e){return"cesium"===n(e)},isLeaflet:function(e){return"leaflet"===n(e)},isOpenlayers:function(e){return"openlayers"===n(e)}}},2146:function(e,t,n){var r=n(2351);e.exports=r(n(4280).Portal)},2149:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(13),l=c.get,u=c.findIndex,p=c.isNil,f=c.fill,d=c.isArray,m=n(764),y=m.getFeatureTypeProperties,g=m.isGeometryType,b=m.isValid,h=m.isValidValueForPropertyName,v=m.findGeometryProperty,S=m.getPropertyDesciptor,E=function(e,t){return"geometry"===e?function(e){return l(v(e),"name")}(t):e},O=function(e,t,n){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return u(e,(function(e){return e<=n&&n<e+t}))}(t,n,e);return-1===r?r:r*n+e-t[r]},w={id:"empty_row",get:function(){}},A=function(e,t){var n=Object.keys(t).filter((function(e){return"geometry"!==e})).reduce((function(e,n){return i({},e,s({},n,t[n]))}),{}),r=Object.keys(t).filter((function(e){return"geometry"===e})).reduce((function(e,n){return i({},e,s({},n,t[n]))}),{});return i({},e,{},r,{properties:i({},e&&e.properties||{},{},n)})},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=u(e,t);return o>=0?e.map((function(e,t){return t===o?n:e})):[].concat(r(e),[n])},P=function(e){return(y(e)||[]).filter((function(e){return!g(e)}))},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return t.map((function(t){return n<=t&&t<=r?0:Math.abs(t-e)})).reduce((function(e,t,n,r){return t>r[e]&&n||e}),0)},x=function(e,t){return t.filter((function(t,n){return n!==e}))},_=function(e,t,n){return e.filter((function(e,r){return r<t||r>=t+n}))},R=function(e,t,n,r){for(var o,a,i=e;i<=t&&void 0===o;i++)-1===O(i*r,n,r)&&(o=i);for(var s=t;s>=e&&void 0===a;s--)-1===O(s*r,n,r)&&(a=s);return[o,a].filter((function(e){return void 0!==e}))};e.exports={getAttributeFields:P,featureTypeToGridColumns:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.editable,o=void 0!==r&&r,a=n.sortable,i=void 0===a||a,s=n.resizable,c=void 0===s||s,l=n.filterable,u=void 0===l||l,p=n.defaultSize,f=void 0===p?200:p,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},m=d.getEditor,y=void 0===m?function(){}:m,g=d.getFilterRenderer,b=void 0===g?function(){}:g,h=d.getFormatter,v=void 0===h?function(){}:h;return P(e).filter((function(e){return!(t[e.name]&&t[e.name].hide)})).map((function(e){return{sortable:i,key:e.name,width:t[e.name]&&t[e.name].width||f||void 0,name:e.name,resizable:c,editable:o,filterable:u,editor:y(e),formatter:v(e),filterRenderer:b(e,e.name)}}))},getRow:function(e,t){return t[e]},getRowVirtual:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;return t[O(e,n,r)]||i({},w)},getToolColumns:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return e.map((function(e){return i({},e,{events:e.events&&Object.keys(e.events).reduce((function(o,a){return i({},o,s({},a,(function(o,i){return e.events[a](t(i.rowIdx),i,n,r)})))}),{})})}))},getGridEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return Object.keys(e).reduce((function(a,c){return i({},a,s({},c,(function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return e[c].apply(e,i.concat([t,n,r,o]))})))}),{})},isProperty:function(e,t){return!!S(e,t)},isValidValueForPropertyName:function(e,t,n){return h(e,E(t,n),n)},getDefaultFeatureProjection:function(){return"EPSG:4326"},toChangesMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return d(e)?e.reduce((function(e,t){return i({},e,s({},t.id,i({},e[t.id],{},t.updated)))}),{}):{}},createNewAndEditingFilter:function(e,t,n){return function(r){return t.length>0?r._new:!e||e&&!!n[r.id]}},hasValidNewFeatures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.map((function(e){return b(e,t)})).reduce((function(e,t){return t&&e}),!0)},applyAllChanges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A(e,t[e.id]||{})},applyChanges:A,gridUpdateToQueryUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attribute,n=e.operator,r=e.value,o=e.type,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i({},a,{groupFields:[{id:1,logic:"AND",index:0}],filterFields:p(r)?(a.filterFields||[]).filter((function(e){return e.attribute!==t})):T(a.filterFields||[],{attribute:t},{attribute:t,rowId:Date.now(),type:o,groupId:1,operator:n,value:r})})},toPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startIndex,n=void 0===t?0:t,r=e.maxFeatures,o=void 0===r?1:r,a=e.totalFeatures,i=void 0===a?0:a,s=e.resultSize;return{page:Math.ceil(n/o),resultSize:s,size:o,total:i,maxPages:Math.ceil(i/o)-1}},getCurrentPaginationOptions:function(e,t,n){var r=e.startPage,o=e.endPage,a=R(r,o,t,n),i=a[1]-a[0]+1;return{startIndex:a[0]*n,maxFeatures:i*n}},updatePages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.endPage,r=t.startPage,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.pages,i=o.features,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=s.size,u=s.maxStoredPages,p=s.startIndex,d=R(r,n,a,c),m=d[1]-d[0]+1,y=l(e,"features",[]);y.length!==m*c&&(y=y.concat(f(Array(m*c-y.length),!1)));var g=a,b=i,h=g.length+m-Math.max(u,n-r+1);if(h>0)for(var v=r*c,S=n*c,E=v+(S-v)/2,O=0;O<h;O++){var w=C(E,a,v,S),A=w*c;g=x(w,g),b=_(i,A,c)}for(var T=[],P=0;P<m;P++)T.push(p+c*P);return{pages:g.concat(T),features:b.concat(y)}},getRowIdx:O,getPagesToLoad:R}},2158:function(e,t,n){var r=n(1),o=n(407).branch,a=n(2467),i=function(e){var t=e.loading,n=e.isLoading;return t||n&&("function"==typeof n?n():!0===n)};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;return o(e,(function(){return function(){return r.createElement(n,t)}}))}},2165:function(e,t,n){var r=n(2576);function o(e){return{type:"SHOW_REVERSE_GEOCODE",reverseGeocodeData:e.data}}e.exports={ERROR_FEATURE_INFO:"ERROR_FEATURE_INFO",EXCEPTIONS_FEATURE_INFO:"EXCEPTIONS_FEATURE_INFO",LOAD_FEATURE_INFO:"LOAD_FEATURE_INFO",CHANGE_MAPINFO_STATE:"CHANGE_MAPINFO_STATE",NEW_MAPINFO_REQUEST:"NEW_MAPINFO_REQUEST",PURGE_MAPINFO_RESULTS:"PURGE_MAPINFO_RESULTS",CHANGE_MAPINFO_FORMAT:"CHANGE_MAPINFO_FORMAT",SHOW_MAPINFO_MARKER:"SHOW_MAPINFO_MARKER",HIDE_MAPINFO_MARKER:"HIDE_MAPINFO_MARKER",SHOW_REVERSE_GEOCODE:"SHOW_REVERSE_GEOCODE",HIDE_REVERSE_GEOCODE:"HIDE_REVERSE_GEOCODE",GET_VECTOR_INFO:"GET_VECTOR_INFO",NO_QUERYABLE_LAYERS:"NO_QUERYABLE_LAYERS",CLEAR_WARNING:"CLEAR_WARNING",FEATURE_INFO_CLICK:"FEATURE_INFO_CLICK",TOGGLE_HIGHLIGHT_FEATURE:"IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",toggleHighlightFeature:function(e){return{type:"IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",enabled:e}},CHANGE_PAGE:"IDENTIFY:CHANGE_PAGE",changePage:function(e){return{type:"IDENTIFY:CHANGE_PAGE",index:e}},TOGGLE_MAPINFO_STATE:"TOGGLE_MAPINFO_STATE",UPDATE_CENTER_TO_MARKER:"UPDATE_CENTER_TO_MARKER",CLOSE_IDENTIFY:"IDENTIFY:CLOSE_IDENTIFY",TOGGLE_EMPTY_MESSAGE_GFI:"IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",toggleEmptyMessageGFI:function(){return{type:"IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI"}},TOGGLE_SHOW_COORD_EDITOR:"IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",toggleShowCoordinateEditor:function(e){return{type:"IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",showCoordinateEditor:e}},CHANGE_FORMAT:"IDENTIFY:CHANGE_FORMAT",changeFormat:function(e){return{type:"IDENTIFY:CHANGE_FORMAT",format:e}},closeIdentify:function(){return{type:"IDENTIFY:CLOSE_IDENTIFY"}},exceptionsFeatureInfo:function(e,t,n,r){return{type:"EXCEPTIONS_FEATURE_INFO",reqId:e,exceptions:t,requestParams:n,layerMetadata:r}},changeMapInfoState:function(e){return{type:"CHANGE_MAPINFO_STATE",enabled:e}},newMapInfoRequest:function(e,t){return{type:"NEW_MAPINFO_REQUEST",reqId:e,request:t}},purgeMapInfoResults:function(){return{type:"PURGE_MAPINFO_RESULTS"}},changeMapInfoFormat:function(e){return{type:"CHANGE_MAPINFO_FORMAT",infoFormat:e}},showMapinfoMarker:function(){return{type:"SHOW_MAPINFO_MARKER"}},hideMapinfoMarker:function(){return{type:"HIDE_MAPINFO_MARKER"}},revGeocodeInfo:o,hideMapinfoRevGeocode:function(){return{type:"HIDE_REVERSE_GEOCODE"}},showMapinfoRevGeocode:function(e){return function(t){r.reverseGeocode(e).then((function(e){t(o(e))})).catch((function(e){t(o(e))}))}},getVectorInfo:function(e,t,n){return{type:"GET_VECTOR_INFO",layer:e,request:t,metadata:n}},noQueryableLayers:function(){return{type:"NO_QUERYABLE_LAYERS"}},clearWarning:function(){return{type:"CLEAR_WARNING"}},errorFeatureInfo:function(e,t,n,r){return{type:"ERROR_FEATURE_INFO",error:t,reqId:e,requestParams:n,layerMetadata:r}},loadFeatureInfo:function(e,t,n,r){return{type:"LOAD_FEATURE_INFO",data:t,reqId:e,requestParams:n,layerMetadata:r}},toggleMapInfoState:function(){return{type:"TOGGLE_MAPINFO_STATE"}},updateCenterToMarker:function(e){return{type:"UPDATE_CENTER_TO_MARKER",status:e}},featureInfoClick:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:"FEATURE_INFO_CLICK",point:e,layer:t,filterNameList:n,overrideParams:r,itemId:o}}}},2166:function(e,t){function n(e,t,n,r,o,a){return{type:"CHANGE_DRAWING_STATUS",status:e,method:t,owner:n,features:r,options:o,style:a}}e.exports={CHANGE_DRAWING_STATUS:"CHANGE_DRAWING_STATUS",changeDrawingStatus:n,drawSupportReset:function(e){return n("clean","",e,[],{})},END_DRAWING:"DRAW:END_DRAWING",endDrawing:function(e,t){return{type:"DRAW:END_DRAWING",geometry:e,owner:t}},SET_CURRENT_STYLE:"DRAW:SET_CURRENT_STYLE",setCurrentStyle:function(e){return{type:"DRAW:SET_CURRENT_STYLE",currentStyle:e}},FEATURES_SELECTED:"DRAW:FEATURES_SELECTED",selectFeatures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"DRAW:FEATURES_SELECTED",features:e}},DRAWING_FEATURE:"DRAW:DRAWING_FEATURES",drawingFeatures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"DRAW:DRAWING_FEATURES",features:e}},DRAW_SUPPORT_STOPPED:"DRAW:DRAW_SUPPORT_STOPPED",drawStopped:function(){return{type:"DRAW:DRAW_SUPPORT_STOPPED"}},GEOMETRY_CHANGED:"DRAW:GEOMETRY_CHANGED",geometryChanged:function(e,t,n,r,o){return{type:"DRAW:GEOMETRY_CHANGED",features:e,owner:t,enableEdit:n,textChanged:r,circleChanged:o}}}},2167:function(e,t){e.exports=window.Cesium},2170:function(e,t,n){var r=n(1),o=n(757).Glyphicon,a=n(2258),i=n(2113),s=n(407).withState,c=n(2468),l=n(2259),u={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},p={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};e.exports=s("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,n=void 0!==t&&t,s=e.loading,f=e.onClose,d=void 0===f?function(){}:f,m=e.title,y=void 0===m?"":m,g=e.clickOutEnabled,b=void 0===g||g,h=e.showClose,v=void 0===h||h,S=e.disabledClose,E=void 0!==S&&S,O=e.showFullscreen,w=void 0!==O&&O,A=e.fullscreenType,T=void 0===A?"full":A,P=e.buttons,C=void 0===P?[]:P,x=e.size,_=void 0===x?"":x,R=e.bodyClassName,I=void 0===R?"":R,j=e.children,L=e.draggable,D=void 0!==L&&L,M=e.fullscreenState,N=e.onFullscreen,k=e.fade,G=void 0!==k&&k,F=e.fitContent,U=e.modalClassName,B=void 0===U?"":U,H=u[_]||"",z=w&&"expanded"===M&&p.className[T]||"",V=n?r.createElement("div",{className:"modal-fixed ".concat(B," ")+(D?"ms-draggable":"")},r.createElement(a,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:b?d:function(){},containerClassName:"ms-resizable-modal",draggable:D,modal:!0,className:"modal-dialog modal-content"+H+z+(F?" ms-fit-content":"")},r.createElement("span",{role:"header"},r.createElement("h4",{className:"modal-title"},r.createElement("div",{className:"ms-title"},y),w&&p.className[T]&&r.createElement(o,{className:"ms-header-btn",onClick:function(){return N("expanded"===M?"collapsed":"expanded")},glyph:p.glyph[M][T]}),v&&d&&r.createElement(o,{glyph:"1-close",className:"ms-header-btn",onClick:d,disabled:E}))),r.createElement("div",{role:"body",className:I},j),r.createElement("div",{role:"footer"},s?r.createElement(l,{style:{position:"absolute",left:0,bottom:0,margin:18}}):null,r.createElement(i,{buttons:C})))):null;return G?r.createElement(c,{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},V):V}))},2180:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(13),i=a.head,s=a.get,c=a.isObject,l=n(408).getLayerFromId,u=n(764).findGeometryProperty,p=n(766).currentLocaleSelector,f=n(196).isSimpleGeomType,d=n(2149).toChangesMap,m=n(767).layerDimensionSelectorCreator,y=l,g=function(e){return s(e,"featuregrid.selectedLayer")},b=function(e,t){return s(e,"featuregrid.attributes[".concat(t.name||t.attribute,"]"))},h=n(2196),v=h.attributesSelector,S=h.describeSelector,E=function(e){return e&&e.featuregrid&&e.featuregrid.select},O=function(e){return e&&e.featuregrid&&e.featuregrid.changes},w=function(e){return e&&e.featuregrid&&e.featuregrid.newFeatures},A=function(e){return i(E(e))},T=function(e){var t=S(e);if(t){var n=u(t);return n&&n.localType}return null},P=["Geometry","GeometryCollection"],C=function(e){return O(e)&&O(e).length>0},x=function(e){return w(e)&&w(e).length>0},_=function(e){return e&&e.featuregrid&&e.featuregrid.filters};e.exports={isFeatureGridOpen:function(e){return e&&e.featuregrid&&e.featuregrid.open},getAttributeFilters:_,getAttributeFilter:function(e,t){return s(_(e),t)},selectedLayerIdSelector:g,getCustomAttributeSettings:b,getTitleSelector:function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.title||e.name}(y(e,g(e)));return c(t)?t[p(e)]||t.default||"":t},getCustomizedAttributes:function(e){return(v(e)||[]).map((function(t){var n=b(e,t);return n?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},n):t}))},modeSelector:function(e){return e&&e.featuregrid&&e.featuregrid.mode},selectedFeaturesSelector:E,selectedFeatureSelector:A,selectedFeaturesCount:function(e){return(E(e)||[]).length},changesSelector:O,toChangesMap:d,changesMapSelector:function(e){return d(O(e))},hasChangesSelector:C,hasGeometrySelector:function(e){return function(e){var t=A(e);if(t){var n=d(O(e));return!(!n[t.id]||null===n[t.id].geometry)||(!n[t.id]||null!==n[t.id].geometry)&&((!t._new||!i(w(e))||null!==i(w(e)).geometry)&&(!(!t._new||!i(w(e))||null===i(w(e)).geometry)||null!==t.geometry))}return!1}(e)},newFeaturesSelector:w,hasNewFeaturesSelector:x,showAgainSelector:function(e){return s(e,"featuregrid.showAgain",!1)},showTimeSync:function(e){if(s(e,"featuregrid.showTimeSync",!1)){var t=g(e);return m({id:t},"time")(e)}return null},timeSyncActive:function(e){return s(e,"featuregrid.timeSync",!1)},showPopoverSyncSelector:function(e){return s(e,"featuregrid.showPopoverSync",!0)},isSavingSelector:function(e){return e&&e.featuregrid&&e.featuregrid.saving},editingAllowedRolesSelector:function(e){return s(e,"featuregrid.editingAllowedRoles",["ADMIN"])},isSavedSelector:function(e){return e&&e.featuregrid&&e.featuregrid.saved},isDrawingSelector:function(e){return e&&e.featuregrid&&e.featuregrid.drawing},geomTypeSelectedFeatureSelector:T,chartDisabledSelector:function(e){return s(e,"featuregrid.chartDisabled",!1)},hasNewFeaturesOrChanges:function(e){return x(e)||C(e)},isSimpleGeomSelector:function(e){return f(T(e))},canEditSelector:function(e){return e&&e.featuregrid&&e.featuregrid.canEdit},hasSupportedGeometry:function(e){return!i(P.filter((function(t){return T(e)===t})))},getDockSize:function(e){return e.featuregrid&&e.featuregrid.dockSize},selectedLayerNameSelector:function(e){var t=y(e,g(e));return t&&t.name||""},queryOptionsSelector:function(e){var t=function(e){return s(y(e,g(e)),"params")}(e);return{viewParams:t&&(t.VIEWPARAMS||t.viewParams||t.viewparams),cqlFilter:t&&(t.CQL_FILTER||t.cqlFilter||t.cql_filter)}}}},2189:function(e,t,n){var r=n(88).connect;e.exports=r((function(e){return{locale:e.locale&&e.locale.currentLocale,messages:e.locale&&e.locale.messages||[]}}))(n(2100))},2190:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(195).createSelector,i=n(13),s=i.get,c=i.pick,l=function(e){return s(e,"catalog.default.staticServices")},u=function(e){return s(e,"catalog.services")},p=a(l,u,(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},c(e,"default_map_backgrounds"))})),f=function(e){return s(e,'catalog.default.staticServices["'.concat(s(e,"catalog.selectedService"),'"].type'),"csw")};e.exports={groupSelector:function(e){return s(e,"controls.metadataexplorer.group")},savingSelector:function(e){return s(e,"catalog.saving")},resultSelector:function(e){return s(e,"catalog.result")},serviceListOpenSelector:function(e){return s(e,"catalog.openCatalogServiceList")},newServiceSelector:function(e){return s(e,"catalog.newService")},staticServicesSelector:l,servicesSelector:u,servicesSelectorWithBackgrounds:p,newServiceTypeSelector:function(e){return s(e,"catalog.newService.type","csw")},selectedCatalogSelector:function(e){return s(e,'catalog.services["'.concat(s(e,"catalog.selectedService"),'"]'))},selectedStaticServiceTypeSelector:f,selectedServiceTypeSelector:function(e){return s(e,'catalog.services["'.concat(s(e,"catalog.selectedService"),'"].type'),f(e))},searchOptionsSelector:function(e){return s(e,"catalog.searchOptions")},formatsSelector:function(e){return s(e,"catalog.supportedFormats")||[{name:"csw",label:"CSW"},{name:"wms",label:"WMS"},{name:"wmts",label:"WMTS"}]},loadingErrorSelector:function(e){return s(e,"catalog.loadingError")},loadingSelector:function(e){return s(e,"catalog.loading",!1)},selectedServiceSelector:function(e){return s(e,"catalog.selectedService")},modeSelector:function(e){return s(e,"catalog.mode","view")},layerErrorSelector:function(e){return s(e,"catalog.layerError")},searchTextSelector:function(e){return s(e,"catalog.searchOptions.text","")},activeSelector:function(e){return"metadataexplorer"===s(e,"controls.toolbar.active")||s(e,"controls.metadataexplorer.enabled")},authkeyParamNameSelector:function(e){return(s(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},pageSizeSelector:function(e){return s(e,"catalog.pageSize",4)},delayAutoSearchSelector:function(e){return s(e,"catalog.delayAutoSearch",1e3)}}},2191:function(e,t){e.exports={RANGE_CHANGED:"TIMELINE:RANGE_CHANGE",onRangeChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,n=e.end;return{type:"TIMELINE:RANGE_CHANGE",start:t,end:n}},SELECT_TIME:"TIMELINE:SELECT_TIME",selectTime:function(e,t,n,r){return{type:"TIMELINE:SELECT_TIME",time:e,group:t,what:n,item:r}},RANGE_DATA_LOADED:"TIMELINE:RANGE_DATA_LOADED",rangeDataLoaded:function(e,t,n,r){return{type:"TIMELINE:RANGE_DATA_LOADED",layerId:e,range:t,histogram:n,domain:r}},LOADING:"TIMELINE:LOADING",timeDataLoading:function(e,t){return{type:"TIMELINE:LOADING",layerId:e,loading:t}},SELECT_LAYER:"TIMELINE:SELECT_LAYER",selectLayer:function(e){return{type:"TIMELINE:SELECT_LAYER",layerId:e}},ENABLE_OFFSET:"TIMELINE:ENABLE_OFFSET",enableOffset:function(e){return{type:"TIMELINE:ENABLE_OFFSET",enabled:e}},SET_COLLAPSED:"TIMELINE:SET_COLLAPSED",setCollapsed:function(e){return{type:"TIMELINE:SET_COLLAPSED",collapsed:e}},SET_MAP_SYNC:"TIMELINE:SET_MAP_SYNC",setMapSync:function(e){return{type:"TIMELINE:SET_MAP_SYNC",mapSync:e}}}},2196:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(13),i=a.isNil,s=a.get,c=a.head,l=function(e){return s(e,"query.filterObj.featureTypeName")},u=function(e){return function(t){return s(t,'query.featureTypes["'.concat(e,'"]'))}},p=function(e,t){return s(u(t)(e),"original")};e.exports={wfsURL:function(e){return e&&e.query&&e.query.searchUrl},wfsURLSelector:function(e){return e&&e.query&&e.query.url},wfsFilter:function(e){return e&&e.query&&e.query.filterObj},attributesSelector:function(e){return s(u(l(e))(e),"attributes")},typeNameSelector:function(e){return s(e,"query.typeName")},resultsSelector:function(e){return s(e,"query.result.features")},featureCollectionResultSelector:function(e){var t=s(e,"query.result");return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{features:(t&&t.features||[]).filter((function(e){return!i(e.geometry)}))})},getFeatureById:function(e,t){var n=e&&e.query&&e.query.result&&e.query.result.features;return c(n.filter((function(e){return e.id===t})))},paginationInfo:{startIndex:function(e){return s(e,"query.filterObj.pagination.startIndex")},maxFeatures:function(e){return s(e,"query.filterObj.pagination.maxFeatures")},resultSize:function(e){return s(e,"query.result.features.length")},totalFeatures:function(e){return s(e,"query.result.totalFeatures")}},isDescribeLoaded:function(e,t){var n=u(t)(e);return!!(n&&n.attributes&&n.geometry&&n.original)},describeSelector:function(e){return p(e,l(e))},featureTypeSelectorCreator:u,layerDescribeSelector:p,featureLoadingSelector:function(e){return s(e,"query.featureLoading")},isSyncWmsActive:function(e){return s(e,"query.syncWmsFilter",!1)},isFilterActive:function(e){var t=s(e,"query.filterObj.crossLayerFilter"),n=s(e,"query.filterObj.spatialField"),r=s(e,"query.filterObj.filterFields");return!!(r&&c(r)||n&&n.method&&n.operation&&n.geometry||t&&t.collectGeometries&&t.operation)}}},2207:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(13).isNil,y=n(412).FormattedNumber,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(g,e);var t,n,r,p,f=(t=g,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function g(){return a(this,g),f.apply(this,arguments)}return n=g,(r=[{key:"render",value:function(){return this.context.intl?d.createElement(y,o({value:this.props.value},this.props.numberParams)):d.createElement("span",null,!m(this.props.value)&&!isNaN(this.props.value)&&this.props.value.toString&&this.props.value.toString()||"")}}])&&i(n.prototype,r),p&&i(n,p),g}(d.Component);p(g,"propTypes",{value:f.oneOfType([f.object,f.number]),numberParams:f.object}),p(g,"contextTypes",{intl:f.object}),e.exports=g},2208:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=n(13),p=u.get,f=u.head,d=n(195).createSelector,m=n(2478).createShallowSelector,y=n(80).reprojectBbox,g=n(769),b=g.timeIntervalToSequence,h=g.timeIntervalToIntervalSequence,v=g.analyzeIntervalInRange,S=g.isTimeDomainInterval,E=n(767),O=E.timeDataSelector,w=E.currentTimeSelector,A=E.offsetTimeSelector,T=E.layerDimensionRangeSelector,P=E.layersWithTimeDataSelector,C=E.layerDimensionDataSelectorCreator,x=n(268),_=x.mapSelector,R=x.projectionSelector,I=n(408).getLayerFromId,j=function(e){return p(e,"timeline.range")},L=function(e){return p(e,"timeline.rangeData")},D=function(e){return p(e,"timeline.settings.collapsed")},M=function(e){return p(e,"timeline.settings.mapSync")},N=function(e,t){return(e||[]).reduce((function(e,n){return[].concat(i(e),i(function(e,t){var n=s(e.split("/"),3),r=n[0],o=n[1],a=n[2];if(a&&"0"!==a){var i=v({start:r,end:o,duration:a},t),c=i.count,l=i.start,u=i.end;return c>50?[{start:r,end:o,duration:a,type:"range",content:"".concat(c," items")}]:b({start:l,end:u,duration:a}).map((function(e){return{start:new Date(e),end:new Date(e),type:"point"}}))}return isNaN(new Date(r).getTime())?null:[{start:new Date(r),end:new Date(o||r),type:o?"range":"point"}]}(n,t)))}),[]).filter((function(e){return e&&e.start}))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(e.domain&&e.domain.values)return N(e.domain.values,t);if(e.histogram&&e.histogram.domain&&e.histogram.values){var n=e.histogram.domain.split("/"),r=s(n,3),a=r[0],c=r[1],l=r[2],u=Math.max.apply(Math,i(e.histogram.values)),p=h({start:a,end:c,duration:l});return e.histogram.values.map((function(e,t){return o({},p[t],{type:"range",itemType:"histogram",count:e,className:"histogram-item",content:'<div><div class="histogram-box" style="height: '.concat(100*e/u,'%"></div> <span class="histogram-count">').concat(e,"</span></div>")})}))}return[]},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e&&e.values||e&&e.domain&&!S(e.domain)?N(e.values||e.domain.split(","),t):n&&n.histogram?k(n,t):[]},F=m(O,j,L,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(Object.keys(e).map((function(r){return G(e[r],t,n[r]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o({content:" "},e,{group:r})}))})).reduce((function(e,t){return[].concat(i(e),i(t))}),[]))})),U=function(e){return p(e,"timeline.selectedLayer")},B=function(e){return I(e,U(e))},H=function(e){return B(e)&&B(e).dimensions&&f(B(e).dimensions.filter((function(e){return"time"===e.name})))},z=d(w,A,(function(e,t){return{start:e,end:t}})),V=P,W=d(V,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length>0}));e.exports={isVisible:function(e){return!D(e)&&W(e)},isCollapsed:D,currentTimeRangeSelector:z,timelineLayersSelector:V,hasLayers:W,itemsSelector:F,rangeSelector:j,isAutoSelectEnabled:function(e){return p(e,"timeline.settings.autoSelect")},loadingSelector:function(e){return p(e,"timeline.loading")},selectedLayerSelector:U,selectedLayerData:B,selectedLayerTimeDimensionConfiguration:H,selectedLayerDataRangeSelector:function(e){return T(e,U(e))},selectedLayerName:function(e){return B(e)&&B(e).name},selectedLayerUrl:function(e){return p(H(e),"source.url")},rangeDataSelector:L,isMapSync:M,multidimOptionsSelectorCreator:function(e){return function(t){var n=(_(t)||{}).bbox;if(!n)return{};var r=C(e,"time")(t),i=p(r,"source.version"),c=Object.keys(n.bounds).reduce((function(e,t){return o({},e,a({},t,parseFloat(n.bounds[t])))}),{});if(!c||!M(t))return{};if("1.1"!==i){var l=C(e,"space")(t),u=p(l,"domain.CRS");if(!u||!c||!M(t))return{};var f=s(y(c,R(t),u),4),d=f[0],m=f[1],g=f[2],b=f[3];return g<d&&"EPSG:4326"===u&&(g+=360),{bbox:"".concat(d,",").concat(m,",").concat(g,",").concat(b),crs:u}}var h=c.minx,v=c.miny,S=c.maxx,E=c.maxy,O=n.crs;return{bbox:"".concat(h,",").concat(v,",").concat(S,",").concat(E,",").concat(O)}}}}},2221:function(e,t,n){var r=n(2405),o=n(13).toNumber,a={decToHex:function(e){var t=parseInt(e,10);return t=isNaN(t)?0:t,"0123456789ABCDEF".charAt(((t=t>255||t<0?0:t)-t%16)/16)+"0123456789ABCDEF".charAt(t%16)},rgbToHex:function(e,t,n){return e instanceof Array?a.rgbToHex(e[0],e[1],e[2]):"#"+a.decToHex(e)+a.decToHex(t)+a.decToHex(n)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,n){if(e instanceof Array)return a.rgbToHsv(e[0],e[1],e[2]);var r,o,i,s,c,l=e/255,u=t/255,p=n/255;switch(r=Math.min(Math.min(l,u),p),i=(o=Math.max(Math.max(l,u),p))-r,o){case r:s=0;break;case l:s=60*(u-p)/i,u<p&&(s+=360);break;case u:s=60*(p-l)/i+120;break;case p:s=60*(l-u)/i+240}return c=0===o?0:1-r/o,[Math.round(s),c,o]},distributedColorsHEX:function(e){for(var t=360/(e-1),n=[],r=function e(t,n,r){var o=e(t,n,r);return a.rgbToHex(o)},o=0;o<e;o++)n.push(r(t*o,.57,.63));return n},sameToneRangeColors:function(e,t,n,r){var o=e;isNaN(parseFloat(e))&&(o=a.hexToHsv(e)[0]);var i=.5/(n-1),s=t/(n-1),c=[];1===n&&(i=.5,s=t/2);for(var l=0;l<n;l++){var u=o+l*s-t/2,p=i*l+.3,f=p;r&&(u=r.h||u,p=r.s||p,f=r.v||f),c.push(a.hsvToHex(u,p,f,l))}return c},hsvToRgb:function(e,t,n){if(e instanceof Array)return a.hsvToRgb(e[0],e[1],e[2]);var r,o,i,s=Math.floor(e/60%6),c=e/60-s,l=n*(1-t),u=n*(1-c*t),p=n*(1-(1-c)*t);switch(s){case 0:r=n,o=p,i=l;break;case 1:r=u,o=n,i=l;break;case 2:r=l,o=n,i=p;break;case 3:r=l,o=u,i=n;break;case 4:r=p,o=l,i=n;break;case 5:r=n,o=l,i=u}return[a.realToDec(r),a.realToDec(o),a.realToDec(i)]},hsvToHex:function(e,t,n){var r=a.hsvToRgb(e,t,n);return a.rgbToHex(r)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var n=a.hexToRgb(t);return a.rgbToHsv(n)}return null},hexToRgb:function(e){var t,n,r,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),n=o.charAt(2)+o.charAt(3),r=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(n,16),parseInt(r,16)]},colorToHexStr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return r(e).toHexString()},colorToRgbaStr:function(e,t,n){var a=r(e);return e&&a.setAlpha(o(void 0!==t?t:a.getAlpha())).toRgbString()||n}};e.exports=a},2227:function(e,t,n){"use strict";n.r(t),n.d(t,"VECTOR_FORMATS",(function(){return r})),n.d(t,"isVectorFormat",(function(){return o}));var r=["application/vnd.mapbox-vector-tile","application/json;type=geojson","application/json;type=topojson"],o=function(e){return-1!==r.indexOf(e)}},2228:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(0),c=function(e){return e>100?"full":e>40?"medium":"small"},l=function(e){var t=e.size,n=e.style,r=void 0===n?{}:n,a=e.className;return i.createElement("div",{className:a,style:o({width:t,height:t,overflow:"hidden"},r)},i.createElement("div",{className:"mapstore-".concat(c(t),"-size-loader")}))};l.propTypes={size:s.number,className:s.string,style:s.object},e.exports=l},2229:function(e,t){var n="PLAYBACK:START",r="PLAYBACK:STOP";e.exports={play:function(){return{type:n}},stop:function(){return{type:r}},pause:function(){return{type:"PLAYBACK:PAUSE"}},setFrames:function(e){return{type:"PLAYBACK:SET_FRAMES",frames:e}},appendFrames:function(e){return{type:"PLAYBACK:APPEND_FRAMES",frames:e}},framesLoading:function(e){return{type:"PLAYBACK:FRAMES_LOADING",loading:e}},setCurrentFrame:function(e){return{type:"PLAYBACK:SET_CURRENT_FRAME",frame:e}},selectPlaybackRange:function(e){return{type:"PLAYBACK:SELECT_PLAYBACK_RANGE",range:e}},changeSetting:function(e,t){return{type:"PLAYBACK:SETTINGS_CHANGE",name:e,value:t}},toggleAnimationMode:function(){return{type:"PLAYBACK:TOGGLE_ANIMATION_MODE"}},animationStepMove:function(e){return{type:"PLAYBACK:ANIMATION_STEP_MOVE",direction:e}},updateMetadata:function(e){var t=e.next,n=e.previous;return{type:"PLAYBACK:UPDATE_METADATA",forTime:e.forTime,next:t,previous:n}},PLAY:n,PAUSE:"PLAYBACK:PAUSE",STOP:r,STATUS:{PLAY:"PLAY",STOP:"STOP",PAUSE:"PAUSE"},SET_FRAMES:"PLAYBACK:SET_FRAMES",APPEND_FRAMES:"PLAYBACK:APPEND_FRAMES",FRAMES_LOADING:"PLAYBACK:FRAMES_LOADING",SET_CURRENT_FRAME:"PLAYBACK:SET_CURRENT_FRAME",SELECT_PLAYBACK_RANGE:"PLAYBACK:SELECT_PLAYBACK_RANGE",CHANGE_SETTING:"PLAYBACK:SETTINGS_CHANGE",TOGGLE_ANIMATION_MODE:"PLAYBACK:TOGGLE_ANIMATION_MODE",ANIMATION_STEP_MOVE:"PLAYBACK:ANIMATION_STEP_MOVE",UPDATE_METADATA:"PLAYBACK:UPDATE_METADATA"}},2230:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1),d=n(0),m=n(757),y=m.Panel,g=m.Button,b=m.Glyphicon,h=n(2480),v=n(3321).default,S=n(2113),E=function(){return f.createElement(g,{className:"square-button-sm no-border switch-error"},f.createElement(b,{glyph:"exclamation-mark",className:"text-danger"}))},O=n(2467),w=function(){return f.createElement("div",{className:"switch-loading"},f.createElement(O,{size:"small"}))},A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(g,e);var t,n,r,d,m=(t=g,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function g(){var e;o(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=m.call.apply(m,[this].concat(n))),"state",{}),e}return n=g,(r=[{key:"renderHeader",value:function(){var e=this,t=this.props.useToolbar?v:h;return f.createElement("div",null,f.createElement("div",{className:"pull-left"},this.props.title||this.props.header),f.createElement("div",{className:"pull-right"},this.props.locked?null:f.createElement(t,{checked:this.props.expanded,onClick:function(t){e.props.onSwitch(t)}}),this.props.error?f.createElement(E,null):null,this.props.loading?f.createElement(w,null):null,this.props.buttons.length>0&&this.props.expanded&&f.createElement(S,{btnDefaultProps:{className:"square-button-sm no-border"},buttons:this.props.buttons})))}},{key:"render",value:function(){return f.createElement(y,{className:"mapstore-switch-panel",collapsible:!0,expanded:this.props.expanded,defaultExpanded:this.props.defaultExpanded,header:this.renderHeader()},this.props.children)}}])&&a(n.prototype,r),d&&a(n,d),g}(f.Component);p(A,"propTypes",{header:d.node,title:d.oneOfType([d.string,d.node]),defaultExpanded:d.string,expanded:d.bool,onSwitch:d.func,locked:d.bool,buttons:d.array,loading:d.bool,error:d.any,errorMsgId:d.string,transitionProps:d.object,useToolbar:d.bool}),p(A,"defaultProps",{title:"",expanded:!1,onSwitch:function(){},locked:!1,buttons:[],useToolbar:!1}),e.exports=A},2244:function(e,t){e.exports={UPDATE_TEMPORARY_STYLE:"STYLEEDITOR:UPDATE_TEMPORARY_STYLE",UPDATE_STATUS:"STYLEEDITOR:UPDATE_STATUS",TOGGLE_STYLE_EDITOR:"STYLEEDITOR:TOGGLE_STYLE_EDITOR",RESET_STYLE_EDITOR:"STYLEEDITOR:RESET_STYLE_EDITOR",SELECT_STYLE_TEMPLATE:"STYLEEDITOR:SELECT_STYLE_TEMPLATE",CREATE_STYLE:"STYLEEDITOR:CREATE_STYLE",LOADING_STYLE:"STYLEEDITOR:LOADING_STYLE",LOADED_STYLE:"STYLEEDITOR:LOADED_STYLE",ADD_STYLE:"STYLEEDITOR:ADD_STYLE",ERROR_STYLE:"STYLEEDITOR:ERROR_STYLE",UPDATE_STYLE_CODE:"STYLEEDITOR:UPDATE_STYLE_CODE",EDIT_STYLE_CODE:"STYLEEDITOR:EDIT_STYLE_CODE",DELETE_STYLE:"STYLEEDITOR:DELETE_STYLE",INIT_STYLE_SERVICE:"STYLEEDITOR:INIT_STYLE_SERVICE",SET_EDIT_PERMISSION:"STYLEEDITOR:SET_EDIT_PERMISSION",SET_DEFAULT_STYLE:"STYLEEDITOR:SET_DEFAULT_STYLE",updateTemporaryStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.temporaryId,n=e.templateId,r=e.code,o=e.format,a=e.languageVersion,i=e.init;return{type:"STYLEEDITOR:UPDATE_TEMPORARY_STYLE",temporaryId:t,templateId:n,code:r,format:o,init:i,languageVersion:a}},updateStatus:function(e){return{type:"STYLEEDITOR:UPDATE_STATUS",status:e}},toggleStyleEditor:function(e,t){return{type:"STYLEEDITOR:TOGGLE_STYLE_EDITOR",layer:e,enabled:t}},resetStyleEditor:function(){return{type:"STYLEEDITOR:RESET_STYLE_EDITOR"}},selectStyleTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code,n=e.templateId,r=e.format,o=e.languageVersion,a=e.init;return{type:"STYLEEDITOR:SELECT_STYLE_TEMPLATE",code:t,templateId:n,format:r,init:a,languageVersion:o}},createStyle:function(e){return{type:"STYLEEDITOR:CREATE_STYLE",settings:e}},loadingStyle:function(e){return{type:"STYLEEDITOR:LOADING_STYLE",status:e}},loadedStyle:function(){return{type:"STYLEEDITOR:LOADED_STYLE"}},addStyle:function(e){return{type:"STYLEEDITOR:ADD_STYLE",add:e}},errorStyle:function(e,t){return{type:"STYLEEDITOR:ERROR_STYLE",status:e,error:t}},updateStyleCode:function(){return{type:"STYLEEDITOR:UPDATE_STYLE_CODE"}},editStyleCode:function(e){return{type:"STYLEEDITOR:EDIT_STYLE_CODE",code:e}},deleteStyle:function(e){return{type:"STYLEEDITOR:DELETE_STYLE",styleName:e}},initStyleService:function(e,t){return{type:"STYLEEDITOR:INIT_STYLE_SERVICE",service:e,canEdit:t}},setEditPermissionStyleEditor:function(e){return{type:"STYLEEDITOR:SET_EDIT_PERMISSION",canEdit:e}},setDefaultStyle:function(){return{type:"STYLEEDITOR:SET_DEFAULT_STYLE"}}}},2245:function(e,t,n){var r=n(13),o=r.isArray,a=r.head,i=r.isNaN;function s(e){var t=Math.floor(e),n=60*(e-t),r=Math.floor(n),o=60*(n-r);return t+"° "+r+"' "+Math.floor(o)+"'' "}var c={yd:{ft:3,m:.9144,km:9144e-7,yd:1,mi:.00056818181818,nm:.00049373650107},ft:{ft:1,m:.3048,km:3048e-7,yd:.33333333333334,mi:.0001893932,nm:164579e-9},m:{ft:3.28084,m:1,km:.001,yd:1.0936132983377,mi:621371e-9,nm:.000539956803},km:{ft:3280.84,m:1e3,km:1,yd:1093.6132983377,mi:.62137121212121,nm:.5399568207343395},mi:{ft:5280.000168959982,m:1609.3440514990027,km:1.6093440514990027,yd:1760,mi:1,nm:.8689762697078849},nm:{ft:6076.115679999979,m:1852.0000592639938,km:1.8520000592639938,yd:2025.3718285214,mi:1.150779484848481,nm:1},sqft:{sqft:1,sqm:.09290304,sqkm:9.2903043596611e-8,sqmi:3.587e-8,sqnm:2.7051601137505e-8},sqyd:{sqft:8.9999247491639,sqm:.83612040133779,sqkm:8.3612040133779e-7,sqyd:1,sqmi:3.228278917579e-7,sqnm:2.4346237458194e-7},sqm:{sqft:10.76391,sqm:1,sqkm:1e-6,sqyd:1.196,sqmi:3.8610215854245e-7,sqnm:2.91181e-7},sqkm:{sqft:10763910,sqm:1e6,sqkm:1,sqyd:1196e3,sqmi:.38610215854245,sqnm:.291181},sqmi:{sqft:27878398.920726,sqm:2589988.110336,sqkm:2.589988110336,sqyd:27878398.920726,sqmi:1,sqnm:.75415532795574},sqnm:{sqft:36966388.603652,sqm:3434290.0120544,sqkm:3.4342900120544,sqyd:36966388.603652,sqmi:1.325986786715,sqnm:1}};var l=function(e){return!i(parseFloat(e[0]))&&!i(parseFloat(e[1]))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coordinates,n=e.type,r=t;if("LineString"===n){if((r=t.filter(l)).length<2)return[]}else if("Polygon"===n){if((r=a(t).filter(l)).length<3)return[[]];r=[r.concat([a(r)])]}return r};e.exports={validateFeatureCoordinates:u,isValidGeometry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coordinates,n=e.type;if(!n||!t||t&&o(t)&&0===t.length)return!1;var r=u({coordinates:t,type:n});return(r="Polygon"===n?a(r):r).length>0},convertUom:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return c[t]&&c[t][n]?e*c[t][n]:e},getFormattedBearingValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="";return e>=0&&e<90?t="N "+s(e)+"E":e>90&&e<=180?t="S "+s(180-e)+"E":e>180&&e<270?t="S "+s(e-180)+"W":e>=270&&e<=360&&(t="N "+s(360-e)+"W"),t},degToDms:s}},2246:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(13).isNil,s=n(410).set,c=n(2221).colorToRgbaStr,l=n(415),u={sld:new(0,n(2944).default)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.filter((function(t){return!i(e[t])})).length>0},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["color","opacity","dashArray","dashOffset","lineCap","lineJoin","weight"];return p(e,t)},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["fillColor","fillOpacity"];return p(e,t)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["label","font","fontFamily","fontSize","fontStyle","fontWeight","textAlign"];return p(e,t)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["radius"];return p(e,t)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["iconGlyph","iconShape","iconUrl"];return p(e,t)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["symbolUrl"];return p(e,t)},h={centerPoint:{type:"Point",func:function(){}},lineToArc:{type:"LineString",func:function(){}},startPoint:{type:"Point",func:function(){}},endPoint:{type:"Point",func:function(){}}},v=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n},S={},E=function(e,t){if(!e||!t)throw new Error("specify all the params: sha, style");S[e]=t},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"style";return S[e]&&S[e][t]},w=function(e){if(e)return v(JSON.stringify(e));throw new Error("hashAndStringify: specify mandatory params: style")},A=function(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return b(e)&&e.symbolUrl?l.get(t,{"Content-Type":"image/svg+xml;charset=utf-8"}).then((function(t){var n=window.URL||window.webkitURL||window,r=(new DOMParser).parseFromString(t.data,"image/svg+xml").firstElementChild;r.setAttribute("fill",e.fillColor||"#FFCC33"),r.setAttribute("fill-opacity",i(e.fillOpacity)?.2:e.fillOpacity),r.setAttribute("stroke",c(e.color||"#FFCC33",i(e.opacity)?1:e.opacity)),r.setAttribute("stroke-opacity",i(e.opacity)?1:e.opacity),r.setAttribute("stroke-width",e.weight||1),r.setAttribute("width",e.size||32),r.setAttribute("height",e.size||32),r.setAttribute("stroke-dasharray",e.dashArray||"none");var a=new Blob([A(r)],{type:"image/svg+xml;charset=utf-8"}),s=n.createObjectURL(a),l=document.createElement("canvas");l.width=e.size,l.height=e.size;var u=l.getContext("2d"),p=new Image;p.src=s;var f="",d=w(e);return p.onload=function(){try{u.drawImage(p,l.width/2-p.width/2,l.height/2-p.height/2),f=l.toDataURL("image/png"),l=null,E(d,{style:o({},e,{symbolUrlCustomized:s}),base64:f})}catch(e){return}},E(d,{style:o({},e,{symbolUrlCustomized:s}),svg:r,base64:f}),s})).catch((function(){return n(2421)})):new Promise((function(e){e(null)}))};e.exports={getGeometryFunction:function(e,t){return h[e]&&h[e][t]},SymbolsStyles:S,registerStyle:E,fetchStyle:O,hashCode:v,hashAndStringify:w,domNodeToString:A,createSvgUrl:T,registerGeometryFunctions:function(e,t,n){if(!(e&&t&&n))throw new Error("specify all the params: functionName, func, type");h[e]={func:t,type:n}},geometryFunctions:h,getStylerTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g(e)?"Marker":b(e)?"Symbol":m(e)?"Text":y(e)||"Circle Style"===e.title?"Circle":d(e)?"Polygon":f(e)?"Polyline":""},isAttrPresent:p,addOpacityToColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#FFCC33",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;return s("a",t,e)},isMarkerStyle:g,isSymbolStyle:b,isTextStyle:m,isCircleStyle:y,isStrokeStyle:f,isFillStyle:d,getSymbolsStyles:function(){return S},setSymbolsStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S=e},createStylesAsync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return b(e)&&!O(w(e))?T(e,e.symbolUrl||e.symbolUrlCustomized).then((function(t){return t?o({},e,{symbolUrlCustomized:t}):O(w(e))})).catch((function(){return o({},e,{symbolUrlCustomized:n(2421)})})):new Promise((function(t){t(b(e)?O(w(e)):e)}))}))},getStyleParser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sld";return u[e]}}},2256:function(e,t){e.exports={UPDATE_ADDITIONAL_LAYER:"ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",updateAdditionalLayer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",r=arguments.length>3?arguments[3]:void 0;return{type:"ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",id:e,owner:t,actionType:n,options:r}},REMOVE_ADDITIONAL_LAYER:"ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",removeAdditionalLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.owner;return{type:"ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",id:t,owner:n}},REMOVE_ALL_ADDITIONAL_LAYERS:"ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",removeAllAdditionalLayers:function(){return{type:"ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS"}},UPDATE_OPTIONS_BY_OWNER:"ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",updateOptionsByOwner:function(e,t){return{type:"ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",owner:e,options:t}}}},2257:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(412).FormattedHTMLMessage,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,n,r,u,p=(t=m,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function m(){return o(this,m),p.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){return this.context.intl?f.createElement(d,{id:this.props.msgId,values:this.props.msgParams}):f.createElement("span",null,this.props.msgId||"")}}])&&a(n.prototype,r),u&&a(n,u),m}(f.Component);u(m,"propTypes",{msgId:p.string.isRequired,msgParams:p.object}),u(m,"contextTypes",{intl:p.object}),e.exports=m},2258:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n(1),y=n(0),g=n(3205),b=n(2142),h=n(26),v=n(2100),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(S,e);var t,n,r,o,y=(t=S,function(){var e,n=p(t);if(u()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function S(){var e;i(this,S);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(l(e=y.call.apply(y,[this].concat(n))),"renderLoading",(function(){return e.props.maskLoading?m.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},m.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},m.createElement(v,{msgId:"loading"}),m.createElement(b,{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),d(l(e),"renderRole",(function(t){return m.Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),d(l(e),"hasRole",(function(t){return m.Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),d(l(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return n=S,(r=[{key:"render",value:function(){var e=this,t=m.createElement("div",{id:this.props.id,style:a({zIndex:3},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},m.createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),m.createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?m.createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):m.createElement("span",null)),n=this.props.draggable?m.createElement(g,{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,r=h({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?m.createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:r,className:"fade in modal "+this.props.containerClassName,role:"dialog"},n):n}}])&&s(n.prototype,r),o&&s(n,o),S}(m.Component);d(S,"propTypes",{id:y.string.isRequired,style:y.object,backgroundStyle:y.object,className:y.string,maskLoading:y.bool,containerClassName:y.string,headerClassName:y.string,bodyClassName:y.string,footerClassName:y.string,onClickOut:y.func,modal:y.bool,start:y.object,draggable:y.bool,bounds:y.oneOfType([y.string,y.object])}),d(S,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"}),e.exports=S},2259:function(e,t,n){var r=n(1);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{display:"inline-block"}:t;return r.createElement("div",{style:n,className:"mapstore-inline-loader"})}},2260:function(e,t,n){"use strict";n.r(t),n.d(t,"ADD_LAYERS_FROM_CATALOGS",(function(){return E})),n.d(t,"TEXT_SEARCH",(function(){return O})),n.d(t,"RECORD_LIST_LOADED",(function(){return w})),n.d(t,"RESET_CATALOG",(function(){return A})),n.d(t,"CATALOG_CLOSE",(function(){return T})),n.d(t,"RECORD_LIST_LOAD_ERROR",(function(){return P})),n.d(t,"CHANGE_CATALOG_FORMAT",(function(){return C})),n.d(t,"ADD_LAYER_ERROR",(function(){return x})),n.d(t,"DESCRIBE_ERROR",(function(){return _})),n.d(t,"CHANGE_SELECTED_SERVICE",(function(){return R})),n.d(t,"CHANGE_CATALOG_MODE",(function(){return I})),n.d(t,"CHANGE_METADATA_TEMPLATE",(function(){return j})),n.d(t,"CHANGE_TITLE",(function(){return L})),n.d(t,"CHANGE_TEXT",(function(){return D})),n.d(t,"CHANGE_TYPE",(function(){return M})),n.d(t,"CHANGE_AUTOLOAD",(function(){return N})),n.d(t,"CHANGE_SERVICE_FORMAT",(function(){return k})),n.d(t,"FOCUS_SERVICES_LIST",(function(){return G})),n.d(t,"CHANGE_URL",(function(){return F})),n.d(t,"ADD_CATALOG_SERVICE",(function(){return U})),n.d(t,"DELETE_CATALOG_SERVICE",(function(){return B})),n.d(t,"ADD_SERVICE",(function(){return H})),n.d(t,"DELETE_SERVICE",(function(){return z})),n.d(t,"SAVING_SERVICE",(function(){return V})),n.d(t,"CATALOG_INITED",(function(){return W})),n.d(t,"GET_METADATA_RECORD_BY_ID",(function(){return Y})),n.d(t,"SET_LOADING",(function(){return q})),n.d(t,"TOGGLE_TEMPLATE",(function(){return Z})),n.d(t,"TOGGLE_THUMBNAIL",(function(){return K})),n.d(t,"TOGGLE_ADVANCED_SETTINGS",(function(){return Q})),n.d(t,"addLayersMapViewerUrl",(function(){return X})),n.d(t,"textSearch",(function(){return J})),n.d(t,"recordsLoaded",(function(){return $})),n.d(t,"changeCatalogFormat",(function(){return ee})),n.d(t,"savingService",(function(){return te})),n.d(t,"setLoading",(function(){return ne})),n.d(t,"changeSelectedService",(function(){return re})),n.d(t,"focusServicesList",(function(){return oe})),n.d(t,"changeCatalogMode",(function(){return ae})),n.d(t,"changeTitle",(function(){return ie})),n.d(t,"changeText",(function(){return se})),n.d(t,"changeAutoload",(function(){return ce})),n.d(t,"changeServiceFormat",(function(){return le})),n.d(t,"changeType",(function(){return ue})),n.d(t,"changeUrl",(function(){return pe})),n.d(t,"addService",(function(){return fe})),n.d(t,"addCatalogService",(function(){return de})),n.d(t,"deleteCatalogService",(function(){return me})),n.d(t,"deleteService",(function(){return ye})),n.d(t,"resetCatalog",(function(){return ge})),n.d(t,"recordsLoadError",(function(){return be})),n.d(t,"catalogInited",(function(){return he})),n.d(t,"initCatalog",(function(){return ve})),n.d(t,"catalogClose",(function(){return Se})),n.d(t,"getRecords",(function(){return Ee})),n.d(t,"describeError",(function(){return Oe})),n.d(t,"addLayerAndDescribe",(function(){return we})),n.d(t,"addLayer",(function(){return Ae})),n.d(t,"addLayerError",(function(){return Te})),n.d(t,"getMetadataRecordById",(function(){return Pe})),n.d(t,"changeMetadataTemplate",(function(){return Ce})),n.d(t,"toggleAdvancedSettings",(function(){return xe})),n.d(t,"toggleTemplate",(function(){return _e})),n.d(t,"toggleThumbnail",(function(){return Re})),n.d(t,"recordsNotFound",(function(){return Ie}));var r=n(2355),o=n.n(r),a=n(768),i=n.n(a),s=n(2356),c=n.n(s),l=n(2357),u=n.n(l),p=n(269),f=n(137),d=n(47),m=n(13),y=n(2190),g=n(408),b=n(161);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={csw:o.a,wms:i.a,wmts:c.a,backgrounds:u.a},E="CATALOG:ADD_LAYERS_FROM_CATALOGS",O="CATALOG:TEXT_SEARCH",w="CATALOG:RECORD_LIST_LOADED",A="CATALOG:RESET_CATALOG",T="CATALOG:CATALOG_CLOSE",P="CATALOG:RECORD_LIST_LOAD_ERROR",C="CATALOG:CHANGE_CATALOG_FORMAT",x="CATALOG:ADD_LAYER_ERROR",_="CATALOG:DESCRIBE_ERROR",R="CATALOG:CHANGE_SELECTED_SERVICE",I="CATALOG:CHANGE_CATALOG_MODE",j="CATALOG:CHANGE_METADATA_TEMPLATE",L="CATALOG:CHANGE_TITLE",D="CATALOG:CHANGE_TEXT",M="CATALOG:CHANGE_TYPE",N="CATALOG:CHANGE_AUTOLOAD",k="CATALOG:CHANGE_SERVICE_FORMAT",G="CATALOG:FOCUS_SERVICES_LIST",F="CATALOG:CHANGE_URL",U="CATALOG:ADD_CATALOG_SERVICE",B="CATALOG:DELETE_CATALOG_SERVICE",H="CATALOG:ADD_SERVICE",z="CATALOG:DELETE_SERVICE",V="CATALOG:SAVING_SERVICE",W="CATALOG:INIT",Y="CATALOG:GET_METADATA_RECORD_BY_ID",q="CATALOG:SET_LOADING",Z="CATALOG:TOGGLE_TEMPLATE",K="CATALOG:TOGGLE_THUMBNAIL",Q="CATALOG:TOGGLE_ADVANCED_SETTINGS";function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:E,layers:e,sources:t}}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,n=e.url,r=e.startPosition,o=e.maxRecords,a=e.text,i=e.options,s=void 0===i?{}:i;return{type:O,format:t,url:n,startPosition:r,maxRecords:o,text:a,options:s}}function $(e,t){return{type:w,searchOptions:e,result:t}}function ee(e){return{type:C,format:e}}function te(e){return{type:V,status:e}}function ne(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:q,loading:e}}function re(e){return{type:R,service:e}}function oe(e){return{type:G,status:e}}function ae(e,t){return{type:I,mode:e,isNew:t}}function ie(e){return{type:L,title:e}}function se(e){return{type:D,text:e}}function ce(e){return{type:N,autoload:e}}function le(e){return{type:k,format:e}}function ue(e){return{type:M,newType:e}}function pe(e){return{type:F,url:e}}function fe(){return{type:H}}function de(e){return{type:U,service:e}}function me(e){return{type:B,service:e}}function ye(){return{type:z}}function ge(){return{type:A}}function be(e){return{type:P,error:e}}function he(){return{type:W}}function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;return function(t){Object.keys(e).forEach((function(t){e[t].reset()})),t(he())}}function Se(){return{type:T}}function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return function(i){i(ne(!0)),S[e].getRecords(t,n,r,o,a).then((function(e){e.error?i(be(e)):i($({url:t,startPosition:n,maxRecords:r,filter:o},e))})).catch((function(e){i(be(e))}))}}function Oe(e,t){return{type:_,layer:e,error:t}}function we(e){return function(t,n){var r=n(),o=Object(g.layersSelector)(r),a=f.getLayerId(e,o||[]);return t(Object(p.addLayer)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{id:a}))),"wms"===e.type?S.wms.describeLayers(e.url,e.name).then((function(n){if(n){var o=Object(m.find)(n,(function(t){return t.name===e.name}));if(o&&"WFS"===o.owsType){var i=d.filterUrlParams(d.cleanDuplicatedQuestionMarks(o.owsURL),Object(y.authkeyParamNameSelector)(r));t(Object(p.changeLayerProperties)(a,{search:{url:i,type:"wfs"}}))}}})).catch((function(n){return t(Oe(e,n))})):null}}var Ae=we;function Te(e){return{type:x,error:e}}function Pe(){return{type:Y}}var Ce=function(e){return{type:j,metadataTemplate:e}},xe=function(){return{type:Q}},_e=function(){return{type:Z}},Re=function(){return{type:K}};function Ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(b.error)({title:"catalog.notification.errorTitle",message:"catalog.notification.errorSearchingRecords",values:{records:e}})}},2261:function(e,t,n){var r=n(195).createSelector,o=function(e){return e&&e.playback&&e.playback.settings},a=function(e){return e&&e.playback&&e.playback.frames},i=function(e){return e&&e.playback&&e.playback.currentFrame},s=r(a,i,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return{hasNext:e[t+1],hasPrevious:e[t-1]}}));e.exports={playbackSettingsSelector:o,frameDurationSelector:function(e){return(o(e)||{}).frameDuration||5},statusSelector:function(e){return e&&e.playback&&e.playback.status},loadingSelector:function(e){return e&&e.playback&&e.playback.framesLoading},lastFrameSelector:function(e){var t=a(e)||[];return t[t.length-1]},framesSelector:a,currentFrameSelector:i,currentFrameValueSelector:function(e){return(a(e)||[])[i(e)]},playbackRangeSelector:function(e){return function(e){return e&&e.playback&&e.playback.playbackRange}(e)},playbackMetadataSelector:function(e){return e&&e.playback&&e.playback.metadata},hasPrevNextAnimationSteps:s}},2262:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(33),d=n(0),m=n(757),y=m.Popover,g=m.Glyphicon,b=n(2707),h=n(2111),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,n,r,u,d=(t=m,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function m(){return o(this,m),d.apply(this,arguments)}return n=m,(r=[{key:"renderPopover",value:function(){return p.createElement(y,{id:this.props.id,placement:this.props.placement,positionLeft:this.props.left,positionTop:this.props.top,title:this.props.title},this.props.text)}},{key:"renderContent",value:function(){var e=this;return p.createElement(g,{ref:function(t){e.target=t},className:"text-".concat(this.props.bsStyle),glyph:this.props.glyph})}},{key:"render",value:function(){var e=this,t=!0===this.props.trigger?["hover","focus"]:this.props.trigger;return p.createElement("span",{className:"mapstore-info-popover"},this.props.trigger?p.createElement(h,{trigger:t,placement:this.props.placement,overlay:this.renderPopover()},this.renderContent()):[this.renderContent(),p.createElement(b,{placement:this.props.placement,show:!0,target:function(){return f.findDOMNode(e.target)}},this.renderPopover())])}}])&&a(n.prototype,r),u&&a(n,u),m}(p.Component);u(v,"propTypes",{id:d.string,title:d.string,text:d.string,glyph:d.string,bsStyle:d.string,placement:d.string,left:d.number,top:d.number,trigger:d.oneOfType([d.array,d.bool])}),u(v,"defaultProps",{id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info",trigger:["hover","focus"]}),e.exports=v},2283:function(e,t,n){"use strict";var r=n(2128),o=n.n(r),a=n(2615),i=n.n(a),s=n(2197),c=n.n(s),l=n(34),u=n.n(l),p=n(2336),f=n.n(p),d=n(2292),m=n.n(d),y=n(777),g=n.n(y),b=n(2291),h=n.n(b),v=n(48),S=n.n(v),E=n(2221),O=n(80),w=n(2616),A=n.n(w),T=n(2284),P=n.n(T),C=n(2294),x=n(4282),_=n(2632),R=n(2338),I=n(3081),j=n.n(I),L=A.a.markers.extra,D=L.icons[0],M=L.icons[1],N=A.a.getGlyphs("fontawesome"),k=function(e){var t=e.highlight,n=e.rotation,r=void 0===n?0:n;return t?[new C.default({image:new x.default({anchor:[.5,2*(L.size[1]+18)],rotation:r,anchorXUnits:"fraction",anchorYUnits:"pixels",src:j.a,scale:.5})})]:[]},G={extra:{getIcon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o()(e.style&&e.style.rotation)?0:e.style.rotation;return[new C.default({image:new x.default({rotation:t,anchor:[12,12],anchorXUnits:"pixels",anchorYUnits:"pixels",src:M})}),new C.default({image:new x.default({rotation:t,src:D,anchor:[L.size[0]/2,L.size[1]],anchorXUnits:"pixels",anchorYUnits:"pixels",size:L.size,offset:[L.colors.indexOf(e.style.iconColor||"blue")*L.size[0],L.shapes.indexOf(e.style.iconShape||"circle")*L.size[1]]}),text:new _.default({rotation:t,text:N[e.style.iconGlyph],font:"14px FontAwesome",offsetY:2*-L.size[1]/3,fill:new R.default({color:"#FFFFFF"})})})].concat(k(e.style))}},standard:{getIcon:function(e){var t=e.style,n=e.iconAnchor,r=o()(t&&t.rotation)?0:t.rotation,a=t.iconAnchor||n,i=[new C.default({image:new x.default({anchor:a||[.5,1],anchorXUnits:t.anchorXUnits||(a||0===a?"pixels":"fraction"),anchorYUnits:t.anchorYUnits||(a||0===a?"pixels":"fraction"),size:u()(t.size)?t.size:P()(t.size)?[t.size,t.size]:void 0,rotation:r,anchorOrigin:t.anchorOrigin||"top-left",src:t.iconUrl||t.symbolUrlCustomized||t.symbolUrl})})];return t.shadowUrl&&(i=[new C.default({image:new x.default({anchor:[12,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:t.shadowUrl})}),i[0]]),i.concat(k(t))}},html:{getIcon:function(){return null}}},F=n(2246),U=n(2205),B=n(2450),H=n(2198),z=n(2249),V=n(417),W=n(71),Y=n.n(W),q=n(3082),Z=n.n(q),K=n(829),Q=n.n(K),X=n(3103),J=n.n(X),$=n(26),ee=n.n($),te=n(410);function ne(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=[0,153,255,1],ce=new U.default({radius:5,fill:null,stroke:new B.default({color:"red",width:1})}),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"green":r,a=e.applyToPolygon,i=void 0!==a&&a;return new C.default({image:new U.default({radius:n,fill:new R.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!i&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new H.a(m()(r)):null}})},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"red":r,a=e.applyToPolygon,i=void 0!==a&&a;return new C.default({image:new U.default({radius:n,fill:new R.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!i&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new H.a(r.length>3?r[r.length-("Polygon"===n?2:1)]:g()(r))}})},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[le(e),ue(t)]},fe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new C.default({text:new _.default({offsetY:-4*Math.sqrt(e.fontSize),textAlign:e.textAlign||"center",text:t||"",font:e.font,fill:new R.default({color:Object(E.colorToRgbaStr)(e.stroke||e.color||"#000000",e.opacity||1)}),stroke:n?new B.default({color:[255,255,255,1],width:2}):null}),image:n?new U.default({radius:5,fill:null,stroke:new B.default({color:Object(E.colorToRgbaStr)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null})},de={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,radius:10},me={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},ye={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},ge={Marker:{iconColor:"orange",iconShape:"circle",iconGlyph:"comment"},Text:{fontStyle:"normal",fontSize:"14",fontSizeUom:"px",fontFamily:"Arial",fontWeight:"normal",font:"14px Arial",textAlign:"center",color:"#000000",opacity:1},Circle:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2},Point:de,MultiPoint:de,LineString:me,MultiLineString:me,Polygon:ye,MultiPolygon:ye},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"blue",width:3,lineDash:[6]};return{stroke:new B.default(e.style?e.style.stroke||{color:e.style.color||t.color,lineDash:c()(e.style.dashArray)&&i()(e.style.dashArray).split(" ")||t.lineDash,width:e.style.weight||t.width,lineCap:e.style.lineCap||"round",lineJoin:e.style.lineJoin||"round",lineDashOffset:e.style.dashOffset||0}:ae({},t))}},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"rgba(0, 0, 255, 0.1)"};return{fill:new R.default(e.style?e.style.fill||{color:Object(E.colorToRgbaStr)(e.style.fillColor,e.style.fillOpacity)||t.color}:ae({},t))}},ve={Point:function(){return[new C.default({image:ce})]},LineString:function(e){return[new C.default(ee()({},be(e,{color:"blue",width:3})))]},MultiLineString:function(e){return[new C.default(ee()({},be(e,{color:"blue",width:3})))]},MultiPoint:function(){return[new C.default({image:ce})]},MultiPolygon:function(e){return[new C.default(ee()({},be(e),he(e)))]},Polygon:function(e){return[new C.default(ee()({},be(e),he(e)))]},GeometryCollection:function(e){return[new C.default(ee()({},be(e),he(e),{image:new U.default({radius:10,fill:null,stroke:new B.default({color:"magenta"})})}))]},Circle:function(){return[new C.default({stroke:new B.default({color:"red",width:2}),fill:new R.default({color:"rgba(255,0,0,0.2)"})})]},marker:function(e){return[new C.default({image:new x.default({anchor:[14,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:J.a})}),new C.default({image:new x.default({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:Q.a}),text:new _.default({text:e.label,scale:1.25,offsetY:8,fill:new R.default({color:"#000000"}),stroke:new B.default({color:"#FFFFFF",width:2})})})]}},Se=function(e,t){var n=e.getGeometry().getType();return ve[n](t&&t.style&&t.style[n]&&{style:ae({},t.style[n])}||t||{})};function Ee(e){if(e.style.iconUrl)return G.standard.getIcon(e);var t=e.style.iconLibrary||"extra";return G[t]?G[t].getIcon(e):null}var Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{style:ge},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=t.style[e]||t.style;if("MultiLineString"===e||"LineString"===e){var s=[new C.default({stroke:t.style.useSelectedStyle?new B.default({color:[255,255,255,1],width:i.weight+2}):null}),new C.default(i?{stroke:new B.default(i&&i.stroke?i.stroke:{color:Object(E.colorToRgbaStr)(t.style&&i.color||"#0000FF",i.opacity||1),lineDash:t.style.highlight?[10]:[0],width:i.weight||1}),image:n?ce:null}:{stroke:new B.default(ge[e]&&ge[e].stroke?ge[e].stroke:{color:Object(E.colorToRgbaStr)(t.style&&ge[e].color||"#0000FF",ge[e].opacity||1),lineDash:t.style.highlight?[10]:[0],width:ge[e].weight||1})})],c=t.style.useSelectedStyle?pe({radius:i.weight,applyToPolygon:!0},{radius:i.weight,applyToPolygon:!0}):[];return[].concat(ne(c),s)}if(("MultiPoint"===e||"Point"===e)&&(i.iconUrl||i.iconGlyph))return n?new C.default({image:ce}):Ee({style:ae({},i,{highlight:t.style.highlight||t.style.useSelectedStyle})});if("Circle"===e&&a){var l=[new C.default({stroke:t.style.useSelectedStyle?new B.default({color:[255,255,255,1],width:i.weight+4}):null}),new C.default({stroke:new B.default(i&&i.stroke?i.stroke:{color:t.style.useSelectedStyle?se:Object(E.colorToRgbaStr)(t.style&&i.color||"#0000FF",i.opacity||1),lineDash:t.style.highlight?[10]:[0],width:i.weight||1}),fill:new R.default(i.fill?i.fill:{color:Object(E.colorToRgbaStr)(t.style&&i.fillColor||"#0000FF",i.fillOpacity||.2)})}),new C.default({image:t.style.useSelectedStyle?new U.default({radius:3,fill:new R.default(i.fill?i.fill:{color:se})}):null,geometry:function(e){var t=e.getGeometry();if("Circle"===t.getType()){var n=t.getCenter();return new H.a(n)}return null}})];return l}if("Text"===e&&i.font)return[fe(i,r[0],t.style.useSelectedStyle||t.style.highlight)];if("MultiPolygon"===e||"Polygon"===e){var u=[new C.default({stroke:t.style.useSelectedStyle?new B.default({color:[255,255,255,1],width:i.weight+2}):null}),new C.default({stroke:new B.default(i.stroke?i.stroke:{color:t.style.useSelectedStyle?se:Object(E.colorToRgbaStr)(t.style&&i.color||"#0000FF",i.opacity||1),lineDash:t.style.highlight?[10]:[0],width:i.weight||1}),image:n?ce:null,fill:new R.default(i.fill?i.fill:{color:Object(E.colorToRgbaStr)(t.style&&i.fillColor||"#0000FF",i.fillOpacity||1)})})],p=t.style.useSelectedStyle?pe({radius:i.weight,applyToPolygon:!0},{radius:i.weight,applyToPolygon:!0}):[];return[].concat(u,ne(p))}return o};function we(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=e.nativeStyle,a=r,i=0,s=e.style&&e.style.type||(e.features&&e.features[0]&&e.features[0].geometry?e.features[0].geometry.type:void 0);if("FeatureCollection"===s||e.features&&e.features[0]&&"FeatureCollection"===e.features[0].type)return function(r){var o=this||r;t=o.getGeometry()&&o.getGeometry().getType();var s=o&&o.getProperties();s&&s.isCircle&&(t="Circle",i=s.radius),s&&s.isText&&(t="Text",a=[s.valueText]);var c=Object(te.set)("style.useSelectedStyle",s.canEdit,e);return Oe(t,c,n,a,null,i)};if(e&&e.properties&&e.properties.isText)return t="Text",a=[e.properties.valueText],Oe(t,e,n,a,null,i);if(e&&e.properties&&e.properties.isCircle)return t="Circle",i=e.properties.radius,Oe(t,e,n,a,null,i);if(!o&&e.style){if(o={stroke:new B.default(e.style.stroke?e.style.stroke:{color:Object(E.colorToRgbaStr)(e.style&&e.style.color||"#0000FF",e.style.opacity||1),lineDash:e.style.highlight?[10]:[0],width:e.style.weight||1}),fill:new R.default(e.style.fill?e.style.fill:{color:Object(E.colorToRgbaStr)(e.style&&e.style.fillColor||"#0000FF",e.style.fillOpacity||1)})},"Point"===s&&(o={image:new U.default(ee()({},o,{radius:e.style.radius||5}))}),e.style.iconUrl||e.style.iconGlyph){var c=Ee(e);return o=function(n){var r=this||n;switch(t=r.getGeometry().getType()){case"Point":case"MultiPoint":return c;default:return Se(r,e)}}}return o=new C.default(o),"GeometryCollection"===s?o=function(o){var a,i=this||o;t=i.getGeometry().getType();var s=i.get("textGeometriesIndexes")||[],c=i.get("circles")||[],l=i.get("textValues");return"GeometryCollection"===i.getGeometry().getType()?i.getGeometry().getGeometries().reduce((function(o,i,p){if(("Point"===(t=i.getType())||"MultiPoint"===t)&&s.length&&-1!==s.indexOf(p)){var f=Oe("Text",e,n,[l[s.indexOf(p)]]);return f.setGeometry(i),o.concat([f])}if("Polygon"===t&&c.length&&-1!==c.indexOf(p)){var d=Oe("Circle",e,n,[]);return d.setGeometry(i),o.concat([d])}if("Point"===t||"MultiPoint"===t)return a=Ee({style:ae({},e.style[t],{highlight:e.style.highlight})}),o.concat(a.map((function(e){return e.setGeometry(i),e})));var m=Oe(t,e,n,r);return u()(m)?m.forEach((function(e){return e.setGeometry(i)})):m.setGeometry(i),o.concat([m])}),[]):"Point"===t||"MultiPoint"===t?(a=Ee({style:ae({},e.style[t],{highlight:e.style.highlight})}),n?new C.default({image:ce,geometry:i.getGeometry()}):a.map((function(e){return e.setGeometry(i.getGeometry()),e}))):Oe(t,e,n,r)}:("Circle"===s&&(i=e.features&&e.features.length&&e.features[0].properties&&e.features[0].properties.radius||10),Oe(s,e,n,r,o,i))}return e.styleName&&!e.overrideOLStyle?function(n){if("marker"===e.styleName)switch(t=n.getGeometry().getType()){case"Point":case"MultiPoint":return ve.marker(e)}return ve[e.styleName](e)}:o||Se}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return Re})),n.d(t,"e",(function(){return Ue})),n.d(t,"d",(function(){return Be})),n.d(t,"c",(function(){return He})),n.d(t,"f",(function(){return ze})),n.d(t,"a",(function(){return Ve}));var Ce=new Z.a,xe={white:[255,255,255,1],blue:[0,153,255,1],width:3},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(F.isCircleStyle)(e)?new U.default({stroke:t,fill:n,radius:e.radius||5}):null},Re=function(e){if(Object(F.isMarkerStyle)(e)){if(e.iconUrl)return G.standard.getIcon({style:e});var t=e.iconLibrary||"extra";if(G[t])return G[t].getIcon({style:e})}return null},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(F.isStrokeStyle)(e)?new B.default(e.stroke&&S()(e.stroke)?e.stroke:{color:e.highlight?xe.blue:Object(E.colorToRgbaStr)(e.color||e.stroke||"#0000FF",o()(e.opacity)?1:e.opacity),width:o()(e.weight)?1:e.weight,lineDash:c()(e.dashArray)&&i()(e.dashArray).split(" ")||u()(e.dashArray)&&e.dashArray||[0],lineCap:e.lineCap||"round",lineJoin:e.lineJoin||"round",lineDashOffset:e.dashOffset||0}):null},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(F.isFillStyle)(e)?new R.default(e.fill&&S()(e.fill)?e.fill:{color:Object(E.colorToRgbaStr)(e.fillColor||"#0000FF",o()(e.fillOpacity)?1:e.fillOpacity)}):null},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return Object(F.isTextStyle)(e)?new _.default({fill:n,offsetY:e.offsetY||-4*Math.sqrt(e.fontSize),textAlign:e.textAlign||"center",text:e.label||r&&r.properties&&r.properties.valueText||"New",font:e.font||"Arial",stroke:e.highlight?new B.default({color:[255,255,255,1],width:2}):t,image:e.highlight?new U.default({radius:5,fill:null,stroke:new B.default({color:Object(E.colorToRgbaStr)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null}):null},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"green":r,a=e.applyToPolygon,i=void 0!==a&&a;return new C.default({image:new U.default({radius:n,fill:new R.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!i&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new H.a(m()(r)):null}})},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"red":r,a=e.applyToPolygon,i=void 0!==a&&a;return new C.default({image:new U.default({radius:n,fill:new R.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!i&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new H.a(r.length>3?r[r.length-("Polygon"===n?2:1)]:g()(r))}})},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{radius:3,fillColor:"green",applyToPolygon:!0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{radius:3,fillColor:"red",applyToPolygon:!0},r=[];return h()(e,(function(e){return"startPoint"===e.geometry&&e.filtering}))||r.push(De(Te({},t))),h()(e,(function(e){return"endPoint"===e.geometry&&e.filtering}))||r.push(Me(Te({},n))),r};Object(F.registerGeometryFunctions)("centerPoint",(function(e){var t=e.getGeometry(),n=t.getExtent(),r=t.getCenter&&t.getCenter()||[n[2]-n[0],n[3]-n[1]];return new H.a(r)}),"Point"),Object(F.registerGeometryFunctions)("lineToArc",(function(e){var t=e.getGeometry().getType();if("LineString"===t||"MultiPoint"===t){var n=e.getGeometry().getCoordinates();return n=Object(O.transformLineToArcs)(n.map((function(e){var t=Object(O.reproject)(e,"EPSG:3857","EPSG:4326");return[t.x,t.y]}))),new z.a(n.map((function(e){var t=Object(O.reproject)(e,"EPSG:4326","EPSG:3857");return[t.x,t.y]})))}return e.getGeometry()}),"LineString"),Object(F.registerGeometryFunctions)("startPoint",(function(e){var t=e.getGeometry(),n="Polygon"===t.getType()?t.getCoordinates()[0]:t.getCoordinates();return n.length>1?new H.a(m()(n)):null}),"Point"),Object(F.registerGeometryFunctions)("endPoint",(function(e){var t=e.getGeometry(),n=t.getType(),r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new H.a(r.length>3?r[r.length-("Polygon"===n?2:1)]:g()(r))}),"Point");var ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.geometry?function(t){var n=e.geometry||"centerPoint";return F.geometryFunctions[n].func(t)}:function(e){return e.getGeometry()}},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!o()(e.filtering)||e.filtering},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Ge(t,e);if(r){var o=Ie(t),a=je(t),i=_e(t,o,a);if(Object(F.isMarkerStyle)(t))return Re(t).map((function(e){return e.setGeometry(ke(t)),e}));if(Object(F.isSymbolStyle)(t))return G.standard.getIcon({style:t}).map((function(e){return e.setGeometry(ke(t)),e}));var s=Le(t,o,a,e),c=t.zIndex,l=new C.default({geometry:ke(t),image:i,text:s,stroke:!s&&!i&&o||null,fill:!s&&!i&&a||null,zIndex:c});return[l].concat(e&&e.properties&&e.properties.canEdit&&!e.properties.isCircle?Ne(n):[])}return new C.default({})},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=e.style;if(t){var n=u()(t)?t:f()(t);return n.reduce((function(t,r){return t.concat(Fe(e,r,n))}),[])}return[]},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.style&&e.style.url)return Y.a.get(e.style.url).then((function(t){return Object(F.getStyleParser)(e.style.format).readStyle(t.data).then((function(e){return Ce.writeStyle(e)}))}));var r=we(e,t,n);return e.asPromise?new V.Promise((function(e){e(r)})):r},He=Ee,ze=pe,Ve=ge},2299:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n(1),g=n(0),b=n(88).connect,h=n(200).compose,v=n(800),S=v.changeHelpText,E=v.changeHelpwinVisibility,O=b((function(e){return{isVisible:e.controls&&e.controls.help&&e.controls.help.enabled}}),{changeHelpText:S,changeHelpwinVisibility:E})(n(2679)),w=n(2100),A=n(757),T=A.Button,P=A.Tooltip,C=A.Panel,x=A.Collapse,_=A.Glyphicon,R=n(2111),I=n(267),j=I.setControlProperty,L=I.toggleControl,D=n(13).partial,M=n(26),N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(v,e);var t,n,r,a,g=(t=v,function(){var e,n=f(t);if(p()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function v(){var e;s(this,v);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(u(e=g.call.apply(g,[this].concat(n))),"getToolConfig",(function(t){return t.tool?{}:e.props.toolCfg})),m(u(e),"getTool",(function(t){if(t.tool)return!0===t.tool?t.plugin:t.tool;var n=function(){return{}},r={};return t.exclusive?(n=function(n){return{active:n.controls&&n.controls[e.props.stateSelector]&&n.controls[e.props.stateSelector].active===t.name}},r[e.props.eventSelector]=j.bind(null,e.props.stateSelector,"active",t.name,!0)):t.toggle?(n=function(n){return{bsStyle:n.controls[t.toggleControl||t.name]&&n.controls[t.toggleControl||t.name][t.toggleProperty||"enabled"]?e.props.activeStyle:e.props.toolStyle,active:n.controls[t.toggleControl||t.name]&&n.controls[t.toggleControl||t.name][t.toggleProperty||"enabled"]||!1}},r[e.props.eventSelector]=L.bind(null,t.toggleControl||t.name,t.toggleProperty||null)):t.action&&(r[e.props.eventSelector]=D(t.action,e.context),n=t.selector||n),b(n,r,(function(t,n,r){return e.mergeHandlers(i({},r,{},t),n)}))(e.props.tool)})),m(u(e),"renderTools",(function(){return e.props.tools.map((function(t,n){if(t.element)return t.element;var r=t.help?y.createElement(O,{className:"mapstore-helpbadge",helpText:t.help}):y.createElement("span",null),a=t.tooltip?y.createElement(w,{msgId:t.tooltip}):null,i=e.getTool(t),s=e.getToolConfig(t);return e.addTooltip(y.createElement(i,o({},s,{pluginCfg:t.cfg,tooltip:a,btnSize:e.props.toolSize,bsStyle:e.props.toolStyle,help:r,key:t.name||"tool"+n,mapType:e.props.mapType},t.cfg,{items:t.items||[]}),t.cfg&&t.cfg.glyph?y.createElement(_,{glyph:t.cfg.glyph}):t.icon,r," ",t.text),t)}))})),m(u(e),"renderPanels",(function(){return e.props.panels.filter((function(e){return!e.panel.loadPlugin})).map((function(t){var n=t.panel,r=y.createElement(n,o({key:t.name,mapType:e.props.mapType},t.cfg,t.props||{},{items:t.items||[]})),a=t.title?y.createElement(w,{msgId:t.title}):null;return t.wrap?y.createElement(x,{key:"mapToolBar-item-collapse-"+t.name,in:e.props.activePanel===t.name},y.createElement(C,{header:a,style:e.props.panelStyle,className:e.props.panelClassName},r)):r}))})),m(u(e),"mergeHandlers",(function(e,t){return Object.keys(t).reduce((function(n,r){return M(n,m({},r,e[r]?h(e[r],t[r]):t[r]))}),e)})),m(u(e),"addTooltip",(function(t,n){if(n.tooltip){var r=y.createElement(P,{id:e.props.id+"-"+n.name+"-tooltip"},y.createElement(w,{msgId:n.tooltip}));return y.createElement(R,{key:e.props.id+"-"+n.name+"-overlay",rootClose:!0,placement:"left",overlay:r},t)}return t})),e}return n=v,(r=[{key:"render",value:function(){var e=this.props.container;return y.createElement("span",{id:this.props.id},y.createElement(e,{id:this.props.id+"-container",style:this.props.style,className:this.props.className},this.renderTools()),this.renderPanels())}}])&&c(n.prototype,r),a&&c(n,a),v}(y.Component);m(N,"propTypes",{id:g.string.isRequired,container:g.func,tool:g.func,className:g.string,style:g.object,tools:g.array,panels:g.array,mapType:g.string,toolStyle:g.string,activeStyle:g.string,toolSize:g.string,stateSelector:g.string.isRequired,eventSelector:g.string,panelStyle:g.object,panelClassName:g.string,activePanel:g.string,toolCfg:g.object}),m(N,"contextTypes",{messages:g.object,router:g.object}),m(N,"defaultProps",{container:C,className:"tools-container",style:{},toolStyle:"default",activeStyle:"primary",tools:[],panels:[],tool:T,mapType:"leaflet",eventSelector:"onClick",panelStyle:{},panelClassName:"tools-container-panel",toolSize:null,toolCfg:{}}),e.exports=N},2300:function(e,t,n){"use strict";n.r(t),n.d(t,"ADD_BACKGROUND",(function(){return r})),n.d(t,"REMOVE_BACKGROUND",(function(){return o})),n.d(t,"SET_CURRENT_BACKGROUND_LAYER",(function(){return a})),n.d(t,"BACKGROUND_ADDED",(function(){return i})),n.d(t,"BACKGROUND_EDITED",(function(){return s})),n.d(t,"ADD_BACKGROUND_PROPERTIES",(function(){return c})),n.d(t,"SET_BACKGROUND_MODAL_PARAMS",(function(){return l})),n.d(t,"UPDATE_BACKGROUND_THUMBNAIL",(function(){return u})),n.d(t,"BACKGROUNDS_CLEAR",(function(){return p})),n.d(t,"CREATE_BACKGROUNDS_LIST",(function(){return f})),n.d(t,"CLEAR_MODAL_PARAMETERS",(function(){return d})),n.d(t,"CONFIRM_DELETE_BACKGROUND_MODAL",(function(){return m})),n.d(t,"ALLOW_BACKGROUNDS_DELETION",(function(){return y})),n.d(t,"createBackgroundsList",(function(){return g})),n.d(t,"addBackground",(function(){return b})),n.d(t,"addBackgroundProperties",(function(){return h})),n.d(t,"setBackgroundModalParams",(function(){return v})),n.d(t,"backgroundAdded",(function(){return S})),n.d(t,"backgroundEdited",(function(){return E})),n.d(t,"setCurrentBackgroundLayer",(function(){return O})),n.d(t,"allowBackgroundsDeletion",(function(){return w})),n.d(t,"updateThumbnail",(function(){return A})),n.d(t,"removeBackground",(function(){return T})),n.d(t,"clearBackgrounds",(function(){return P})),n.d(t,"clearModalParameters",(function(){return C})),n.d(t,"confirmDeleteBackgroundModal",(function(){return x}));var r="ADD_BACKGROUND",o="REMOVE_BACKGROUND",a="SET_CURRENT_BACKGROUND_LAYER",i="BACKGROUND_ADDED",s="BACKGROUND_EDITED",c="ADD_BACKGROUND_PROPERTIES",l="SET_BACKGROUND_MODAL_PARAMS",u="UPDATE_BACKGROUND_THUMBNAIL",p="BACKGROUNDS_CLEAR",f="CREATE_BACKGROUNDS_LIST",d="CLEAR_MODAL_PARAMETERS",m="CONFIRM_DELETE_BACKGROUND_MODAL",y="ALLOW_BACKGROUNDS_DELETION";function g(e){return{type:f,backgrounds:e}}function b(e){return{type:r,source:e}}function h(e){return{type:c,modalParams:e}}function v(e){return{type:l,modalParams:e}}function S(e){return{type:i,layerId:e}}function E(e){return{type:s,layerId:e}}function O(e){return{type:a,layerId:e}}function w(e){return{type:y,allow:e}}function A(e,t){return{type:u,thumbnailData:e,id:t}}function T(e){return{type:o,backgroundId:e}}function P(){return{type:p}}function C(){return{type:d}}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:m,show:e,layerTitle:t,layerId:n}}},2301:function(e,t,n){"use strict";n.r(t),n.d(t,"metadataSourceSelector",(function(){return s})),n.d(t,"modalParamsSelector",(function(){return c})),n.d(t,"backgroundListSelector",(function(){return l})),n.d(t,"isDeletedIdSelector",(function(){return u})),n.d(t,"removedBackgroundsThumbIdsSelector",(function(){return p})),n.d(t,"confirmDeleteBackgroundModalSelector",(function(){return f})),n.d(t,"backgroundControlsSelector",(function(){return d})),n.d(t,"allowBackgroundsDeletionSelector",(function(){return m})),n.d(t,"backgroundLayersSelector",(function(){return y}));var r=n(195),o=n(408),a=n(2141),i=n(137),s=function(e){return e.backgroundSelector&&e.backgroundSelector.source},c=function(e){return e.backgroundSelector&&e.backgroundSelector.modalParams},l=function(e){return e.backgroundSelector&&e.backgroundSelector.backgrounds||[]},u=function(e){return e.backgroundSelector&&e.backgroundSelector.lastRemovedId},p=function(e){return e.backgroundSelector&&e.backgroundSelector.removedBackgroundsThumbIds},f=function(e){return e.backgroundSelector&&e.backgroundSelector.confirmDeleteBackgroundModal},d=function(e){return e.controls&&e.controls.backgroundSelector||{}},m=function(e){return e.backgroundSelector&&e.backgroundSelector.allowDeletion},y=Object(r.createSelector)(o.layersSelector,a.mapTypeSelector,(function(e,t){return e.filter((function(e){return e&&"background"===e.group})).map((function(e){return Object(i.invalidateUnsupportedLayer)(e,t)}))||[]}))},2325:function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o="MEASUREMENT:INIT";function a(e){return function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({type:"CHANGE_MEASUREMENT_TOOL"},e)}e.exports={CHANGE_MEASUREMENT_TOOL:"CHANGE_MEASUREMENT_TOOL",CHANGE_MEASUREMENT_STATE:"CHANGE_MEASUREMENT_STATE",changeUom:function(e,t,n){return{type:"MEASUREMENT:CHANGE_UOM",uom:e,value:t,previousUom:n}},CHANGE_UOM:"MEASUREMENT:CHANGE_UOM",changeGeometry:function(e){return{type:"MEASUREMENT:CHANGED_GEOMETRY",feature:e}},CHANGED_GEOMETRY:"MEASUREMENT:CHANGED_GEOMETRY",changeFormatMeasurement:function(e){return{type:"MEASUREMENT:CHANGE_FORMAT",format:e}},CHANGE_FORMAT:"MEASUREMENT:CHANGE_FORMAT",updateMeasures:function(e){return{type:"MEASUREMENT:UPDATE_MEASURES",measures:e}},UPDATE_MEASURES:"MEASUREMENT:UPDATE_MEASURES",changeCoordinates:function(e){return{type:"MEASUREMENT:CHANGE_COORDINATES",coordinates:e}},CHANGE_COORDINATES:"MEASUREMENT:CHANGE_COORDINATES",resetGeometry:function(){return{type:"MEASUREMENT:RESET_GEOMETRY"}},RESET_GEOMETRY:"MEASUREMENT:RESET_GEOMETRY",addAnnotation:function(e,t,n,r){return{type:"MEASUREMENT:ADD_MEASURE_AS_ANNOTATION",feature:e,value:t,uom:n,measureTool:r}},ADD_MEASURE_AS_ANNOTATION:"MEASUREMENT:ADD_MEASURE_AS_ANNOTATION",init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o,defaultOptions:e}},INIT:o,changeMeasurement:function(e){return function(t){t(a(e))}},toggleMeasurement:a,changeMeasurementState:function(e){return{type:"CHANGE_MEASUREMENT_STATE",pointMeasureEnabled:e.pointMeasureEnabled,lineMeasureEnabled:e.lineMeasureEnabled,areaMeasureEnabled:e.areaMeasureEnabled,bearingMeasureEnabled:e.bearingMeasureEnabled,geomType:e.geomType,point:e.point,len:e.len,area:e.area,bearing:e.bearing,lenUnit:e.lenUnit,areaUnit:e.areaUnit,feature:e.feature}}}},2347:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(162),l=n(136),u=n(2616).extraMarkers,p=n(2246),f=p.geometryFunctions,d=p.fetchStyle,m=p.hashAndStringify,y=n(410).set,g=n(13),b=g.values,h=g.isNil,v=g.slice,S=g.head,E=g.castArray,O=g.last,w=g.isArray,A=g.findIndex,T=g.isString,P=n(2346),C=n(4283).default,x=n(26),_={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2},R={iconGlyph:"comment",iconShape:"square",iconColor:"blue"},I={fontStyle:"normal",fontSize:"14",fontSizeUom:"px",fontFamily:"Arial",fontWeight:"normal",font:"14px Arial",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},j={color:"#ffcc33",opacity:1,weight:3,editing:{fill:1}},L={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},D={Text:I,Point:R,Circle:_,MultiPoint:R,LineString:j,MultiLineString:j,Polygon:L,MultiPolygon:L},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return-1!==e.indexOf("rgba")?"rgb".concat(e.slice(e.indexOf("("),e.lastIndexOf(",")),")"):e},N=function(e){return("start"===e?"lm":"end"===e&&"rm")||"cm"},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=void 0===t?"Point":t,r=e.features,o=void 0===r?[]:r;return"FeatureCollection"===n?o.reduce((function(e,t){return e[t.geometry.type]=D[t.geometry.type],e}),{type:"FeatureCollection"}):i({},D[n])},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i({title:"annotations.defaulttitle"!==l.getMessageById(t,"annotations.defaulttitle")?l.getMessageById(t,"annotations.defaulttitle"):"Default title",id:c()},e)},F=function(e){return T(e)&&e||w(e)&&e.join(" ")},U=function(e){return e.color&&e.opacity&&e.weight},B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=t&&t[e]?t[e]:t,o=r,a=o.dashArray?F(o.dashArray):"solid";switch(e){case"MultiPolygon":case"Polygon":case"Circle":return{strokeColor:M(o.color),strokeOpacity:o.opacity,strokeWidth:o.weight,fillColor:M(o.fillColor),fillOpacity:o.fillOpacity,strokeDashstyle:a};case"LineString":case"MultiLineString":return{strokeColor:M(o.color),strokeOpacity:o.opacity,strokeWidth:o.weight,strokeDashstyle:a};case"Text":var s=U(o)?{labelOutlineColor:M(o.color),labelOutlineOpacity:o.opacity,labelOutlineWidth:o.weight}:{};return i({fontStyle:o.fontStyle,fontSize:o.fontSize,fontFamily:o.fontFamily,fontWeight:o.fontWeight,labelAlign:N(o.textAlign),fontColor:M(o.fillColor),fontOpacity:o.fillOpacity,label:n,stroke:!0,strokeColor:M(o.color),strokeOpacity:o.opacity,strokeWidth:o.weight,strokeDashstyle:a},s);case"Point":case"MultiPoint":var c=o.symbolUrl&&d(m(o),"base64")||u.markerToDataUrl(o),l=-18,p=-46;return o.iconAnchor&&w(o.iconAnchor)&&o.size&&(l="pixels"===o.anchorXUnits?-1*o.iconAnchor[0]:-1*o.size*o.iconAnchor[0],p="pixels"===o.anchorYUnits?-1*o.iconAnchor[1]:-1*o.size*o.iconAnchor[1]),c?{graphicWidth:o.size||36,graphicHeight:o.size||46,externalGraphic:c,graphicXOffset:l,graphicYOffset:p,display:!1===o.filtering&&"none"}:{fillColor:"#0000AE",fillOpacity:.5,strokeColor:"#0000FF",pointRadius:10,strokeOpacity:1,strokeWidth:1,display:!1===o.filtering&&"none"};default:return{fillColor:"#FF0000",fillOpacity:0,strokeColor:"#FF0000",pointRadius:5,strokeOpacity:1,strokeDashstyle:a,strokeWidth:1}}},H={convertGeoJSONToInternalModel:function(e){var t=e.type,n=void 0===t?"Point":t,r=e.geometries,o=void 0===r?[]:r,a=e.features,i=void 0===a?[]:a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];switch(n){case"Point":case"MultiPoint":return{type:1===s.length?"Text":n};case"Polygon":return{type:1===c.length?"Circle":n};case"GeometryCollection":var l=o.filter((function(e){return"Point"===e.type||"MultiPoint"===e.type})),u=o.filter((function(e){return"Polygon"===e.type})),p=0,f=0;return{type:"GeometryCollection",geometries:o.map((function(e){if("Point"===e.type||"MultiPoint"===e.type){if(l.length===s.length)return{type:"Text"};if(0===s.length)return{type:e.type};if(0===p)return p++,{type:"Text"}}if("Polygon"===e.type){if(u.length===c.length)return{type:"Circle"};if(0===c.length)return{type:e.type};if(0===f)return f++,{type:"Circle"}}return{type:e.type}}))};case"FeatureCollection":var d=i.map((function(e){return e.properties&&e.properties.isCircle?{type:"Circle"}:e.properties&&e.properties.isText?{type:"Text"}:{type:e.geometry.type}}));return{type:"FeatureCollection",features:d};default:return{type:n}}},getAvailableStyler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=void 0===t?"Point":t,r=e.geometries,o=void 0===r?[]:r,a=e.features,i=void 0===a?[]:a;switch(n){case"Point":case"MultiPoint":case"Symbol":return[H.getRelativeStyler(n)];case"LineString":case"MultiLineString":return[H.getRelativeStyler(n)];case"Polygon":case"MultiPolygon":case"Text":case"Circle":return[H.getRelativeStyler(n)];case"GeometryCollection":return o.reduce((function(e,t){return-1!==e.indexOf(H.getRelativeStyler(t.type))?e:e.concat(H.getAvailableStyler(t))}),[]);case"FeatureCollection":return i.reduce((function(e,t){return-1!==e.indexOf(H.getRelativeStyler(t.type))?e:e.concat(H.getAvailableStyler(t))}),[]);default:return[]}},getRelativeStyler:function(e){switch(e){case"Point":case"MultiPoint":return"marker";case"Symbol":return"symbol";case"Circle":return"circle";case"LineString":case"MultiLineString":return"lineString";case"Polygon":case"MultiPolygon":return"polygon";case"Text":return"text";default:return""}},createFont:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fontSize,n=void 0===t?"14":t,r=e.fontSizeUom,o=void 0===r?"px":r,a=e.fontFamily,i=void 0===a?"Arial":a,s=e.fontStyle,c=void 0===s?"normal":s,l=e.fontWeight,u=void 0===l?"normal":l;return"".concat(c," ").concat(u," ").concat(n).concat(o," ").concat(i)},DEFAULT_ANNOTATIONS_STYLES:D,STYLE_CIRCLE:_,STYLE_POINT:R,STYLE_TEXT:I,STYLE_LINE:j,STYLE_POLYGON:L,normalizeAnnotation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="FeatureCollection"===e.type?i({},e):{type:"Feature",geometry:e},r=k(n),o=G(n.properties,t);return i({style:r,properties:o},n)},removeDuplicate:function(e){return b(e.reduce((function(e,t){return i({},e,s({},t.properties.id,t))}),{}))},circlesToMultiPolygon:function(e,t){var n=e.geometries,r=void 0===n?[]:n,o=t.circles,a=void 0===o?[]:o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,s=a.reduce((function(e,t){return e.concat([r[t].coordinates])}),[]);return{type:"Feature",geometry:{type:"MultiPolygon",coordinates:s},properties:{id:c(),ms_style:B("Circle",i)}}},fromCircleToPolygon:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return{type:"Feature",geometry:t.polygonGeom||e,properties:{id:t.id||c(),ms_style:B("Circle",n)}}},fromTextToPoint:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I;return{type:"Feature",geometry:e,properties:{id:t.id||c(),ms_style:B("Text",n,t.valueText)}}},fromLineStringToGeodesicLineString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;return{type:"Feature",geometry:e.geometryGeodesic,properties:{id:e.id||c(),ms_style:B(e.geometryGeodesic.type,t)}}},textToPoint:function(e,t){var n=e.geometries,r=void 0===n?[]:n,o=t.textGeometriesIndexes,a=void 0===o?[]:o,i=t.textValues,s=void 0===i?[]:i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I;return a.map((function(e,t){return{type:"Feature",geometry:r[e],properties:{id:c(),ms_style:B("Text",l,s[t])}}}))},flattenGeometryCollection:function(e){var t=e.geometry,n=e.properties,r=e.style,o=n.circles&&H.circlesToMultiPolygon(t,n,r.Circle)||[],a=n.textGeometriesIndexes&&H.textToPoint(t,n,r.Text)||[],i=(n.circles||[]).concat(n.textGeometriesIndexes||[]);return t.geometries.filter((function(e,t){return-1===i.indexOf(t)})).map((function(e){return{type:"Feature",geometry:e,properties:{id:c(),ms_style:B(e.type,r[e.type])}}})).concat(o,a)},createGeometryFromGeomFunction:function(e){var t=f[e.style.geometry]&&f[e.style.geometry].type||e.geometry.type,n=e.geometry.coordinates||[];switch(e.style.geometry){case"startPoint":n=S(n);break;case"endPoint":n=O(n);break;case"centerPoint":n=C(e).geometry.coordinates}return{type:t,coordinates:n}},fromAnnotationToGeoJson:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geometry,n=e.properties,r=void 0===n?{}:n,o=e.style,a=void 0===o?{}:o,i=a.geometry?H.createGeometryFromGeomFunction({geometry:t,properties:r,style:a,type:"Feature"}):t;return r.isCircle&&"Polygon"===i.type?H.fromCircleToPolygon(i,r,a):r.isText?H.fromTextToPoint(i,r,a):"LineString"===i.type&&r.useGeodesicLines&&a.filtering?H.fromLineStringToGeodesicLineString(r,a):{type:"Feature",geometry:i,properties:{id:r.id||c(),ms_style:B(i.type,a)}}},annotationsToPrint:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return"FeatureCollection"===t.type?e.concat(t.features.map((function(e){return E(e.style||t.style||{}).filter((function(e){return!!h(e.filtering)||e.filtering})).map((function(t){return H.fromAnnotationToGeoJson(i({},e,{style:t}))}))})).reduce((function(e,t){return e.concat(t)}),[])):t.geometry&&"GeometryCollection"===t.geometry.type?e.concat(H.flattenGeometryCollection(t)):e.concat({type:"Feature",geometry:t.geometry,properties:i({},t.properties,{ms_style:B(t.geometry.type,t.style)})})}),[])},formatCoordinates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[]];return e.map((function(e){return{lat:e&&e[1],lon:e&&e[0]}}))},getBaseCoord:function(e){switch(e){case"Polygon":case"LineString":case"MultiPoint":return[];default:return[[{lat:"",lon:""}]]}},getComponents:function(e){var t=e.type,n=e.coordinates;switch(t){case"Polygon":return H.isCompletePolygon(n)?H.formatCoordinates(v(n[0],0,n[0].length-1)):H.formatCoordinates(n[0]);case"LineString":case"MultiPoint":return H.formatCoordinates(n);default:return H.formatCoordinates([n])}},addIds:function(e){return e.map((function(e){return e.properties&&e.properties.id?e:y("properties.id",P.v1(),e)}))},COMPONENTS_VALIDATION:{Point:{min:1,add:!1,remove:!1,validation:"validateCoordinates",notValid:"Add a valid coordinate to complete the Point"},MultiPoint:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"Add 2 valid coordinates to complete the Polyline"},Polygon:{min:3,add:!0,remove:!0,validation:"validateCoordinates",notValid:"Add 3 valid coordinates to complete the Polygon"},LineString:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"Add 2 valid coordinates to complete the Polyline"},Circle:{add:!1,remove:!1,validation:"validateCircle",notValid:"Add a valid coordinate and a radius (m) to complete the Circle"},Text:{add:!1,remove:!1,validation:"validateText",notValid:"Add a valid coordinate and a Text value"}},validateCoords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lat,n=e.lon;return!isNaN(parseFloat(t))&&!isNaN(parseFloat(n))},validateCoordsArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=r(e,2),n=t[0],o=t[1];return!isNaN(parseFloat(o))&&!isNaN(parseFloat(n))},validateCoord:function(e){return!isNaN(parseFloat(e))},coordToArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[e.lon,e.lat]},validateCoordinates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.components,n=void 0===t?[]:t,r=e.remove,o=void 0!==r&&r,a=e.type;if(n&&n.length){var i=n.filter(H.validateCoords);return o?i.length>H.COMPONENTS_VALIDATION[a].min&&i.length===n.length:i.length>=H.COMPONENTS_VALIDATION[a].min&&i.length===n.length}return!1},validateCircle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.components,n=void 0===t?[]:t,r=e.properties,o=void 0===r?{radius:0}:r;if(n&&n.length){var a=S(n);return!isNaN(parseFloat(o.radius))&&H.validateCoords(a)}return!1},validateText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.components,n=void 0===t?[]:t,r=e.properties,o=void 0===r?{valueText:""}:r;if(n&&n.length){var a=S(n);return o&&!!o.valueText&&H.validateCoords(a)}return!1},validateFeature:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.components,n=void 0===t?[[]]:t,r=e.type,o=e.remove,a=void 0!==o&&o,i=e.properties,s=void 0===i?{}:i;return!h(r)&&("Text"===r?H.validateText({components:n,properties:s}):"Circle"===r?H.validateCircle({components:n,properties:s}):H.validateCoordinates({components:n,remove:a,type:r}))},updateAllStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.features&&e.features.length?i({},e,{features:e.features.map((function(e){return x({},e,{style:E(e.style).map((function(e){return x({},e,t)}))})}))}):e},getStartEndPointsForLinestring:function(){return[i({},D.Point,{highlight:!0,iconAnchor:[.5,.5],type:"Point",title:"StartPoint Style",geometry:"startPoint",filtering:!1,id:c()}),i({},D.Point,{highlight:!0,iconAnchor:[.5,.5],type:"Point",title:"EndPoint Style",geometry:"endPoint",filtering:!1,id:c()})]},DEFAULT_SHAPE:"triangle",DEFAULT_PATH:"product/assets/symbols/",checkSymbolsError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading_symbols_path";return e.length&&-1!==A(e,(function(e){return e===t}))},isAMissingSymbol:function(e){return e.symbolUrlCustomized===n(2421)},isCompletePolygon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[[]]],t=e[0].filter(H.validateCoordsArray);return t.length>3&&S(t)[0]===O(t)[0]&&S(t)[1]===O(t)[1]},getDashArrayFromStyle:F};e.exports=H},2349:function(e,t,n){var r=n(47),o=n(13),a=o.isArray,i=o.isObject,s={needProxy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(e))return e.reduce((function(e,t){return s.needProxy(t)&&e}),!0);var n=!1,o=!(0===e.indexOf("http")),c=!o&&e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(c){var l=window.location;o=c[1]===l.protocol&&c[3]===l.hostname;var u=c[4],p=l.port;(80!==u&&""!==u||"80"!==p&&""!==p)&&(o=o&&u===p)}if(!o){var f=r.getProxyUrl(t);if(f){var d=[];i(f)&&(d=f.useCORS||[],f=f.url);var m=d.reduce((function(t,n){return t||0===e.indexOf(n)}),!1);m||(n=!0)}}return n},getProxyUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.getProxyUrl(e);return t&&i(t)&&(t=t.url),t}};e.exports=s},2351:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(1),a=n(47);e.exports=function(e){return function(t){return o.createElement(e,r({},t,{container:document.querySelector("."+(a.getConfigProp("themePrefix")||"ms2")+" > div")||document.body}))}}},2354:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(757),m=d.Button,y=d.ButtonGroup,g=d.Glyphicon,b=n(2258),h=n(26),v=n(2100),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,r,u,p=(t=d,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function d(){return o(this,d),p.apply(this,arguments)}return n=d,(r=[{key:"render",value:function(){return f.createElement(b,{draggable:this.props.draggable,onClickOut:this.props.onClose,id:"confirm-dialog",modal:this.props.modal,style:h({},this.props.style,{display:this.props.show?"block":"none"})},f.createElement("span",{role:"header"},f.createElement("span",{className:"user-panel-title"},this.props.title),f.createElement("button",{onClick:this.props.onClose,className:"login-panel-close close"},this.props.closeGlyph?f.createElement(g,{glyph:this.props.closeGlyph}):f.createElement("span",null,"×"))),f.createElement("div",{role:"body"},this.props.children),f.createElement("div",{role:"footer"},f.createElement(y,null,f.createElement(m,{onClick:this.props.onConfirm,disabled:this.props.confirmButtonDisabled,bsStyle:this.props.confirmButtonBSStyle},this.props.confirmButtonContent),f.createElement(m,{onClick:this.props.onClose},this.props.closeText))))}}])&&a(n.prototype,r),u&&a(n,u),d}(f.Component);u(S,"propTypes",{show:p.bool,draggable:p.bool,onClose:p.func,onConfirm:p.func,onSave:p.func,modal:p.bool,closeGlyph:p.string,style:p.object,buttonSize:p.string,inputStyle:p.object,title:p.node,confirmButtonContent:p.node,confirmButtonDisabled:p.bool,closeText:p.node,confirmButtonBSStyle:p.string}),u(S,"defaultProps",{onClose:function(){},onChange:function(){},modal:!0,title:f.createElement(v,{msgId:"confirmTitle"}),closeGlyph:"",confirmButtonBSStyle:"danger",confirmButtonDisabled:!1,confirmButtonContent:f.createElement(v,{msgId:"confirm"})||"Confirm",closeText:f.createElement(v,{msgId:"close"}),includeCloseButton:!0}),e.exports=S},2355:function(e,t,n){var r=n(71),o=n(13),a=n(55),i=n(47),s=n(26),c=function(e){var t=a.parse(e,!0);return a.format(s({},t,{search:null},{query:s({service:"CSW",version:"2.0.2"},t.query,{request:void 0})}))},l={parseUrl:c,getRecordById:function(e){return new Promise((function(t){Promise.all([n.e(0),n.e(17)]).then(function(){t(r.get(e).then((function(e){if(e){var t=n(2240).unmarshaller.unmarshalString(e.data);if(t&&t.name&&"GetRecordByIdResponse"===t.name.localPart&&t.value&&t.value.abstractRecord){var r=t.value.abstractRecord[0].value.dcElement;if(r){for(var o={references:[]},a=0;a<r.length;a++){var s=r[a],c=s.name.localPart,l={};if("references"===c&&s.value)l={value:s.value.content&&i.cleanDuplicatedQuestionMarks(s.value.content[0])||s.value.content||s.value,scheme:s.value.scheme};else l=s.value.content&&s.value.content[0]||s.value.content||s.value;o[c]&&Array.isArray(o[c])?o[c].push(l):o[c]?o[c]=[o[c],l]:o[c]=l}return{dc:o}}}else if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"};return null}return null})))}.bind(null,n)).catch(n.oe)}))},getRecords:function(e,t,a,s){return new Promise((function(l){Promise.all([n.e(0),n.e(1)]).then(function(){var u=n(2240),p=u.CSW,f=u.marshaller,d=u.unmarshaller,m=f.marshalString({name:"csw:GetRecords",value:p.getRecords(t,a,s)});l(r.post(c(e),m,{headers:{"Content-Type":"application/xml"}}).then((function(e){if(e){var t=d.unmarshalString(e.data);if(t&&t.name&&"GetRecordsResponse"===t.name.localPart&&t.value&&t.value.searchResults){var n=t.value,r=n.searchResults.abstractRecord||n.searchResults.any,a={numberOfRecordsMatched:n.searchResults.numberOfRecordsMatched,numberOfRecordsReturned:n.searchResults.numberOfRecordsReturned,nextRecord:n.searchResults.nextRecord},s=[];if(r)for(var c=0;c<r.length;c++){var l=r[c].value,u={dateStamp:l.dateStamp&&l.dateStamp.date,fileIdentifier:l.fileIdentifier&&l.fileIdentifier.characterString&&l.fileIdentifier.characterString.value,identificationInfo:l.abstractMDIdentification&&l.abstractMDIdentification.value};if(l.boundingBox){var p=void 0,f=void 0,m=void 0;if((m=Array.isArray(l.boundingBox)?o.head(l.boundingBox):l.boundingBox)&&m.value){var y=m.value.lowerCorner,g=m.value.upperCorner;p=[y[1],y[0],g[1],g[0]];var b=m.value&&m.value.crs&&o.last(m.value.crs.split(":"));f="WGS 1984"===b||"WGS84"===b?"EPSG:4326":b?"EPSG:"+b:"EPSG:4326"}u.boundingBox={extent:p,crs:f}}var h=l.dcElement;if(h){for(var v={references:[]},S=0;S<h.length;S++){var E=h[S],O=E.name.localPart,w={};if("references"===O&&E.value)w={value:E.value.content&&i.cleanDuplicatedQuestionMarks(E.value.content[0])||E.value.content||E.value,scheme:E.value.scheme};else w=E.value.content&&E.value.content[0]||E.value.content||E.value;v[O]&&Array.isArray(v[O])?v[O].push(w):v[O]?v[O]=[v[O],w]:v[O]=w}u.dc=v}s.push(u)}return a.records=s,a}if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"}}return null})))}.bind(null,n)).catch(n.oe)}))},textSearch:function(e,t,r,o){return new Promise((function(a){Promise.all([n.e(0),n.e(1)]).then(function(){var i=n(2322).Filter,s=null;if(o){var c=i.propertyIsLike("csw:AnyText","%"+o+"%");s=i.filter(c)}a(l.getRecords(e,t,r,s))}.bind(null,n)).catch(n.oe)}))},workspaceSearch:function(e,t,r,o,a){return new Promise((function(i){Promise.all([n.e(0),n.e(1)]).then(function(){var s=n(2322).Filter,c=a||"%",u=o&&"%"+o+"%"||"%",p=s.propertyIsLike("identifier",c+":"+u),f=s.filter(p);i(l.getRecords(e,t,r,f))}.bind(null,n)).catch(n.oe)}))},reset:function(){}};e.exports=l},2356:function(e,t,n){var r=n(71),o=n(47),a=n(55),i=n(26),s=n(275),c={},l=n(13).castArray,u=n(80),p=n(773),f=p.getOperations,d=p.getOperation,m=p.getRequestEncoding,y=p.getDefaultStyleIdentifier,g=p.getDefaultFormat,b=function(e){var t=a.parse(e,!0);return a.format(i({},t,{search:null},{query:i({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"getcapabilities"},t.query)}))},h=function(e,t,n,r,o){for(var a=e.Capabilities.Contents,s=f(e),c=m(e),p=a.TileMatrixSet&&l(a.TileMatrixSet)||[],b=[],h=p.length,v=0;v<h;v++)b.push(u.getEPSGCode(p[v]["ows:SupportedCRS"]));var S=a.Layer,E=l(S).filter((function(e){return!r||-1!==e["ows:Identifier"].toLowerCase().indexOf(r.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(r.toLowerCase())}));return{numberOfRecordsMatched:E.length,numberOfRecordsReturned:Math.min(n,E.length),nextRecord:t+Math.min(n,E.length)+1,records:E.filter((function(e,r){return r>=t-1&&r<t-1+n})).map((function(e){return i({},e,{SRS:b,TileMatrixSet:p,queryable:!!d(s,"GetFeatureInfo","KVP"),requestEncoding:c,style:y(e),format:g(e),GetTileURL:d(s,"GetTile",c),capabilitiesURL:o})}))}},v={parseUrl:b,getRecords:function(e,t,n,a){var i=c[e];return i&&(new Date).getTime()<i.timestamp+1e3*(o.getConfigProp("cacheExpire")||60)?new Promise((function(r){r(h(i.data,t,n,a,e))})):r.get(b(e)).then((function(r){var o;return s.parseString(r.data,{explicitArray:!1},(function(e,t){o=t})),c[e]={timestamp:(new Date).getTime(),data:o},h(o,t,n,a,e)}))},textSearch:function(e,t,n,r){return v.getRecords(e,t,n,r)},reset:function(){Object.keys(c).forEach((function(e){delete c[e]}))}};e.exports=v},2357:function(e,t,n){var r=n(13).get,o=n(47),a=function(e,t,n,a){var i=r(o.getDefaults(),"initialState.defaultState.catalog.default.staticServices.default_map_backgrounds.backgrounds").filter((function(e){return!a||e.title.indexOf(a)>-1})),s=i.filter((function(e,r){return r>=t-1&&r<n+t-1}));return new Promise((function(e){return e({numberOfRecordsMatched:i.length,numberOfRecordsReturned:s.length,records:s,service:{Name:"Background Provider"}})}))};e.exports={getRecords:a,reset:function(){},textSearch:function(e,t,n,r){return a(0,t,n,r)}}},2358:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(15).Observable,s=n(71),c=n(768),l=n(137),u=n(197),p=n(80),f=n(55),d=n(775).interceptOGCError,m=n(13).head,y=n(274).default,g=function(e){return i.defer((function(){return s.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.search,r=void 0===n?{}:n,a=e.url,i=f.parse(r.url||a,!0);return f.format(o({},i,{search:void 0,query:o({},i.query,{service:"WMS",version:"1.1.1",layers:t,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(d)},b=function(e){return i.defer((function(){return c.getCapabilities(l.getCapabilitiesUrl(e))})).let(d).map((function(t){return c.parseLayerCapabilities(t,e)}))};e.exports={getLayerCapabilities:b,describeLayer:g,addSearch:function(e){return g(e).map((function(e){var t=e.data,n=void 0===t?{}:t;return n&&n.layerDescriptions[0]})).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.owsURL;return o({},e,{params:{},search:n?{type:"wfs",url:u.cleanAuthParamsFromURL(n)}:void 0})}))},getNativeCrs:function(e){return i.of(e).filter((function(e){return!e.nativeCrs})).switchMap((function(e){return b(e).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m(e.crs)||"EPSG:3587";if(!p.determineCrs(t)){var n=2===t.split(":").length?t.split(":")[1]:"3857";return i.fromPromise(p.fetchProjRemotely(t,p.getProjUrl(n)).then((function(e){return y.defs(t,e.data),t})))}return i.of(t)}))}))}}},2359:function(e,t,n){var r=n(1),o=n(407),a=o.branch,i=o.nest,s=function(e,t,n){var o=n.maskContainerStyle,a=n.maskStyle,s=n.className,c=n.white;return function(n){return i((function(n){return r.createElement("div",{className:"ms2-mask-container ".concat(s||""," ").concat(e(n)?"":"ms2-mask-empty"),style:o},n.children,e(n)?r.createElement("div",{className:"ms2-mask"+(c?" white-mask":""),style:a},t(n)):null)}),n)}};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.alwaysWrap,o=void 0===r||r,i=n.white,c=void 0!==i&&i,l=n.maskContainerStyle,u=void 0===l?{}:l,p=n.maskStyle,f=void 0===p?{}:p,d=n.className;return o?s(e,t,{maskContainerStyle:u,maskStyle:f,className:d,white:c}):a(e,s((function(){return!0}),t,{maskContainerStyle:u,maskStyle:f,white:c}))}},2400:function(e,t){e.exports={CHANGE_MOUSE_POSITION:"CHANGE_MOUSE_POSITION",CHANGE_MOUSE_POSITION_CRS:"CHANGE_MOUSE_POSITION_CRS",CHANGE_MOUSE_POSITION_STATE:"CHANGE_MOUSE_POSITION_STATE",changeMousePosition:function(e){return{type:"CHANGE_MOUSE_POSITION",position:e}},changeMousePositionCrs:function(e){return{type:"CHANGE_MOUSE_POSITION_CRS",crs:e}},changeMousePositionState:function(e){return{type:"CHANGE_MOUSE_POSITION_STATE",enabled:e}}}},2401:function(e,t){e.exports={HIGHLIGHT_STATUS:"HIGHLIGHT_STATUS",highlightStatus:function(e){return{type:"HIGHLIGHT_STATUS",status:e}},UPDATE_HIGHLIGHTED:"UPDATE_HIGHLIGHTED",updateHighlighted:function(e,t){return{type:"UPDATE_HIGHLIGHTED",features:e,status:t}},SET_HIGHLIGHT_FEATURES_PATH:"HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH",setHighlightFeaturesPath:function(e){return{type:"HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH",featuresPath:e}}}},2402:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(760),d=n(0),m=n(1),y=n(47),g=n(80),b=n(26),h=n(196),v=n(15),S=n(13).throttle;n(2935);var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(E,e);var t,n,r,d,y=(t=E,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function E(){var e;o(this,E);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=y.call.apply(y,[this].concat(n))),"state",{}),p(s(e),"getResolutions",(function(){return e.props.resolutions})),p(s(e),"_updateMapPositionFromNewProps",(function(t){var n=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},r=t.center,o=e.props.center,a=e.map.getCenter(),i=n(r.x,o.x)&&n(r.y,o.y)||n(r.x,a.lng)&&n(r.y,a.lat),s=t.zoom,c=e.props.zoom,l=e.map.getZoom(),u=s===c||s===l;i||u?u?i||e.map.setView([t.center.y,t.center.x]):e.map.setZoom(t.zoom):e.map.setView([t.center.y,t.center.x],Math.round(t.zoom))})),p(s(e),"updateMapInfoState",(function(){var t=e.map.getBounds().toBBoxString().split(","),n={height:e.map.getSize().y,width:e.map.getSize().x},r=e.map.getCenter();e.props.onMapViewChanges({x:r.lng,y:r.lat,crs:"EPSG:4326"},e.map.getZoom(),{bounds:{minx:parseFloat(t[0]),miny:parseFloat(t[1]),maxx:parseFloat(t[2]),maxy:parseFloat(t[3])},crs:"EPSG:4326",rotation:0},n,e.props.id,e.props.projection)})),p(s(e),"setMousePointer",(function(t){e.map&&(e.map.getContainer().style.cursor=t||"auto")})),p(s(e),"mouseMoveEvent",(function(t){var n=t.latlng.wrap();e.props.onMouseMove({x:n.lng||0,y:n.lat||0,z:e.elevationLayer&&e.elevationLayer.getElevation(n,t.containerPoint)||void 0,crs:"EPSG:4326",pixel:{x:t.containerPoint.x,y:t.containerPoint.x}})})),p(s(e),"registerHooks",(function(){e.props.hookRegister.registerHook(h.EXTENT_TO_ZOOM_HOOK,(function(t){var n=g.reproject([t[0],t[1]],e.props.projection,"EPSG:4326"),r=g.reproject([t[2],t[3]],e.props.projection,"EPSG:4326");return e.map.getBoundsZoom([[n.y,n.x],[r.y,r.x]])-1})),e.props.hookRegister.registerHook(h.RESOLUTIONS_HOOK,(function(){return e.getResolutions()})),e.props.hookRegister.registerHook(h.COMPUTE_BBOX_HOOK,(function(t,n){var r=f.latLng([t.y,t.x]),o=e.map._getNewPixelOrigin(r,n),a=new f.Bounds(o,o.add(e.map.getSize())),i=e.map.unproject(a.getBottomLeft(),n),s=e.map.unproject(a.getTopRight(),n),c=new f.LatLngBounds(i,s).toBBoxString().split(",");return{bounds:{minx:parseFloat(c[0]),miny:parseFloat(c[1]),maxx:parseFloat(c[2]),maxy:parseFloat(c[3])},crs:"EPSG:4326",rotation:0}})),e.props.hookRegister.registerHook(h.GET_PIXEL_FROM_COORDINATES_HOOK,(function(t){var n=g.reproject(t,e.props.projection,"EPSG:4326"),r=e.map.latLngToContainerPoint([n.y,n.x]);return[r.x,r.y]})),e.props.hookRegister.registerHook(h.GET_COORDINATES_FROM_PIXEL_HOOK,(function(t){var n=e.map.containerPointToLatLng(t),r=g.reproject([n.lng,n.lat],"EPSG:4326",e.props.projection);return[r.x,r.y]})),e.props.hookRegister.registerHook(h.ZOOM_TO_EXTENT_HOOK,(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.padding,o=n.crs,a=n.maxZoom,i=n.duration,s=r&&f.point(r.left||0,r.top||0),c=r&&f.point(r.right||0,r.bottom||0),l=g.reprojectBbox(t,o,"EPSG:4326");e.map.fitBounds([[l[1],l[0]],[l[3],l[2]]],{paddingTopLeft:s,paddingBottomRight:c,maxZoom:a,duration:i,animate:0!==i&&void 0})}))})),p(s(e),"addLayerObservable",(function(t,n){!t.layer.layerId||t.layer&&t.layer.options&&"vector"===t.layer.options.msLayer||t&&t.layer&&t.layer.on&&n&&(t.layer._ms2LoadingTileCount=0,t.layer.layerLoadingStream$=new v.Subject,t.layer.layerLoadStream$=new v.Subject,t.layer.layerErrorStream$=new v.Subject,t.layer.layerErrorStream$.bufferToggle(t.layer.layerLoadingStream$,(function(){return t.layer.layerLoadStream$})).subscribe({next:function(n){var r=t.layer._ms2LoadingTileCount||n&&n.length||0;n&&n.length>0&&e.props.onLayerError(n[0].target.layerId,r,n.length),t.layer._ms2LoadingTileCount=0}}))})),e}return n=E,(r=[{key:"UNSAFE_componentWillMount",value:function(){if(this.zoomOffset=0,this.props.mapOptions&&this.props.mapOptions.view&&this.props.mapOptions.view.resolutions&&this.props.mapOptions.view.resolutions.length>0){var e=f.CRS.EPSG3857.scale,t=this.props.mapOptions.view.resolutions[0]/h.getGoogleMercatorResolutions(0,23)[0];this.crs=b({},f.CRS.EPSG3857,{scale:function(n){return e.call(f.CRS.EPSG3857,n)/Math.pow(2,Math.round(Math.log2(t)))}}),this.zoomOffset=Math.round(Math.log2(t))}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.limits,n=void 0===t?{}:t,r=n.restrictedExtent&&n.crs&&g.reprojectBbox(n.restrictedExtent,n.crs,"EPSG:4326"),o=b({},this.props.interactive?{}:{dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,tap:!1,attributionControl:!1,maxBounds:r&&f.latLngBounds([[r[1],r[0]],[r[3],r[2]]]),maxBoundsViscosity:r&&1,minZoom:n&&n.minZoom,maxZoom:n&&n.maxZoom||23},this.props.mapOptions,this.crs?{crs:this.crs}:{}),a=f.map(this.props.id,b({zoomControl:this.props.zoomControl},o)).setView([this.props.center.y,this.props.center.x],Math.round(this.props.zoom));this.map=a,this.attribution=f.control.attribution(),this.attribution.addTo(this.map),this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&(document.querySelector(this.props.mapOptions.attribution.container).appendChild(this.attribution.getContainer()),document.querySelector(".leaflet-control-container .leaflet-control-attribution")&&document.querySelector(".leaflet-control-container .leaflet-control-attribution").parentNode.removeChild(document.querySelector(".leaflet-control-container .leaflet-control-attribution"))),this.map.on("moveend",this.updateMapInfoState),this.map.on("singleclick",(function(t){e.props.onClick&&e.props.onClick({pixel:{x:t.containerPoint.x,y:t.containerPoint.y},latlng:{lat:t.latlng.lat,lng:t.latlng.lng,z:e.elevationLayer&&e.elevationLayer.getElevation(t.latlng,t.containerPoint)||void 0},modifiers:{alt:t.originalEvent.altKey,ctrl:t.originalEvent.ctrlKey,shift:t.originalEvent.shiftKey}})}));var i=S(this.mouseMoveEvent,100);this.map.on("dragstart",(function(){e.map.off("mousemove",i)})),this.map.on("dragend",(function(){e.map.on("mousemove",i)})),this.map.on("mousemove",i),this.map.on("contextmenu",(function(){e.props.onRightClick&&e.props.onRightClick(event.containerPoint)})),this.updateMapInfoState(),this.setMousePointer(this.props.mousePointer),this.forceUpdate(),this.map.on("layeradd",(function(t){if(t.layer._ms2Added){var n=t.layer.layerLoadingStream$&&t.layer.layerLoadingStream$.isStopped;e.addLayerObservable(t,n)}else t.layer._ms2Added=!0,t.layer.getElevation&&(e.elevationLayer=t.layer),t.layer.layerId&&(t.layer&&t.layer.options&&"vector"===t.layer.options.msLayer||t&&t.layer&&t.layer.on&&(e.addLayerObservable(t,!0),t.layer.options&&t.layer.options.hideLoading||(e.props.onLayerLoading(t.layer.layerId),t.layer.layerLoadingStream$.next()),t.layer.on("loading",(function(n){e.props.onLayerLoading(n.target.layerId),t.layer.layerLoadingStream$.next()})),t.layer.on("load",(function(n){e.props.onLayerLoad(n.target.layerId),t.layer.layerLoadStream$.next()})),t.layer.on("tileloadstart ",(function(){t.layer._ms2LoadingTileCount++})),t.layer.on("tileerror",(function(e){t.layer.layerErrorStream$.next(e)}))))})),this.map.on("layerremove",(function(e){e.layer.layerLoadingStream$&&(e.layer.layerLoadingStream$.complete(),e.layer.layerLoadStream$.complete(),e.layer.layerErrorStream$.complete())})),this.drawControl=null,this.props.registerHooks&&this.registerHooks()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.mousePointer!==this.props.mousePointer&&this.setMousePointer(e.mousePointer),this.map&&e.mapStateSource!==this.props.id&&this._updateMapPositionFromNewProps(e),e.zoomControl!==this.props.zoomControl&&(e.zoomControl?this.map.addControl(f.control.zoom()):this.map.removeControl(this.map.zoomControl)),this.map&&e.resize!==this.props.resize&&setTimeout((function(){t.map.invalidateSize(!1)}),0),this.props.limits!==e.limits){var n=e.limits,r=void 0===n?{}:n,o=this.props.limits;if(r.restrictedExtent!==(o&&o.restrictedExtent)){var a=r.restrictedExtent&&r.crs&&g.reprojectBbox(r.restrictedExtent,r.crs,"EPSG:4326");this.map.setMaxBounds(r.restrictedExtent&&f.latLngBounds([[a[1],a[0]],[a[3],a[2]]]))}r.minZoom!==(o&&o.minZoom)&&this.map.setMinZoom(r.minZoom)}return!1}},{key:"componentWillUnmount",value:function(){var e=this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&document.querySelector(this.props.mapOptions.attribution.container);e&&this.attribution.getContainer()&&e.querySelector(".leaflet-control-attribution")&&e.removeChild(this.attribution.getContainer()),this.map.remove()}},{key:"render",value:function(){var e=this,t=this.map,n=this.props.projection,r=t?m.Children.map(this.props.children,(function(r){return r?m.cloneElement(r,{map:t,projection:n,zoomOffset:e.zoomOffset,onCreationError:e.props.onCreationError,onClick:e.props.onClick}):null})):null;return m.createElement("div",{id:this.props.id,style:this.props.style},r)}}])&&a(n.prototype,r),d&&a(n,d),E}(m.Component);p(E,"propTypes",{id:d.string,center:y.PropTypes.center,zoom:d.number.isRequired,mapStateSource:y.PropTypes.mapStateSource,style:d.object,projection:d.string,onMapViewChanges:d.func,onClick:d.func,onRightClick:d.func,mapOptions:d.object,limits:d.object,zoomControl:d.bool,mousePointer:d.string,onMouseMove:d.func,onLayerLoading:d.func,onLayerLoad:d.func,onLayerError:d.func,resize:d.number,measurement:d.object,changeMeasurementState:d.func,registerHooks:d.bool,interactive:d.bool,resolutions:d.array,hookRegister:d.object,onCreationError:d.func}),p(E,"defaultProps",{id:"map",onMapViewChanges:function(){},onCreationError:function(){},onClick:null,onMouseMove:function(){},zoomControl:!0,mapOptions:{zoomAnimation:!0,attributionControl:!1},projection:"EPSG:3857",center:{x:13,y:45,crs:"EPSG:4326"},zoom:5,onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},resize:0,registerHooks:!0,hookRegister:h,style:{},interactive:!0,resolutions:h.getGoogleMercatorResolutions(0,23)}),e.exports=E},2403:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n(0),y=n(1),g=n(411),b=n(26),h=n(13).isEqual,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(v,e);var t,n,r,o,m=(t=v,function(){var e,n=p(t);if(u()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function v(){var e;i(this,v);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(l(e=m.call.apply(m,[this].concat(n))),"setLayerVisibility",(function(t){t!==(e.props.options&&!1!==e.props.options.visibility)&&(t?e.addLayer():e.removeLayer(),e.updateZIndex())})),d(l(e),"setLayerOpacity",(function(t){t!==(e.props.options&&void 0!==e.props.options.opacity?e.props.options.opacity:1)&&e.layer&&e.layer.setOpacity&&e.layer.setOpacity(t)})),d(l(e),"generateOpts",(function(t,n,r){return b({},t,n?{zIndex:n,srs:e.props.srs}:null,{zoomOffset:-e.props.zoomOffset,onError:function(){e.props.onCreationError(t)},securityToken:r})})),d(l(e),"updateZIndex",(function(t){var n=t||e.props.position;n&&e.layer&&e.layer.setZIndex&&e.layer.setZIndex(n)})),d(l(e),"createLayer",(function(t,n,r,o){if(t){var a=e.generateOpts(n,r,o);e.layer=g.createLayer(t,a),e.layer&&(e.layer.layerName=n.name,e.layer.layerId=n.id),e.forceUpdate()}})),d(l(e),"updateLayer",(function(t,n){var r=g.updateLayer(t.type,e.layer,e.generateOpts(t.options,t.position,t.securityToken),e.generateOpts(n.options,n.position,n.securityToken));r&&(e.removeLayer(),e.layer=r,e.addLayer())})),d(l(e),"addLayer",(function(){if(e.isValid()&&(e.props.map.addLayer(e.layer),e.props.options.refresh&&e.layer.setParams)){var t=0;e.refreshTimer=setInterval((function(){e.layer.setParams(b({},e.props.options.params,{_refreshCounter:t++}))}),e.props.options.refresh)}})),d(l(e),"removeLayer",(function(){e.isValid()&&e.props.map.removeLayer(e.layer)})),d(l(e),"isValid",(function(){if(e.layer){var t=g.isValid(e.props.type,e.layer);return e.valid=t,t}return!1})),e}return n=v,(r=[{key:"componentDidMount",value:function(){this.valid=!0,this.createLayer(this.props.type,this.props.options,this.props.position,this.props.securityToken),this.props.options&&this.layer&&!1!==this.props.options.visibility&&(this.addLayer(),this.updateZIndex())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.options&&!1!==e.options.visibility;this.setLayerVisibility(t);var n=e.options&&void 0!==e.options.opacity?e.options.opacity:1;this.setLayerOpacity(n),e.position!==this.props.position&&this.updateZIndex(e.position),this.updateLayer(e,this.props)}},{key:"shouldComponentUpdate",value:function(e){var t=this;return!["map","type","srs","position","zoomOffset","onClick","options","children"].reduce((function(n,r){switch(r){case"map":case"type":case"srs":case"position":case"zoomOffset":case"onClick":case"children":return n&&t.props[r]===e[r];case"options":return n&&(t.props[r]===e[r]||h(a({},t.props[r],{loading:!1}),a({},e[r],{loading:!1})));default:return n}}),!0)}},{key:"componentWillUnmount",value:function(){this.layer&&this.props.map&&(this.removeLayer(),this.refreshTimer&&clearInterval(this.refreshTimer))}},{key:"render",value:function(){var e=this;if(this.props.children){var t=this.layer,n=t?y.Children.map(this.props.children,(function(n){return n?y.cloneElement(n,{container:t,styleName:e.props.options&&e.props.options.styleName,onClick:e.props.onClick,options:e.props.options||{}}):null})):null;return y.createElement(y.Fragment,null,n)}return g.renderLayer(this.props.type,this.props.options,this.props.map,this.props.map.id,this.layer)}}])&&s(n.prototype,r),o&&s(n,o),v}(y.Component);d(v,"propTypes",{map:m.object,type:m.string,srs:m.string,options:m.object,position:m.number,zoomOffset:m.number,onCreationError:m.func,onClick:m.func,securityToken:m.string}),d(v,"defaultProps",{onCreationError:function(){},options:{}}),e.exports=v},2404:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n(0),y=n(1),g=n(13),b=g.isEqual,h=g.isArray,v=g.castArray,S=n(26),E=n(415),O=n(2581).geometryToLayer,w=n(2246).createStylesAsync,A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(y,e);var t,n,r,o,m=(t=y,function(){var e,n=p(t);if(u()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function y(){var e;i(this,y);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(l(e=m.call.apply(m,[this].concat(n))),"createLayer",(function(t){t.geometry&&e.addFeature(a({},t,{style:t.style&&v(t.style)||void 0})),t.features&&t.features.forEach((function(n){var r=S({},t,{type:n.type,geometry:n.geometry,style:n.style&&v(n.style)||void 0,properties:n.properties});e.addFeature(r)}))})),d(l(e),"removeLayer",(function(t){e._layers&&(e._layers.forEach((function(e){t.container.removeLayer(e)})),e._layers=[])})),e}return n=y,(r=[{key:"componentDidMount",value:function(){this._layers=[],(this.props.container&&this.props.geometry||this.props.features)&&this.createLayer(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){b(e.properties,this.props.properties)&&b(e.geometry,this.props.geometry)&&e.features===this.props.features&&e.style===this.props.style||(this.removeLayer(e),this.createLayer(e))}},{key:"shouldComponentUpdate",value:function(e){return!b(e.properties,this.props.properties)||!b(e.geometry,this.props.geometry)||e.features!==this.props.features}},{key:"componentWillUnmount",value:function(){this.removeLayer(this.props)}},{key:"render",value:function(){return null}},{key:"addFeature",value:function(e){var t=this;if(h(e.style)){var n=w(e.style);E.all(n).then((function(n){t.addLayer(e,n)}))}else this.addLayer(e,e.style)}},{key:"addLayer",value:function(e,t){var n=this,r=O({type:e.type,geometry:e.geometry,styleName:e.styleName,properties:e.properties,msId:e.msId},{style:t});e.container.addLayer(r),r.on("click",(function(t){e.onClick&&e.onClick({pixel:{x:t.originalEvent&&t.originalEvent.x,y:t.originalEvent&&t.originalEvent.y},latlng:t.latlng},n.props.options.handleClickOnLayer?n.props.options.id:null)})),this._layers.push(r)}}])&&s(n.prototype,r),o&&s(n,o),y}(y.Component);d(A,"propTypes",{msId:m.oneOfType([m.string,m.number]),type:m.string,styleName:m.string,properties:m.object,container:m.object,geometry:m.object,features:m.array,style:m.object,onClick:m.func,options:m.object}),e.exports=A},2421:function(e,t,n){e.exports=n.p+"symbolMissing.svg"},2422:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(760),y=n(26);n(2957),n(2958);var g={follow:!0,remainActive:!0,stopFollowingOnDrag:!0,locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:1/0,watch:!0}};m.Control.MSLocate=m.Control.Locate.extend({setMap:function(e){this._map=e,this._layer=this.options.layer||new m.LayerGroup,this._layer.addTo(e),this._event=void 0,this._prevBounds=null;var t={};m.extend(t,this.options.markerStyle,this.options.followMarkerStyle),this.options.followMarkerStyle=t,t={},m.extend(t,this.options.circleStyle,this.options.followCircleStyle),this.options.followCircleStyle=t,this._resetVariables(),this._map.on("unload",this._unload,this)},_setClasses:function(e){return this._map.fire("locatestatus",{state:e}),e},_updateContainerStyle:function(){this._isFollowing()?this._setClasses("following"):this._active&&this._setClasses("active")},_cleanClasses:function(){return null},setStrings:function(e){this.options.strings=y({},this.options.strings,e)}});var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(y,e);var t,n,r,f,d=(t=y,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function y(){var e;o(this,y);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=d.call.apply(d,[this].concat(n))),"onLocationError",(function(t){e.props.onLocateError(t.message),e.props.changeLocateState("DISABLED")})),p(s(e),"locateControlState",(function(t){"requesting"===t.state&&"LOCATING"!==e.props.status?e.props.changeLocateState("LOCATING"):"following"!==t.state||e.fol?"active"===t.state&&"ENABLED"!==e.props.status&&e.props.changeLocateState("ENABLED"):e.props.changeLocateState("FOLLOWING")})),e}return n=y,(r=[{key:"componentDidMount",value:function(){this.props.map&&(this.locate=new m.Control.MSLocate(g),this.locate.setMap(this.props.map),this.props.map.on("locatestatus",this.locateControlState),this.locate.options.onLocationError=this.onLocationError,this.locate.options.onLocationOutsideMapBounds=this.onLocationError),this.props.status.enabled&&this.locate.start()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.fol=!1,e.status!==this.props.status&&("ENABLED"!==e.status||this.locate._active?"FOLLOWING"===e.status&&this.locate._active&&!this.locate._following?(this.fol=!0,this.locate.stop(),this.locate.start()):"DISABLED"===e.status&&(this.locate._following=!1,this.locate.stop()):this.locate.start()),e.messages!==this.props.messages&&(this.locate.setStrings(e.messages),"DISABLED"!==e.status&&this.locate.drawMarker(this.locate._map))}},{key:"render",value:function(){return null}}])&&a(n.prototype,r),f&&a(n,f),y}(d.Component);p(b,"displayName","Locate"),p(b,"propTypes",{map:f.object,status:f.string,messages:f.object,changeLocateState:f.func,onLocateError:f.func}),p(b,"defaultProps",{id:"overview",status:"DISABLED",changeLocateState:function(){},onLocateError:function(){}}),e.exports=b},2423:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=n(0),b=n(1),h=n(26),v=n(760),S=n(13).slice,E=n(80),O=E.reproject,w=E.calculateAzimuth,A=E.calculateDistance,T=E.transformLineToArcs,P=n(2245),C=P.convertUom,x=P.getFormattedBearingValue;n(2589);var _={km:2,ha:2,m:2,mi:2,ac:2,yd:0,ft:0,nm:2,sqkm:2,sqha:2,sqm:2,sqmi:2,sqac:2,sqyd:2,sqft:2,sqnm:2};v.getMeasureWithTreshold=function(e,t,n,r,o,a,i){return e>t?v.GeometryUtil.formattedNumber(C(e,n,r),o[r])+" "+i:v.GeometryUtil.formattedNumber(e,o[n])+" "+a};var R=v.GeometryUtil.readableDistance;v.GeometryUtil.readableDistance=function(e,t,n,r,o,a){if(!a)return R.apply(null,arguments);if("Bearing"===a.geomType)return a.bearing;var i=v.Util.extend({},_,o),s=a.uom.length,c=s.unit,l=s.label,u=v.GeometryUtil.formattedNumber(C(e,"m",c),i[c])+" "+l;return a.useTreshold&&(t&&(u=v.getMeasureWithTreshold(e,1e3,"m","km",i,"m","km")),"mi"===c&&(u=v.getMeasureWithTreshold(C(e,"m","yd"),1760,"yd","mi",i,"yd","mi"))),u};var I=v.GeometryUtil.readableArea;v.GeometryUtil.readableArea=function(e,t,n,r){if(!r)return I.apply(null,arguments);var o=r.uom.area,a=o.unit,i=o.label,s=v.Util.extend({},_,n),c=v.GeometryUtil.formattedNumber(C(e,"sqm",a),s[a])+" "+i;return r.useTreshold&&(t&&(c=v.getMeasureWithTreshold(e,1e6,"sqm","sqkm",s,"m²","km²")),"sqmi"===a&&(c=v.getMeasureWithTreshold(C(e,"sqm","sqyd"),3097600,"sqyd","sqmi",s,"yd²","mi²"))),c};var j=v.Draw.Polygon.prototype._getMeasurementString;v.Draw.Polygon.prototype._getMeasurementString=function(){if(!this.options.uom)return j.apply(this,arguments);var e=this._area,t="";if(!e&&!this.options.showLength)return null;if(this.options.showLength&&(t=v.Draw.Polyline.prototype._getMeasurementString.call(this)),e){var n={uom:this.options.uom,useTreshold:this.options.useTreshold};t+=this.options.showLength?"<br>":""+v.GeometryUtil.readableArea(e,this.options.metric,this.options.precision,n)}return t};var L=v.Draw.Polyline.prototype._getMeasurementString;v.Draw.Polyline.prototype._getMeasurementString=function(){if(!this.options.uom)return L.apply(this,arguments);var e,t=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();e=v.GeometryUtil.isVersion07x()?n&&t&&t.distanceTo?this._measurementRunningTotal+t.distanceTo(n)*(this.options.factor||1):this._measurementRunningTotal||0:n&&t?this._measurementRunningTotal+this._map.distance(t,n)*(this.options.factor||1):this._measurementRunningTotal||0;var r={uom:this.options.uom,useTreshold:this.options.useTreshold,geomType:this.options.geomType,bearing:this.options.bearing?x(this.options.bearing):0};return v.GeometryUtil.readableDistance(e,this.options.metric,this.options.feet,this.options.nautic,this.options.precision,r)};var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(g,e);var t,n,r,o,s=(t=g,function(){var e,n=d(t);if(f()){var r=d(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return u(this,e)});function g(){var e;c(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(p(e=s.call.apply(s,[this].concat(n))),"onDrawStart",(function(){e.props.map.off("click",e.restartDrawing,p(e)),e.removeArcLayer(),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable(),e.drawing=!0})),y(p(e),"onDrawCreated",(function(t){e.drawing=!1,e.props.map.addLayer(t.layer),e.lastLayer=t.layer;var n=e.lastLayer&&e.lastLayer.toGeoJSON()||{};if("LineString"===e.props.measurement.geomType&&(n=h({},n,{geometry:h({},n.geometry,{coordinates:T(n.geometry.coordinates)})})),"Point"===e.props.measurement.geomType){var r=e.drawControl._marker.getLatLng(),o={x:r.lng,y:r.lat,srs:"EPSG:4326"},a=h({},e.props.measurement,{point:o,feature:n});e.props.changeMeasurementState(a)}else{var i=h({},e.props.measurement,{feature:n});e.props.changeMeasurementState(i)}e.props.measurement.lineMeasureEnabled&&e.lastLayer&&e.addArcsToMap([n]),setTimeout((function(){e.props.map.off("click",e.restartDrawing,p(e)),e.props.map.on("click",e.restartDrawing,p(e))}),100)})),y(p(e),"onDrawVertex",(function(){var t=e.drawControl._markers||[];"Bearing"===e.props.measurement.geomType&&t.length>=2?setTimeout((function(){e.drawControl._markers=S(e.drawControl._markers,0,2),e.drawControl._poly._latlngs=S(e.drawControl._poly._latlngs,0,2),e.drawControl._poly._originalPoints=S(e.drawControl._poly._originalPoints,0,2),e.updateMeasurementResults(),e.drawControl._finishShape(),e.drawControl.disable()}),100):e.updateMeasurementResults()})),y(p(e),"addArcsToMap",(function(t){e.removeLastLayer();var n=t.map((function(e){return h({},e,{geometry:h({},e.geometry,{coordinates:T(e.geometry.coordinates)})})}));e.arcLayer=v.geoJson(n,{style:{color:"#ffcc33",opacity:1,weight:1,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}}),e.props.map.addLayer(e.arcLayer),n&&n.length>0&&e.arcLayer.addData(n)})),y(p(e),"updateMeasurementResults",(function(){if(e.drawing&&e.drawControl){var t=0,n=0,r=0,o=e.drawControl._currentLatLng;if("LineString"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>1){var a=e.drawControl._markers.reduce((function(e,t){var n=t.getLatLng(),r=n.lng,o=n.lat;return[].concat(i(e),[[r,o]])}),[]);t=A(a,e.props.measurement.lengthFormula)}else if("Polygon"===e.props.measurement.geomType&&e.drawControl._poly){var s=[].concat(i(e.drawControl._poly.getLatLngs()),[o]);n=v.GeometryUtil.geodesicArea(s)}else"Bearing"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>0&&(r=e.calculateBearing());var c=h({},e.props.measurement,{point:null,len:t,area:n,bearing:r});e.props.changeMeasurementState(c)}})),y(p(e),"restartDrawing",(function(){e.props.map.off("click",e.restartDrawing,p(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable(),e.props.map.removeLayer(e.lastLayer),e.drawControl.enable(),e.drawing=!0})),y(p(e),"addDrawInteraction",(function(t){if(e.removeDrawInteraction(),e.props.map.on("draw:created",e.onDrawCreated,p(e)),e.props.map.on("draw:drawstart",e.onDrawStart,p(e)),e.props.map.on("draw:drawvertex",e.onDrawVertex,p(e)),e.props.map.on("mousemove",e.updateBearing,p(e)),e.props.updateOnMouseMove&&e.props.map.on("mousemove",e.updateMeasurementResults,p(e)),"Point"===t.measurement.geomType)e.drawControl=new v.Draw.Marker(e.props.map,{repeatMode:!1});else if("LineString"===t.measurement.geomType||"Bearing"===t.measurement.geomType){var n=e.uomLengthOptions(t);e.drawControl=new v.Draw.Polyline(e.props.map,a({shapeOptions:{color:"#ffcc33",weight:2},showLength:!0,useTreshold:t.useTreshold,uom:t.uom,geomType:t.measurement.geomType},n,{repeatMode:!1,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}))}else if("Polygon"===t.measurement.geomType){var r=e.uomAreaOptions(t);e.drawControl=new v.Draw.Polygon(e.props.map,a({shapeOptions:{color:"#ffcc33",weight:2,fill:"rgba(255, 255, 255, 0.2)"},showArea:!0,allowIntersection:!1,showLength:!1,repeatMode:!1,useTreshold:t.useTreshold,uom:t.uom,geomType:t.measurement.geomType},r,{icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}))}e.drawControl.enable()})),y(p(e),"removeDrawInteraction",(function(){null!==e.drawControl&&void 0!==e.drawControl&&(e.drawControl.disable(),e.drawControl=null,e.removeLastLayer(),e.removeArcLayer(),e.props.map.off("draw:created",e.onDrawCreated,p(e)),e.props.map.off("draw:drawstart",e.onDrawStart,p(e)),e.props.map.off("draw:drawvertex",e.onDrawVertex,p(e)),e.props.map.off("mousemove",e.updateBearing,p(e)),e.props.map.off("click",e.restartDrawing,p(e)),e.props.updateOnMouseMove&&e.props.map.off("mousemove",e.updateMeasurementResults,p(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable())})),y(p(e),"removeLastLayer",(function(){e.lastLayer&&e.props.map.removeLayer(e.lastLayer)})),y(p(e),"removeArcLayer",(function(){e.arcLayer&&e.props.map.removeLayer(e.arcLayer)})),y(p(e),"uomLengthOptions",(function(e){var t=e.uom.length.unit;return{metric:"m"===t||"km"===t,nautic:"nm"===t,feet:"ft"===t}})),y(p(e),"uomAreaOptions",(function(e){var t=e.uom.area.unit;return{metric:"sqm"===t||"sqkm"===t,nautic:"sqnm"===t,feet:"sqft"===t}})),y(p(e),"calculateBearing",(function(){var t,n=e.drawControl._currentLatLng,r=e.drawControl._markers,o=[r[0].getLatLng().lng,r[0].getLatLng().lat];return 1===r.length?t=[n.lng,n.lat]:2===r.length&&(t=[r[1].getLatLng().lng,r[1].getLatLng().lat]),o=O(o,"EPSG:4326",e.props.projection),t=O(t,"EPSG:4326",e.props.projection),w(o,t,e.props.projection)})),y(p(e),"updateBearing",(function(){"Bearing"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>0&&e.drawControl.setOptions({bearing:e.calculateBearing()})})),e}return n=g,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if((e&&e.uom&&e.uom.length&&e.uom.length.unit)!==(this.props&&this.props.uom&&this.props.uom.length&&this.props.uom.length.unit)&&this.drawControl){var t=this.uomLengthOptions(e);this.drawControl.setOptions(a({},t,{uom:e.uom}))}if((e&&e.uom&&e.uom.area&&e.uom.area.unit)!==(this.props&&this.props.uom&&this.props.uom.area&&this.props.uom.area.unit)&&this.drawControl){var n=this.uomAreaOptions(e);this.drawControl.setOptions(a({},n,{uom:e.uom}))}(e.measurement.geomType&&e.measurement.geomType!==this.props.measurement.geomType||e.measurement.geomType&&this.props.measurement.geomType&&(e.measurement.lineMeasureEnabled||e.measurement.areaMeasureEnabled||e.measurement.bearingMeasureEnabled)&&!this.props.enabled&&e.enabled)&&this.addDrawInteraction(e),e.measurement.geomType||this.removeDrawInteraction()}},{key:"render",value:function(){var e=this.props.messages||!!this.context.messages&&this.context.messages.drawLocal;return e&&(v.drawLocal=e),null}}])&&l(n.prototype,r),o&&l(n,o),g}(b.Component);y(D,"displayName","MeasurementSupport"),y(D,"propTypes",{map:g.object,metric:g.bool,feet:g.bool,nautic:g.bool,enabled:g.bool,useTreshold:g.bool,projection:g.string,measurement:g.object,changeMeasurementState:g.func,messages:g.object,uom:g.object,updateOnMouseMove:g.bool}),y(D,"contextTypes",{messages:g.object}),y(D,"defaultProps",{uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},updateOnMouseMove:!1,metric:!0,nautic:!1,useTreshold:!1,feet:!1}),e.exports=D},2424:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(2960),m=n(760),y=n(411),g=n(26);n(2961);var b={position:"bottomright",width:300,height:150,collapsedWidth:25,collapsedHeight:25,zoomLevelOffset:-5,zoomLevelFixed:null,zoomAnimation:!1,toggleDisplay:!0,autoToggleDisplay:!1,minimized:!0},h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(f,e);var t,n,r,u,p=(t=f,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function f(){return o(this,f),p.apply(this,arguments)}return n=f,(r=[{key:"componentDidMount",value:function(){var e=g({},b,this.props.overviewOpt);if(this.props.layers){var t=[];this.props.layers.forEach((function(e){t.push(y.createLayer(e.type,e.options||{}))})),1===t.length?this.overview=new d(t[0],e):t.length>1&&(this.overview=new d(m.layerGroup(t),e))}this.props.map&&this.overview&&this.overview.addTo(this.props.map)}},{key:"render",value:function(){return null}}])&&a(n.prototype,r),u&&a(n,u),f}(f.Component);u(h,"displayName","Overview"),u(h,"propTypes",{map:p.object,overviewOpt:p.object,layers:p.array}),u(h,"defaultProps",{id:"overview",overviewOpt:{},layers:[{type:"osm",options:{}}]}),e.exports=h},2425:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(760),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(f,e);var t,n,r,u,p=(t=f,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function f(){return o(this,f),p.apply(this,arguments)}return n=f,(r=[{key:"componentDidMount",value:function(){if(this.scalebar=d.control.scale(this.props),this.props.map&&(this.scalebar.addTo(this.props.map),this.props.container)){document.querySelector(this.props.container).appendChild(this.scalebar.getContainer());var e=document.querySelector(".leaflet-control-container .leaflet-control-scale-line");e&&e.parentNode&&e.parentNode.removeChild(e)}}},{key:"componentWillUnmount",value:function(){if(this.props.container&&this.scalebar&&this.scalebar.getContainer())try{document.querySelector(this.props.container).removeChild(this.scalebar.getContainer())}catch(e){}}},{key:"render",value:function(){return null}}])&&a(n.prototype,r),u&&a(n,u),f}(f.Component);u(m,"propTypes",{map:p.object,position:p.oneOf(["topleft","topright","bottomleft","bottomright"]),maxWidth:p.number,metric:p.bool,imperial:p.bool,updateWhenIdle:p.bool,container:p.string}),u(m,"defaultProps",{map:null,position:"bottomleft",maxWidth:100,metric:!0,imperial:!1,updateWhenIdle:!1}),e.exports=m},2427:function(e,t,n){"use strict";n.r(t),n.d(t,"createOLGeometry",(function(){return v})),n.d(t,"isPolygon",(function(){return S})),n.d(t,"DEFAULT_INTERACTION_OPTIONS",(function(){return E}));var r=n(2432),o=n(2570),a=n(2435),i=n(2288),s=n(2436),c=n(2437),l=n(2438),u=n(2439),p=n(2441),f=n(2198),d=n(2249),m=n(2287),y=n(2331),g=n(2332),b=n(2969),h=n(2179),v=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,r=t.coordinates,o=t.radius,a=t.center;switch(n){case"Point":e=new f.a(r||[]);break;case"LineString":e=new d.a(r||[]);break;case"MultiPoint":e=new m.a(r||[]);break;case"MultiLineString":e=new y.a(r||[]);break;case"MultiPolygon":e=new g.a(r||[]);break;default:e=o&&a?Object(h.c)(new b.a([a.x,a.y],o),100):new h.b(r||[])}return e},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.geometry&&"Polygon"===e.geometry.type},E={dragPan:{options:{kinetic:!1},Instance:r.a},keyboardPan:{options:{kinetic:!1},Instance:o.a},mouseWheelZoom:{options:{duration:0},Instance:a.a},doubleClickZoom:{options:{duration:0},Instance:i.a},shiftDragZoom:{options:{duration:0},Instance:s.a},keyboardZoom:{options:{},Instance:c.a},pinchZoom:{options:{duration:0},Instance:l.a},pinchRotate:{options:{},Instance:u.a},altShiftDragRotate:{options:{},Instance:p.a}}},2446:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return I}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(270),c=n(80),l=n.n(c),u=n(26),p=n.n(u),f=n(15),d=n.n(f),m=n(2284),y=n.n(m),g=n(34),b=n.n(g),h=n(2613),v=n.n(h),S=n(2186),E=n.n(S);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(c,e);var t,n,r,o,a=(t=c,function(){var e,n=x(t);if(C()){var r=x(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return T(this,e)});function c(){var e;w(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return R(P(e=a.call.apply(a,[this].concat(n))),"setLayerVisibility",(function(t){t!==(e.props.options&&!1!==e.props.options.visibility)&&e.layer&&e.isValid()&&e.layer.setVisible(t)})),R(P(e),"setLayerOpacity",(function(t){t!==(e.props.options&&void 0!==e.props.options.opacity?e.props.options.opacity:1)&&e.layer&&e.layer.setOpacity(t)})),R(P(e),"generateOpts",(function(t,n,r,o){return p()({},t,y()(n)?{zIndex:n}:null,{srs:r,onError:function(){e.props.onCreationError(t)},securityToken:o})})),R(P(e),"createLayer",(function(t,n,r,o){if(t){var a=e.generateOpts(n,r,l.a.normalizeSRS(e.props.srs),o);e.layer=s.default.createLayer(t,a,e.props.map,e.props.mapId);var i=s.default.isCompatible(t,a);if(e.layer&&!e.layer.detached){var c=e.props.map,u=c&&c.getView().getProjection().getExtent(),p=n&&n.bbox&&n.bbox.bounds,f=u&&l.a.reprojectBbox(u,e.props.srs,"EPSG:4326"),d=p&&l.a.reprojectBbox(l.a.getExtentFromNormalized(p,e.props.srs).extent,"EPSG:4326");d&&2===d.length&&b()(d[1])&&(d=d[1]),(f&&d&&!l.a.isBboxCompatible(l.a.getPolygonFromExtent(f),l.a.getPolygonFromExtent(d))||!i)&&e.props.onWarning({title:"warning",message:"notification.incompatibleDataAndProjection",action:{label:"close"},position:"tc",uid:"1"}),e.addLayer(n)}e.layer&&e.layer.get&&e.layer.get("getElevation")&&e.props.map.set("elevationLayer",e.layer),e.forceUpdate()}})),R(P(e),"updateLayer",(function(t,n){if(t.position===n.position&&t.srs===n.srs&&t.securityToken===n.securityToken){if(t.options===n.options)return;if(E()(v()(t.options,["loading"]),v()(n.options,["loading"])))return}var r=s.default.updateLayer(e.props.type,e.layer,e.generateOpts(t.options,t.position,t.projection,t.securityToken),e.generateOpts(n.options,n.position,n.projection,n.securityToken),e.props.map,e.props.mapId);r&&(e.props.map.removeLayer(e.layer),e.layer=r,e.addLayer(t.options))})),R(P(e),"addLayer",(function(t){if(e.isValid()){e.props.map.addLayer(e.layer);var n=new d.a.Subject,r=new d.a.Subject;t.handleClickOnLayer&&e.layer.set("handleClickOnLayer",!0),e.layer.getSource().on("tileloadstart",(function(){0===e.tilestoload?(e.props.onLayerLoading(t.id),e.tilestoload++):e.tilestoload++})),e.layer.getSource().on("tileloadend",(function(){n.next({type:"tileloadend"}),e.tilestoload--,0===e.tilestoload&&r.next()})),e.layer.getSource().on("tileloaderror",(function(t){n.next({type:"tileloaderror",event:t}),e.tilestoload--,0===e.tilestoload&&r.next()})),n.bufferWhen((function(){return r})).subscribe({next:function(n){var r=n.filter((function(e){return"tileloaderror"===e.type}));r.length>0?(e.props.onLayerLoad(t.id,{error:!0}),e.props.onLayerError(t.id,n.length,r.length)):e.props.onLayerLoad(t.id)}}),e.tileLoadEndStream$=n,e.tileStopStream$=r;var o=new d.a.Subject,a=new d.a.Subject;if(e.layer.getSource().on("imageloadstart",(function(){0===e.imagestoload?(e.props.onLayerLoading(t.id),e.imagestoload++):e.imagestoload++})),e.layer.getSource().on("imageloadend",(function(){e.imagestoload--,o.next({type:"imageloadend"}),0===e.imagestoload&&a.next()})),e.layer.getSource().on("imageloaderror",(function(t){e.imagestoload--,o.next({type:"imageloaderror",event:t}),0===e.imagestoload&&a.next()})),o.bufferWhen((function(){return a})).subscribe({next:function(n){var r=n.filter((function(e){return"imageloaderror"===e.type}));r.length>0?(e.props.onLayerLoad(t.id,{error:!0}),e.props.onLayerError(t.id,n.length,r.length)):e.props.onLayerLoad(t.id)}}),e.imageLoadEndStream$=o,e.imageStopStream$=a,t.refresh){var i=0;e.refreshTimer=setInterval((function(){e.layer.getSource().updateParams(p()({},t.params,{_refreshCounter:i++}))}),t.refresh)}}})),R(P(e),"isValid",(function(){var t=s.default.isValid(e.props.type,e.layer);return e.valid=t,t})),e}return n=c,(r=[{key:"componentDidMount",value:function(){this.valid=!0,this.tilestoload=0,this.imagestoload=0,this.createLayer(this.props.type,this.props.options,this.props.position,this.props.securityToken)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.options&&!1!==e.options.visibility;this.setLayerVisibility(t);var n=e.options&&void 0!==e.options.opacity?e.options.opacity:1;this.setLayerOpacity(n),e.position!==this.props.position&&this.layer&&this.layer.setZIndex&&this.layer.setZIndex(e.position),this.props.options&&this.updateLayer(e,this.props)}},{key:"componentWillUnmount",value:function(){this.layer&&this.props.map&&(this.tileLoadEndStream$&&(this.tileLoadEndStream$.complete(),this.tileStopStream$.complete(),this.imageLoadEndStream$.complete(),this.imageStopStream$.complete()),this.layer.detached?this.layer.remove():this.props.map.removeLayer(this.layer)),this.refreshTimer&&clearInterval(this.refreshTimer),s.default.removeLayer(this.props.type,this.props.options,this.props.map,this.props.mapId,this.layer)}},{key:"render",value:function(){var e=this;if(this.props.children){var t=this.layer,n=t?i.a.Children.map(this.props.children,(function(n){return n?i.a.cloneElement(n,{container:t,styleName:e.props.options&&e.props.options.styleName}):null})):null;return i.a.createElement(i.a.Fragment,null,n)}return s.default.renderLayer(this.props.type,this.props.options,this.props.map,this.props.mapId,this.layer)}}])&&A(n.prototype,r),o&&A(n,o),c}(i.a.Component);R(I,"propTypes",{onWarning:o.a.func,maxExtent:o.a.array,map:o.a.object,mapId:o.a.string,srs:o.a.string,type:o.a.string,options:o.a.object,onLayerLoading:o.a.func,onLayerError:o.a.func,onCreationError:o.a.func,onLayerLoad:o.a.func,position:o.a.number,observables:o.a.array,securityToken:o.a.string}),R(I,"defaultProps",{observables:[],onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},onCreationError:function(){},onWarning:function(){},srs:"EPSG:3857"})},2447:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(415),c=n.n(s),l=n(2186),u=n.n(l),p=n(2291),f=n.n(p),d=n(2336),m=n.n(d),y=n(2283),g=n(2639),b=n(2246),h=n(2343);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(i,e);var t,n,r,o,a=(t=i,function(){var e,n=C(t);if(P()){var r=C(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return A(this,e)});function i(){var e;O(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _(T(e=a.call.apply(a,[this].concat(n))),"addFeatures",(function(t){var n=new h.a,r=null,o=!1;"FeatureCollection"===t.type?(r={features:t.features},o=!!t.features):(r={geometry:t.geometry},o=!(!t.geometry||!t.geometry.geometries&&!t.geometry.coordinates)),t.container&&o&&(e._feature=n.readFeatures(E({type:t.type,properties:t.properties,id:t.msId},r),{dataProjection:t.featuresCrs}),e._feature.map((function(e){var n=e;return e.getProperties().isCircle&&(n=Object(g.a)(e,t.crs||"EPSG:3857",t.featuresCrs)).setGeometry(n.getGeometry().transform(t.crs||"EPSG:3857",t.featuresCrs)),n})).forEach((function(e){return e.getGeometry().transform(t.featuresCrs,t.crs||"EPSG:3857")})),t.style&&t.style!==t.layerStyle&&e._feature.forEach((function(e){var n=[],r={};"FeatureCollection"===t.type?(r=f()(t.features,(function(t){return t.properties.id===e.getProperties().id})),n=Object(b.createStylesAsync)(m()(r.style))):(n=Object(b.createStylesAsync)(m()(t.style)),r={type:t.type,geometry:t.geometry,properties:t.properties,style:t.style}),c.a.all(n).then((function(t){e.setStyle((function(){return Object(y.e)(E({},r,{style:t}))}))}))})),t.container.getSource().addFeatures(e._feature))})),_(T(e),"removeFromContainer",(function(){if(e._feature)if(Array.isArray(e._feature)){var t=e.props.container.getSource();e._feature.map((function(e){var n=e.getId();void 0!==n&&t.getFeatureById(n)?t.removeFeature(t.getFeatureById(n)):t.removeFeature(e)}))}else e.props.container.getSource().removeFeature(e._feature)})),e}return n=i,(r=[{key:"componentDidMount",value:function(){this.addFeatures(this.props)}},{key:"shouldComponentUpdate",value:function(e){return!(u()(e.properties,this.props.properties)&&u()(e.geometry,this.props.geometry)&&u()(e.features,this.props.features)&&u()(e.crs,this.props.crs)&&u()(e.style,this.props.style))}},{key:"UNSAFE_componentWillUpdate",value:function(e){this.removeFromContainer(),this.addFeatures(e)}},{key:"componentWillUnmount",value:function(){this.removeFromContainer()}},{key:"render",value:function(){return null}}])&&w(n.prototype,r),o&&w(n,o),i}(o.a.Component);_(R,"propTypes",{type:i.a.string,layerStyle:i.a.object,style:i.a.object,properties:i.a.object,crs:i.a.string,container:i.a.object,features:i.a.array,geometry:i.a.object,msId:i.a.oneOfType([i.a.string,i.a.number]),featuresCrs:i.a.string}),_(R,"defaultProps",{featuresCrs:"EPSG:4326"})},2457:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return K}));var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(3107),c=n.n(s),l=n(2186),u=n.n(l),p=n(3109),f=n.n(p),d=n(3110),m=n.n(d),y=n(26),g=n.n(y),b=n(80),h=n(2245),v=n(410),S=n(2283),E=n(136),O=n(2427),w=n(2179),A=n(2249),T=n(2345),P=n(2220),C=n(2188),x=n(2226),_=n(2294),R=n(2338),I=n(2450),j=n(2205),L=n(2296),D=n(2343),M=n(2328),N=n(2426);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(e){return e.getView().getProjection().getCode()},K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(i,e);var t,n,r,o,a=(t=i,function(){var e,n=W(t);if(V()){var r=W(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return H(this,e)});function i(){var e;U(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return q(z(e=a.call.apply(a,[this].concat(n))),"validateCoords",(function(e){return e.filter((function(e){return!isNaN(parseFloat(e[0]))&&!isNaN(parseFloat(e[1]))}))})),q(z(e),"updateMeasures",(function(t){if(e.replaceFeatures([t.measurement.feature],t),t.measurement.showLabel){e.removeMeasureTooltips(),e.measureTooltipElement=document.createElement("div"),e.measureTooltipElement.className=e.drawing?"tooltip tooltip-measure":"tooltip tooltip-static";var n,r=e.source.getFeatures()[0].getGeometry();r instanceof w.b?(n=e.formatArea(r,t),e.tooltipCoord=r.getInteriorPoint().getCoordinates()):r instanceof A.a&&(n=e.formatLength(r,t),e.tooltipCoord=r.getLastCoordinate()),e.measureTooltipElement.innerHTML=n,e.measureTooltip=new T.a({element:e.measureTooltipElement,offset:[0,-7],positioning:"bottom-center"}),e.measureTooltip.setPosition(e.tooltipCoord),t.map.addOverlay(e.measureTooltip)}e.sketchFeature=e.source.getFeatures()[0],e.updateMeasurementResults(t,!0)})),q(z(e),"replaceFeatures",(function(t,n){var r=t;if(n.measurement.lineMeasureEnabled){var o=Object(b.transformLineToArcs)(n.measurement.feature.geometry.coordinates);r=[Object(v.set)("geometry.coordinates",o,t[0])]}e.source=new P.a,r.forEach((function(t){var n=Object(b.reprojectGeoJson)(t,"EPSG:4326",Z(e.props.map)).geometry,r=new x.a({geometry:Object(O.createOLGeometry)(n)});e.source.addFeature(r)})),e.measureLayer.setSource(e.source)})),q(z(e),"addDrawInteraction",(function(t){var n,r,o,a=t.measurement.startEndPoint;e.continueLineMsg=Object(E.getMessageById)(e.context.messages,"measureSupport.continueLine"),e.continuePolygonMsg=Object(E.getMessageById)(e.context.messages,"measureSupport.continuePolygon"),e.drawInteraction&&e.removeDrawInteraction(),e.source=new P.a;var i=[new _.default({fill:new R.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new I.default({color:"#ffcc33",width:2}),image:new j.default({radius:7,fill:new R.default({color:"#ffcc33"})})})],s=[],c=a||!0===a;if(c||void 0===a){var l=c?void 0===a?{}:a:t.startEndPoint;s=Object(S.f)(l.startPointOptions,l.endPointOptions)}n=new C.a({source:e.source,zIndex:1e6,style:[].concat(i,G(s))}),e.props.map.addLayer(n),o="Bearing"===t.measurement.geomType?"LineString":t.measurement.geomType,r=new L.a({source:e.source,type:o,style:new _.default({fill:new R.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new I.default({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new j.default({radius:5,stroke:new I.default({color:"rgba(0, 0, 0, 0.7)"}),fill:new R.default({color:"rgba(255, 255, 255, 0.2)"})})})}),e.clickListener=e.props.map.on("click",(function(){return e.updateMeasurementResults(e.props)})),e.props.updateOnMouseMove&&e.props.map.on("pointermove",(function(){return e.updateMeasurementResults(e.props)})),e.props.map.on("pointermove",(function(t){return e.pointerMoveHandler(t)})),r.on("drawstart",(function(t){e.sketchFeature=t.feature,e.drawing=!0;for(var n=document.getElementsByClassName("tooltip-static")||[],r=0;r<n.length;r++)n[r].parentNode.removeChild(n[r]);e.props.measurement.showLabel&&e.createMeasureTooltip(),e.source.clear(),e.listener=e.sketchFeature.getGeometry().on("change",(function(t){var n,r=t.target;r instanceof w.b?(n=e.formatArea(r,e.props),e.tooltipCoord=r.getInteriorPoint().getCoordinates()):r instanceof A.a&&(n=e.formatLength(r,e.props),e.tooltipCoord=r.getLastCoordinate()),e.props.measurement.showLabel&&(e.measureTooltipElement.innerHTML=n,e.measureTooltip.setPosition(e.tooltipCoord))})),e.props.resetGeometry()})),r.on("drawend",(function(t){e.drawing=!1;var n=new D.a,r=Object(b.reprojectGeoJson)(n.writeFeatureObject(t.feature.clone()),Z(e.props.map),"EPSG:4326");if(e.props.changeGeometry(r),e.props.measurement.lineMeasureEnabled){var o=Object(b.transformLineToArcs)(r.geometry.coordinates);r=Object(v.set)("geometry.coordinates",o,r)}e.replaceFeatures([r],e.props),e.props.measurement.showLabel&&(e.measureTooltipElement.className="tooltip tooltip-static",e.measureTooltip.setOffset([0,-7]),Object(M.b)(e.listener))})),e.props.map.addInteraction(r),e.props.measurement.showLabel&&e.createMeasureTooltip(),e.createHelpTooltip(),e.drawInteraction=r,e.measureLayer=n})),q(z(e),"removeDrawInteraction",(function(){null!==e.drawInteraction&&(e.removeHelpTooltip(),e.removeMeasureTooltips(),e.props.map.removeInteraction(e.drawInteraction),e.drawInteraction=null,e.props.map.removeLayer(e.measureLayer),e.sketchFeature=null,e.props.map.un("click",(function(){return e.updateMeasurementResults(e.props)}),z(e)),Object(M.b)(e.clickListener),e.props.updateOnMouseMove&&e.props.map.un("pointermove",(function(){return e.updateMeasurementResults(e.props)}),z(e)))})),q(z(e),"pointerMoveHandler",(function(e){if(!e.dragging){var t=Object(E.getMessageById)(this.context.messages,"measureSupport.startDrawing");if(this.sketchFeature&&this.drawing){var n=this.sketchFeature.getGeometry();n instanceof w.b?t=this.continuePolygonMsg:n instanceof A.a&&(t=this.continueLineMsg)}this.helpTooltipElement.innerHTML=t,this.helpTooltip.setPosition(e.coordinate),this.helpTooltipElement.classList.remove("hidden")}})),q(z(e),"updateMeasurementResults",(function(t,n){if(e.sketchFeature){var r=0,o=e.sketchFeature.getGeometry().getCoordinates();if("Bearing"===t.measurement.geomType&&o.length>1&&(r=Object(b.calculateAzimuth)(o[0],o[1],Z(t.map)),o.length>2)){for(e.drawInteraction.sketchCoords_=[o[0],o[1],o[0]];e.sketchFeature.getGeometry().getCoordinates().length>3;)e.drawInteraction.removeLastPoint();e.sketchFeature.getGeometry().setCoordinates([o[0],o[1]]),e.drawInteraction.sketchFeature_=e.sketchFeature,e.drawInteraction.finishDrawing()}var a=new D.a,i=Object(b.reprojectGeoJson)(a.writeFeatureObject(e.sketchFeature.clone()),Z(t.map),"EPSG:4326"),s=g()({},t.measurement,{point:"Point"===t.measurement.geomType?Object(b.reproject)(o,Z(e.props.map),"EPSG:4326"):null,len:"LineString"===t.measurement.geomType?Object(b.calculateDistance)(e.reprojectedCoordinatesIn4326(o),t.measurement.lengthFormula):0,area:"Polygon"===t.measurement.geomType?e.calculateGeodesicArea(e.sketchFeature.getGeometry().getLinearRing(0).getCoordinates()):0,bearing:"Bearing"===t.measurement.geomType?r:0,lenUnit:t.measurement.lenUnit,areaUnit:t.measurement.areaUnit,feature:Object(v.set)("geometry.coordinates",e.drawing?"Polygon"===t.measurement.geomType?[f()(i.geometry.coordinates[0],i.geometry.coordinates[0].length<=2?0:1)]:f()(i.geometry.coordinates):i.geometry.coordinates,i)});n?e.props.updateMeasures(m()(s,["bearing","area","len","point"])):e.props.changeMeasurementState(s)}})),q(z(e),"reprojectedCoordinatesIn4326",(function(t){return t.map((function(t){var n=Object(b.reproject)(t,Z(e.props.map),"EPSG:4326");return[n.x,n.y]}))})),q(z(e),"calculateGeodesicArea",(function(t){if(t.length>=4){var n=e.reprojectedCoordinatesIn4326(t);return Math.abs(Object(N.a)(new w.b([n]),{projection:"EPSG:4326"}))}return 0})),q(z(e),"createHelpTooltip",(function(){e.removeHelpTooltip(),e.helpTooltipElement=document.createElement("div"),e.helpTooltipElement.className="tooltip hidden",e.helpTooltip=new T.a({element:e.helpTooltipElement,offset:[15,0],positioning:"center-left"}),e.props.map.addOverlay(e.helpTooltip)})),q(z(e),"createMeasureTooltip",(function(){e.removeMeasureTooltips(),e.measureTooltipElement=document.createElement("div"),e.measureTooltipElement.className="tooltip tooltip-measure",e.measureTooltip=new T.a({element:e.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),e.props.map.addOverlay(e.measureTooltip)})),q(z(e),"formatLength",(function(t,n){var r=t.getCoordinates();if("Bearing"===n.measurement.geomType&&r.length>1){var o=Object(b.calculateAzimuth)(r[0],r[1],Z(n.map));return Object(h.getFormattedBearingValue)(o)}var a=e.reprojectedCoordinatesIn4326(r),i=Object(b.calculateDistance)(a,n.measurement.lengthFormula),s=n.uom&&n.uom.length,l=s.label,u=s.unit,p=c()(Object(h.convertUom)(i,"m",u),2);return e.props.formatNumber(p)+" "+l})),q(z(e),"formatArea",(function(t,n){var r=e.calculateGeodesicArea(t.getLinearRing(0).getCoordinates()),o=n.uom&&n.uom.area,a=o.label,i=o.unit,s=c()(Object(h.convertUom)(r,"sqm",i),2);return e.props.formatNumber(s)+" "+a})),q(z(e),"removeHelpTooltip",(function(){e.helpTooltipElement&&e.helpTooltipElement.parentNode&&e.helpTooltipElement.parentNode.removeChild(e.helpTooltipElement)})),q(z(e),"removeMeasureTooltips",(function(){if(e.measureTooltipElement&&e.measureTooltipElement.parentNode){for(var t=document.getElementsByClassName("tooltip-static")||[],n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);t=document.getElementsByClassName("tooltip-measure")||[];for(var r=0;r<t.length;r++)t[r].parentNode.removeChild(t[r])}})),e}return n=i,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){(e.measurement.geomType&&e.measurement.geomType!==this.props.measurement.geomType||e.measurement.geomType&&(e.measurement.lineMeasureEnabled||e.measurement.areaMeasureEnabled||e.measurement.bearingMeasureEnabled)&&!this.props.enabled&&e.enabled)&&this.addDrawInteraction(e),e.measurement.geomType||this.removeDrawInteraction();var t=this.props.measurement.feature,n=e.measurement.feature;!(n&&n.geometry&&e.measurement.updatedByUI)||u()(t,n)&&u()(this.props.uom,e.uom)||this.updateMeasures(e)}},{key:"render",value:function(){return null}}])&&B(n.prototype,r),o&&B(n,o),i}(o.a.Component);q(K,"propTypes",{startEndPoint:i.a.object,map:i.a.object,measurement:i.a.object,enabled:i.a.bool,uom:i.a.object,formatNumber:i.a.func,changeMeasurementState:i.a.func,updateMeasures:i.a.func,resetGeometry:i.a.func,changeGeometry:i.a.func,updateOnMouseMove:i.a.bool}),q(K,"contextTypes",{messages:i.a.object}),q(K,"defaultProps",{changeMeasurementState:function(){},resetGeometry:function(){},updateMeasures:function(){},changeGeometry:function(){},formatNumber:function(e){return e},startEndPoint:{startPointOptions:{radius:3,fillColor:"green"},endPointOptions:{radius:3,fillColor:"red"}},updateOnMouseMove:!1})},2458:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(270),c=n(26),l=n.n(c),u=n(3113),p=n.n(u),f=n(3116);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(3114);var O={className:"ol-overviewmap ol-custom-overviewmap",collapseLabel:"»",label:"«",collapsed:!0,collapsible:!0},w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,e);var t,n,r,o,a=(t=i,function(){var e,n=v(t);if(h()){var r=v(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return g(this,e)});function i(){var e;m(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(b(e=a.call.apply(a,[this].concat(n))),"dragstart",(function(t){e.dragging||(e.dragBox=e.box.cloneNode(),e.dragBox.setAttribute("class","ol-overview-dargbox"),e.dragBox.style.position="relative",e.box.appendChild(e.dragBox),""===e.box.style.top?e.offsetStartTop=0:e.offsetStartTop=parseInt(e.box.style.top.slice(0,-2),10),""===e.box.style.left?e.offsetStartLeft=0:e.offsetStartLeft=parseInt(e.box.style.left.slice(0,-2),10),e.mouseStartTop=t.pageY,e.mouseStartLeft=t.pageX,e.dragging=!0)})),E(b(e),"draggingel",(function(t){!0===e.dragging&&(e.dragBox.style.top=e.offsetStartTop+t.pageY-e.mouseStartTop+"px",e.dragBox.style.left=e.offsetStartLeft+t.pageX-e.mouseStartLeft+"px",t.stopPropagation(),t.preventDefault())})),E(b(e),"dragend",(function(){if(!0===e.dragging){var t={};t.top=""===e.dragBox.style.top?0:parseInt(e.dragBox.style.top.slice(0,-2),10),t.left=""===e.dragBox.style.left?0:parseInt(e.dragBox.style.left.slice(0,-2),10),e.box.removeChild(e.dragBox),delete e.dragBox,e.dragging=!1,e.setNewExtent(t)}})),E(b(e),"setNewExtent",(function(t){var n=e.box.offsetWidth,r=e.box.offsetHeight,o=e.props.map.getSize(),a=t.left*Math.abs(o[0]/n),i=t.top*Math.abs(o[1]/r);a=p()(a)?a:0,i=p()(i)?i:0;var s=[0+a,o[1]+i],c=[o[0]+a,0+i],l=e.props.map.getCoordinateFromPixel(s)||[0,0],u=e.props.map.getCoordinateFromPixel(c)||[0,0],f=[l[0],l[1],u[0],u[1]];e.props.map.getView().fit(f,o,{nearest:!0})})),e}return n=i,(r=[{key:"componentDidMount",value:function(){var e=this,t=[];this.props.layers.forEach((function(e){t.push(s.default.createLayer(e.type,e.options||{}))}));var n=l()({},O,this.props.overviewOpt,{layers:t});this.overview=new f.a(n),this.props.map&&this.overview.setMap(this.props.map),this.box=this.overview.element.getElementsByClassName("ol-overviewmap-box").item(0),this.box.onmousedown=function(t){e.dragstart(t),e.box.onmousemove=function(t){e.draggingel(t)},e.overview.element.onmousemove=function(t){e.draggingel(t)},e.box.onmouseup=function(){e.dragend(),e.overview.element.onmousemove=null,e.box.onmousemove=null,e.box.onmouseup=null}}}},{key:"render",value:function(){return null}}])&&y(n.prototype,r),o&&y(n,o),i}(i.a.Component);E(w,"displayName","Overview"),E(w,"propTypes",{id:o.a.string,map:o.a.object,overviewOpt:o.a.object,layers:o.a.array}),E(w,"defaultProps",{id:"overview",overviewOpt:{},layers:[{type:"osm",options:{}}]})},2459:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(26),c=n.n(s),l=n(3117);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,e);var t,n,r,o,a=(t=i,function(){var e,n=y(t);if(m()){var r=y(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d(this,e)});function i(){return p(this,i),a.apply(this,arguments)}return n=i,(r=[{key:"componentDidMount",value:function(){this.scalebar=new l.a(c()({},this.props,this.props.container?{target:document.querySelector(this.props.container)}:{})),this.props.map&&this.props.map.addControl(this.scalebar)}},{key:"componentWillUnmount",value:function(){this.props.container&&document.querySelector(".ol-scale-line")&&document.querySelector(this.props.container).removeChild(document.querySelector(".ol-scale-line"))}},{key:"render",value:function(){return null}}])&&f(n.prototype,r),o&&f(n,o),i}(i.a.Component);b(h,"propTypes",{map:o.a.object,className:o.a.string,minWidth:o.a.number,units:o.a.oneOf(["degrees","imperial","nautical","metric","us"]),container:o.a.string}),b(h,"defaultProps",{map:null,className:"ol-scale-line",minWidth:64,units:"metric"})},2462:function(e,t,n){e.exports={BingLayer:n(3124),OSMLayer:n(3125),TileProviderLayer:n(3126),WMSLayer:n(3128),WMTSLayer:n(3131),GraticuleLayer:n(3132),MarkerLayer:n(3133),OverlayLayer:n(3134)}},2463:function(e,t,n){var r=n(26),o=n(3127),a=n(47),i={getLayerConfig:function(e,t){var n=o,i=e.split("."),s=i[0],c=i[1];if(!n[s])throw new Error("No such provider ("+s+")");var l={url:n[s].url,options:n[s].options};if(c&&"variants"in n[s]){if(!(c in n[s].variants))throw new Error("No such variant of "+s+" ("+c+")");var u,p=n[s].variants[c];u="string"==typeof p?{variant:p}:p.options,l={url:p.url||l.url,options:r({},l.options,u)}}else"function"==typeof l.url&&(l.url=l.url(i.splice(1,i.length-1).join(".")));var f="file:"===window.location.protocol||l.options.forceHTTP;0===l.url.indexOf("//")&&f&&(l.url="http:"+l.url),l.options.retina&&(t.detectRetina&&a.getBrowserProperties().retina?t.detectRetina=!1:l.options.retina="");l.options.attribution=function e(t){return-1===t.indexOf("{attribution.")?t:t.replace(/\{attribution.(\w*)\}/,(function(t,r){return e(n[r].options.attribution)}))}(l.options.attribution);var d=r({},l.options,t);return[l.url,d]}};e.exports=i},2464:function(e,t,n){e.exports={BingLayer:n(3135),Commons:n(3137),GraticuleLayer:n(3138),GoogleLayer:n(3142),MapQuest:n(3144),OSMLayer:n(3146),TileProviderLayer:n(3147),WMSLayer:n(3148),WMTSLayer:n(3152),VectorLayer:n(3154)}},2465:function(e,t,n){e.exports={BingLayer:n(3155).default,GoogleLayer:n(3156).default,GraticuleLayer:n(3157).default,MapQuest:n(3158).default,OSMLayer:n(3159).default,OverlayLayer:n(3161).default,TileProviderLayer:n(3162).default,VectorLayer:n(3164).default,WFS3Layer:n(3165).default,WMSLayer:n(3168).default,WMTSLayer:n(3170).default}},2467:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(2206).default,c=n(2228);e.exports=function(e){var t=e.width,n=e.height,r=e.className,a=void 0===r?"loader-container":r,l=e.contentStyle,u=void 0===l?{}:l;return i.createElement("div",{className:a},i.createElement(s,null,(function(e){var r=e.width,a=void 0===r?200:r,s=e.height,l=void 0===s?200:s,p=t||(l>0?Math.min(a,l):a),f=n||(l>0?Math.min(a,l):a),d=Math.min(p,f);return i.createElement(c,{size:d,style:o({padding:d/10,margin:"auto",display:"flex"},u)})})))}},2470:function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n(1),a=n(407),i=a.branch,s=a.renameProps,c=n(2116),l=n(2471),u=n(2170),p=s({open:"show"})((function(e){var t=e.children,n=e.header,a=r(e,["children","header"]);return o.createElement(u,a,o.createElement(c,{header:o.createElement("div",{className:"ms-header"},n)},t))}));e.exports=i((function(e){return!e.dock}),(function(){return function(e){return o.createElement(p,e)}}))(l)},2471:function(e,t,n){var r=n(1),o=n(791).default,a=n(2116),i=n(407).withState,s=n(3204);e.exports=i("fullscreen","onFullscreen",!1)((function(e){var t=e.fluid,n=e.className,i=void 0===n?"":n,c=e.fullscreen,l=void 0!==c&&c,u=e.position,p=e.open,f=e.size,d=void 0===f?550:f,m=e.style,y=void 0===m?{}:m,g=e.zIndex,b=void 0===g?1030:g,h=e.onClose,v=e.bsStyle,S=e.title,E=e.showFullscreen,O=void 0!==E&&E,w=e.glyph,A=e.header,T=e.footer,P=e.children,C=e.onFullscreen,x=void 0===C?function(){}:C,_=e.fixed,R=void 0!==_&&_,I=e.noResize,j=void 0!==I&&I,L=e.hideHeader;return r.createElement("div",{className:"ms-side-panel "+(R?"":"ms-absolute-dock ")+(j?"react-dock-no-resize ":"")+i},r.createElement(o,{fluid:t||l,position:u,dimMode:"none",isVisible:p,size:l?1:d,dockStyle:y,zIndex:b},r.createElement(a,{header:!L&&p&&r.createElement(s,{position:u,onClose:h,bsStyle:v,title:S,fullscreen:l,showFullscreen:O,glyph:w,additionalRows:A,onFullscreen:x}),footer:p&&T},p&&P)))}))},2476:function(e,t,n){var r=n(13).head;e.exports={SHOW_ANNOTATION:"ANNOTATIONS:SHOW",EDIT_ANNOTATION:"ANNOTATIONS:EDIT",NEW_ANNOTATION:"ANNOTATIONS:NEW",REMOVE_ANNOTATION:"ANNOTATIONS:REMOVE",CONFIRM_REMOVE_ANNOTATION:"ANNOTATIONS:CONFIRM_REMOVE",CANCEL_REMOVE_ANNOTATION:"ANNOTATIONS:CANCEL_REMOVE",CANCEL_EDIT_ANNOTATION:"ANNOTATIONS:CANCEL_EDIT",SAVE_ANNOTATION:"ANNOTATIONS:SAVE",TOGGLE_ADD:"ANNOTATIONS:TOGGLE_ADD",UPDATE_ANNOTATION_GEOMETRY:"ANNOTATIONS:UPDATE_GEOMETRY",VALIDATION_ERROR:"ANNOTATIONS:VALIDATION_ERROR",REMOVE_ANNOTATION_GEOMETRY:"ANNOTATIONS:REMOVE_GEOMETRY",TOGGLE_STYLE:"ANNOTATIONS:TOGGLE_STYLE",SET_STYLE:"ANNOTATIONS:SET_STYLE",RESTORE_STYLE:"ANNOTATIONS:RESTORE_STYLE",HIGHLIGHT:"ANNOTATIONS:HIGHLIGHT",CLEAN_HIGHLIGHT:"ANNOTATIONS:CLEAN_HIGHLIGHT",CANCEL_SHOW_ANNOTATION:"ANNOTATIONS:CANCEL_SHOW",FILTER_ANNOTATIONS:"ANNOTATIONS:FILTER",CLOSE_ANNOTATIONS:"ANNOTATIONS:CLOSE",CONFIRM_CLOSE_ANNOTATIONS:"ANNOTATIONS:CONFIRM_CLOSE",CANCEL_CLOSE_ANNOTATIONS:"ANNOTATIONS:CANCEL_CLOSE",START_DRAWING:"ANNOTATIONS:START_DRAWING",startDrawing:function(){return{type:"ANNOTATIONS:START_DRAWING"}},UNSAVED_CHANGES:"ANNOTATIONS:UNSAVED_CHANGES",setUnsavedChanges:function(e){return{type:"ANNOTATIONS:UNSAVED_CHANGES",unsavedChanges:e}},UNSAVED_STYLE:"ANNOTATIONS:UNSAVED_STYLE",setUnsavedStyle:function(e){return{type:"ANNOTATIONS:UNSAVED_STYLE",unsavedStyle:e}},TOGGLE_CHANGES_MODAL:"ANNOTATIONS:TOGGLE_CHANGES_MODAL",toggleUnsavedChangesModal:function(){return{type:"ANNOTATIONS:TOGGLE_CHANGES_MODAL"}},TOGGLE_STYLE_MODAL:"ANNOTATIONS:TOGGLE_STYLE_MODAL",toggleUnsavedStyleModal:function(){return{type:"ANNOTATIONS:TOGGLE_STYLE_MODAL"}},CHANGED_PROPERTIES:"ANNOTATIONS:CHANGED_PROPERTIES",changedProperties:function(e,t){return{type:"ANNOTATIONS:CHANGED_PROPERTIES",field:e,value:t}},ADD_TEXT:"ANNOTATIONS:ADD_TEXT",addText:function(){return{type:"ANNOTATIONS:ADD_TEXT"}},editAnnotation:function(e){return function(t,n){var o=r(r(n().layers.flat.filter((function(e){return"annotations"===e.id}))).features.filter((function(t){return t.properties.id===e})));"FeatureCollection"===o.type?t({type:"ANNOTATIONS:EDIT",feature:o,featureType:o.type}):t({type:"ANNOTATIONS:EDIT",feature:o,featureType:o.geometry.type})}},newAnnotation:function(){return{type:"ANNOTATIONS:NEW"}},removeAnnotation:function(e){return{type:"ANNOTATIONS:REMOVE",id:e}},confirmRemoveAnnotation:function(e){return{type:"ANNOTATIONS:CONFIRM_REMOVE",id:e}},cancelRemoveAnnotation:function(){return{type:"ANNOTATIONS:CANCEL_REMOVE"}},cancelEditAnnotation:function(){return{type:"ANNOTATIONS:CANCEL_EDIT"}},saveAnnotation:function(e,t,n,r,o,a){return{type:"ANNOTATIONS:SAVE",id:e,fields:t,geometry:n,style:r,newFeature:o,properties:a}},toggleAdd:function(e){return{type:"ANNOTATIONS:TOGGLE_ADD",featureType:e}},updateAnnotationGeometry:function(e,t,n){return{type:"ANNOTATIONS:UPDATE_GEOMETRY",geometry:e,textChanged:t,circleChanged:n}},validationError:function(e){return{type:"ANNOTATIONS:VALIDATION_ERROR",errors:e}},removeAnnotationGeometry:function(){return{type:"ANNOTATIONS:REMOVE_GEOMETRY"}},toggleStyle:function(){return{type:"ANNOTATIONS:TOGGLE_STYLE"}},setStyle:function(e){return{type:"ANNOTATIONS:SET_STYLE",style:e}},restoreStyle:function(){return{type:"ANNOTATIONS:RESTORE_STYLE"}},highlight:function(e){return{type:"ANNOTATIONS:HIGHLIGHT",id:e}},cleanHighlight:function(){return{type:"ANNOTATIONS:CLEAN_HIGHLIGHT"}},showAnnotation:function(e){return{type:"ANNOTATIONS:SHOW",id:e}},cancelShowAnnotation:function(){return{type:"ANNOTATIONS:CANCEL_SHOW"}},filterAnnotations:function(e){return{type:"ANNOTATIONS:FILTER",filter:e}},closeAnnotations:function(){return{type:"ANNOTATIONS:CLOSE"}},confirmCloseAnnotations:function(){return{type:"ANNOTATIONS:CONFIRM_CLOSE"}},cancelCloseAnnotations:function(){return{type:"ANNOTATIONS:CANCEL_CLOSE"}},DOWNLOAD:"ANNOTATIONS:DOWNLOAD",download:function(e){return{type:"ANNOTATIONS:DOWNLOAD",annotation:e}},OPEN_EDITOR:"ANNOTATIONS:OPEN_EDITOR",openEditor:function(e){return{type:"ANNOTATIONS:OPEN_EDITOR",id:e}},CONFIRM_DELETE_FEATURE:"ANNOTATIONS:CONFIRM_DELETE_FEATURE",confirmDeleteFeature:function(){return{type:"ANNOTATIONS:CONFIRM_DELETE_FEATURE"}},TOGGLE_DELETE_FT_MODAL:"ANNOTATIONS:TOGGLE_DELETE_FT_MODAL",toggleDeleteFtModal:function(){return{type:"ANNOTATIONS:TOGGLE_DELETE_FT_MODAL"}},HIGHLIGHT_POINT:"ANNOTATIONS:HIGHLIGHT_POINT",highlightPoint:function(e){return{type:"ANNOTATIONS:HIGHLIGHT_POINT",point:e}},ADD_NEW_FEATURE:"ANNOTATIONS:ADD_NEW_FEATURE",addNewFeature:function(){return{type:"ANNOTATIONS:ADD_NEW_FEATURE"}},SET_EDITING_FEATURE:"ANNOTATIONS:SET_EDITING_FEATURE",setEditingFeature:function(e){return{type:"ANNOTATIONS:SET_EDITING_FEATURE",feature:e}},LOAD_ANNOTATIONS:"ANNOTATIONS:LOAD_ANNOTATIONS",loadAnnotations:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"ANNOTATIONS:LOAD_ANNOTATIONS",features:e,override:t}},RESET_COORD_EDITOR:"ANNOTATIONS:RESET_COORD_EDITOR",resetCoordEditor:function(){return{type:"ANNOTATIONS:RESET_COORD_EDITOR"}},CHANGE_TEXT:"ANNOTATIONS:CHANGE_TEXT",changeText:function(e,t){return{type:"ANNOTATIONS:CHANGE_TEXT",text:e,components:t}},CHANGE_RADIUS:"ANNOTATIONS:CHANGE_RADIUS",changeRadius:function(e,t,n){return{type:"ANNOTATIONS:CHANGE_RADIUS",radius:e,components:t,crs:n}},TOGGLE_GEOMETRY_MODAL:"ANNOTATIONS:TOGGLE_GEOMETRY_MODAL",toggleUnsavedGeometryModal:function(){return{type:"ANNOTATIONS:TOGGLE_GEOMETRY_MODAL"}},SET_INVALID_SELECTED:"ANNOTATIONS:SET_INVALID_SELECTED",setInvalidSelected:function(e,t){return{type:"ANNOTATIONS:SET_INVALID_SELECTED",errorFrom:e,coordinates:t}},CHANGE_FORMAT:"ANNOTATIONS:CHANGE_FORMAT",changeFormat:function(e){return{type:"ANNOTATIONS:CHANGE_FORMAT",format:e}},CHANGED_SELECTED:"ANNOTATIONS:CHANGED_SELECTED",changeSelected:function(e,t,n,r){return{type:"ANNOTATIONS:CHANGED_SELECTED",coordinates:e,radius:t,text:n,crs:r}},UPDATE_SYMBOLS:"ANNOTATIONS:UPDATE_SYMBOLS",updateSymbols:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"ANNOTATIONS:UPDATE_SYMBOLS",symbols:e}},ERROR_SYMBOLS:"ANNOTATIONS:ERROR_SYMBOLS",setErrorSymbol:function(e){return{type:"ANNOTATIONS:ERROR_SYMBOLS",symbolErrors:e}}}},2477:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(1),m=n(0),y=n(757),g=y.Button,b=y.Glyphicon,h=n(2111),v=n(3295),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(S,e);var t,n,r,m,y=(t=S,function(){var e,n=u(t);if(l()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function S(){var e;a(this,S);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(c(e=y.call.apply(y,[this].concat(n))),"onClick",(function(){e.props.onClick(!e.props.pressed,e.props.options)})),f(c(e),"renderNormalButton",(function(){return d.createElement(g,o({id:e.props.id},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.props.pressed?e.props.pressedStyle:e.props.defaultStyle,style:e.props.style}),e.props.glyphicon?d.createElement(b,{glyph:e.props.glyphicon}):null,e.props.glyphicon&&e.props.text&&!d.isValidElement(e.props.text)?" ":null,e.props.text,e.props.help)})),f(c(e),"renderImageButton",(function(){return d.createElement(v,{id:e.props.id,image:e.props.image,onClick:e.onClick,style:e.props.style})})),f(c(e),"addTooltip",(function(t){return d.createElement(h,{placement:e.props.tooltipPlace,key:"overlay-trigger."+e.props.id,overlay:e.props.tooltip},t)})),e}return n=S,(r=[{key:"render",value:function(){var e="normal"===this.props.btnType?this.renderNormalButton():this.renderImageButton();return this.props.tooltip?this.addTooltip(e):e}}])&&i(n.prototype,r),m&&i(n,m),S}(d.Component);f(S,"propTypes",{id:m.string,btnConfig:m.object,options:m.object,text:m.oneOfType([m.string,m.element]),help:m.oneOfType([m.string,m.element]),glyphicon:m.string,pressed:m.bool,onClick:m.func,tooltip:m.element,tooltipPlace:m.string,style:m.object,btnType:m.oneOf(["normal","image"]),image:m.string,pressedStyle:m.string,defaultStyle:m.string}),f(S,"defaultProps",{onClick:function(){},options:{},pressed:!1,tooltipPlace:"top",style:{},btnType:"normal",pressedStyle:"primary",defaultStyle:"default"}),e.exports=S},2478:function(e,t,n){var r=n(13),o=r.isEqualWith,a=r.isObject,i=n(195),s=i.defaultMemoize,c=i.createSelectorCreator,l=function(e,t){return e===t},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return function(t,n){return Array.isArray(t)&&Array.isArray(n)?t===n||t.length===n.length&&t.reduce((function(t,r,o){return t&&e(r,n[o])}),!0):a(t)&&a(n)?t===n||Object.keys(t).length===Object.keys(n).length&&Object.keys(t).reduce((function(r,o){return r&&e(t[o],n[o])}),!0):t===n}},p=c(s,(function(e,t){return o(e,t,u())}));e.exports={createShallowSelector:p,createShallowSelectorCreator:function(e){return c(s,(function(t,n){return o(t,n,u(e))}))}}},2479:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e){return function(){var t,n=p(e);if(u()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n(1),g=n(13).debounce,b=n(0),h=n(33),v=n(3314).default;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debounceTime,n=e.querySelector,r=e.closest,a=void 0!==r&&r;return function(e){var r,c;return c=r=function(r){f(u,r);var c=s(u);function u(e){var r;return o(this,u),m(l(r=c.call(this,e)),"findDomNode",(function(){if(!r.isMounded)return null;var e=h.findDOMNode(l(r));return e&&a&&n?e.closest(n||"*"):e&&(n?e.querySelector(n):e)})),r.width=void 0,r.height=void 0,r.skipOnMount=e.skipOnMount,r.onResize=g((function(){var e;return(e=r.props).onResize.apply(e,arguments)}),void 0!==t?t:e.debounceTime||1e3),r.ro=new v((function(e){e.forEach((function(e){var t=e.contentRect,n=t.width,o=t.height,a=r.props.handleWidth&&r.width!==n,i=r.props.handleHeight&&r.height!==o;r.skipOnMount||!a&&!i||r.onResize({width:n,height:o}),r.width=n,r.height=o,r.skipOnMount=!1}))})),r}return i(u,[{key:"componentDidMount",value:function(){this.isMounded=!0;var e=this.findDomNode();e&&this.ro.observe(e)}},{key:"componentWillUnmount",value:function(){var e=this.findDomNode();e&&this.ro&&this.ro.unobserve&&this.ro.unobserve(e)}},{key:"render",value:function(){return y.createElement(e,this.props)}}]),u}(y.Component),m(r,"propTypes",{handleWidth:b.bool,handleHeight:b.bool,onResize:b.func}),m(r,"defaultProps",{onResize:function(){},handleWidth:!0,handleHeight:!0}),c}}},2480:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(0),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,r,u,f=(t=d,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function d(){return o(this,d),f.apply(this,arguments)}return n=d,(r=[{key:"render",value:function(){var e=this;return p.createElement("label",{className:"mapstore-switch-btn ".concat(this.props.className)},p.createElement("input",{type:"checkbox",checked:this.props.checked,onChange:function(){return e.props.onChange(!e.props.checked)}}),p.createElement("span",{onClick:function(){return e.props.onClick(!e.props.checked)},className:"m-slider"}))}}])&&a(n.prototype,r),u&&a(n,u),d}(p.Component);u(d,"propTypes",{className:f.string,checked:f.bool,onChange:f.func,onClick:f.func}),u(d,"defaultProps",{className:"",checked:!1,onChange:function(){},onClick:function(){}}),e.exports=d},2565:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=(n(3104),n(26)),c=n.n(s),l=n(2105),u=n(2125),p=n(2345),f=n(2226),d=n(2220),m=n(2188),y=n(3106),g=n(2198),b=n(2969),h=n(2342),v=n(2294),S=n(2338),E=n(2450),O=n(2205),w=function(){var e=document.createElement("div");e.setAttribute("class","ol-popup");var t=document.createElement("a");t.setAttribute("class","ol-popup-close-btn"),t.setAttribute("href","#close"),t.innerHTML="x";var n=document.createElement("div");n.setAttribute("class","ol-popup-cnt-wrapper");var r=document.createElement("div");r.setAttribute("class","ol-popup-cnt"),n.appendChild(r);var o=document.createElement("div");o.setAttribute("class","ol-popup-tip-wrapper");var a=document.createElement("div");return a.setAttribute("class","ol-popup-tip"),o.appendChild(a),e.appendChild(t),e.appendChild(n),e.appendChild(o),e}(),A=function(e,t){u.a.call(this,{state:"DISABLED"}),this.map=e;var n={drawCircle:!0,follow:!0,stopFollowingOnDrag:!1,remainActive:!0,locateStyle:this._getDefaultStyles(),metric:!0,onLocationError:this.onLocationError,keepCurrentZoomLevel:!1,showPopup:!0,strings:{metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point"},locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:18}};this.options=c()({},n,t||{}),this.geolocate=new y.a({projection:this.map.getView().getProjection(),trackingOptions:this.options.locateOptions}),this.updateHandler=this._updatePosFt.bind(this),this.geolocate.on("change:position",this.updateHandler),this.popup=w,this.popup.hidden=!0,this.popCnt=w.getElementsByClassName("ol-popup-cnt")[0],this.overlay=new p.a({element:this.popup,positioning:"top-center",stopEvent:!1}),this.layer=new m.a({source:new d.a({useSpatialIndex:!1})}),this.posFt=new f.a({geometry:this.geolocate.getAccuracyGeometry(),name:"position",id:"_locate-pos"}),this.posFt.setStyle(this.options.locateStyle),this.layer.getSource().addFeature(this.posFt),this.clickHandler=this.mapClick.bind(this),this.stopHandler=this.stopFollow.bind(this),this.errorHandler=this.options.onLocationError.bind(this)};Object(l.d)(A,u.a),A.prototype.start=function(){this.geolocate.on("error",this.errorHandler),this.follow=this.options.follow,this.geolocate.setTracking(!0),this.layer.setMap(this.map),this.map.addOverlay(this.overlay),this.options.showPopup&&(this.map.on("click",this.clickHandler),this.map.on("touch",this.clickHandler)),this.options.stopFollowingOnDrag&&this.map.on("pointerdrag",this.stopHandler),this.p?this._updatePosFt():this.set("state","LOCATING")},A.prototype.startFollow=function(){this.follow=!0,this.options.stopFollowingOnDrag&&this.map.on("pointerdrag",this.stopHandler),this.p&&this._updatePosFt()},A.prototype.stop=function(){this.geolocate.un("error",this.errorHandler),this.geolocate.setTracking(!1),this.popup.hide=!0,this.map.removeOverlay(this.overlay),this.layer.setMap(null),this.options.showPopup&&(this.map.un("click",this.clickHandler),this.map.un("touch",this.clickHandler)),this.options.stopFollowingOnDrag&&!this.follow&&this.map.un("pointerdrag",this.stopHandler),this.set("state","DISABLED")},A.prototype.stopFollow=function(){this.follow=!1,this.map.un("pointerdrag",this.stopHandler),this.set("state","ENABLED")},A.prototype._updatePosFt=function(){var e=this.get("state"),t=this.follow?"FOLLOWING":"ENABLED";t!==e&&this.set("state",t);var n=this.geolocate.getPosition();this.p=n;var r=new g.a([parseFloat(n[0]),parseFloat(n[1])]);if(this.options.drawCircle){var o=new b.a([parseFloat(n[0]),parseFloat(n[1])],this.geolocate.getAccuracy());this.posFt.setGeometry(new h.default([r,o]))}else this.posFt.setGeometry(new h.default([r]));this.popup.hidden||this._updatePopUpCnt(),this.follow&&this.updateView(r),this.options.remainActive||this.geolocate.setTracking(!1)},A.prototype.updateView=function(e){this.follow&&(this.map.getView().setCenter(e.getCoordinates()),this.options.keepCurrentZoomLevel||this.map.getView().setZoom(this.options.locateOptions.maxZoom))},A.prototype._updatePopUpCnt=function(){var e,t;this.options.metric?(e=this.geolocate.getAccuracy(),t=this.options.strings.metersUnit):(e=Math.round(3.2808399*this.geolocate.getAccuracy()),t=this.options.strings.feetUnit);var n=this.options.strings.popup.replace("{distance}",e);this.popCnt.innerHTML=n.replace("{unit}",t),this.overlay.setPosition(this.posFt.getGeometry().getGeometries()[0].getCoordinates()),this.popup.hidden=!1},A.prototype.onLocationError=function(e){alert(e.message)},A.prototype.mapClick=function(e){var t=this.map.forEachFeatureAtPixel(e.pixel,(function(e){return e}));t&&"_locate-pos"===t.get("id")&&this.popup.hidden?this._updatePopUpCnt():this.popup.hidden||(w.hidden=!0)},A.prototype._getDefaultStyles=function(){return new v.default({image:new O.default({radius:6,fill:new S.default({color:"rgba(42,147,238,0.7)"}),stroke:new E.default({color:"rgba(19,106,236,1)",width:2})}),fill:new S.default({color:"rgba(19,106,236,0.15)"}),stroke:new E.default({color:"rgba(19,106,236,1)",width:2})})},A.prototype.setStrings=function(e){this.options.strings=c()({},this.options.strings,e)};var T=A;function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return N}));var M={follow:!0,remainActive:!0,metric:!0,stopFollowingOnDrag:!0,keepCurrentZoomLevel:!1,locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:18}},N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(i,e);var t,n,r,o,a=(t=i,function(){var e,n=j(t);if(I()){var r=j(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return _(this,e)});function i(){var e;C(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return D(R(e=a.call.apply(a,[this].concat(n))),"onStateChange",(function(t){e.props.status!==t&&e.props.changeLocateState(t)})),D(R(e),"onLocationError",(function(t){e.props.onLocateError(t.message),e.props.changeLocateState("DISABLED")})),D(R(e),"configureLocate",(function(t){var n=e.locate.get("state");"ENABLED"===t&&"DISABLED"===n?e.locate.start():"FOLLOWING"===t&&"ENABLED"===n?e.locate.startFollow():"DISABLED"===t&&e.locate.stop()})),e}return n=i,(r=[{key:"componentDidMount",value:function(){var e=this;this.props.map&&(this.locate=new T(this.props.map,M),this.locate.setStrings(this.props.messages),this.locate.options.onLocationError=this.onLocationError,this.locate.on("propertychange",(function(t){e.onStateChange(t.target.get(t.key))})),this.configureLocate(this.props.status))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.status!==this.props.status&&this.configureLocate(e.status),e.messages!==this.props.messages&&this.locate.setStrings(e.messages)}},{key:"render",value:function(){return null}}])&&x(n.prototype,r),o&&x(n,o),i}(i.a.Component);D(N,"displayName","Locate"),D(N,"propTypes",{map:o.a.object,status:o.a.string,messages:o.a.object,changeLocateState:o.a.func,onLocateError:o.a.func}),D(N,"defaultProps",{id:"overview",status:"DISABLED",changeLocateState:function(){},onLocateError:function(){}})},2568:function(e,t,n){"use strict";n.r(t);var r=n(2567),o=n(2432),a=n(2435),i=n(4285),s=n(2564),c=n(2891),l=n(2109),u=n(2600),p=n(2143),f=n(2101),d=n(274),m=n.n(d),y=n(2974),g=n(0),b=n.n(g),h=n(1),v=n.n(h),S=n(26),E=n.n(S),O=n(80),w=n.n(O),A=n(47),T=n.n(A),P=n(196),C=n.n(P),x=n(2247),_=function(e,t,n,r,o){Object(l.c)(new x.a({code:e,extent:t,worldExtent:n,axisOrientation:r,units:o}))},R=n(2427),I=n(13);n(2970),n(2972);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(h,e);var t,n,d,g,b=(t=h,function(){var e,n=G(t);if(k()){var r=G(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return M(this,e)});function h(){var e;L(this,h);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return U(N(e=b.call.apply(b,[this].concat(n))),"getResolutions",(function(){if(e.props.mapOptions&&e.props.mapOptions.view&&e.props.mapOptions.view.resolutions)return e.props.mapOptions.view.resolutions;var t=void 0!==e.props.mapOptions.minZoom?e.props.mapOptions.minZoom:0,n=void 0!==e.props.mapOptions.maxZoom?e.props.mapOptions.maxZoom:28,r=void 0!==e.props.mapOptions.zoomFactor?e.props.mapOptions.zoomFactor:2,o=e.map.getView().getProjection(),a=o.getExtent(),i=(a?Object(f.E)(a):360*p.default.METERS_PER_UNIT[p.default.DEGREES]/p.default.METERS_PER_UNIT[o.getUnits()])/256,s=(a?Object(f.A)(a):360*p.default.METERS_PER_UNIT[p.default.DEGREES]/p.default.METERS_PER_UNIT[o.getUnits()])/256;i<=s?(1,s/=Math.round(s/i)):(1,i/=Math.round(i/s));var c=Math.max(i,s),l=c/Math.pow(2,28),u=e.props.mapOptions.maxResolution;void 0!==u?t=0:u=c/Math.pow(r,t);var d=e.props.mapOptions.minResolution;return void 0===d&&(d=void 0!==e.props.mapOptions.maxZoom?void 0!==e.props.mapOptions.maxResolution?u/Math.pow(r,n):c/Math.pow(r,n):l),n=t+Math.floor(Math.log(u/d)/Math.log(r)),Array.apply(0,Array(n-t+1)).map((function(e,t){return u/Math.pow(r,t)}))})),U(N(e),"mouseMoveEvent",(function(t){if(!t.dragging&&t.coordinate){var n=t.coordinate.slice(),r=Object(l.k)(n,e.props.projection),o=r[0]/360%1*360;o<-180?o+=360:o>180&&(o-=360),e.props.onMouseMove({y:r[1]||0,x:o||0,z:e.map.get("elevationLayer")&&e.map.get("elevationLayer").get("getElevation")(n,t.pixel)||void 0,crs:"EPSG:4326",pixel:{x:t.pixel[0],y:t.pixel[1]}})}})),U(N(e),"updateMapInfoState",(function(){var t=e.map.getView(),n=t.getCenter(),r=t.getProjection().getExtent(),o=t.getProjection().getCode();if(-1!==["EPSG:3857","EPSG:900913","EPSG:4326"].indexOf(o)||n&&n[0]>=r[0]&&n[0]<=r[2]&&n[1]>=r[1]&&n[1]<=r[3]){var a=e.normalizeCenter(t.getCenter()),i=t.calculateExtent(e.map.getSize()),s={width:e.map.getSize()[0],height:e.map.getSize()[1]};e.props.onMapViewChanges({x:a[0]||0,y:a[1]||0,crs:"EPSG:4326"},t.getZoom(),{bounds:{minx:i[0],miny:i[1],maxx:i[2],maxy:i[3]},crs:o,rotation:t.getRotation()},s,e.props.id,e.props.projection)}})),U(N(e),"haveResolutionsChanged",(function(t){var n=e.props.mapOptions&&e.props.mapOptions.view?e.props.mapOptions.view.resolutions:void 0,r=t.mapOptions&&t.mapOptions.view?t.mapOptions.view.resolutions:void 0;return!Object(I.isEqual)(n,r)})),U(N(e),"createView",(function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=o.restrictedExtent&&o.crs&&w.a.reprojectBbox(o.restrictedExtent,o.crs,w.a.normalizeSRS(n)),i=!r||r&&!r.view?E()({},r,{extent:a}):E()({},r),s=E()({},{projection:w.a.normalizeSRS(n),center:[e.x,e.y],zoom:t,minZoom:o.minZoom},i||{});return new c.a(s)})),U(N(e),"_updateMapPositionFromNewProps",(function(t){var n=e.map.getView(),r=e.props.center;if(!(t.center.y===r.y&&t.center.x===r.x)){var o=w.a.reproject({x:t.center.x,y:t.center.y},"EPSG:4326",t.projection,!0);n.setCenter([o.x,o.y])}Math.round(t.zoom)!==e.props.zoom&&n.setZoom(Math.round(t.zoom)),(t.bbox&&void 0!==t.bbox.rotation||e.bbox&&void 0!==e.bbox.rotation&&t.bbox.rotation!==e.props.bbox.rotation)&&n.setRotation(t.bbox.rotation)})),U(N(e),"normalizeCenter",(function(t){var n=w.a.reproject({x:t[0],y:t[1]},e.props.projection,"EPSG:4326",!0);return[n.x,n.y]})),U(N(e),"setMousePointer",(function(t){e.map&&(e.map.getViewport().style.cursor=t||"auto")})),U(N(e),"registerHooks",(function(){e.props.hookRegister.registerHook(C.a.RESOLUTIONS_HOOK,(function(){return e.getResolutions()})),e.props.hookRegister.registerHook(C.a.RESOLUTION_HOOK,(function(){return e.map.getView().getResolution()})),e.props.hookRegister.registerHook(C.a.COMPUTE_BBOX_HOOK,(function(t,n){var r=w.a.reproject([t.x,t.y],"EPSG:4326",e.props.projection),o=e.createView(r,n,e.props.projection,e.props.mapOptions&&e.props.mapOptions.view,e.props.limits),a=e.map.getSize(),i=o.calculateExtent(a);return{bounds:{minx:i[0],miny:i[1],maxx:i[2],maxy:i[3]},crs:e.props.projection,rotation:e.map.getView().getRotation()}})),e.props.hookRegister.registerHook(C.a.GET_PIXEL_FROM_COORDINATES_HOOK,(function(t){return e.map.getPixelFromCoordinate(t)})),e.props.hookRegister.registerHook(C.a.GET_COORDINATES_FROM_PIXEL_HOOK,(function(t){return e.map.getCoordinateFromPixel(t)})),e.props.hookRegister.registerHook(C.a.ZOOM_TO_EXTENT_HOOK,(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.padding,o=n.crs,a=n.maxZoom,i=n.duration,s=w.a.reprojectBbox(t,o,e.props.projection);s&&s[0]===s[2]&&s[1]===s[3]&&"EPSG:4326"===o&&Object(I.isArray)(t)&&-180===t[0]&&-90===t[1]&&(s=e.map.getView().getProjection().getExtent());var c=a;s&&s[0]===s[2]&&s[1]===s[3]&&Object(I.isNil)(c)&&(c=21),e.map.getView().fit(s,{padding:r&&[r.top||0,r.right||0,r.bottom||0,r.left||0],maxZoom:c,duration:i})}))})),e}return n=h,(d=[{key:"componentDidMount",value:function(){var e=this;this.props.projectionDefs.forEach((function(e){var t=m.a.defs(e.code);_(e.code,e.extent,e.worldExtent,e.axisOrientation||t.axis||"enu",t.units||"m")}));var t=w.a.reproject([this.props.center.x,this.props.center.y],"EPSG:4326",this.props.projection);Object(y.a)(m.a);var n=E()(this.props.interactive?{}:{doubleClickZoom:!1,dragPan:!1,altShiftDragRotate:!1,keyboard:!1,mouseWheelZoom:!1,shiftDragZoom:!1,pinchRotate:!1,pinchZoom:!1},this.props.mapOptions.interactions),c=Object(r.a)(E()({dragPan:!1,mouseWheelZoom:!1},n,{}));void 0!==n&&void 0!==n.dragPan||(this.dragPanInteraction=new o.a({kinetic:!1}),c.extend([this.dragPanInteraction])),void 0!==n&&void 0!==n.mouseWheelZoom||(this.mouseWheelInteraction=new a.a({duration:0}),c.extend([this.mouseWheelInteraction]));var u=Object(i.a)(E()({zoom:this.props.zoomControl,attributionOptions:E()({collapsible:!1},this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container?{target:document.querySelector(this.props.mapOptions.attribution.container)}:{})},this.props.mapOptions.controls)),p=new s.default({layers:[],controls:u,interactions:c,target:"".concat(this.props.id),view:this.createView(t,Math.round(this.props.zoom),this.props.projection,this.props.mapOptions&&this.props.mapOptions.view,this.props.limits)});this.map=p,this.map.disabledListeners={},this.map.disableEventListener=function(t){e.map.disabledListeners[t]=!0},this.map.enableEventListener=function(t){delete e.map.disabledListeners[t]},p.on("moveend",this.updateMapInfoState),p.on("singleclick",(function(t){if(e.props.onClick&&!e.map.disabledListeners.singleclick){var n=e.map.getView(),r=t.coordinate.slice(),o=n.getProjection().getExtent();if("EPSG:4326"===e.props.projection&&(r[0]=w.a.normalizeLng(r[0])),"EPSG:900913"!==e.props.projection&&"EPSG:3857"!==e.props.projection||(r=Object(l.k)(r,e.props.projection),o=w.a.reprojectBbox(o,e.props.projection,"EPSG:4326")),r[0]>=o[0]&&r[0]<=o[2]&&r[1]>=o[1]&&r[1]<=o[3]){var a,i;a="EPSG:900913"!==e.props.projection&&"EPSG:3857"!==e.props.projection?w.a.reproject(r,e.props.projection,"EPSG:4326"):{x:r[0],y:r[1]},e.markerPresent=!1,p.forEachFeatureAtPixel(t.pixel,(function(t,n){if(n&&n.get("handleClickOnLayer")){var r=t.getGeometry();if(!e.markerPresent&&"Point"===r.getType()){e.markerPresent=!0,i=n.get("msId");var o=Object(l.k)(r.getFirstCoordinate(),e.props.projection);a={x:o[0],y:o[1]}}}}));var s=w.a.normalizeLng(a.x),c=e.map.get("elevationLayer")&&e.map.get("elevationLayer").get("getElevation");e.props.onClick({pixel:{x:t.pixel[0],y:t.pixel[1]},latlng:{lat:a.y,lng:s,z:c&&c(r,t.pixel)||void 0},modifiers:{alt:t.originalEvent.altKey,ctrl:t.originalEvent.ctrlKey,shift:t.originalEvent.shiftKey}},i)}}}));var f=Object(I.throttle)(this.mouseMoveEvent,100);p.on("pointermove",f),this.updateMapInfoState(),this.setMousePointer(this.props.mousePointer),this.forceUpdate(),this.props.onResolutionsChange(this.getResolutions()),this.props.registerHooks&&this.registerHooks()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.mousePointer!==this.props.mousePointer&&this.setMousePointer(e.mousePointer),e.zoomControl!==this.props.zoomControl&&(e.zoomControl?this.map.addControl(new u.a):this.map.removeControl(this.map.getControls().getArray().filter((function(e){return e instanceof u.a}))[0])),this.map&&(this.props.mapOptions&&this.props.mapOptions.interactions)!==(e.mapOptions&&e.mapOptions.interactions)){var n=e.mapOptions.interactions||{},r=this.map.getInteractions().getArray();Object.keys(n).forEach((function(e){var o=R.DEFAULT_INTERACTION_OPTIONS[e]||{},a=o.Instance,i=o.options,s=Object(I.find)(r,(function(t){return R.DEFAULT_INTERACTION_OPTIONS[e]&&t instanceof a}));s?s.setActive(n[e]):n[e]&&a&&t.map.addInteraction(new a(i))}))}if(this.map&&this.props.id!==e.mapStateSource&&this._updateMapPositionFromNewProps(e),this.map&&e.resize!==this.props.resize&&setTimeout((function(){t.map.updateSize()}),0),this.map&&(this.props.projection!==e.projection||this.haveResolutionsChanged(e))||this.props.limits!==e.limits){if(this.props.projection!==e.projection||this.props.limits!==e.limits){var o=e.projection,a=w.a.reproject([e.center.x,e.center.y],"EPSG:4326",o);this.map.setView(this.createView(a,e.zoom,e.projection,e.mapOptions&&e.mapOptions.view,e.limits)),this.props.onResolutionsChange(this.getResolutions())}this.map.getLayers().forEach((function(e){var t=e.getSource();t.getTileLoadFunction&&t.setTileLoadFunction(t.getTileLoadFunction())})),this.map.render()}}},{key:"componentWillUnmount",value:function(){var e=this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&document.querySelector(this.props.mapOptions.attribution.container);e&&e.querySelector(".ol-attribution")&&e.removeChild(e.querySelector(".ol-attribution")),this.map&&this.map.setTarget(null)}},{key:"render",value:function(){var e=this,t=this.map,n=t?v.a.Children.map(this.props.children,(function(n){return n?v.a.cloneElement(n,{map:t,mapId:e.props.id,onLayerLoading:e.props.onLayerLoading,onLayerError:e.props.onLayerError,onLayerLoad:e.props.onLayerLoad,projection:e.props.projection,onCreationError:e.props.onCreationError}):null})):null;return v.a.createElement("div",{id:this.props.id,style:this.props.style},n)}}])&&D(n.prototype,d),g&&D(n,g),h}(v.a.Component);U(B,"propTypes",{id:b.a.string,style:b.a.object,center:T.a.PropTypes.center,zoom:b.a.number.isRequired,mapStateSource:T.a.PropTypes.mapStateSource,projection:b.a.string,projectionDefs:b.a.array,onMapViewChanges:b.a.func,onResolutionsChange:b.a.func,onClick:b.a.func,mapOptions:b.a.object,zoomControl:b.a.bool,mousePointer:b.a.string,onMouseMove:b.a.func,onLayerLoading:b.a.func,onLayerLoad:b.a.func,onLayerError:b.a.func,resize:b.a.number,measurement:b.a.object,changeMeasurementState:b.a.func,registerHooks:b.a.bool,hookRegister:b.a.object,interactive:b.a.bool,onCreationError:b.a.func,bbox:b.a.object,wpsBounds:b.a.object,onWarning:b.a.func,maxExtent:b.a.array,limits:b.a.object}),U(B,"defaultProps",{id:"map",onMapViewChanges:function(){},onResolutionsChange:function(){},onCreationError:function(){},onClick:null,onMouseMove:function(){},mapOptions:{},projection:"EPSG:3857",projectionDefs:[],onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},resize:0,registerHooks:!0,hookRegister:C.a,interactive:!0});t.default=B},2574:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(789),s=n(269).SELECT_NODE,c=n(2130).setPermission,l=n(2244),u=l.setEditPermissionStyleEditor,p=l.INIT_STYLE_SERVICE,f=n(812),d=f.layerEditPermissions,m=f.styleEditPermissions,y=f.updateThumb,g=n(408),b=g.getSelectedLayer,h=g.layersSelector,v=n(268).mapSelector,S=n(47),E=n(2575).updateMapLayout,O=n(267),w=O.TOGGLE_CONTROL,A=O.SET_CONTROL_PROPERTY,T=O.SET_CONTROL_PROPERTIES,P=n(40).MAP_CONFIG_LOADED,C=n(2130),x=C.SIZE_CHANGE,_=C.CLOSE_FEATURE_GRID,R=C.OPEN_FEATURE_GRID,I=n(2165),j=I.CLOSE_IDENTIFY,L=I.ERROR_FEATURE_INFO,D=I.TOGGLE_MAPINFO_STATE,M=I.LOAD_FEATURE_INFO,N=I.EXCEPTIONS_FEATURE_INFO,k=I.NO_QUERYABLE_LAYER,G=n(269),F=G.SHOW_SETTINGS,U=G.HIDE_SETTINGS,B=n(2165).PURGE_MAPINFO_RESULTS,H=n(772).isMapInfoOpen,z=n(2180),V=z.isFeatureGridOpen,W=z.getDockSize,Y=n(804),q=Y.head,Z=Y.get,K=n(2899).mapSaveMapResourceEpic,Q=n(762).showCoordinateEditorSelector;e.exports={mapSaveMapResourceEpic:K,_setFeatureEditPermission:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState;return e.ofType(s).filter((function(e){return"layer"===e.nodeType&&!S.getConfigProp("disableCheckEditPermissions")})).switchMap((function(){var e=b(n()||{});return e?d(e).map((function(e){return c(e)})).startWith(c({canEdit:!1})).catch((function(){return i.Observable.empty()})):i.Observable.of(c({canEdit:!1}))}))},_setThumbnail:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState;return e.ofType("GEONODE:CREATE_MAP_THUMBNAIL","GEONODE:CREATE_LAYER_THUMBNAIL").do((function(){try{$("#_thumbnail_processing").modal("show")}catch(e){console.log(e)}})).exhaustMap((function(e){var t=e.type,r=n(),o=h(r),a=v(r),s="GEONODE:CREATE_MAP_THUMBNAIL"===t,c=s?Z(a,"info.id"):o[o.length-1].name,l=s?"maps":"layers",u=a.size,p=u.width,f=u.height,d=a.bbox.bounds,m=d.maxx,g=d.minx,b=d.maxy,S={bbox:[g,m,d.miny,b],srid:a.bbox.crs,center:a.center,zoom:a.zoom,width:p,height:f,layers:o.filter((function(e){return"background"!==e.group&&e.visibility})).map((function(e){return e.name})).join(",")};return y(l,c,S).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.status;try{$("#_thumbnail_feedbacks").find(".modal-title").text(n),$("#_thumbnail_feedbacks").find(".modal-body").text(t),$("#_thumbnail_feedbacks").modal("show")}catch(e){console.log(e)}})).mapTo({type:"THUMBNAIL_UPDATE"}).catch((function(e){var t=e.code,n=e.message;try{"ECONNABORTED"===t?($("#_thumbnail_feedbacks").find(".modal-title").text("Timeout"),$("#_thumbnail_feedbacks").find(".modal-body").text("Failed from timeout: Could not create Thumbnail"),$("#_thumbnail_feedbacks").modal("show")):($("#_thumbnail_feedbacks").find(".modal-title").text("Error: "+n),$("#_thumbnail_feedbacks").find(".modal-body").text("Could not create Thumbnail"),$("#_thumbnail_feedbacks").modal("show"))}catch(e){console.log(e)}finally{return i.Observable.of({type:"THUMBNAIL_UPDATE_ERROR"})}})).do((function(){try{$("#_thumbnail_processing").modal("hide")}catch(e){console.log(e)}}))}))},_setStyleEditorPermission:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState;return e.ofType(p,s).filter((function(e){var t=e.nodeType;return t&&"layer"===t&&!S.getConfigProp("disableCheckEditPermissions")||!t&&!S.getConfigProp("disableCheckEditPermissions")})).switchMap((function(e){var t=b(n()||{});return t?m(t).map((function(e){var t=e.canEdit;return u(t)})).startWith(u(e.canEdit)).catch((function(){return i.Observable.empty()})):i.Observable.of(u(!1))}))},updateMapLayoutEpic:function(e,t){return e.ofType(P,x,k,T,_,R,j,D,M,N,w,A,F,U,L,B).switchMap((function(){var e=t.getState();if(Z(e,"browser.mobile")){var n=o({},H(e)?{bottom:"50%"}:{bottom:void 0});return i.Observable.of(E({boundingMapRect:n}))}var r=S.getConfigProp("mapLayout")||{left:{sm:300,md:500,lg:600},right:{md:658},bottom:{sm:30}};if("embedded"===Z(e,"mode")){var a={height:"calc(100% - "+r.bottom.sm+"px)"},s=o({},H(e)?{bottom:"50%"}:{bottom:void 0});return i.Observable.of(E(o({},a,{boundingMapRect:s})))}var c=Z(e,"controls.drawer.resizedWidth"),l=q([Z(e,"controls.queryPanel.enabled")&&{left:r.left.lg}||null,Z(e,"controls.widgetBuilder.enabled")&&{left:r.left.md}||null,Z(e,"layers.settings.expanded")&&{left:r.left.md}||null,Z(e,"controls.drawer.enabled")&&{left:c||r.left.sm}||null].filter((function(e){return e})))||{left:0},u=q([Z(e,"controls.details.enabled")&&{right:r.right.md}||null,Z(e,"controls.annotations.enabled")&&{right:r.right.md}||null,Z(e,"controls.metadataexplorer.enabled")&&{right:r.right.md}||null,Z(e,"controls.measure.enabled")&&Q(e)&&{right:r.right.md}||null,Z(e,"mapInfo.enabled")&&H(e)&&{right:r.right.md}||null].filter((function(e){return e})))||{right:0},p=100*W(e),f=V(e)&&{bottom:p+"%",dockSize:p}||{bottom:r.bottom.sm},d=V(e)&&{transform:"translate(0, -"+r.bottom.sm+"px)"}||{transform:"none"},m={height:"calc(100% - "+r.bottom.sm+"px)"},y=o({},f,{},l,{},u);return i.Observable.of(E(o({},l,{},u,{},f,{},d,{},m,{boundingMapRect:y})))}))}}},2575:function(e,t){e.exports={UPDATE_MAP_LAYOUT:"MAP_LAYOUT:UPDATE_MAP_LAYOUT",updateMapLayout:function(e){return{type:"MAP_LAYOUT:UPDATE_MAP_LAYOUT",layout:e}}}},2576:function(e,t,n){var r=n(71),o=n(55),a=n(26),i={format:"json",bounded:0,polygon_geojson:1,priority:5},s={geocode:function(e,t){var n=a({q:e},i,t||{}),s=o.format({protocol:"https",host:"nominatim.openstreetmap.org",query:n});return r.get(s)},reverseGeocode:function(e,t){var n=a({lat:e.lat,lon:e.lng},t||{},i),s=o.format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:n});return r.get(s)}};e.exports=s},2577:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n(0),g=n(1),b=n(198).connect,h=n(195).createSelector,v=n(2901).loadFont,S=n(26),E=n(2142);n(2926);var O,w=n(2100),A=n(47),T=n(409),P=T.errorLoadingFont,C=T.setMapResolutions,x=n(13).isString,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(h,e);var t,r,i,y,b=(t=h,function(){var e,n=f(t);if(p()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function h(){var e;s(this,h);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return m(u(e=b.call.apply(b,[this].concat(r))),"state",{canRender:!0}),m(u(e),"getHighlightLayer",(function(t,n){return g.createElement(O.Layer,{type:"vector",srs:t,position:n,key:"highlight",options:{name:"highlight"}},e.props.features.map((function(e){return g.createElement(O.Feature,{msId:e.id,key:e.id,crs:t,type:e.type,style:e.style||null,geometry:e.geometry})})))})),m(u(e),"getTool",(function(t){return x(t)?{name:t,impl:O.tools[t]}:t[e.props.mapType]||t})),m(u(e),"getMapOptions",(function(){return e.props.mapOptions&&e.props.mapOptions[e.props.mapType]||A.getConfigProp("defaultMapOptions")&&A.getConfigProp("defaultMapOptions")[e.props.mapType]})),m(u(e),"renderLayers",(function(){var t=e.props.map.projection||"EPSG:3857";return[].concat(a(e.props.layers),a(e.props.additionalLayers)).filter(e.filterLayer).map((function(n,r){return g.createElement(O.Layer,{type:n.type,srs:t,position:r,key:n.id||n.name,options:n,securityToken:e.props.securityToken},e.renderLayerContent(n,t))})).concat(e.props.features&&e.props.features.length&&e.getHighlightLayer(t,e.props.layers.length)||[])})),m(u(e),"renderLayerContent",(function(e,t){return e.features&&"vector"===e.type?e.features.map((function(n){return g.createElement(O.Feature,{key:n.id,msId:n.id,type:n.type,crs:t,geometry:n.geometry,features:n.features,featuresCrs:e.featuresCrs||"EPSG:4326",layerStyle:e.style,style:n.style||e.style||null,properties:n.properties})})):null})),m(u(e),"renderSupportTools",(function(){return e.props.tools.map((function(t){var n=e.getTool(t),r=e.props.toolsOptions[n.name]&&e.props.toolsOptions[n.name][e.props.mapType]||e.props.toolsOptions[n.name]||{};return g.createElement(n.impl,o({key:n.name},r))}))})),m(u(e),"filterLayer",(function(t){return!t.useForElevation||"cesium"===e.props.mapType||e.props.elevationEnabled})),m(u(e),"updatePlugins",(function(e){O=n(2928)(e.mapType,e.actions)})),e}return r=h,(i=[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props,n=t.shouldLoadFont,r=t.fonts;n&&r&&(this.setState({canRender:!1}),Promise.all(r.map((function(t){return v(t,{timeoutAfter:5e3}).catch((function(){e.props.onFontError({family:t})}))}))).then((function(){e.setState({canRender:!0})}))),this.updatePlugins(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.mapType===this.props.mapType&&e.actions===this.props.actions||this.updatePlugins(e)}},{key:"render",value:function(){if(this.props.map&&this.state.canRender){var e=this.props.map.mapOptions,t=void 0===e?{}:e;return g.createElement(O.Map,o({id:"map"},this.props.options,{projectionDefs:this.props.projectionDefs},this.props.map,{mapOptions:S({},t,this.getMapOptions()),zoomControl:this.props.zoomControl,onResolutionsChange:this.props.onResolutionsChange}),this.renderLayers(),this.renderSupportTools())}return this.props.loadingError?g.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"mapErrorMessage"},g.createElement(w,{msgId:"map.loadingerror"}),":",this.props.loadingError):g.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"mapLoadingMessage"},this.props.loadingSpinner?g.createElement(E,{spinnerName:"circle",overrideSpinnerClassName:"spinner"}):null,g.createElement(w,{msgId:this.props.mapLoadingMessage}))}}])&&c(r.prototype,i),y&&c(r,y),h}(g.Component);m(_,"propTypes",{mapType:y.string,map:y.object,layers:y.array,additionalLayers:y.array,zoomControl:y.bool,mapLoadingMessage:y.string,loadingSpinner:y.bool,loadingError:y.string,tools:y.array,fonts:y.array,options:y.object,mapOptions:y.object,projectionDefs:y.array,toolsOptions:y.object,onFontError:y.func,onResolutionsChange:y.func,actions:y.object,features:y.array,securityToken:y.string,shouldLoadFont:y.bool,elevationEnabled:y.bool}),m(_,"defaultProps",{mapType:"leaflet",actions:{},zoomControl:!1,mapLoadingMessage:"map.loading",loadingSpinner:!0,tools:["measurement","locate","scalebar","draw","highlight"],options:{},mapOptions:{},fonts:["FontAwesome"],toolsOptions:{measurement:{},locate:{},scalebar:{leaflet:{position:"bottomright"}},overview:{overviewOpt:{position:"bottomright",collapsedWidth:25,collapsedHeight:25,zoomLevelOffset:-5,toggleDisplay:!0},layers:[{type:"osm"}]}},securityToken:"",additionalLayers:[],shouldLoadFont:!1,elevationEnabled:!1,onFontError:function(){},onResolutionsChange:function(){}});var R=n(268),I=R.mapSelector,j=R.projectionDefsSelector,L=n(2141),D=L.mapTypeSelector,M=L.isOpenlayers,N=h([j,I,D,n(408).layerSelectorWithMarkers,n(3171).highlighedFeatures,function(e){return e.mapInitialConfig&&e.mapInitialConfig.loadingError&&e.mapInitialConfig.loadingError.data},n(271).securityTokenSelector,function(e){return e.mousePosition&&e.mousePosition.enabled},M],(function(e,t,n,r,o,a,i,s,c){return{projectionDefs:e,map:t,mapType:n,layers:r,features:o,loadingError:a,securityToken:i,elevationEnabled:s,shouldLoadFont:c}}));e.exports={MapPlugin:b(N,{onFontError:P,onResolutionsChange:C})(_),reducers:{draw:n(3172),highlight:n(3173),maptype:n(3174),additionallayers:n(3176)},epics:n(3177)}},2578:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(2141).isOpenlayers,i=n(762).showCoordinateEditorSelector,s=n(410).set,c=n(2245).validateFeatureCoordinates,l=function(e){var t=e.measurement.feature||{};return t.geometry&&(t=s("geometry.coordinates",c(t.geometry||{}),t)),t};e.exports={measurementSelector:function(e){return e.measurement&&function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.measurement,{feature:l(e)})||{}},getValidFeatureSelector:l,isCoordinateEditorEnabledSelector:function(e){return i(e)&&!e.measurement.isDrawing&&a(e)},showAddAsAnnotationSelector:function(e){return e&&e.measurement&&e.measurement.showAddAsAnnotation}}},2579:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(2167),m=n(0),y=n(15),g=n(1),b=n(33),h=n(47),v=n(2933),S=n(196),E=n(80),O=n(26),w=n(13).throttle,A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(A,e);var t,n,r,m,h=(t=A,function(){var e,n=u(t);if(l()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function A(){var e;a(this,A);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(c(e=h.call.apply(h,[this].concat(n))),"state",{}),f(c(e),"onClick",(function(t,n){if(e.props.onClick&&null!==n.position){var r=t.camera.pickEllipsoid(n.position,t.scene.globe.ellipsoid),o=v.getMouseXYZ(t,n)||r&&d.Cartographic.fromCartesian(r);if(o){var a=180*o.latitude/Math.PI,i=180*o.longitude/Math.PI,s=(90-a)/180*e.props.standardHeight*(e.props.zoom+1),c=(180+i)/360*e.props.standardWidth*(e.props.zoom+1);e.props.onClick({pixel:{x:c,y:s},height:e.props.mapOptions&&e.props.mapOptions.terrainProvider?o.height:void 0,cartographic:o,latlng:{lat:a,lng:i},crs:"EPSG:4326"})}}})),f(c(e),"onMouseMove",(function(t){if(e.props.onMouseMove&&t.endPosition){var n=e.map.camera.pickEllipsoid(t.endPosition,e.map.scene.globe.ellipsoid),r=v.getMouseXYZ(e.map,t)||n&&d.Cartographic.fromCartesian(n);if(r){var o=Math.round(r.height);e.props.onMouseMove({y:180*r.latitude/Math.PI,x:180*r.longitude/Math.PI,z:o,crs:"EPSG:4326"})}}})),f(c(e),"getMapOptions",(function(e){var t={};if(e.terrainProvider){var n=e.terrainProvider,r=n.type,a=o(n,["type"]);switch(r){case"cesium":t.terrainProvider=new d.CesiumTerrainProvider(a);break;case"ellipsoid":t.terrainProvider=new d.EllipsoidTerrainProvider}}return O({},e,t)})),f(c(e),"getCenter",(function(){var t=e.map.camera.positionCartographic;return{longitude:180*t.longitude/Math.PI,latitude:180*t.latitude/Math.PI,height:t.height}})),f(c(e),"getZoomFromHeight",(function(t){return Math.log2(e.props.zoomToHeight/t)+1})),f(c(e),"getHeightFromZoom",(function(t){return e.props.zoomToHeight/Math.pow(2,t-1)})),f(c(e),"gestureStartListener",(function(e){e.preventDefault()})),f(c(e),"setMousePointer",(function(t){e.map&&(b.findDOMNode(c(e)).getElementsByClassName("cesium-viewer")[0].style.cursor=t||"auto")})),f(c(e),"_updateMapPositionFromNewProps",(function(t){var n=e.getCenter(),r=e.getZoomFromHeight(n.height),o=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)<=1e-12},a=!o(t.center.x,n.longitude)||!o(t.center.y,n.latitude),i=t.zoom!==r;if(a||i){var s={destination:d.Cartesian3.fromDegrees(t.center.x,t.center.y,e.getHeightFromZoom(t.zoom)),orientation:t.viewerOptions.orientation};e.setView(s)}})),f(c(e),"setView",(function(t){e.props.mapOptions&&e.props.mapOptions.flyTo?e.map.camera.flyTo(t,e.props.mapOptions.defaultFlightOptions):e.map.camera.setView(t)})),f(c(e),"subscribeClickEvent",(function(t){var n={LEFT_UP:d.ScreenSpaceEventType.LEFT_UP,LEFT_DOWN:d.ScreenSpaceEventType.LEFT_DOWN,LEFT_CLICK:d.ScreenSpaceEventType.LEFT_CLICK,PINCH_START:d.ScreenSpaceEventType.PINCH_START,PINCH_END:d.ScreenSpaceEventType.PINCH_END,PINCH_MOVE:d.ScreenSpaceEventType.PINCH_MOVE},r=new y.Subject,o=new y.Subject;Object.keys(n).forEach((function(t){return e.hand.setInputAction((function(e){o.next({type:n[t],movement:e}),r.next({type:n[t],movement:e})}),n[t])})),o.filter((function(e){return e.type===n.PINCH_END})).switchMap((function(){return y.Observable.of(!0).concat(y.Observable.of(!1).delay(500))})).startWith(!1).switchMap((function(e){return e?y.Observable.never():r})).filter((function(e){return e.type===n.LEFT_DOWN})).switchMap((function(e){var t=e.movement;return r.filter((function(e){return e.type===n.LEFT_CLICK})).takeUntil(y.Observable.timer(500).merge(r.filter((function(e){return e.type!==n.LEFT_UP&&e.type!==n.LEFT_CLICK||e.type===n.LEFT_UP&&(r=t&&t.position,o=e.movement&&e.movement.position,!(r&&o&&r.x===o.x&&r.y===o.y));var r,o}))))})).subscribe((function(n){var r=n.movement;return e.onClick(t,r)})),e.clickStream$=r,e.pauserStream$=o})),f(c(e),"registerHooks",(function(){e.props.hookRegister.registerHook(S.ZOOM_TO_EXTENT_HOOK,(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.crs,o=n.duration,a=E.reprojectBbox(t,r,"EPSG:4326");if(e.map.camera.flyTo){var i=d.Rectangle.fromDegrees(a[0],a[1],a[2],a[3]);e.map.camera.flyTo({destination:i,duration:o,complete:e.updateMapInfoState})}}))})),f(c(e),"updateMapInfoState",(function(){var t=e.getCenter(),n=e.getZoomFromHeight(t.height),r={height:Math.round(e.props.standardWidth*(n+1)),width:Math.round(e.props.standardHeight*(n+1))};e.props.onMapViewChanges({x:t.longitude,y:t.latitude,crs:"EPSG:4326"},n,{bounds:{minx:-180,miny:-90,maxx:180,maxy:90},crs:"EPSG:4326",rotation:0},r,e.props.id,e.props.projection,{orientation:{heading:e.map.camera.heading,pitch:e.map.camera.pitch,roll:e.map.camera.roll}})})),e}return n=A,(r=[{key:"UNSAFE_componentWillMount",value:function(){document.addEventListener("gesturestart",this.gestureStartListener)}},{key:"componentDidMount",value:function(){var e=new d.Viewer(this.props.id,O({baseLayerPicker:!1,animation:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1},this.getMapOptions(this.props.mapOptions)));e.scene.globe.baseColor=d.Color.WHITE,e.imageryLayers.removeAll(),e.camera.moveEnd.addEventListener(this.updateMapInfoState),this.hand=new d.ScreenSpaceEventHandler(e.scene.canvas),this.subscribeClickEvent(e),this.hand.setInputAction(w(this.onMouseMove.bind(this),500),d.ScreenSpaceEventType.MOUSE_MOVE),e.camera.setView({destination:d.Cartesian3.fromDegrees(this.props.center.x,this.props.center.y,this.getHeightFromZoom(this.props.zoom))}),this.setMousePointer(this.props.mousePointer),this.map=e,this.forceUpdate(),this.props.mapOptions.navigationTools&&(this.cesiumNavigation=window.CesiumNavigation,this.cesiumNavigation&&this.cesiumNavigation.navigationInitialization(this.props.id,e)),this.props.registerHooks&&this.registerHooks()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){return e.mousePointer!==this.props.mousePointer&&this.setMousePointer(e.mousePointer),e.mapStateSource!==this.props.id&&this._updateMapPositionFromNewProps(e),!1}},{key:"componentWillUnmount",value:function(){this.clickStream$.complete(),this.pauserStream$.complete(),this.hand.destroy(),document.removeEventListener("gesturestart",this.gestureStartListener),this.map.destroy()}},{key:"render",value:function(){var e=this,t=this.map,n=this.props.projection,r=t?g.Children.map(this.props.children,(function(r){return r?g.cloneElement(r,{map:t,projection:n,onCreationError:e.props.onCreationError}):null})):null;return g.createElement("div",{id:this.props.id},r)}}])&&i(n.prototype,r),m&&i(n,m),A}(g.Component);f(A,"propTypes",{id:m.string,center:h.PropTypes.center,zoom:m.number.isRequired,mapStateSource:h.PropTypes.mapStateSource,projection:m.string,onMapViewChanges:m.func,onCreationError:m.func,onClick:m.func,onMouseMove:m.func,mapOptions:m.object,standardWidth:m.number,standardHeight:m.number,mousePointer:m.string,zoomToHeight:m.number,registerHooks:m.bool,hookRegister:m.object,viewerOptions:m.object}),f(A,"defaultProps",{id:"map",onMapViewChanges:function(){},onClick:function(){},onCreationError:function(){},projection:"EPSG:3857",mapOptions:{},standardWidth:512,standardHeight:512,zoomToHeight:8e7,registerHooks:!0,hookRegister:S,viewerOptions:{orientation:{heading:0,pitch:-1*Math.PI/2,roll:0}}}),e.exports=A},2580:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n(1),y=n(765),g=n(26),b=n(0),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(h,e);var t,n,r,o,b=(t=h,function(){var e,n=p(t);if(u()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function h(){var e;i(this,h);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(l(e=b.call.apply(b,[this].concat(n))),"updateZIndex",(function(t){var n=t||e.props.position,r=e.props.map.imageryLayers._layers.reduce((function(t,n,r){return e.provider===n?r:t}),-1),o=e.props.map.imageryLayers._layers.reduce((function(e,t,r){return-1===e&&n<t._position?r:e}),-1);-1===o&&(o=r);var a=o-r;0!==a&&Array.apply(null,{length:Math.abs(a)}).map(Number.call,Number).forEach((function(){e.props.map.imageryLayers[a>0?"raise":"lower"](e.provider)}))})),d(l(e),"setLayerVisibility",(function(t,n){t!==(e.props.options&&!1!==e.props.options.visibility)&&(t?(e.addLayer(n),e.updateZIndex()):e.removeLayer())})),d(l(e),"setLayerOpacity",(function(t){t!==(e.props.options&&void 0!==e.props.options.opacity?e.props.options.opacity:1)&&e.layer&&e.provider&&(e.provider.alpha=t)})),d(l(e),"createLayer",(function(t,n,r,o,a){if(t){var i=g({},n,r?{zIndex:r}:null,{securityToken:a});e.layer=y.createLayer(t,i,o),e.layer&&(e.layer.layerName=n.name,e.layer.layerId=n.id),null===e.layer&&e.props.onCreationError(n)}})),d(l(e),"updateLayer",(function(t,n){var r=y.updateLayer(t.type,e.layer,a({},t.options,{securityToken:t.securityToken}),a({},n.options,{securityToken:n.securityToken}),e.props.map);r&&(e.removeLayer(),e.layer=r,e.addLayer(t))})),d(l(e),"addLayerInternal",(function(t){t.options.useForElevation?e.props.map.terrainProvider=e.layer:(e.provider=e.props.map.imageryLayers.addImageryProvider(e.layer),e.provider._position=e.props.position,void 0!==t.options.opacity&&(e.provider.alpha=t.options.opacity))})),d(l(e),"addLayer",(function(t){if(e.layer&&!e.layer.detached&&(e.addLayerInternal(t),e.props.options.refresh&&e.layer.updateParams)){var n=0;e.refreshTimer=setInterval((function(){var r=e.layer.updateParams(g({},e.props.options.params,{_refreshCounter:n++}));e.removeLayer(),e.layer=r,e.addLayerInternal(t)}),e.props.options.refresh)}})),d(l(e),"removeLayer",(function(t){var n=t||e.provider;n&&e.props.map.imageryLayers.remove(n)})),e}return n=h,(r=[{key:"componentDidMount",value:function(){this.createLayer(this.props.type,this.props.options,this.props.position,this.props.map,this.props.securityToken),this.props.options&&this.layer&&!1!==this.props.options.visibility&&(this.addLayer(this.props),this.updateZIndex())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=e.options&&!1!==e.options.visibility;this.setLayerVisibility(n,e);var r=e.options&&void 0!==e.options.opacity?e.options.opacity:1;if(this.setLayerOpacity(r),e.position!==this.props.position&&(this.updateZIndex(e.position),this.provider&&(this.provider._position=e.position)),this.props.options&&this.props.options.params&&this.layer.updateParams&&e.options.visibility&&Object.keys(this.props.options.params).reduce((function(n,r){return e.options.params[r]!==t.props.options.params[r]||n}),!1)){var o=this.provider,a=this.layer.updateParams(e.options.params);this.layer=a,this.addLayer(e),setTimeout((function(){t.removeLayer(o)}),1e3)}this.updateLayer(e,this.props)}},{key:"componentWillUnmount",value:function(){this.layer&&this.props.map&&!this.props.map.isDestroyed()&&(this.layer.detached?this.layer.remove():(this.layer.destroy&&this.layer.destroy(),this.props.map.imageryLayers.remove(this.provider)),this.refreshTimer&&clearInterval(this.refreshTimer))}},{key:"render",value:function(){var e=this;if(this.props.children){var t=this.layer,n=t?m.Children.map(this.props.children,(function(n){return n?m.cloneElement(n,{container:t,styleName:e.props.options&&e.props.options.styleName}):null})):null;return m.createElement(m.Fragment,null,n)}return y.renderLayer(this.props.type,this.props.options,this.props.map,this.props.map.id,this.layer)}}])&&s(n.prototype,r),o&&s(n,o),h}(m.Component);d(h,"propTypes",{map:b.object,type:b.string,options:b.object,onCreationError:b.func,position:b.number,securityToken:b.string}),e.exports=h},2581:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(760),s=n(2936),c=n(26),l=n(2246),u=l.isMarkerStyle,p=l.isSymbolStyle,f=function e(t,n,r){for(var o,a=[],i=t.length,s=0;s<i;s++)o=n?e(t[s],n-1,r):(r||this.coordsToLatLng)(t[s]),a.push(o);return a},d=function(e){if("GeometryCollection"===e.geometry.type)return!1;var t=e.style;return t&&(u(t)||p(t)||t.iconUrl||t.iconGlyph)},m={coordsToLatLngF:function(e){return new i.LatLng(e[1],e[0],e[2])},coordsToLatLngs:f,isMarker:d,getPointLayer:function(e,t,n,r){return e?e(t,n):m.pointToLayer(n,t,o({},r.style,{highlight:r.highlight}))},pointToLayer:function(e,t,n){var r=n.Point||n.MultiPoint||n,o=function(e,t){if(e&&e.iconGlyph){var n=e.iconLibrary||"extra";if(s[n])return s[n].getIcon(e)}return e&&e.html&&t?s.html.getIcon(e,t):e&&e.iconUrl||e.symbolUrlCustomized||e.symbolUrl?s.standard.getIcon(e):null}(r,t);return o?i.marker(e,{icon:o,opacity:r&&r.opacity||1}):i.marker(e,{opacity:r&&r.opacity||1})},toValidGeoJSON:function(){},createTextPointMarkerLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pointToLayer,n=e.geojson,r=e.latlng,a=e.options,s=e.style,c=void 0===s?{}:s,l=e.highlight,u=void 0!==l&&l;if(n.properties&&n.properties.isText){var p=i.divIcon({html:'<span style="\n                font:'.concat(c.font,";\n                color:").concat(c.fillColor,";\n                -webkit-text-stroke-width:",1,"px;\n                -webkit-text-stroke-color:").concat(c.color,';">').concat(n.properties.valueText,"</span>"),className:""});return new i.Marker(r,{icon:p})}return m.getPointLayer(t,n,r,o({},a,{style:c,highlight:u}))},createPolygonCircleLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geojson,n=e.style,r=void 0===n?{}:n,a=e.latlngs,s=void 0===a?[]:a,c=e.coordsToLatLng,l=void 0===c?function(){}:c;if(t.properties&&t.properties.isCircle){var u=l(t.properties.center);return i.circle(u,o({},r,{radius:t.properties.radius}))}return new i.Polygon(s,r)},geometryToLayer:function(e,t){var n,r,a,s,l,u="Feature"===e.type?e.geometry:e,p=u?u.coordinates:null,y=[],g=o({style:t.style&&t.style[0]||t.style},e),b=t&&!d(g)?function(e,t){return i.circleMarker(t,g.style&&g.style[0]||{radius:5,color:"red",weight:1,opacity:1,fillOpacity:0})}:null,h=t&&t.coordsToLatLng||m.coordsToLatLngF;if(!p&&!u)return null;var v=g.style||c({},t.style&&t.style[u.type]||t.style,{highlight:t.style&&t.style.highlight});switch(u.type){case"Point":return n=h(p),l=m.createTextPointMarkerLayer({pointToLayer:b,geojson:e,latlng:n,options:t,style:v,highlight:v&&v.highlight});case"MultiPoint":for(a=0,s=p.length;a<s;a++)n=h(p[a]),(l=m.createTextPointMarkerLayer({pointToLayer:b,geojson:e,latlng:n,options:t,style:v,highlight:v&&v.highlight})).msId=e.id,y.push(l);return new i.FeatureGroup(y);case"LineString":return v=m.updateHighlightStyle(v),r=f(p,"LineString"===u.type?0:1,h),(l=new i.Polyline(r,v)).msId=e.id,l;case"MultiLineString":for(v=m.updateHighlightStyle(v),a=0,s=(r=f(p,"LineString"===u.type?0:1,h)).length;a<s;a++)(l=new i.Polyline(r[a],v)).msId=e.id,l&&y.push(l);return new i.FeatureGroup(y);case"Polygon":return v=m.updateHighlightStyle(v),r=f(p,"Polygon"===u.type?1:2,h),(l=m.createPolygonCircleLayer({geojson:e,style:v,latlngs:r,coordsToLatLng:h})).msId=e.id,l;case"MultiPolygon":for(v=m.updateHighlightStyle(v),a=0,s=(r=f(p,"Polygon"===u.type?1:2,h)).length;a<s;a++)(l=m.createPolygonCircleLayer({geojson:e,style:v,latlngs:r,coordsToLatLng:h})).msId=e.id,l&&y.push(l);return new i.FeatureGroup(y);case"GeometryCollection":for(a=0,s=u.geometries.length;a<s;a++)(l=m.geometryToLayer({geometry:u.geometries[a],type:"Feature",properties:e.properties},t))&&y.push(l);return new i.FeatureGroup(y);default:throw new Error("Invalid GeoJSON object.")}},updateHighlightStyle:function(e){var t=e.highlight;return t?c({},e,{dashArray:t?"10":null}):e}};e.exports=m},2590:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n(0),y=n(1),g=n(13),b=g.head,h=g.last,v=g.isNil,S=n(760);n(2589),S.Draw.Polygon.prototype._calculateFinishDistance=function(e){if(this._markers.length>0){var t=this._map.latLngToContainerPoint(this._markers[0].getLatLng()),n=this._map.latLngToContainerPoint(this._markers[this._markers.length-1].getLatLng()),r=new S.Marker(e,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),o=this._map.latLngToContainerPoint(r.getLatLng());return Math.min(t.distanceTo(o),n.distanceTo(o))}return 1/0};var E=n(196),O=E.isSimpleGeomType,w=E.getSimpleGeomType,A=n(2965).boundsToOLExtent,T=n(26),P=n(80),C=n(2581).pointToLayer,x=Math.PI/180,_=function(e,t,n){if("EPSG:4326"===n)return{center:t,srs:n,radius:e};var r=e/40075017*360/Math.cos(x*t[1]),o=P.reproject(t,"EPSG:4326",n);if(r){var a=P.reproject([t[0]+r,t[1]],"EPSG:4326",n);return{center:o,srs:n,radius:Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2))}}return{center:o,srs:n,radius:e}},R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326";if("EPSG:4326"===n||void 0===e)return{center:t,projection:n,radius:e};var r=P.reproject({x:t.lng,y:t.lat},n,"EPSG:4326");if(void 0===e)return{center:r,projection:n,radius:e};var o=P.reproject([t.lng+e,t.lat],n,"EPSG:4326"),a=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),i=a*Math.cos(x*r.y)*40075017/360;return{center:r,projection:"EPSG:4326",radius:i}},I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(y,e);var t,n,r,o,m=(t=y,function(){var e,n=p(t);if(u()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function y(){var e;i(this,y);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(l(e=m.call.apply(m,[this].concat(n))),"onDrawStart",(function(){e.drawing=!0})),d(l(e),"onDrawCreated",(function(t){e.drawing=!1;var n,r=t.layer,o=r.toGeoJSON();"marker"===t.layerType?n=S.latLngBounds(o.geometry.coordinates,o.geometry.coordinates):(r._map||(r._map=e.props.map,r._renderer=e.props.map.getRenderer(r),r._project()),n=r.getBounds());var a=A(n),i=n.getCenter();i=[i.lng,i.lat];var s=o.geometry.coordinates,c="EPSG:4326",l=o.geometry.type,u=r.getRadius?r.getRadius():0;if("circle"===t.layerType){o.projection="EPSG:4326",c="EPSG:3857",a=P.reprojectBbox(a,"EPSG:4326",c);var p=_(r._mRadius,i,c);i=p.center,u=p.radius,s=P.calculateCircleCoordinates(i,u,100),o.radius=r.getRadius?r.getRadius():0,i=[i.x,i.y],l="Polygon"}e.drawLayer.addData(o);var f={type:l,extent:a,center:i,coordinates:s,radius:u,projection:c};e.props.options&&e.props.options.stopAfterDrawing&&e.props.onChangeDrawingStatus("stop",e.props.drawMethod,e.props.drawOwner);var d=e.convertFeaturesToGeoJson(t.layer,e.props);e.props.onEndDrawing(f,e.props.drawOwner),e.props.onGeometryChanged([d],e.props.drawOwner,e.props.options&&e.props.options.stopAfterDrawing?"enterEditMode":"")})),d(l(e),"onUpdateGeom",(function(t,n){var r=e.convertFeaturesToGeoJson(t,n);n.onGeometryChanged([r],n.drawOwner)})),d(l(e),"addLayer",(function(t){e.clean();var n=S.geoJson(null,{pointToLayer:function(e,t){var n=R(e.radius,t,e.projection),r=n.center,o=n.radius;return S.circle(r,o||5)},style:function(e){return t.style&&t.style[e.geometry.type]||{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}}});e.props.map.addLayer(n),t.features&&t.features.length>0&&n.addData(e.convertFeaturesPolygonToPoint(t.features,e.props.drawMethod)),e.drawLayer=n})),d(l(e),"addGeojsonLayer",(function(t){var n=t.features,r=t.projection,o=t.style;e.clean();var a=S.geoJson(n,{style:function(e){return e.style||o},pointToLayer:function(e,t){var n=P.reproject({x:t.lng,y:t.lat},r,"EPSG:4326");return C(S.latLng(n.y,n.x),e,o)}});e.drawLayer=a.addTo(e.props.map)})),d(l(e),"replaceFeatures",(function(t){e.drawLayer?(e.drawLayer.clearLayers(),"Circle"===e.props.drawMethod?(e.drawLayer.options.pointToLayer=function(e,t){var n=R(e.radius,t,e.projection),r=n.center,o=n.radius;return S.circle(r,o||5)},e.drawLayer.options.style={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}):e.drawLayer.options.pointToLayer=function(e,n){var r=P.reproject({x:n.lng,y:n.lat},t.options&&t.options.featureProjection||"EPSG:4326","EPSG:4326");return C(S.latLng(r.y,r.x),e,t.style)},e.drawLayer.addData(e.convertFeaturesPolygonToPoint(t.features,e.props.drawMethod))):e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style})})),d(l(e),"endDrawing",(function(t){e.replaceFeatures(t);var n=h(t.features);"Circle"!==e.props.drawMethod||!n||v(n.center)||v(n.radius)?n&&e.props.onEndDrawing(n,e.props.drawOwner):e.props.onEndDrawing(a({},n,{coordinates:P.calculateCircleCoordinates(n.center,n.radius,100)}),e.props.drawOwner)})),d(l(e),"addDrawInteraction",(function(t){e.removeAllInteractions(),"Point"===t.drawMethod||"MultiPoint"===t.drawMethod?e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style}):e.addLayer(t),e.props.map.on("draw:created",e.onDrawCreated,l(e)),e.props.map.on("draw:drawstart",e.onDrawStart,l(e)),"LineString"===t.drawMethod||"Bearing"===t.drawMethod||"MultiLineString"===t.drawMethod?e.drawControl=new S.Draw.Polyline(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2},showLength:!1,repeatMode:!0,icon:new S.DivIcon({iconSize:new S.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new S.DivIcon({iconSize:new S.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"Polygon"===t.drawMethod||"MultiPolygon"===t.drawMethod?e.drawControl=new S.Draw.Polygon(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5],guidelineDistance:5},allowIntersection:!1,showLength:!1,showArea:!1,repeatMode:!0,icon:new S.DivIcon({iconSize:new S.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new S.DivIcon({iconSize:new S.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"BBOX"===t.drawMethod?e.drawControl=new S.Draw.Rectangle(e.props.map,{draw:!1,shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5]},repeatMode:!0,icon:new S.DivIcon({iconSize:new S.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new S.DivIcon({iconSize:new S.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"Circle"===t.drawMethod?e.drawControl=new S.Draw.Circle(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5]},showRadius:!1,repeatMode:!0}):"Point"!==t.drawMethod&&"MultiPoint"!==t.drawMethod||(e.drawControl=new S.Draw.Marker(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2},repeatMode:!0})),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable(),e.drawControl.enable()})),d(l(e),"addDrawOrEditInteractions",(function(t){var n,r=b(t.features);r&&r.geometry&&r.geometry.type&&!O(r.geometry.type)&&("GeometryCollection"===r.geometry.type?n=r.geometry.geometries.map((function(e){return e.coordinates.map((function(t,n){return{type:"Feature",properties:a({},r.properties),id:e.type+n,geometry:{coordinates:t,type:w(e.type)}}}))})):(n=r.geometry.coordinates.map((function(e,t){return{type:"Feature",properties:a({},r.properties),id:r.geometry.type+t,geometry:{coordinates:e,type:w(r.geometry.type)}}})),r={type:"FeatureCollection",features:n}));var o=T({},t,{features:[r||{}]});e.drawLayer?(e.drawLayer.clearLayers(),e.drawLayer.addData(e.convertFeaturesPolygonToPoint(o.features,o.drawMethod))):e.addGeojsonLayer({features:t.features&&t.options.featureProjection&&"EPSG:4326"!==t.options.featureProjection?t.features.map((function(e){return P.reprojectGeoJson(e,t.options.featureProjection,"EPSG:4326")})):t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style}),t.options.editEnabled&&e.addEditInteraction(o),t.options.drawEnabled&&e.addDrawInteraction(o)})),d(l(e),"addEditInteraction",(function(t){e.clean(),e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:T({},t.style,{poly:{icon:new S.DivIcon({iconSize:new S.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new S.DivIcon({iconSize:new S.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}})});var n=e.drawLayer.getLayers();setTimeout((function(){n.forEach((function(n){n.getLayers&&n.getLayers()&&n.getLayers().length?n.getLayers().forEach((function(n){n.on("edit",(function(n){return e.onUpdateGeom(n.target,t)})),n.on("moveend",(function(n){return e.onUpdateGeom(n.target,t)})),n.editing&&n.editing.enable()})):(n.on("edit",(function(n){return e.onUpdateGeom(n.target,t)})),n.on("moveend",(function(n){return e.onUpdateGeom(n.target,t)})),n.editing&&n.editing.enable())}))}),0),e.editControl=new S.Control.Draw({edit:{featureGroup:e.drawLayer,poly:{allowIntersection:!1},edit:!0},draw:{polygon:{allowIntersection:!1,showArea:!0}}}),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable()})),d(l(e),"removeAllInteractions",(function(){e.removeEditInteraction(),e.removeDrawInteraction()})),d(l(e),"removeDrawInteraction",(function(){null!==e.drawControl&&void 0!==e.drawControl&&(e.props.options&&e.props.options.stopAfterDrawing&&(e.drawControl.setOptions({repeatMode:!1}),e.props.onDrawStopped()),e.drawControl.disable(),e.drawControl=null,e.props.map.off("draw:created",e.onDrawCreated,l(e)),e.props.map.off("draw:drawstart",e.onDrawStart,l(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable())})),d(l(e),"removeEditInteraction",(function(){e.drawLayer&&(e.drawLayer.getLayers().forEach((function(e){e.getLayers&&e.getLayers()&&e.getLayers().length?e.getLayers().forEach((function(e){e.off("edit"),e.off("moveend"),e.editing&&e.editing.disable()})):(e.off("edit"),e.off("moveend"),e.editing&&e.editing.disable())})),e.editControl=null);e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable()})),d(l(e),"cleanAndStop",(function(){e.removeAllInteractions(),e.drawLayer&&(e.drawLayer.clearLayers(),e.props.map.removeLayer(e.drawLayer),e.drawLayer=null)})),d(l(e),"clean",(function(){e.removeEditInteraction(),e.removeDrawInteraction(),e.drawLayer&&(e.drawLayer.clearLayers(),e.props.map.removeLayer(e.drawLayer),e.drawLayer=null)})),d(l(e),"convertFeaturesPolygonToPoint",(function(e,t){return"Circle"===t?e.map((function(e){var t=void 0!==e.center&&void 0!==e.radius?R(e.radius,{lat:e.center.y,lng:e.center.x},e.projection):e,n=t.center,r=t.projection,o=t.radius;return a({},e,{coordinates:n?[n.x,n.y]:e.coordinates,center:n||e.center,projection:r||e.projection,radius:void 0!==o?o:e.radius,type:"Point"})})):e})),d(l(e),"convertFeaturesToGeoJson",(function(t,n){var r;if(O(n.drawMethod))r=t.toGeoJSON().geometry;else{if("GeometryCollection"===n.drawMethod)return{type:"GeometryCollection",geometries:e.drawLayer.getLayers().map((function(e){return e.toGeoJSON()})).map((function(e){return"FeatureCollection"===e.type?{type:"Multi"+e.features[0].geometry.type,coordinates:e.features.map((function(e){return e.geometry.coordinates}))}:{type:e.geometry.type,coordinates:e.geometry.coordinates}}))};var o=e.drawLayer.getLayers().map((function(e){return e.toGeoJSON()}));r={type:n.drawMethod,coordinates:o.reduce((function(e,t){return e.concat([t.geometry.coordinates])}),[])}}return T({},t.toGeoJSON(),{geometry:r})})),e}return n=y,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=!(!this.props.messages&&!this.context.messages)&&this.context.messages.drawLocal;if(t&&(S.drawLocal=t),this.props.drawStatus!==e.drawStatus||"replace"===e.drawStatus||this.props.drawMethod!==e.drawMethod||this.props.features!==e.features)switch(e.drawStatus){case"create":this.addGeojsonLayer({features:e.features,projection:e.options&&e.options.featureProjection||"EPSG:4326",style:e.style&&e.style[e.drawMethod]||e.style});break;case"start":this.addDrawInteraction(e);break;case"drawOrEdit":this.addDrawOrEditInteractions(e);break;case"stop":this.removeAllInteractions();break;case"replace":this.replaceFeatures(e);break;case"clean":this.cleanAndStop();break;case"endDrawing":this.endDrawing(e);break;default:return}}},{key:"render",value:function(){return null}}])&&s(n.prototype,r),o&&s(n,o),y}(y.Component);d(I,"displayName","DrawSupport"),d(I,"propTypes",{map:m.object,drawOwner:m.string,drawStatus:m.string,drawMethod:m.string,options:m.object,features:m.array,onChangeDrawingStatus:m.func,onGeometryChanged:m.func,onDrawStopped:m.func,onEndDrawing:m.func,messages:m.object,style:m.object}),d(I,"defaultProps",{map:null,drawOwner:null,drawStatus:null,drawMethod:null,features:null,options:{stopAfterDrawing:!0},onChangeDrawingStatus:function(){},onGeometryChanged:function(){},onDrawStopped:function(){},onEndDrawing:function(){},style:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1,editing:{fill:1}}}),e.exports=I},2616:function(module,exports,__webpack_require__){function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var csstree=__webpack_require__(2984),assign=__webpack_require__(26),css={fontawesome:__webpack_require__(3078)},baseImageUrl=__webpack_require__(3079),shadowImageUrl=__webpack_require__(3080),baseImage=new Image,shadowImage=new Image;baseImage.src=baseImageUrl,shadowImage.src=shadowImageUrl;var getNodeOfType=function e(t,n){return n(t)?t:t.children?t.children.reduce((function(t,r){return e(r,n)||t}),null):null},glyphs={},loadGlyphs=function loadGlyphs(font){var parsedCss=csstree.toPlainObject(csstree.parse(css[font]));return parsedCss.children.reduce((function(previous,rule){if(rule.prelude){var classSelector=getNodeOfType(rule.prelude,(function(e){return"ClassSelector"===e.type})),pseudoClassSelector=getNodeOfType(rule.prelude,(function(e){return"PseudoClassSelector"===e.type}));if(classSelector&&classSelector.name&&0===classSelector.name.indexOf("fa-")&&pseudoClassSelector&&"before"===pseudoClassSelector.name){var text=getNodeOfType(getNodeOfType(rule.block,(function(e){return"Declaration"===e.type&&"content"===e.property})).value,(function(e){return"String"===e.type})).value;return assign(previous,_defineProperty({},classSelector.name.substring(3),eval("'\\u"+text.substring(2,text.length-1)+"'")))}}return previous}),{})},extraMarkers={size:[36,46],colors:["red","orange-dark","orange","yellow","blue-dark","blue","cyan","purple","violet","pink","green-dark","green","green-light","black"],shapes:["circle","square","star","penta"],icons:[baseImageUrl,shadowImageUrl],images:[shadowImage,baseImage]},getOffsets=function(e,t){return[-extraMarkers.colors.indexOf(e)*extraMarkers.size[0]-2,-extraMarkers.shapes.indexOf(t)*extraMarkers.size[1]]},MarkerUtils={extraMarkers:assign({},extraMarkers,{getOffsets:getOffsets,markerToDataUrl:function(e){var t=e.iconColor,n=e.iconShape,r=e.iconGlyph;if(MarkerUtils.extraMarkers.images){var o=document.createElement("canvas"),a=extraMarkers.size;o.width=a[0],o.height=a[1];var i=o.getContext("2d"),s=getOffsets(t,n);i.drawImage(extraMarkers.images[0],4,31,35,16),i.drawImage(extraMarkers.images[1],Math.abs(s[0]),Math.abs(s[1]),a[0],a[1],0,0,a[0],a[1]),i.font="14px FontAwesome",i.fillStyle="rgb(255,255,255)",i.textBaseline="middle",i.textAlign="center",i.fillText(MarkerUtils.getGlyphs("fontawesome")[r]||"",a[0]/2-2,a[1]/2-7);var c=o.toDataURL("image/png");return o=null,c}return null},matches:function(e,t){return e.iconColor===t.color&&e.iconShape===t.shape},getStyle:function(e){return{iconColor:e.color,iconShape:e.shape}},getGrid:function(){return extraMarkers.shapes.map((function(e){return{name:e,markers:extraMarkers.colors.map((function(t){return{name:t,width:extraMarkers.size[0],height:extraMarkers.size[1],offsets:getOffsets(t,e),style:{color:t,shape:e},thumbnailStyle:{backgroundImage:"url("+extraMarkers.icons[0]+")",width:extraMarkers.size[0]+"px",height:extraMarkers.size[1]+"px",backgroundPositionX:getOffsets(t,e)[0],backgroundPositionY:getOffsets(t,e)[1],cursor:"pointer"}}}))}}))}}),getGlyphs:function(e){return glyphs[e]||(glyphs[e]=loadGlyphs(e)),glyphs[e]}};MarkerUtils.markers={extra:MarkerUtils.extraMarkers},module.exports=MarkerUtils},2639:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(34),o=n.n(r),a=n(80),i=n(2101),s=n(2969),c=function(e,t,n,r){if(o()(t)&&o()(t[0])&&o()(t[0][0])){var i=Object(a.reproject)(t[0][0],r,n);return Math.sqrt(Math.pow(e[0]-i.x,2)+Math.pow(e[1]-i.y,2))}return 100},l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;if(!e.getGeometry()||"Polygon"!==e.getGeometry().getType()||e.getProperties().center&&0===e.getProperties().center.length)return e;if(e.getProperties()&&e.getProperties().isCircle&&e.getProperties().center&&e.getProperties().center[0]&&e.getProperties().center[1]){var r,o=e.getGeometry().getExtent();r=e.getProperties().center?[(r=Object(a.reproject)(e.getProperties().center,"EPSG:4326",t)).x,r.y]:Object(i.x)(o);var l=e.getProperties().crs===t?e.getProperties().radius:c(r,e.getGeometry().getCoordinates(),t,n);return e.setGeometry(new s.a(r,l)),e}return e}},2645:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Te}));var r=n(1),o=n.n(r),a=n(3118),i=n.n(a),s=n(2292),c=n.n(s),l=n(2291),u=n.n(l),p=n(3119),f=n.n(p),d=n(2613),m=n.n(d),y=n(34),g=n.n(y),b=n(777),h=n.n(b),v=n(2646),S=n.n(v),E=n(2128),O=n.n(E),w=n(2336),A=n.n(w),T=n(0),P=n.n(T),C=n(26),x=n.n(C),_=n(2346),R=n.n(_),I=n(415),j=n.n(I),L=n(196),D=n(80),M=n(2246),N=n(2639),k=n(2347),G=n(2283),F=n(2343),U=n(2226),B=n(2220),H=n(2188),z=n(2296),V=n(2287),W=n(2179),Y=n(2198),q=n(2249),Z=n(2331),K=n(2332),Q=n(2969),X=n(2342),J=n(2294),$=n(2338),ee=n(2450),te=n(2632),ne=n(2205),re=n(2183),oe=n(2144),ae=n(2288),ie=n(2460),se=n(2461),ce=n(2348),le=n(2328),ue=n(2101);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){we(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?ve(e):t}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae=new F.a,Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(s,e);var t,n,r,o,a=(t=s,function(){var e,n=Ee(t);if(Se()){var r=Ee(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return he(this,e)});function s(){var e;ge(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return we(ve(e=a.call.apply(a,[this].concat(n))),"getNewFeature",(function(t,n,r,o){return new U.a({geometry:e.createOLGeometry({type:t,coordinates:n,radius:r,center:o})})})),we(ve(e),"getMapCrs",(function(){return e.props.map.getView().getProjection().getCode()})),we(ve(e),"updateFeatureStyles",(function(t){t&&t.length>0&&t.forEach((function(t){if(t.style){var n=e.toOlFeature(t);n&&n.setStyle(t.style?Object(G.d)(t):e.toOlStyle(t.style,t.selected))}}))})),we(ve(e),"updateOnlyFeatureStyles",(function(t){e.drawLayer&&e.drawLayer.getSource().getFeatures().forEach((function(e){var n=c()(t.features).features||t.features,r=u()(n,(function(t){return t.properties.id===e.getProperties().id}));if(r){var o=Object(M.createStylesAsync)(A()(r.style));j.a.all(o).then((function(t){e.setStyle((function(){return Object(G.e)(ye({},r,{style:t}))}))}))}}))})),we(ve(e),"addLayer",(function(t,n){var r,o=e.convertGeometryTypeToStyleType(t.drawMethod);r=function(e){var n=c()(t.features)&&u()(c()(t.features).features,(function(t){return t.properties.id===e.getProperties().id}))||null;if(n){var r=Object(M.createStylesAsync)(A()(n.style));return j.a.all(r).then((function(t){e.setStyle((function(){return Object(G.e)(ye({},n,{style:t}))}))})),null}return Object(G.e)({style:G.a[o]})},e.geojson=new F.a,e.drawSource=new B.a,e.drawLayer=new H.a({source:e.drawSource,zIndex:1e8,style:r}),e.props.map.addLayer(e.drawLayer),n&&e.addInteractions(t);var a=c()(t.features);if(a&&a.features&&a.features.length){var i=a.features.filter((function(e){return!e.properties.isCircle||e.properties.isCircle&&!e.properties.canEdit||!t.options.drawEnabled}));return e.addFeatures(x()({},t,{features:[ye({},a,{features:i})]}))}return e.addFeatures(t)})),we(ve(e),"addFeatures",(function(t){var n,r=t.features,o=t.drawMethod,a=t.options,i=e.getMapCrs();if(r.forEach((function(t){if("FeatureCollection"===t.type){var r=(new F.a).readFeatures(t);r=r.map((function(e){return Object(N.a)(e,i)})),e.drawSource=new B.a({features:r}),e.drawLayer.setSource(e.drawSource)}else{var a=null,s=t;s.geometry&&"GeometryCollection"!==s.geometry.type&&(s=Object(D.reprojectGeoJson)(s,s.featureProjection,i).geometry),"GeometryCollection"!==s.type&&("Circle"===o&&s&&(s.properties&&s.properties.center||s.center)?(a=[(a=s.properties&&s.properties.center?Object(D.reproject)(s.properties.center,"EPSG:4326",i):s.center).x,a.y],n=new U.a({geometry:e.createOLGeometry({type:"Circle",center:a,projection:"EPSG:3857",radius:s.properties&&s.properties.radius||s.radius})})):n=new U.a({geometry:e.createOLGeometry(s.geometry?s.geometry:ye({},s,{},s.properties,{center:a}))}),n.setProperties(t.properties),e.drawSource.addFeature(n))}})),0===r.length&&(a.editEnabled||a.drawEnabled))a.transformToFeatureCollection?(e.drawSource=new B.a({features:(new F.a).readFeatures({type:"FeatureCollection",features:[]})}),e.drawLayer.setSource(e.drawSource)):(n=new U.a({geometry:e.createOLGeometry({type:o,coordinates:null})}),e.drawSource.addFeature(n));else{if(r[0]&&"GeometryCollection"===r[0].type){e.drawSource=new B.a({features:(new F.a).readFeatures(r[0])});var s=e.replacePolygonsWithCircles(e.drawSource.getFeatures()[0]);e.drawSource.getFeatures()[0].getGeometry().setGeometries(s),e.drawLayer.setSource(e.drawSource)}r[0]&&r[0].geometry&&"GeometryCollection"===r[0].geometry.type&&(n=Object(D.reprojectGeoJson)(r[0],a.featureProjection,i).geometry,e.drawSource=new B.a({features:(new F.a).readFeatures(n)}),e.drawSource.getFeatures()[0].set("textGeometriesIndexes",r[0].properties&&r[0].properties.textGeometriesIndexes),e.drawSource.getFeatures()[0].set("textValues",r[0].properties&&r[0].properties.textValues),e.drawSource.getFeatures()[0].set("circles",r[0].properties&&r[0].properties.circles),e.drawLayer.setSource(e.drawSource))}return e.updateFeatureStyles(r),n})),we(ve(e),"replaceFeatures",(function(t){var n;return e.drawLayer?(e.drawSource.clear(),n=e.addFeatures(t),t.style&&e.drawLayer.setStyle((function(n){var r=u()(c()(t.features).features,(function(e){return e.properties.id===n.getProperties().id}));if(r){var o=Object(M.createStylesAsync)(A()(r.style));return j.a.all(o).then((function(e){n.setStyle((function(){return Object(G.e)(ye({},r,{style:e}))}))})),null}var a=e.convertGeometryTypeToStyleType(t.drawMethod);return Object(G.e)({style:G.a[a]})}))):n=e.addLayer(t,t.options&&t.options.drawEnabled||!1),n})),we(ve(e),"endDrawing",(function(t){var n=e.replaceFeatures(t);if(n){var r=e.fromOLFeature(n);"Circle"===t.drawMethod&&t&&t.features&&t.features.length&&t.features[0]&&t.features[0].radius>=0&&(r.radius=t.features[0].radius),e.props.onEndDrawing(r,t.drawOwner)}})),we(ve(e),"addDrawInteraction",(function(t,n,r,o){e.drawInteraction&&e.removeDrawInteraction(),e.drawInteraction=new z.a(e.drawPropertiesForGeometryType(t,r,e.drawSource,o)),e.props.map.disableEventListener("singleclick"),e.drawInteraction.on("drawstart",(function(){e.selectInteraction&&(e.selectInteraction.getFeatures().clear(),e.selectInteraction.setActive(!1))})),e.drawInteraction.on("drawend",(function(t){var r=t.feature.clone();if(r.set("id",R.a.v1()),"Circle"===e.props.drawMethod&&"Circle"===r.getGeometry().getType()){var o=r.getGeometry().getRadius(),a=r.getGeometry().getCenter();r.setGeometry(e.polygonFromCircle(a,o))}var i=e.fromOLFeature(r,n);e.props.onEndDrawing(i,e.props.drawOwner),e.props.options.stopAfterDrawing&&e.props.onChangeDrawingStatus("stop",e.props.drawMethod,e.props.drawOwner,e.props.features.concat([i])),e.selectInteraction&&(e.addSelectInteraction(),e.selectInteraction.setActive(!0))})),e.props.map.addInteraction(e.drawInteraction),e.setDoubleClickZoomEnabled(!1)})),we(ve(e),"toMulti",(function(e){return"Point"===e.getType()?new V.a([e.getCoordinates()]):e})),we(ve(e),"handleDrawAndEdit",(function(t,n,r,o){e.drawInteraction&&e.removeDrawInteraction(),e.drawInteraction=new z.a(e.drawPropertiesForGeometryType(Object(L.getSimpleGeomType)(t),r,Object(L.isSimpleGeomType)(t)?e.drawSource:null,o)),e.props.map.disableEventListener("singleclick"),e.drawInteraction.on("drawstart",(function(){e.selectInteraction&&(e.selectInteraction.getFeatures().clear(),e.selectInteraction.setActive(!1))})),e.drawInteraction.on("drawend",(function(r){var a=r.feature.clone(),i=R.a.v1();a.set("id",i);var s,l,p,f=a.getGeometry(),d=e.drawLayer.getSource().getFeatures(),m=e.props.features;if(e.props.options.transformToFeatureCollection){var y;if("Circle"===t){p="Polygon";var g=f.getRadius(),b=f.getCenter(),v=e.polygonCoordsFromCircle(b,g);y=e.getNewFeature(p,v),b=Object(D.reproject)(b,e.getMapCrs(),"EPSG:4326",!1);var S=o&&o.features&&o.features.length&&o.features[0]&&o.features[0].features&&o.features[0].features.length&&o.features[0].features.filter((function(e){return e.properties.isDrawing}))[0].properties.id||i;y.setProperties({isCircle:!0,radius:g,center:[b.x,b.y],id:S,crs:e.getMapCrs()})}else if("Polygon"===t){p=e.props.drawMethod;var E=f.getCoordinates();E[0].push(E[0][0]),y=e.getNewFeature(p,E)}else{p="Text"===t?"Point":e.props.drawMethod;var O=f.getCoordinates();y=e.getNewFeature(p,O),"Text"===t&&y.setProperties({isText:!0,valueText:"."})}var w=d.length>=1?fe(e.replaceCirclesWithPolygonsInFeatureColl(d)):[];y.getProperties().id||y.setProperties({id:R.a.v1()});var A=[].concat(fe(w),[y]),T=Ae.writeFeaturesObject(A),P=new B.a({features:(new F.a).readFeatures(T)});e.drawLayer.setSource(P);var C=Object(D.reprojectGeoJson)(T,e.getMapCrs(),"EPSG:4326");e.props.onGeometryChanged([C],e.props.drawOwner,e.props.options&&e.props.options.stopAfterDrawing?"enterEditMode":"","Text"===t,"Circle"===t),e.props.onEndDrawing(C,e.props.drawOwner),e.props.onDrawingFeatures([h()(C.features)])}else{if("Circle"===t){p="Polygon";var _=f.getRadius(),I=f.getCenter(),j=e.polygonCoordsFromCircle(I,_),M=e.toMulti(e.createOLGeometry({type:p,coordinates:j}));if(1===m.length&&m[0]&&!m[0].geometry)s=[],l=new X.default([M]);else if((s=e.toMulti(c()(d).getGeometry())).getGeometries){var N=e.replaceCirclesWithPolygons(c()(d));l=new X.default([].concat(fe(N),[M]))}else l=new X.default([s,M]);a.setGeometry(l)}else if("Text"===t||"MultiPoint"===t){var k=f.getCoordinates();p="MultiPoint";var G=e.toMulti(e.createOLGeometry({type:p,coordinates:[k]}));if(1!==m.length||m[0].geometry)if((s=e.toMulti(c()(d).getGeometry())).getGeometries){var U=e.replaceCirclesWithPolygons(c()(d));l=new X.default([].concat(fe(U),[G]))}else l=new X.default([s,G]);else s=[],l=new X.default([G]);a.setGeometry(l)}else if(!Object(L.isSimpleGeomType)(t)){var H;l=null,s=1!==m.length||m[0].geometry?e.toMulti(c()(d).getGeometry()):e.toMulti(e.createOLGeometry({type:t,coordinates:null}));var z=d.map((function(e){return"GeometryCollection"===e.getGeometry().getType()?e.getGeometry().getGeometries():e.getGeometry()}));"GeometryCollection"===d[0].getGeometry().getType()&&(z=z[0]);var V=u()(z,(function(e){return e.getType()===t}));if(V?e.appendToMultiGeometry(t,V,f):H=e.toMulti(e.createOLGeometry({type:t,coordinates:f.getCoordinates()})),f.getType()!==Object(L.getSimpleGeomType)(s.getType())){var W=c()(d).getGeometry().getGeometries?e.replaceCirclesWithPolygons(c()(d)):[];if(V){var Y=W.map((function(e){return e.getType()===V.getType()?V:e}));l=new X.default(Y)}else l="GeometryCollection"===s.getType()?new X.default([].concat(fe(W),[H])):"Text"===t?new X.default([H]):new X.default([s,H]);a.setGeometry(l)}else a.setGeometry(V)}var q=e.props.features[0].properties;"Text"===t&&(q=x()({},e.props.features[0].properties,{textValues:(e.props.features[0].properties.textValues||[]).concat(["."]),textGeometriesIndexes:(e.props.features[0].properties.textGeometriesIndexes||[]).concat([a.getGeometry().getGeometries().length-1])})),"Circle"===t&&(q=x()({},q,{circles:(e.props.features[0].properties.circles||[]).concat([a.getGeometry().getGeometries().length-1])}));var Z=e.fromOLFeature(a,n,q),K=new B.a({features:(new F.a).readFeatures(Z)});e.drawLayer.setSource(K);var Q=Object(D.reprojectGeoJson)(Ae.writeFeatureObject(a.clone()),e.getMapCrs(),"EPSG:4326");"Polygon"===Q.geometry.type&&Q.geometry.coordinates[0].push(Q.geometry.coordinates[0][0]),e.props.onGeometryChanged([Q],e.props.drawOwner,e.props.options&&e.props.options.stopAfterDrawing?"enterEditMode":"","Text"===t,"Circle"===t),e.props.onEndDrawing(Z,e.props.drawOwner),Z=Object(D.reprojectGeoJson)(Z,e.getMapCrs(),"EPSG:4326");var J=Object(L.isSimpleGeomType)(e.props.drawMethod)&&"GeometryCollection"!==e.props.features[0].geometry.type?e.props.features.map((function(t){return ye({},t,{featureProjection:e.getMapCrs()})})).concat([ye({},Z,{type:"Feature",geometry:{type:Z.type,coordinates:Z.coordinates},featureProjection:e.getMapCrs(),properties:q})]):[ye({},Z,{properties:q})];e.props.options.stopAfterDrawing?e.props.onChangeDrawingStatus("stop",e.props.drawMethod,e.props.drawOwner,J):e.props.onChangeDrawingStatus("replace",e.props.drawMethod,e.props.drawOwner,J.map((function(t){return Object(D.reprojectGeoJson)(t,"EPSG:4326",e.getMapCrs())})),x()({},e.props.options,{featureProjection:e.getMapCrs()})),e.selectInteraction&&(e.addSelectInteraction(),e.selectInteraction.setActive(!0))}})),e.props.map.addInteraction(e.drawInteraction),e.setDoubleClickZoomEnabled(!1)})),we(ve(e),"drawPropertiesForGeometryType",(function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={source:e.drawSource||r,type:t,style:"Marker"===t?Object(G.b)(o.style):new J.default({fill:new $.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ee.default({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new ne.default({radius:5,stroke:new ee.default({color:"rgba(0, 0, 0, 0.7)"}),fill:new $.default({color:"rgba(255, 255, 255, 0.2)"})})}),features:new re.a,condition:oe.c},i={};switch(t){case"BBOX":i.type="LineString",i.maxPoints=2,i.geometryFunction=function(e,t){var n=t;n||(n=new W.b([]));var r=e[0],o=e[1];return n.setCoordinates([[r,[r[0],o[1]],o,[o[0],r[1]],r]]),n};break;case"Circle":i.maxPoints=100,o.options&&o.options.geodesic?i.geometryFunction=function(t,n){var r=n;r||(r=new W.b([])).setProperties({geodesicCenter:fe(t[0])},!0);var o=e.props.map.getView().getProjection().getCode(),a=fe(t).map((function(t){return e.reprojectCoordinatesToWGS84(t,o)})),i=Object(D.calculateDistance)(a,"haversine"),s=Object(W.a)(a[0],i).clone().transform("EPSG:4326",o).getCoordinates();return r.setCoordinates(s),r}:i.type=t;break;case"Marker":case"Point":case"Text":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":"LineString"===t&&(i.maxPoints=n);var s="Text"===t||"Marker"===t?"Point":t;i.type=s,i.geometryFunction=function(t,n){var r=n;return r||(r=e.createOLGeometry({type:s,coordinates:null,options:o.options})),r.setCoordinates(t),r};break;default:return{}}return x()({},a,i)})),we(ve(e),"setDoubleClickZoomEnabled",(function(t){for(var n=e.props.map.getInteractions(),r=0;r<n.getLength();r++){var o=n.item(r);if(o instanceof ae.a){o.setActive(t);break}}})),we(ve(e),"updateFeatureExtent",(function(t){var n=t.features.getArray(),r=e.props.features.map((function(t){var r=c()(n.filter((function(n){return e.fromOLFeature(n).id===t.id})));return r?x()({},t,{geometry:r.geometry,center:r.center,extent:r.extent,coordinate:r.coordinates,radius:r.radius}):t}));e.props.onChangeDrawingStatus("replace",e.props.drawMethod,e.props.drawOwner,r)})),we(ve(e),"addInteractions",(function(t){e.clean(),e.drawLayer||e.addLayer(t),e.addDrawInteraction(t.drawMethod,t.options.startingPoint,t.options.maxPoints,t),t.options&&t.options.editEnabled&&(e.addSelectInteraction(),e.translateInteraction&&e.props.map.removeInteraction(e.translateInteraction),e.translateInteraction=new ie.a({features:e.selectInteraction.getFeatures()}),e.translateInteraction.setActive(!1),e.translateInteraction.on("translateend",e.updateFeatureExtent),e.props.map.addInteraction(e.translateInteraction),e.addTranslateListener(),e.modifyInteraction&&e.props.map.removeInteraction(e.modifyInteraction),e.modifyInteraction=new se.a({features:e.selectInteraction.getFeatures(),condition:function(e){return Object(oe.k)(e)&&!Object(oe.a)(e)}}),e.props.map.addInteraction(e.modifyInteraction)),e.drawSource.clear(),t.features.length>0&&e.addFeatures(t)})),we(ve(e),"addSingleClickListener",(function(e,t){return t.map.on("singleclick",e)})),we(ve(e),"addDrawOrEditInteractions",(function(t){e.state&&e.state.keySingleClickCallback&&Object(le.b)(e.state.keySingleClickCallback);e.clean();var n,r=Object(D.reprojectGeoJson)(c()(t.features),t.options.featureProjection,e.getMapCrs())||{};n=r&&r.features&&r.features.length?x()({},t,{features:[r]}):r&&r.properties&&r.properties.isCircle?x()({},t,{features:[]}):x()({},t,{features:r.geometry?[ye({},r.geometry,{properties:r.properties})]:[]}),e.drawLayer?(e.drawSource.clear(),e.addFeatures(n)):e.addLayer(n),t.options.editEnabled&&(e.addModifyInteraction(t),!1!==t.options.translateEnabled&&e.addTranslateInteraction(),t.options.addClickCallback&&e.setState({keySingleClickCallback:e.addSingleClickListener((function(n){if(e.drawSource&&t.options){var r,o=e.drawSource.getFeatures(),a=0,i=o&&o.length&&o.filter((function(e,t){return e.getProperties().canEdit&&(a=t),e.getProperties().canEdit}))[0]||null,s=i&&i.getGeometry()&&i.getGeometry().getCoordinates&&i.getGeometry().getCoordinates()||[],c=[],l=t.drawMethod;switch(l){case"Polygon":c=s.length?Object(k.isCompletePolygon)(s)?[(c=(c=f()(s[0],0,s[0].length-1)).concat([n.coordinate])).concat([s[0][0]])]:s[0].length>1?[[].concat(fe(s[0]),[n.coordinate,s[0][0]])]:[[].concat(fe(s[0]),[n.coordinate])]:[[n.coordinate]],(r=e.getNewFeature(l,c)).setProperties(m()(i&&i.getProperties()||{},"geometry"));break;case"LineString":case"MultiPoint":c=s.length?[].concat(fe(s),[n.coordinate]):[n.coordinate],(r=e.getNewFeature(l,c)).setProperties(m()(i&&i.getProperties()||{},"geometry"));break;case"Circle":l="Polygon";var u=i&&i.getProperties()&&i.getProperties().radius||1e4,p=n.coordinate,d=e.polygonCoordsFromCircle(p,u);r=e.getNewFeature(l,d),p=Object(D.reproject)(p,e.getMapCrs(),"EPSG:4326",!1),r.setProperties(m()(i&&i.getProperties()||{},"geometry")),r.setProperties({isCircle:!0,radius:u,center:[p.x,p.y]});break;case"Text":l="Point",(r=e.getNewFeature(l,n.coordinate)).setProperties(m()(i&&i.getProperties()||{},"geometry")),r.setProperties({isText:!0,valueText:i&&i.getProperties()&&i.getProperties().valueText||t.options.defaultTextAnnotation||"New"});break;default:c=n.coordinate,(r=e.getNewFeature(l,c)).setProperties(m()(i&&i.getProperties()||{},"geometry"))}var y={type:"Feature",geometry:{coordinates:fe(Object(D.reprojectGeoJson)(Ae.writeFeaturesObject([r.clone()]),e.getMapCrs(),"EPSG:4326").features[0].geometry.coordinates),type:l},properties:ye({},m()(r.getProperties(),"geometry"))};e.props.onDrawingFeatures([y]),r=Object(N.a)(r,e.getMapCrs()),o[a]=r,e.drawSource=new B.a({features:o}),e.drawLayer.setSource(e.drawSource),e.addModifyInteraction(t)}}),t)})),t.options&&t.options.selectEnabled&&e.addSelectInteraction(t.options&&t.options.selected,t),t.options.drawEnabled&&e.handleDrawAndEdit(t.drawMethod,t.options.startingPoint,t.options.maxPoints,t)})),we(ve(e),"addSelectInteraction",(function(t,n){var r;if(e.selectInteraction&&e.props.map.removeInteraction(e.selectInteraction),t&&(r=u()(e.drawSource.getFeatures(),(function(e){return e.getProperties().id===t.properties.id})))&&e.selectFeature(r),e.selectInteraction=new ce.a({layers:[e.drawLayer],features:new re.a(t&&r?[r]:null)}),r){var o=e.convertGeometryTypeToStyleType(n.drawMethod);r.setStyle(Object(G.d)(ye({},n,{style:ye({},n.style,{type:o,highlight:!0,useSelectedStyle:n.options.useSelectedStyle})}),!1,n.features[0]&&n.features[0].properties&&n.features[0].properties.valueText&&[n.features[0].properties.valueText]||[]))}e.selectInteraction.on("select",(function(t){var n=e.selectInteraction.getFeatures().getArray(),r=[];return n.length&&(r=e.props.features.map((function(r){var o;if("FeatureCollection"===r.type&&n.length>0){var a=c()(n);if(e.selectFeature(a),a.getGeometry&&"Circle"===a.getGeometry().getType()){var i=a.getGeometry().getRadius(),s=Object(D.reproject)(a.getGeometry().getCenter(),e.getMapCrs(),"EPSG:4326");a.setProperties({center:[s.x,s.y],radius:i}),a=e.replaceCircleWithPolygon(a.clone())}return e.drawSource.getFeatures().forEach((function(t){t.getProperties().id===a.getProperties().id?e.selectFeature(a):e.deselectFeature(t)})),Object(D.reprojectGeoJson)(Ae.writeFeatureObject(a.clone()),e.getMapCrs(),"EPSG:4326")}return o=n.reduce((function(e,t){return t.get("id")===r.id||e}),!1),x()({},r,{selected:o,selectedFeature:t.selected})})),e.props.onSelectFeatures(r)),0===n.length?(e.props.onSelectFeatures([]),e.drawSource.getFeatures().map((function(t){return e.deselectFeature(t)})),null):null})),e.props.map.addInteraction(e.selectInteraction)})),we(ve(e),"selectFeature",(function(e){e.setProperties({selected:!0})})),we(ve(e),"deselectFeature",(function(e){e.setProperties({selected:!1})})),we(ve(e),"removeDrawInteraction",(function(){e.drawInteraction&&(e.props.map.removeInteraction(e.drawInteraction),e.drawInteraction=null,setTimeout((function(){return e.props.map.enableEventListener("singleclick")}),500),setTimeout((function(){return e.setDoubleClickZoomEnabled(!0)}),250))})),we(ve(e),"removeInteractions",(function(){e.removeDrawInteraction(),e.selectInteraction&&(e.props.map.enableEventListener("singleclick"),e.props.map.removeInteraction(e.selectInteraction)),e.modifyInteraction&&(e.props.map.removeInteraction(e.modifyInteraction),e.props.map.un("singleclick")),e.translateInteraction&&e.props.map.removeInteraction(e.translateInteraction)})),we(ve(e),"clean",(function(t){t||e.removeInteractions(),e.drawLayer&&(e.props.map.removeLayer(e.drawLayer),e.geojson=null,e.drawLayer=null,e.drawSource=null)})),we(ve(e),"fromOLFeature",(function(t,n,r){var o=t.getGeometry(),a=e.props.map.getView().getProjection().getCode(),s=o.getType();if(o.getCoordinates){var c,l=o.getExtent(),u=o.getProperties(),p=u&&u.geodesicCenter||Object(ue.x)(l),f=o.getCoordinates();if(n&&(f=i()(n,f),o.setCoordinates(f)),"Circle"===e.props.drawMethod)if(e.props.options.geodesic){var d=[fe(p),fe(f[0][0])].map((function(t){return e.reprojectCoordinatesToWGS84(t,a)}));c=Object(D.calculateDistance)(d,"haversine")}else c=e.calculateRadius(p,f);return x()({},{id:t.get("id"),type:s,extent:l,center:p,coordinates:f,radius:c,style:e.fromOlStyle(t.getStyle()),projection:e.getMapCrs()})}var m=o.getGeometries().map((function(o,s){var c,l=o.getExtent(),u=Object(ue.x)(l),p=o.getCoordinates();if(n&&(p=i()(n,p),o.setCoordinates(p)),r.circles&&-1!==r.circles.indexOf(s))if(e.props.options.geodesic){var f=[fe(u),fe(p[0][0])].map((function(t){return e.reprojectCoordinatesToWGS84(t,a)}));c=Object(D.calculateDistance)(f,"haversine")}else c=e.calculateRadius(u,p);else c=0;return x()({},{id:t.get("id"),type:o.getType(),extent:l,center:u,coordinates:p,radius:c,style:e.fromOlStyle(t.getStyle()),projection:e.getMapCrs()})}));return x()({},{type:"Feature",id:t.get("id"),style:e.fromOlStyle(t.getStyle()),geometry:{type:"GeometryCollection",geometries:m},projection:a})})),we(ve(e),"reprojectCoordinatesToWGS84",(function(e,t){var n=Object(D.reproject)(e,t,"EPSG:4326");return[n.x,n.y]})),we(ve(e),"toOlFeature",(function(t){return c()(e.drawSource.getFeatures().filter((function(e){return e.get("id")===t.id})))})),we(ve(e),"fromOlStyle",(function(t){return t?{fillColor:e.rgbToHex(t.getFill().getColor()),fillTransparency:t.getFill().getColor()[3],strokeColor:t.getStroke().getColor(),strokeWidth:t.getStroke().getWidth(),text:t.getText().getText()}:{}})),we(ve(e),"toOlStyle",(function(t,n,r){var o=t&&t.fillColor?t.fillColor:[255,255,255,.2];"string"==typeof o&&(o=e.hexToRgb(o).concat([t.fillOpacity>=0&&t.fillOpacity<=1?t.fillOpacity:1])),t&&t.fillTransparency&&(o[3]=t.fillTransparency);var a=t&&(t.strokeColor||t.color)?t.strokeColor||t.color:"#ffcc33";n&&(a="#4a90e2"),a=e.hexToRgb(a).concat([t&&t.opacity||1]);var i=new J.default({fill:new $.default({color:o}),stroke:new ee.default({color:a,width:t&&(t.strokeWidth||t.weight)?t.strokeWidth||t.weight:2}),text:new te.default({text:t&&t.text?t.text:"",fill:new $.default({color:t&&(t.strokeColor||t.color)?t.strokeColor||t.color:"#000"}),stroke:new ee.default({color:"#fff",width:2}),font:t&&t.fontSize?t.fontSize+"px helvetica":""})});return"GeometryCollection"===r?[].concat(fe(Object(G.c)({style:{iconGlyph:"comment",iconShape:"square",iconColor:"blue"}})),[i]):t&&(t.iconUrl||t.iconGlyph)?Object(G.c)({style:t}):i})),we(ve(e),"hexToRgb",(function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})));return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null})),we(ve(e),"componentToHex",(function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})),we(ve(e),"rgbToHex",(function(t){return"#"+e.componentToHex(t[0])+e.componentToHex(t[1])+e.componentToHex(t[2])})),we(ve(e),"addModifyInteraction",(function(t){e.modifyInteraction&&e.props.map.removeInteraction(e.modifyInteraction);var n=t&&t.options&&t.options.editFilter;e.modifyFeatureColl=new re.a(S()(e.drawLayer.getSource().getFeatures(),n)),e.modifyInteraction=new se.a({features:e.modifyFeatureColl,condition:function(e){return Object(oe.k)(e)&&!Object(oe.a)(e)}}),e.modifyInteraction.on("modifyend",(function(t){var n=t.features.getArray().map((function(t){var n=t.clone();if(n.getGeometry&&"GeometryCollection"===n.getGeometry().getType()&&n.getGeometry().setGeometries(e.replaceCirclesWithPolygons(n)),n.getGeometry&&n.getGeometry()&&"Circle"===n.getGeometry().getType()){var r=Object(D.reproject)(n.getGeometry().getCenter(),e.getMapCrs(),"EPSG:4326"),o=n.getGeometry().getRadius();n.setProperties({center:[r.x,r.y],radius:o}),t.setProperties({center:[r.x,r.y],radius:o}),n=e.replaceCircleWithPolygon(n.clone())}return Object(D.reprojectGeoJson)(Ae.writeFeatureObject(n),e.getMapCrs(),"EPSG:4326")}));e.props.options.transformToFeatureCollection?e.props.onDrawingFeatures(n):e.props.onGeometryChanged(n,e.props.drawOwner,!1,"editing","editing")})),e.props.map.addInteraction(e.modifyInteraction)})),we(ve(e),"addTranslateInteraction",(function(){e.translateInteraction&&e.props.map.removeInteraction(e.translateInteraction),e.translateInteraction=new ie.a({features:new re.a(e.drawLayer.getSource().getFeatures())}),e.translateInteraction.setActive(!1),e.translateInteraction.on("translateend",(function(t){var n=t.features.getArray().map((function(t){var n=t.clone();if(n.getGeometry&&"GeometryCollection"===n.getGeometry().getType()&&n.getGeometry().setGeometries(e.replaceCirclesWithPolygons(n)),n.getGeometry&&n.getGeometry()&&"Circle"===n.getGeometry().getType()){var r=Object(D.reproject)(n.getGeometry().getCenter(),e.getMapCrs(),"EPSG:4326"),o=n.getGeometry().getRadius();n.setProperties({center:[r.x,r.y],radius:o}),n=e.replaceCircleWithPolygon(n)}return t.getProperties()&&t.getProperties().selected&&e.props.onSelectFeatures([Object(D.reprojectGeoJson)(Ae.writeFeatureObject(n),e.getMapCrs(),"EPSG:4326")]),Object(D.reprojectGeoJson)(Ae.writeFeatureObject(n),e.getMapCrs(),"EPSG:4326")}));e.props.options.transformToFeatureCollection?e.props.onDrawingFeatures(n):e.props.onGeometryChanged(n,e.props.drawOwner,e.props.drawOwner,!1,"Text"===e.props.drawMethod,"Circle"===e.props.drawMethod)})),e.addTranslateListener(),e.props.map.addInteraction(e.translateInteraction)})),we(ve(e),"createOLGeometry",(function(t){var n=t.type,r=t.coordinates,o=t.radius,a=t.center,i=t.geometries,s=t.projection,c=t.options,l=void 0===c?{}:c;return"GeometryCollection"===n?i&&i.length?new X.default(i.map((function(t){return e.olGeomFromType({type:t.type})}))):new X.default([]):e.olGeomFromType({type:n,coordinates:r,radius:o,center:a,projection:s,options:l})})),we(ve(e),"olGeomFromType",(function(t){var n,r=t.type,o=t.coordinates,a=t.radius,i=t.center,s=t.projection,c=t.options;switch(r){case"Point":case"Marker":case"Text":n=new Y.a(o||[]);break;case"LineString":n=new q.a(o||[]);break;case"MultiPoint":n=new V.a(o||[]);break;case"MultiLineString":n=new Z.a(o||[]);break;case"MultiPolygon":n=new K.a(o||[]);break;default:var l=g()(i)?{x:i[0],y:i[1]}:i,u=s&&!isNaN(parseFloat(a))&&l&&!O()(l.x)&&!O()(l.y)&&!isNaN(parseFloat(l.x))&&!isNaN(parseFloat(l.y));(n=u?c.geodesic?Object(W.a)(e.reprojectCoordinatesToWGS84([l.x,l.y],s),a,100).clone().transform("EPSG:4326",s):Object(W.c)(new Q.a([l.x,l.y],a),100):new W.b(o&&g()(o[0])?o:[]))&&u&&c.geodesic&&n.setProperties({geodesicCenter:[l.x,l.y]},!0)}return n})),we(ve(e),"convertGeometryTypeToStyleType",(function(e){switch(e){case"BBOX":return"LineString";default:return e}})),we(ve(e),"appendToMultiGeometry",(function(e,t,n){switch(e){case"MultiPoint":t.appendPoint(n);break;case"MultiLineString":t.appendLineString(n);break;case"MultiPolygon":var r=n.getCoordinates();r[0].push(r[0][0]),n.setCoordinates(r),t.appendPolygon(n)}})),we(ve(e),"calculateRadius",(function(e,t){return g()(t)&&g()(t[0])&&g()(t[0][0])?Math.sqrt(Math.pow(e[0]-t[0][0][0],2)+Math.pow(e[1]-t[0][0][1],2)):100})),we(ve(e),"polygonFromCircle",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return Object(W.c)(new Q.a(e,t),n)})),we(ve(e),"polygonCoordsFromCircle",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return e.polygonFromCircle(t,n,r).getCoordinates()})),we(ve(e),"replaceCirclesWithPolygonsInFeatureColl",(function(t){return t.map((function(t){return"Circle"!==t.getGeometry().getType()?t:e.replaceCircleWithPolygon(t)}))})),we(ve(e),"replaceCircleWithPolygon",(function(t){if(t.getProperties().isCircle&&"Circle"===t.getGeometry().getType()){var n=t.getGeometry().getCenter(),r=t.getGeometry().getRadius();return t.setGeometry(e.polygonFromCircle(n,r)),t}return t})),we(ve(e),"replaceCirclesWithPolygons",(function(t){return t.getGeometry&&!t.getGeometry().getGeometries?t:t.getGeometry().getGeometries().map((function(n,r){if("Circle"!==n.getType())return n;if(t.getProperties()&&t.getProperties().circles&&-1!==t.getProperties().circles.indexOf(r)){var o=n.getCenter(),a=n.getRadius();return e.polygonFromCircle(o,a)}return n}))})),we(ve(e),"replacePolygonsWithCircles",(function(t){return t.getGeometry().getGeometries().map((function(n,r){if("Polygon"!==n.getType())return n;if(t.getProperties()&&t.getProperties().circles&&-1!==t.getProperties().circles.indexOf(r)){var o=n.getExtent(),a=Object(ue.x)(o),i=e.calculateRadius(a,n.getCoordinates());return new Q.a(a,i)}return n}))})),we(ve(e),"addTranslateListener",(function(){document.addEventListener("keydown",(function(t){t.altKey&&"AltLeft"===t.code&&e.translateInteraction.setActive(!0)})),document.addEventListener("keyup",(function(t){"AltLeft"===t.code&&e.translateInteraction.setActive(!1)}))})),e}return n=s,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.drawLayer&&this.updateFeatureStyles(e.features),!e.drawStatus&&this.selectInteraction&&this.selectInteraction.getFeatures().clear(),this.props.drawStatus!==e.drawStatus||this.props.drawMethod!==e.drawMethod||this.props.features!==e.features)switch(e.drawStatus){case"create":this.addLayer(e);break;case"start":this.addInteractions(e);break;case"drawOrEdit":this.addDrawOrEditInteractions(e);break;case"stop":this.removeDrawInteraction();break;case"replace":this.replaceFeatures(e);break;case"updateStyle":this.updateOnlyFeatureStyles(e);break;case"clean":this.clean();break;case"cleanAndContinueDrawing":this.clean(!0);break;case"endDrawing":this.endDrawing(e);break;default:return}}},{key:"render",value:function(){return null}}])&&be(n.prototype,r),o&&be(n,o),s}(o.a.Component);we(Te,"propTypes",{map:P.a.object,drawOwner:P.a.string,drawStatus:P.a.string,drawMethod:P.a.string,options:P.a.object,features:P.a.array,onChangeDrawingStatus:P.a.func,onGeometryChanged:P.a.func,onDrawStopped:P.a.func,onDrawingFeatures:P.a.func,onSelectFeatures:P.a.func,onEndDrawing:P.a.func,style:P.a.object}),we(Te,"defaultProps",{map:null,drawOwner:null,drawStatus:null,drawMethod:null,features:null,options:{stopAfterDrawing:!0},onChangeDrawingStatus:function(){},onGeometryChanged:function(){},onDrawStopped:function(){},onDrawingFeatures:function(){},onSelectFeatures:function(){},onEndDrawing:function(){}})},2647:function(e,t,n){var r={"./cesium/plugins/index":2462,"./leaflet/plugins/index":2464,"./openlayers/plugins/index":2465};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=2647},2649:function(e,t,n){var r=n(71),o=n(3150),a=n(417).Promise,i=new o(100),s=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-9999,a=r*e+n;try{var i=t.dataView.getInt16(2*a,!1);if(i!==o&&32767!==i&&-32768!==i)return i}catch(e){}return null};e.exports={loadTile:function(e,t,n){return i.has(n)?null:new a((function(o,a){r.get(e,{responseType:"arraybuffer"}).then((function(e){!function(e,t,n){i.set(n,{data:e,dataView:new DataView(e),coords:t,current:!0,status:"success"})}(e.data,t,n),o()})).catch((function(e){!function(e,t,n){i.set(n,{coords:t,current:!0,status:"error: "+e})}(e.message,t,n),a(e)}))}))},getElevation:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-9999,o=i.get(e);return o&&"success"===o.status?{available:!0,value:s(n,o,t.x,t.y,r)}:o&&"loading"===o.status?{available:!1,message:"elevationLoading"}:o&&"error"===o.status?{available:!1,message:"elevationLoadingError"}:{available:!1,message:"elevationNotAvailable"}},reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=new o(e.max||100)}}},2652:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(2572),o=n(2343),a=n(2653),i=n(2283),s={"application/vnd.mapbox-vector-tile":r.a,"application/json;type=geojson":o.a,"application/json;type=topojson":a.a},c=function(e,t){Object(i.d)({asPromise:!0,style:e}).then((function(e){t.setStyle(e)})).catch((function(){}))}},2655:function(e,t,n){var r=n(53),o=n(197),a=n(413).loadMaps,i=n(47);function s(e,t,n,r){return{type:"LOGIN_SUCCESS",userDetails:e,authHeader:"Basic "+btoa(t+":"+n),username:t,password:n,authProvider:r}}function c(e){return{type:"LOGIN_FAIL",error:e}}function l(e){return{type:"LOGOUT",redirectUrl:e}}function u(e,t){return{type:"SESSION_VALID",userDetails:e,authProvider:t}}e.exports={CHECK_LOGGED_USER:"CHECK_LOGGED_USER",LOGIN_SUBMIT:"LOGIN_SUBMIT",LOGIN_PROMPT_CLOSED:"LOGIN:LOGIN_PROMPT_CLOSED",LOGIN_REQUIRED:"LOGIN:LOGIN_REQUIRED",CHANGE_PASSWORD:"CHANGE_PASSWORD",CHANGE_PASSWORD_SUCCESS:"CHANGE_PASSWORD_SUCCESS",CHANGE_PASSWORD_FAIL:"CHANGE_PASSWORD_FAIL",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAIL:"LOGIN_FAIL",RESET_ERROR:"RESET_ERROR",LOGOUT:"LOGOUT",REFRESH_SUCCESS:"REFRESH_SUCCESS",SESSION_VALID:"SESSION_VALID",checkLoggedUser:function(){return{type:"CHECK_LOGGED_USER"}},login:function(e,t){return function(n,o){return r.login(e,t).then((function(c){n(s(c,e,t,r.authProviderName)),n(a(!1,o().maps&&o().maps.searchText||i.getDefaults().initialMapFilter||"*"))})).catch((function(e){n(c(e))}))}},loginPromptClosed:function(){return{type:"LOGIN:LOGIN_PROMPT_CLOSED"}},loginRequired:function(){return{type:"LOGIN:LOGIN_REQUIRED"}},loginSuccess:s,loginFail:c,logout:l,changePassword:function(e,t){return function(n){r.changePassword(e,t).then((function(){n(function(e,t){return{type:"CHANGE_PASSWORD_SUCCESS",user:e,authHeader:"Basic "+btoa(e.name+":"+t)}}(e,t))})).catch((function(e){n(function(e){return{type:"CHANGE_PASSWORD_FAIL",error:e}}(e))}))}},logoutWithReload:function(){return function(e,t){e(l(null)),e(a(!1,t().maps&&t().maps.searchText||i.getDefaults().initialMapFilter||"*"))}},resetError:function(){return{type:"RESET_ERROR"}},refreshAccessToken:function(){return function(e){var t=o.getToken(),n=o.getRefreshToken();r.refreshToken(t,n).then((function(t){var n,o;e((n=t,o=r.authProviderName,{type:"REFRESH_SUCCESS",userDetails:n,authProvider:o}))})).catch((function(){e(l(null))}))}},verifySession:function(){return function(e){r.verifySession().then((function(t){e(u(t,r.authProviderName))})).catch((function(){e(l(null))}))}},sessionValid:u}},2656:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n(1),s=n(757).Glyphicon,c=n(88).connect,l=n(195),u=l.createSelector,p=l.createStructuredSelector,f=n(26),d=n(268).mapSelector,m=n(408).layersSelector,y=n(2141).mapTypeSelector,g=n(772),b=g.generalInfoFormatSelector,h=g.clickPointSelector,v=g.indexSelector,S=g.responsesSelector,E=g.validResponsesSelector,O=g.showEmptyMessageGFISelector,w=g.isHighlightEnabledSelector,A=g.currentFeatureSelector,T=g.currentFeatureCrsSelector,P=n(2165),C=P.hideMapinfoMarker,x=P.showMapinfoRevGeocode,_=P.hideMapinfoRevGeocode,R=P.clearWarning,I=P.toggleMapInfoState,j=P.changeMapInfoFormat,L=P.updateCenterToMarker,D=P.closeIdentify,M=P.purgeMapInfoResults,N=P.featureInfoClick,k=P.changeFormat,G=P.toggleShowCoordinateEditor,F=P.changePage,U=P.toggleHighlightFeature,B=n(409),H=B.changeMousePointer,z=B.zoomToExtent,V=n(766).currentLocaleSelector,W=n(2137).mapLayoutValuesSelector,Y=n(407),q=Y.compose,Z=Y.defaultProps,K=n(273),Q=n(2158),X=n(3189),J=X.defaultViewerHandlers,$=X.defaultViewerDefaultProps,ee=n(3190).identifyLifecycle,te=n(3191),ne=n(3192),re=n(3193),oe=n(2189);n(3194);var ae=p({enabled:function(e){return e.mapInfo&&e.mapInfo.enabled||e.controls&&e.controls.info&&e.controls.info.enabled||!1},responses:S,validResponses:E,requests:function(e){return e.mapInfo&&e.mapInfo.requests||[]},format:b,map:d,layers:m,point:h,showModalReverse:function(e){return e.mapInfo&&e.mapInfo.showModalReverse},reverseGeocodeData:function(e){return e.mapInfo&&e.mapInfo.reverseGeocodeData},warning:function(e){return e.mapInfo&&e.mapInfo.warning},currentLocale:V,dockStyle:function(e){return W(e,{height:!0})},formatCoord:function(e){return e.mapInfo&&e.mapInfo.formatCoord},showCoordinateEditor:function(e){return e.mapInfo&&e.mapInfo.showCoordinateEditor},showEmptyMessageGFI:function(e){return O(e)}}),ie=q(c(u(v,(function(e){return{index:e}})),{setIndex:F}),Z({index:0})),se=q(ie,$,J,Q((function(e){return 0===e.responses.length})))(n(3196)),ce=Z({formatCoord:"decimal",enabled:!1,draggable:!0,collapsible:!1,format:K.getDefaultInfoFormatValue(),requests:[],responses:[],viewerOptions:{},viewer:se,purgeResults:function(){},hideMarker:function(){},clearWarning:function(){},changeMousePointer:function(){},showRevGeocode:function(){},hideRevGeocode:function(){},containerProps:{continuous:!1},enabledCoordEditorButton:!0,showCoordinateEditor:!1,showModalReverse:!1,reverseGeocodeData:{},enableRevGeocode:!0,wrapRevGeocode:!1,style:{},point:{},layer:null,map:{},layers:[],panelClassName:"modal-dialog info-panel modal-content",headerClassName:"modal-header",bodyClassName:"modal-body info-wrap",dock:!0,headerGlyph:"",closeGlyph:"1-close",className:"square-button",currentLocale:"en-US",fullscreen:!1,showTabs:!0,showCoords:!0,showLayerTitle:!0,position:"right",size:660,getToolButtons:ne,getNavigationButtons:re,showFullscreen:!1,validResponses:[],validator:K.getValidator,zIndex:1050}),le=q(c(ae,{purgeResults:M,closeIdentify:D,onChangeClickPoint:N,onToggleShowCoordinateEditor:G,onChangeFormat:k,changeMousePointer:H,clearWarning:R,hideMarker:C,showRevGeocode:x,hideRevGeocode:_,onEnableCenterToMarker:L.bind(null,"enabled")}),q(c(p({highlight:w,currentFeature:A,currentFeatureCrs:T}),{toggleHighlightFeature:U,zoomToExtent:z}),te),c(u(y,(function(e){return{mapType:e}})),{},(function(e,t,n){var i=e.mapType,s=n.showHighlightFeatureButton;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a(n,["showHighlightFeatureButton"]),{showHighlightFeatureButton:"openlayers"===i&&s})})),ce,ie,J,ee)(n(3198)),ue=c((function(e){return{infoFormat:b(e)}}),{onInfoFormatChange:j})(n(3237));e.exports={IdentifyPlugin:f(le,{Toolbar:{name:"info",position:6,tooltip:"info.tooltip",icon:i.createElement(s,{glyph:"map-marker"}),help:i.createElement(oe,{msgId:"helptexts.infoButton"}),action:I,selector:function(e){return{bsStyle:e.mapInfo&&e.mapInfo.enabled?"success":"primary",active:!(!e.mapInfo||!e.mapInfo.enabled)}}},Settings:{tool:i.createElement(ue,{key:"featureinfoformat",label:i.createElement(oe,{msgId:"infoFormatLbl"})}),position:3}}),reducers:{mapInfo:n(2673)},epics:n(3241)}},2659:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a=n(1),i=n(407).compose,s=n(2100),c=n(13).omit,l=n(757),u=l.Button,p=l.Glyphicon,f=n(2228),d=n(3199),m=n(2660);e.exports=i(d,m)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.glyph,n=e.loading,i=e.text,l=void 0===i?"":i,d=e.textId,m=e.glyphClassName,y=void 0===m?"":m,g=e.loaderProps,b=void 0===g?{}:g,h=e.children,v=o(e,["glyph","loading","text","textId","glyphClassName","loaderProps","children"]);return a.createElement(u,c(v,["pullRight","confirmNo","confirmYes"]),t&&!n?a.createElement(p,{glyph:t,className:y}):null,d?a.createElement(s,{msgId:d}):l,n?a.createElement(f,r({className:"ms-loader".concat(v.bsStyle&&" ms-loader-"+v.bsStyle||"").concat(v.bsSize&&" ms-loader-"+v.bsSize||"")},b)):null,h)}))},2660:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(407),d=f.branch,m=f.toClass,y=n(0),g=n(13).omit,b=n(757).Popover,h=n(2111);e.exports=d((function(e){return e.popover}),(function(e){var t,n;return n=t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(y,t);var n,r,u,f,d=(n=y,function(){var e,t=c(n);if(s()){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return i(this,e)});function y(){return o(this,y),d.apply(this,arguments)}return r=y,(u=[{key:"renderPopover",value:function(){return p.createElement(b,g(this.props.popover,["trigger","placement","text"]),this.props.popover.text)}},{key:"renderContent",value:function(){var t=m(e);return p.createElement(t,g(this.props,["popover"]))}},{key:"render",value:function(){var e=!0===this.props.popover.trigger?["hover","focus"]:this.props.popover.trigger;return p.createElement("span",null,p.createElement(h,{trigger:e,placement:this.props.popover.placement,overlay:this.renderPopover()},this.renderContent()))}}])&&a(r.prototype,u),f&&a(r,f),y}(p.Component),u(t,"propTypes",{popover:y.object}),u(t,"defaultProps",{popover:{trigger:!0}}),n}))},2669:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1),d=n(0),m=n(757),y=m.Row,g=m.Col,b=m.Glyphicon,h=m.Button,v=n(2113),S=n(3230),E=n(2670),O=n(2100),w=n(2672),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(S,e);var t,n,r,d,m=(t=S,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function S(){var e;o(this,S);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=m.call.apply(m,[this].concat(n))),"defaultProps",{showLabels:!1,formatVisible:!1,onMouseEnter:function(){},onMouseLeave:function(){}}),e}return n=S,(r=[{key:"render",value:function(){var e=this,t=this.props.idx,n=f.createElement("div",null,f.createElement(h,{disabled:!this.props.isDraggableEnabled,className:"square-button-md no-border btn btn-default",style:{display:"flex",cursor:this.props.isDraggableEnabled&&"grab"}},f.createElement(b,{glyph:"menu-hamburger",style:{pointerEvents:this.props.isDraggableEnabled?"auto":"none"}})));return f.createElement(y,{className:"coordinateRow ".concat(this.props.format||""," ").concat(this.props.customClassName||""),style:this.props.customClassName?{}:{marginLeft:-5,marginRight:-5},onMouseEnter:function(){e.props.onMouseEnter&&e.props.component.lat&&e.props.component.lon&&e.props.onMouseEnter(e.props.component)},onMouseLeave:function(){e.props.onMouseLeave&&e.props.component.lat&&e.props.component.lon&&e.props.onMouseLeave()}},f.createElement(g,{xs:1},this.props.showDraggable?this.props.isDraggable?this.props.connectDragSource(n):n:null),f.createElement("div",{className:"coordinate lat",style:{width:"100%"}},f.createElement(g,{xs:5},this.props.showLabels&&f.createElement("div",null,f.createElement(O,{msgId:"latitude"})),f.createElement(E,{format:this.props.format,aeronauticalOptions:this.props.aeronauticalOptions,coordinate:"lat",idx:t,value:this.props.component.lat,onChange:function(n){return e.props.onChange(t,"lat",n)},constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}}))),f.createElement("div",{className:"coordinate lon",style:{width:"100%"}},f.createElement(g,{xs:5},this.props.showLabels&&f.createElement("div",null,f.createElement(O,{msgId:"longitude"})),f.createElement(E,{format:this.props.format,aeronauticalOptions:this.props.aeronauticalOptions,coordinate:"lon",idx:t,value:this.props.component.lon,onChange:function(n){return e.props.onChange(t,"lon",n)},constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}}))),f.createElement(g,{xs:1},f.createElement(v,{btnGroupProps:{className:"pull-right"},btnDefaultProps:{className:"square-button-md no-border"},buttons:[{visible:this.props.removeVisible,disabled:!this.props.removeEnabled,glyph:"trash",onClick:function(){e.props.onRemove(t)}},{buttonConfig:{title:f.createElement(b,{glyph:"cog"}),className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===this.props.format,onClick:function(){e.props.onChangeFormat("decimal")},text:f.createElement(O,{msgId:"search.decimal"})},{active:"aeronautical"===this.props.format,onClick:function(){e.props.onChangeFormat("aeronautical")},text:f.createElement(O,{msgId:"search.aeronautical"})}],visible:this.props.formatVisible,Element:w}]})))}}])&&a(n.prototype,r),d&&a(n,d),S}(f.Component);p(A,"propTypes",{idx:d.number,component:d.object,onRemove:d.func,onChange:d.func,onChangeFormat:d.func,onMouseEnter:d.func,format:d.string,type:d.string,onMouseLeave:d.func,connectDragSource:d.func,aeronauticalOptions:d.object,customClassName:d.string,isDraggable:d.bool,isDraggableEnabled:d.bool,showLabels:d.bool,showDraggable:d.bool,removeVisible:d.bool,formatVisible:d.bool,removeEnabled:d.bool}),e.exports=S(A)},2670:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(1),m=n(0),y=n(3231),g=n(3232),b=n(13).isNil,h=n(3235),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(v,e);var t,n,r,m,h=(t=v,function(){var e,n=u(t);if(l()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function v(){var e;a(this,v);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(c(e=h.call.apply(h,[this].concat(n))),"defaultProps",{format:"decimal",constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}}),e}return n=v,(r=[{key:"render",value:function(){var e=this.props.format;return"decimal"===e||b(e)?d.createElement(y,o({},this.props,{format:this.props.format||"decimal"})):d.createElement(g,this.props)}}])&&i(n.prototype,r),m&&i(n,m),v}(d.Component);f(v,"propTypes",{idx:m.number,value:m.number,constraints:m.object,format:m.string,aeronauticalOptions:m.object,coordinate:m.string,onChange:m.func,onKeyDown:m.func}),e.exports=h(v)},2671:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(407),i=a.compose,s=a.withHandlers,c=a.withProps,l=n(13),u=l.round,p=l.isNaN;e.exports=i(c((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{seconds:{decimals:4}},r=n.seconds,o=e>=0?Math.floor(e):Math.ceil(e),a=Math.abs(60*(e-o)),i=Math.floor(a),s=60*(a-i),c=u(s,r.decimals);if(o=Math.abs(o),60===c&&(i++,c=0),60===i&&(o++,i=0),p(o)||""===e)return{degrees:"",minutes:"",seconds:"",direction:t?"E":"N"};var l={degrees:o,minutes:i,seconds:c,direction:e<0?t?"W":"S":t?"E":"N"};return l}(e.value,"lon"===e.coordinate,e.aeronauticalOptions))})),s({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.degrees,r=t.minutes,o=t.seconds,a=t.direction,i=0,s=0,c=0;void 0===n&&void 0===r&&void 0===o&&e.onChange(void 0),p(n)||(i=n),p(r)||(s=r),p(o)||(c=o);var l=i+s/60+c/3600;(l>0&&("S"===a||"W"===a)||l<0&&("N"===a||"E"===a))&&(l*=-1),e.onChange(l.toPrecision(12))}}}))},2672:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(757),a=o.Glyphicon,i=o.DropdownButton,s=o.MenuItem,c=n(2132),l=n(1),u=n(162),p=c(i),f={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:u()};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuOptions,n=void 0===t?[]:t,o=e.buttonConfig,i=void 0===o?{}:o;return l.createElement(p,r({},f,i),n.length?n.map((function(e,t){var n=e.glyph,r=e.text,o=e.onClick,i=e.active,c=void 0!==i&&i;return l.createElement(s,{active:c,eventKey:t,onClick:o,key:t},n&&l.createElement(a,{glyph:n})," ",r)})):null)}},2673:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=n(2165),l=c.ERROR_FEATURE_INFO,u=c.EXCEPTIONS_FEATURE_INFO,p=c.LOAD_FEATURE_INFO,f=c.CHANGE_MAPINFO_STATE,d=c.NEW_MAPINFO_REQUEST,m=c.PURGE_MAPINFO_RESULTS,y=c.CHANGE_MAPINFO_FORMAT,g=c.SHOW_MAPINFO_MARKER,b=c.HIDE_MAPINFO_MARKER,h=c.SHOW_REVERSE_GEOCODE,v=c.HIDE_REVERSE_GEOCODE,S=c.GET_VECTOR_INFO,E=c.NO_QUERYABLE_LAYERS,O=c.CLEAR_WARNING,w=c.FEATURE_INFO_CLICK,A=c.TOGGLE_HIGHLIGHT_FEATURE,T=c.CHANGE_PAGE,P=c.TOGGLE_MAPINFO_STATE,C=c.UPDATE_CENTER_TO_MARKER,x=c.TOGGLE_EMPTY_MESSAGE_GFI,_=c.CHANGE_FORMAT,R=c.TOGGLE_SHOW_COORD_EDITOR,I=n(40).MAP_CONFIG_LOADED,j=n(267).RESET_CONTROLS,L=n(26),D=n(13).head;function M(e,t,n){if(D((e.requests||[]).filter((function(e){return e.reqId===t.reqId})))){var r=e.responses||[];return L({},e,{responses:[].concat(i(r),[{response:t[n],queryParams:t.requestParams,layerMetadata:t.layerMetadata}])})}return e}var N={enabled:!0,configuration:{}};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return L({},e,{warning:"NO_QUERYABLE_LAYERS"});case O:return L({},e,{warning:null});case f:return L({},e,{enabled:t.enabled});case P:return L({},e,{enabled:!e.enabled});case T:return L({},e,{index:t.index});case A:return L({},e,{highlight:t.enabled});case d:var r=t.reqId,a=t.request,s=e.requests||[];return L({},e,{requests:[].concat(i(s),[{request:a,reqId:r}])});case m:return L({},e,{responses:[],requests:[]});case p:return M(e,t,"data");case u:return M(e,t,"exceptions");case l:return M(e,t,"error");case w:return L({},e,{clickPoint:t.point,clickLayer:t.layer||null,itemId:t.itemId||null,overrideParams:t.overrideParams||null,filterNameList:t.filterNameList||null});case y:return o({},e,{configuration:o({},e.configuration,{infoFormat:t.infoFormat})});case g:return L({},e,{showMarker:!0});case b:return L({},e,{showMarker:!1});case h:return L({},e,{showModalReverse:!0,reverseGeocodeData:t.reverseGeocodeData});case v:return L({},e,{showModalReverse:!1,reverseGeocodeData:void 0});case j:return L({},e,{showMarker:!1,responses:[],requests:[]});case S:var c=n(3238),D=n(3240),k={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t.request.lng,t.request.lat]}},G=t.metadata&&t.metadata.units;switch(G){case"m":G="meters";break;case"deg":G="degrees";break;case"mi":G="miles";break;default:G="meters"}var F=t.metadata&&t.metadata.resolution||1,U=c(k,(t.metadata.buffer||1)*F,G),B=(t.layer.features||[]).filter((function(e){try{return"FeatureCollection"===e.type&&e.features&&e.features.length?e.features.reduce((function(e,n){var r=n.properties.useGeodesicLines&&n.properties.geometryGeodesic?o({},n,{geometry:n.properties.geometryGeodesic}):n;return e||D(U,F&&t.metadata.buffer&&G?c(r,1,"meters"):r)}),!1):D(U,F&&t.metadata.buffer&&G?c(e,1,"meters"):e)}catch(e){return!1}})),H=e.responses||[];return L({},e,{requests:[].concat(i(e.requests),[{}]),responses:[].concat(i(H),[{response:{crs:null,features:B,totalFeatures:"unknown",type:"FeatureCollection"},queryParams:t.request,layerMetadata:t.metadata,format:"JSON"}])});case C:return L({},e,{centerToMarker:t.status});case x:return o({},e,{configuration:o({},e.configuration,{showEmptyMessageGFI:!e.configuration.showEmptyMessageGFI})});case I:return o({},e,{configuration:t.config.mapInfoConfiguration||e.configuration||{}});case _:return o({},e,{formatCoord:t.format});case R:return o({},e,{showCoordinateEditor:!t.showCoordinateEditor});default:return e}}},2674:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e){return function(){var t,n=m(e);if(d()){var r=m(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)}}function p(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=n(1),h=n(0),v=n(88).connect;n(3242);var S=n(2675).CSSTransitionGroup,E=n(2180).isFeatureGridOpen,O=n(2137).mapLayoutValuesSelector,w=n(195).createSelector,A=n(26),T=n(2299),P=function(e){y(n,e);var t=u(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=i(e,["children"]);return b.createElement(S,a({},n,{transitionName:"toolbarexpand",transitionEnterTimeout:500,transitionLeaveTimeout:300}),t)}}]),n}(b.Component),C=function(e){y(n,e);var t=u(n);function n(){var e;s(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r(f(e=t.call.apply(t,[this].concat(a))),"getPanel",(function(e){return!0===e.panel?e.plugin:e.panel})),r(f(e),"getPanels",(function(){return e.getTools().filter((function(e){return e.panel})).map((function(t){return{name:t.name,title:t.title,cfg:t.cfg,panel:e.getPanel(t),items:t.items,wrap:t.wrap||!1}}))})),r(f(e),"getTools",(function(){return e.props.items.filter((function(t){return t.alwaysVisible||e.props.allVisible})).map((function(e,t){return A({},e,{position:e.position||t})})).sort((function(e,t){return e.position-t.position}))})),e}return l(n,[{key:"render",value:function(){return b.createElement(T,{id:this.props.id,className:"mapToolbar btn-group-"+this.props.layout,toolCfg:this.props.btnConfig,container:P,mapType:this.props.mapType,toolStyle:this.props.buttonStyle,activeStyle:this.props.pressedButtonStyle,toolSize:this.props.buttonSize,stateSelector:this.props.stateSelector,tools:this.getTools(),panels:this.getPanels(),activePanel:this.props.active,style:this.props.style,panelStyle:this.props.panelStyle,panelClassName:this.props.panelClassName})}}]),n}(b.Component);r(C,"propTypes",{id:h.string,tools:h.array,mapType:h.string,style:h.object,panelStyle:h.object,panelClassName:h.string,active:h.string,items:h.array,allVisible:h.bool,layout:h.string,stateSelector:h.string,buttonStyle:h.string,buttonSize:h.string,pressedButtonStyle:h.string,btnConfig:h.object}),r(C,"contextTypes",{messages:h.object,router:h.object}),r(C,"defaultProps",{id:"mapstore-toolbar",style:{},panelStyle:{minWidth:"300px",right:"52px",zIndex:100,position:"absolute",overflow:"auto",left:"450px"},panelClassName:"toolbar-panel",items:[],allVisible:!0,layout:"vertical",stateSelector:"toolbar",buttonStyle:"primary",buttonSize:null,pressedButtonStyle:"success",btnConfig:{className:"square-button"}});var x=function(e){return w([function(t){return t.controls&&t.controls[e]&&t.controls[e].active},function(t){return t.controls&&t.controls[e]&&t.controls[e].expanded},E,function(e){return O(e,{right:!0,bottom:!0})}],(function(t,n,r,o){return{active:t,allVisible:n,stateSelector:e,layout:r?"horizontal":"vertical",style:o}}))};e.exports={ToolbarPlugin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"toolbar";return v(x(e))(C)},reducers:{controls:n(799)}}},2679:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(757).Badge,y=n(13).isString,g=n(136),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(h,e);var t,n,r,f,b=(t=h,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function h(){var e;o(this,h);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=b.call.apply(b,[this].concat(n))),"onMouseOver",(function(){var t=y(e.props.helpText)?e.props.helpText:g.getMessageById(e.context.messages,e.props.helpText.props.msgId);e.props.changeHelpText(t),e.props.changeHelpwinVisibility(!0)})),e}return n=h,(r=[{key:"render",value:function(){return d.createElement(m,{id:this.props.id,onMouseOver:this.onMouseOver,className:(this.props.isVisible?"":"hidden ")+(this.props.className?this.props.className:"")},"?")}}])&&a(n.prototype,r),f&&a(n,f),h}(d.Component);p(b,"propTypes",{id:f.string,helpText:f.oneOfType([f.string,f.element]),isVisible:f.bool,changeHelpText:f.func,changeHelpwinVisibility:f.func,className:f.string}),p(b,"contextTypes",{messages:f.object}),p(b,"defaultProps",{helpText:"",isVisible:!1}),e.exports=b},2680:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=n(1),f=n(88).connect,d=n(195).createSelector,m=n(268).mapSelector,y=n(757).Glyphicon,g=f(d([m,function(e){return e.mapInitialConfig}],(function(e,t){return{mapConfig:e,mapInitialConfig:t}})),{changeMapView:n(409).changeMapView})(n(3246)),b=n(2100);n(3247);var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(m,e);var t,n,r,f,d=(t=m,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function m(){return a(this,m),d.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){return p.createElement(g,o({key:"zoomToMaxExtent"},this.props,{useInitialExtent:!0}))}}])&&i(n.prototype,r),f&&i(n,f),m}(p.Component),v=n(26);e.exports={ZoomAllPlugin:v(h,{Toolbar:{name:"ZoomAll",position:7,tooltip:"zoombuttons.zoomAllTooltip",icon:p.createElement(y,{glyph:"resize-full"}),help:p.createElement(b,{msgId:"helptexts.zoomToMaxExtentButton"}),tool:!0,priority:1}}),reducers:{}}},2681:function(e,t,n){var r=n(88).connect,o=n(195).createSelector,a=n(408).layersSelector,i=n(26),s=o([a],(function(e){return{loading:e&&e.some((function(e){return e.loading}))}}));n(3249);var c=r(s)(n(3251));e.exports={MapLoadingPlugin:i(c,{Toolbar:{name:"maploading",position:1,tool:!0,priority:1}}),reducers:{}}},2682:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1);n(3254);var m=n(26),y=n(2299),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(g,e);var t,n,r,f,m=(t=g,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function g(){var e;o(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=m.call.apply(m,[this].concat(n))),"getPanels",(function(){return e.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,n){return{name:t.name+n,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[n]:{}}})))}),[])})),p(s(e),"getTools",(function(){return e.props.items.sort((function(e,t){return e.position-t.position}))})),e}return n=g,(r=[{key:"render",value:function(){return d.createElement(y,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:function(e){return d.createElement("div",e,e.children)},toolStyle:"primary",activeStyle:"default",stateSelector:"omnibar",tool:function(e){return d.createElement("div",null,e.children)},tools:this.getTools(),panels:this.getPanels()})}}])&&a(n.prototype,r),f&&a(n,f),g}(d.Component);p(g,"propTypes",{className:f.string,style:f.object,items:f.array,id:f.string,mapType:f.string}),p(g,"defaultProps",{items:[],className:"navbar-dx shadow",style:{},id:"mapstore-navbar",mapType:"leaflet"}),e.exports={OmniBarPlugin:m(g,{disablePluginIf:"{state('featuregridmode') === 'EDIT'}"}),reducers:{}}},2683:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(88).connect,s=n(267),c=s.toggleControl,l=s.setControlProperty,u=n(269),p=u.changeLayerProperties,f=u.updateNode,d=n(2300),m=d.addBackground,y=d.addBackgroundProperties,g=d.confirmDeleteBackgroundModal,b=d.updateThumbnail,h=d.removeBackground,v=d.clearModalParameters,S=d.backgroundEdited,E=d.setCurrentBackgroundLayer,O=n(195).createSelector,w=n(408),A=w.backgroundControlsSelector,T=w.currentBackgroundSelector,P=w.tempBackgroundSelector,C=n(268),x=C.mapSelector,_=C.mapInfoSelector,R=n(2301),I=R.modalParamsSelector,j=R.isDeletedIdSelector,L=R.backgroundListSelector,D=R.backgroundLayersSelector,M=R.confirmDeleteBackgroundModalSelector,N=R.allowBackgroundsDeletionSelector,k=n(2137).mapLayoutValuesSelector,G=n(408).allBackgroundLayerSelector,F=n(268).projectionSelector,U=n(269).removeNode,B=n(2684),H=i(O([F,I,L,j,G,x,_,D,A,T,P,function(e){return k(e,{left:!0,bottom:!0})},function(e){return e.controls&&e.controls.metadataexplorer&&e.controls.metadataexplorer.enabled},function(e){return e.browser&&e.browser.mobile?"mobile":"desktop"},M,N],(function(e,t,n,r,o,a,i,s,c,l,u,p,f,d,m,y){return{mode:d,modalParams:t,backgroundList:n,deletedId:r,backgrounds:o,size:a&&a.size||{width:0,height:0},mapIsEditable:i&&i.canEdit,layers:s,tempLayer:u,currentLayer:l,start:c.start||0,enabled:c.enabled,style:p,enabledCatalog:f,confirmDeleteBackgroundModal:m,allowDeletion:y,projection:e}})),{onPropertiesChange:p,onToggle:c.bind(null,"backgroundSelector",null),onLayerChange:l.bind(null,"backgroundSelector"),onStartChange:l.bind(null,"backgroundSelector","start"),onAdd:m,onRemove:U,onBackgroundEdit:S,updateNode:f,onUpdateThumbnail:b,removeBackground:h,clearModal:v,addBackgroundProperties:y,onRemoveBackground:g,setCurrentBackgroundLayer:E},(function(e,t,n){return o({},e,{},t,{},n,{thumbs:o({},B,{},n.thumbs)})}))(n(3269));e.exports={BackgroundSelectorPlugin:H,reducers:{controls:n(799),backgroundSelector:n(3290)},epics:n(3291)}},2684:function(e,t,n){var r=n(3256),o=n(3257),a=n(3258),i=n(3259),s=n(3260),c=n(3261),l=n(3262),u=n(3263),p=n(3264),f=n(3265),d=n(3266),m={google:{HYBRID:n(3267),ROADMAP:r,TERRAIN:o,SATELLITE:a},bing:{Aerial:i,AerialWithLabels:f},osm:{mapnik:s},mapquest:{osm:n(3268)},ol:{undefined:l},nasagibs:{Night2012:p},OpenTopoMap:{OpenTopoMap:d},unknown:u,s2cloudless:{"s2cloudless:s2cloudless":c}};e.exports=m},2685:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(2159),c=n.n(s),l=n(26),u=n.n(l),p=n(162),f=n.n(p),d=n(13),m=n(2100),y=n.n(m),g=n(2170),b=n.n(g),h=n(757),v=n(3288),S=n.n(v),E=n(136),O=n.n(E),w=n(2132);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function C(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=n.n(w)()(h.Button),k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(s,e);var t,n,r,a,i=(t=s,function(){var e,n=L(t);if(j()){var r=L(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return R(this,e)});function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),M(I(t=i.call(this,e)),"state",{title:"",format:"image/png",thumbnail:{},additionalParameters:[]}),M(I(t),"assignParameters",(function(e){return Object(d.keys)(e).map((function(t,n){var r=e[t],o=Object(d.isNumber)(r)?"number":Object(d.isBoolean)(r)?"boolean":"string";return{id:n,param:t,type:o,val:"string"===o?r.toString():r}}))})),M(I(t),"addAdditionalParameter",(function(e,n,r,o){t.setState({additionalParameters:t.state.additionalParameters.map((function(t){if(t.id===r){var a,i;if("val"===n)switch(o){case"number":(i=Number(e))&&!isNaN(i)||(i=0);break;case"boolean":i=!Object(d.isBoolean)(e)||e;break;default:i=e?e.toString():""}else i=e;return u()({},t,(M(a={},n,i),M(a,"type",o),a))}return t}))})})),M(I(t),"resetParameters",(function(){return t.setState({additionalParameters:[]})}));var n=Object(d.pick)(t.props,"title","format","style","thumbnail"),r=u()({},n,{additionalParameters:t.assignParameters(t.props.additionalParameters)});return t.state=r,t}return n=s,(r=[{key:"renderStyleSelector",value:function(){var e=this;return this.props.capabilities?o.a.createElement(h.FormGroup,null,o.a.createElement(h.ControlLabel,null,o.a.createElement(y.a,{msgId:"layerProperties.style"})),o.a.createElement(c.a,{onChange:function(t){return e.setState({style:t?t.value:void 0})},clearable:!0,value:this.state.style,options:(this.props.capabilities.availableStyles||[]).map((function(e){var t=e.name;return{label:t,value:t}}))})):null}},{key:"renderThumbnailErrors",value:function(){var e={FORMAT:o.a.createElement(y.a,{msgId:"map.errorFormat"}),SIZE:o.a.createElement(y.a,{msgId:"map.errorSize"})};return this.state.thumbnailErrors&&this.state.thumbnailErrors.length>0?o.a.createElement("div",{className:"dropzone-errorBox alert-danger"},o.a.createElement("p",null,o.a.createElement(y.a,{msgId:"map.error"})),this.state.thumbnailErrors.map((function(t){return o.a.createElement("div",{id:"error"+t,key:"error"+t,className:"error"+t},e[t])}))):null}},{key:"render",value:function(){var e=this;return o.a.createElement(b.a,{fitContent:!0,title:o.a.createElement(y.a,{msgId:this.props.editing?"backgroundDialog.editTitle":"backgroundDialog.addTitle"}),show:!0,fade:!0,clickOutEnabled:!1,bodyClassName:"ms-flex modal-properties-container background-dialog",loading:this.props.loading,onClose:function(){e.props.onClose(),e.resetParameters()},buttons:this.props.loading?[]:[{text:o.a.createElement(y.a,{msgId:this.props.editing?"save":"backgroundDialog.add"}),bsStyle:"primary",onClick:function(){var t=e.props.editing?e.props.layer.id:f()(),n=e.props.layer.thumbURL||"",r=e.state.format||e.props.defaultFormat;e.props.updateThumbnail(e.state.thumbnail.data,t),e.props.onSave(u()({},e.props.layer,Object(d.omit)(e.state,"thumbnail"),e.props.editing?{}:{id:t},{params:Object(d.omit)(e.state.additionalParameters.reduce((function(e,t){return u()(e,M({},t.param,t.val))}),{}),["source","title"]),format:r,group:"background"},n||e.state.thumbnail.data?{thumbURL:e.state.thumbnail.url}:{})),e.resetParameters()}}]},o.a.createElement(h.Form,{style:{width:"100%"}},this.renderThumbnailErrors(),o.a.createElement(S.a,{onUpdate:function(t,n){return e.setState({thumbnail:{data:t,url:n}})},onError:function(t){return e.setState({thumbnailErrors:t})},message:o.a.createElement(y.a,{msgId:"backgroundDialog.thumbnailMessage"}),suggestion:"",map:{newThumbnail:Object(d.get)(this.state.thumbnail,"url")||"NODATA"}}),o.a.createElement(h.FormGroup,null,o.a.createElement(h.ControlLabel,null,o.a.createElement(y.a,{msgId:"layerProperties.title"})),o.a.createElement(h.FormControl,{value:this.state.title,placeholder:O.a.getMessageById(this.context.messages,"backgroundDialog.titlePlaceholder"),onChange:function(t){return e.setState({title:t.target.value})}})),o.a.createElement(h.FormGroup,{controlId:"formControlsSelect"},o.a.createElement(h.ControlLabel,null,o.a.createElement(y.a,{msgId:"layerProperties.format"})),o.a.createElement(c.a,{onChange:function(t){return e.setState({format:t&&t.value})},value:this.state.format||this.props.defaultFormat,clearable:!0,options:this.props.formatOptions})),this.renderStyleSelector(),o.a.createElement(h.FormGroup,null,o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(h.ControlLabel,{style:{flex:1}},o.a.createElement(y.a,{msgId:"backgroundDialog.additionalParameters"})),o.a.createElement(N,{className:"square-button-md",tooltipId:"backgroundDialog.addAdditionalParameterTooltip",style:{borderColor:"transparent"},onClick:function(){var t=Math.max.apply(Math,C(e.state.additionalParameters.length>0?e.state.additionalParameters.map((function(e){return e.id})):[-1]))+1;e.setState({additionalParameters:[].concat(C(e.state.additionalParameters),[{id:t,type:"string",param:"",val:""}])})}},o.a.createElement(h.Glyphicon,{glyph:"plus"}))),this.state.additionalParameters.map((function(t){return o.a.createElement("div",{key:"val:"+t.id,style:{display:"flex",marginTop:8}},o.a.createElement("div",{style:{display:"flex",flex:1,marginRight:8}},o.a.createElement(h.FormControl,{style:{width:"50%",marginRight:8,minWidth:0},placeholder:O.a.getMessageById(e.context.messages,"backgroundDialog.parameter"),value:t.param,onChange:function(n){return e.addAdditionalParameter(n.target.value,"param",t.id,t.type)}}),"boolean"===t.type?o.a.createElement("div",{style:{width:"50%"}},o.a.createElement(c.a,{onChange:function(n){return e.addAdditionalParameter(n.value,"val",t.id,t.type)},clearable:!1,value:t.val,options:e.props.booleanOptions})):o.a.createElement(h.FormControl,{style:{width:"50%",minWidth:0},placeholder:O.a.getMessageById(e.context.messages,"backgroundDialog.value"),value:t.val.toString(),onChange:function(n){return e.addAdditionalParameter(n.target.value,"val",t.id,t.type)}})),o.a.createElement(c.a,{style:{flex:1,width:90},onChange:function(n){return e.addAdditionalParameter(t.val,"val",t.id,n.value)},clearable:!1,value:t.type,options:e.props.parameterTypeOptions.map((function(t){var n=t.label;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},P(t,["label"]),{label:O.a.getMessageById(e.context.messages,n)})}))}),o.a.createElement(N,{onClick:function(){return e.setState({additionalParameters:e.state.additionalParameters.filter((function(e){return t.id!==e.id}))})},tooltipId:"backgroundDialog.removeAdditionalParameterTooltip",className:"square-button-md",style:{borderColor:"transparent"}},o.a.createElement(h.Glyphicon,{glyph:"trash"})))})))))}}])&&_(n.prototype,r),a&&_(n,a),s}(o.a.Component);M(k,"propTypes",{loading:i.a.bool,editing:i.a.bool,layer:i.a.object,capabilities:i.a.object,onAdd:i.a.func,onClose:i.a.func,source:i.a.string,onSave:i.a.func,addParameters:i.a.func,updateThumbnail:i.a.func,thumbURL:i.a.string,title:i.a.string,format:i.a.string,style:i.a.string,thumbnail:i.a.object,additionalParameters:i.a.object,addParameter:i.a.func,defaultFormat:i.a.string,formatOptions:i.a.array,parameterTypeOptions:i.a.array,booleanOptions:i.a.array}),M(k,"contextTypes",{messages:i.a.object}),M(k,"defaultProps",{updateThumbnail:function(){},onClose:function(){},onSave:function(){},addParameters:function(){},addParameter:function(){},loading:!1,editing:!1,layer:{},capabilities:{},title:"",thumbnail:{},additionalParameters:{},formatOptions:[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/gif",value:"image/gif"}],parameterTypeOptions:[{label:"backgroundDialog.string",value:"string"},{label:"backgroundDialog.number",value:"number"},{label:"backgroundDialog.boolean",value:"boolean"}],booleanOptions:[{label:"True",value:!0},{label:"False",value:!1}]})},2691:function(e,t,n){var r=n(88).connect,o=n(2692).toggleFullscreen,a=n(3292).toggleFullscreenEpic,i=n(26),s=n(3294),c=r((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.controls,n=void 0===t?{}:t;return{active:n.fullscreen&&n.fullscreen.enabled}}),{onClick:function(e,t){return o(e,t.querySelector)}})(s);e.exports={FullScreenPlugin:i(c,{disablePluginIf:"{state('browser') && state('browser').safari}",Toolbar:{name:"fullscreen",position:5,alwaysVisible:!0,tool:!0,priority:1}}),reducers:{},epics:{toggleFullscreenEpic:a}}},2692:function(e,t){e.exports={toggleFullscreen:function(e,t){return{type:"TOGGLE_FULLSCREEN",enable:e,elementSelector:t}},TOGGLE_FULLSCREEN:"TOGGLE_FULLSCREEN"}},2693:function(e,t,n){var r=n(1),o=n(88).connect,a=(0,n(195).createSelector)([n(268).mapSelector],(function(e){return{currentZoom:e&&e.zoom,id:"zoomin-btn",step:1,glyphicon:"plus"}})),i=n(409).changeZoomLevel,s=n(2100),c=o(a,{onZoom:i})(n(2694));n(2695);var l=n(26);e.exports={ZoomInPlugin:l(c,{disablePluginIf:"{state('mapType') === 'cesium'}",Toolbar:{name:"ZoomIn",position:3,tooltip:"zoombuttons.zoomInTooltip",help:r.createElement(s,{msgId:"helptexts.zoomIn"}),tool:!0,priority:1}}),reducers:{}}},2694:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(757),y=m.Button,g=m.Glyphicon,b=m.Tooltip,h=n(2111),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(v,e);var t,n,r,f,m=(t=v,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function v(){var e;o(this,v);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=m.call.apply(m,[this].concat(n))),"addTooltip",(function(t){if(!e.props.tooltip)return t;var n=d.createElement(b,{id:"locate-tooltip"},e.props.tooltip);return d.createElement(h,{placement:e.props.tooltipPlace,key:"overlay-trigger."+e.props.id,overlay:n},t)})),e}return n=v,(r=[{key:"render",value:function(){var e=this;return this.addTooltip(d.createElement(y,{id:this.props.id,style:this.props.style,onClick:function(){return e.props.onZoom(e.props.currentZoom+e.props.step)},className:this.props.className,disabled:this.props.currentZoom+this.props.step>this.props.maxZoom||this.props.currentZoom+this.props.step<this.props.minZoom,bsStyle:this.props.bsStyle},this.props.glyphicon?d.createElement(g,{glyph:this.props.glyphicon}):null,this.props.glyphicon&&this.props.text?" ":null,this.props.text,this.props.help))}}])&&a(n.prototype,r),f&&a(n,f),v}(d.Component);p(v,"propTypes",{id:f.string,style:f.object,glyphicon:f.string,text:f.string,btnSize:f.oneOf(["large","small","xsmall"]),className:f.string,help:f.oneOfType([f.string,f.element]),step:f.number,currentZoom:f.number,minZoom:f.number,maxZoom:f.number,onZoom:f.func,tooltip:f.element,tooltipPlace:f.string,bsStyle:f.string}),p(v,"defaultProps",{id:"mapstore-zoom",className:"square-button",glyphicon:"plus",btnSize:"xsmall",tooltipPlace:"left",step:1,currentZoom:3,minZoom:0,maxZoom:28,onZoom:function(){},bsStyle:"default",style:{}}),e.exports=v},2695:function(e,t,n){var r=n(3296);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},2696:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(1),i=n(88).connect,s=n(195).createSelector,c=n(268),l=s([c.mapSelector,c.minZoomSelector],(function(e,t){return{currentZoom:e&&e.zoom,id:"zoomout-btn",step:-1,glyphicon:"minus",minZoom:t}})),u=n(409).changeZoomLevel,p=n(2100),f=i(l,{onZoom:u},(function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t,{},n)}))(n(2694));n(2695);var d=n(26);e.exports={ZoomOutPlugin:d(f,{disablePluginIf:"{state('mapType') === 'cesium'}",Toolbar:{name:"ZoomOut",position:4,tooltip:"zoombuttons.zoomOutTooltip",help:a.createElement(p,{msgId:"helptexts.zoomOut"}),tool:!0,priority:1}}),reducers:{}}},2697:function(e,t,n){var r=n(1),o=n(757).Glyphicon,a=n(26),i=n(2100),s=n(2477);e.exports={ExpanderPlugin:a(s,{Toolbar:{name:"expand",position:1e4,alwaysVisible:!0,tooltip:"expandtoolbar.tooltip",icon:r.createElement(o,{glyph:"option-horizontal"}),help:r.createElement(i,{msgId:"helptexts.expandToolbar"}),toggle:!0,toggleControl:"toolbar",toggleProperty:"expanded",priority:1}}),reducers:{}}},2698:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n(1),y=n(0),g=n(88).connect,b=n(26),h=n(757),v=h.DropdownButton,S=h.Glyphicon,E=h.MenuItem,O=g((function(){return{noCaret:!0,pullRight:!0,bsStyle:"primary",title:m.createElement(S,{glyph:"menu-hamburger"})}}))(v),w=n(2299),A=n(2189),T=n(198).createPlugin;n(3297);var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(g,e);var t,n,r,a,y=(t=g,function(){var e,n=p(t);if(u()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function g(){var e;i(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(l(e=y.call.apply(y,[this].concat(n))),"getPanels",(function(){return e.props.items.filter((function(e){return e.panel})).map((function(e){return b({},e,{panel:!0===e.panel?e.plugin:e.panel})})).concat(e.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,n){return{name:t.name+n,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[n]:{}}})))}),[]))})),d(l(e),"getTools",(function(){return[{element:m.createElement("span",{key:"burger-menu-title"},e.props.title)}].concat(o(e.props.items.sort((function(e,t){return e.position-t.position}))))})),e}return n=g,(r=[{key:"render",value:function(){return m.createElement(w,{id:this.props.id,className:"square-button",container:O,mapType:this.props.mapType,toolStyle:"primary",activeStyle:"default",stateSelector:"burgermenu",eventSelector:"onSelect",tool:E,tools:this.getTools(),panels:this.getPanels(),panelStyle:this.props.panelStyle,panelClassName:this.props.panelClassName})}}])&&s(n.prototype,r),a&&s(n,a),g}(m.Component);d(P,"propTypes",{id:y.string,dispatch:y.func,items:y.array,title:y.node,onItemClick:y.func,controls:y.object,mapType:y.string,panelStyle:y.object,panelClassName:y.string}),d(P,"contextTypes",{messages:y.object,router:y.object}),d(P,"defaultProps",{id:"mapstore-burger-menu",items:[],onItemClick:function(){},title:m.createElement(E,{header:!0},m.createElement(A,{msgId:"options"})),controls:[],mapType:"leaflet",panelStyle:{minWidth:"300px",right:"52px",zIndex:100,position:"absolute",overflow:"auto"},panelClassName:"toolbar-panel"}),e.exports=T("BurgerMenu",{component:g((function(e){return{controls:e.controls}}))(P),containers:{OmniBar:{name:"burgermenu",position:2,tool:!0,priority:1}}})},2699:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=n(1),f=n(198).connect,d=n(195).createSelector,m=n(268),y=m.mapSelector,g=m.minZoomSelector,b=n(409).changeZoomLevel,h=n(2700),v=n(2189),S=n(2701),E=n(196),O=n(26),w=d([y,g],(function(e,t){return{minZoom:t,currentZoomLvl:e&&e.zoom,scales:E.getScales(e&&e.projection||"EPSG:3857",e&&e.mapOptions&&e.mapOptions.view&&e.mapOptions.view.DPI||null)}}));n(3302);var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(m,e);var t,n,r,f,d=(t=m,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function m(){return a(this,m),d.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){return p.createElement(h,{id:"mapstore-scalebox-container",key:"scalebox-help",helpText:p.createElement(v,{msgId:"helptexts.scaleBox"})},p.createElement(S,o({key:"scaleBox",label:p.createElement(v,{msgId:"mapScale"})},this.props)))}}])&&i(n.prototype,r),f&&i(n,f),m}(p.Component),T=f(w,{onChange:b})(A);e.exports={ScaleBoxPlugin:O(T,{disablePluginIf:"{state('mapType') === 'cesium'}"},{MapFooter:{name:"scale",position:1,tool:!0,priority:1}}),reducers:{}}},2700:function(e,t,n){var r=n(88).connect,o=n(800),a=o.changeHelpwinVisibility,i=o.changeHelpText;e.exports=r((function(e){return{helpEnabled:e.controls&&e.controls.help&&e.controls.help.enabled}}),{changeHelpText:i,changeHelpwinVisibility:a})(n(3299))},2701:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(757),y=m.Form,g=m.FormControl,b=m.FormGroup,h=m.ControlLabel,v=n(196),S=n(13).isEqual,E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(v,e);var t,n,r,f,m=(t=v,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function v(){var e;o(this,v);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=m.call.apply(m,[this].concat(n))),"onComboChange",(function(t){var n=parseInt(t.nativeEvent.target.value,10);e.props.onChange(n,e.props.scales[n])})),p(s(e),"getOptions",(function(){return e.props.scales.map((function(t,n){return d.createElement("option",{value:n,key:n},e.props.template(t,n))})).filter((function(t,n){return n>=e.props.minZoom}))})),e}return n=v,(r=[{key:"shouldComponentUpdate",value:function(e){return!S(e,this.props)}},{key:"render",value:function(){var e=null;return e=this.props.readOnly?d.createElement("label",null,this.props.template(this.props.scales[this.props.currentZoomLvl],this.props.currentZoomLvl)):this.props.useRawInput?d.createElement("select",{label:this.props.label,onChange:this.onComboChange,bsSize:"small",value:this.props.currentZoomLvl||""},this.getOptions()):d.createElement(y,{inline:!0},d.createElement(b,{bsSize:"small"},d.createElement(h,null,this.props.label),d.createElement(g,{componentClass:"select",onChange:this.onComboChange,value:this.props.currentZoomLvl||""},this.getOptions()))),d.createElement("div",{id:this.props.id,style:this.props.style},e)}}])&&a(n.prototype,r),f&&a(n,f),v}(d.Component);p(E,"propTypes",{id:f.string,style:f.object,scales:f.array,currentZoomLvl:f.number,minZoom:f.number,onChange:f.func,readOnly:f.bool,label:f.oneOfType([f.func,f.string,f.object]),template:f.func,useRawInput:f.bool}),p(E,"defaultProps",{id:"mapstore-scalebox",scales:v.getGoogleMercatorScales(0,28),currentZoomLvl:0,minZoom:0,onChange:function(){},readOnly:!1,template:function(e){return e<1?Math.round(1/e)+" : 1":"1 : "+Math.round(e)},useRawInput:!1}),e.exports=E},2702:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1),d=n(0),m=n(2299),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(g,e);var t,n,r,d,y=(t=g,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function g(){var e;o(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=y.call.apply(y,[this].concat(n))),"getPanels",(function(){return e.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,n){return{name:t.name+n,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[n]:{}}})))}),[])})),p(s(e),"getTools",(function(){return e.props.items.sort((function(e,t){return t.position-e.position}))})),e}return n=g,(r=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return f.createElement(m,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:function(e){return f.createElement("div",e,e.children)},toolStyle:"primary",activeStyle:"default",stateSelector:"mapFooter",tool:function(e){return f.createElement("div",null,e.children)},tools:this.getTools(),panels:this.getPanels()})}}])&&a(n.prototype,r),d&&a(n,d),g}(f.Component);p(y,"propTypes",{className:d.string,style:d.object,items:d.array,id:d.string,mapType:d.string}),p(y,"defaultProps",{items:[],className:"mapstore-map-footer",style:{},id:"mapstore-map-footer",mapType:"leaflet"}),e.exports={MapFooterPlugin:y,reducers:{}}},2703:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n(1),h=n(0),v=n(88).connect,S=n(136),E=n(80),O=n(196),w=n(2258),A=n(757),T=A.Grid,P=A.Row,C=A.Col,x=A.Panel,_=A.Accordion,R=A.Glyphicon,I=n(267),j=I.toggleControl,L=I.setControlProperty,D=n(782),M=D.printSubmit,N=D.printSubmitting,k=D.configurePrintMap,G=n(268).mapSelector,F=n(408).layersSelector,U=n(195).createSelector,B=n(26),H=n(13).head,z=n(268).scalesSelector,V=n(766).currentLocaleSelector,W=n(2141).mapTypeSelector,Y=n(2100);n(3304),e.exports={PrintPlugin:B({loadPlugin:function(e){Promise.all([n.e(14),n.e(15)]).then(function(){var t=n(2881),r=t.Name,o=t.Description,s=t.Resolution,A=t.DefaultBackgroundOption,I=t.Sheet,D=t.LegendOption,q=t.MultiPageOption,Z=t.LandscapeOption,K=t.ForceLabelsOption,Q=t.AntiAliasingOption,X=t.IconSizeOption,J=t.LegendDpiOption,$=t.Font,ee=t.MapPreview,te=t.PrintSubmit,ne=t.PrintPreview,re=n(2882),oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(L,e);var t,n,h,v,j=(t=L,function(){var e,n=m(t);if(d()){var r=m(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return p(this,e)});function L(){var e;l(this,L);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return g(f(e=j.call.apply(j,[this].concat(n))),"getMapSize",(function(t){var n=t||e.getLayout();return{width:e.props.mapWidth,height:n&&n.map.height/n.map.width*e.props.mapWidth||270}})),g(f(e),"getLayout",(function(){var t=e.props.getLayoutName(e.props.printSpec);return H(e.props.capabilities.layouts.filter((function(e){return e.name===t})))})),g(f(e),"renderLayoutsAlternatives",(function(){return e.props.alternatives.map((function(t){return b.createElement(t.component,{key:"printoption_"+t.name,label:S.getMessageById(e.context.messages,"print.alternatives."+t.name),enableRegex:t.regex})}))})),g(f(e),"renderPreviewPanel",(function(){return b.createElement(ne,c({},e.props.previewOptions,{role:"body",prevPage:e.prevPage,nextPage:e.nextPage}))})),g(f(e),"renderError",(function(){return e.props.error?b.createElement(P,null,b.createElement(C,{xs:12},b.createElement("div",{className:"print-error"},b.createElement("span",null,e.props.error)))):null})),g(f(e),"renderWarning",(function(e){return e?null:b.createElement(P,null,b.createElement(C,{xs:12},b.createElement("div",{className:"print-warning"},b.createElement("span",null,b.createElement(Y,{msgId:"print.layoutWarning"})))))})),g(f(e),"renderPrintPanel",(function(){var t=e.getLayout(),n=e.props.getLayoutName(e.props.printSpec),a=e.getMapSize(t);return b.createElement(T,{fluid:!0,role:"body"},e.renderError(),e.renderWarning(t),b.createElement(P,null,b.createElement(C,{xs:12,md:6},b.createElement(r,{label:S.getMessageById(e.context.messages,"print.title"),placeholder:S.getMessageById(e.context.messages,"print.titleplaceholder")}),b.createElement(o,{label:S.getMessageById(e.context.messages,"print.description"),placeholder:S.getMessageById(e.context.messages,"print.descriptionplaceholder")}),b.createElement(_,{defaultActiveKey:"1"},b.createElement(x,{className:"print-layout",header:S.getMessageById(e.context.messages,"print.layout"),eventKey:"1",collapsible:!0},b.createElement(I,{key:"sheetsize",layouts:e.props.capabilities.layouts,label:S.getMessageById(e.context.messages,"print.sheetsize")}),e.renderLayoutsAlternatives()),b.createElement(x,{className:"print-legend-options",header:S.getMessageById(e.context.messages,"print.legendoptions"),eventKey:"2",collapsible:!0},b.createElement($,{label:S.getMessageById(e.context.messages,"print.legend.font")}),b.createElement(K,{label:S.getMessageById(e.context.messages,"print.legend.forceLabels")}),b.createElement(Q,{label:S.getMessageById(e.context.messages,"print.legend.antiAliasing")}),b.createElement(X,{label:S.getMessageById(e.context.messages,"print.legend.iconsSize")}),b.createElement(J,{label:S.getMessageById(e.context.messages,"print.legend.dpi")})))),b.createElement(C,{xs:12,md:6,style:{textAlign:"center"}},b.createElement(s,{label:S.getMessageById(e.context.messages,"print.resolution")}),b.createElement(ee,c({width:a.width,height:a.height,mapType:e.props.mapType,onMapRefresh:function(){return e.configurePrintMap()},layout:n,layoutSize:t&&t.map||{width:10,height:10},resolutions:O.getResolutions(),useFixedScales:e.props.useFixedScales},e.props.mapPreviewOptions)),e.isBackgroundIgnored()?b.createElement(A,{label:S.getMessageById(e.context.messages,"print.defaultBackground")}):null,b.createElement(te,c({},e.props.submitConfig,{disabled:!t,onPrint:e.print})),e.renderDownload())))})),g(f(e),"renderDownload",(function(){return e.props.pdfUrl&&!e.props.usePreview?b.createElement("iframe",{src:e.props.pdfUrl,style:{visibility:"hidden",display:"none"}}):null})),g(f(e),"renderBody",(function(){return e.props.pdfUrl&&e.props.usePreview?e.renderPreviewPanel():e.renderPrintPanel()})),g(f(e),"isAllowed",(function(t){return-1===e.props.ignoreLayers.indexOf(t.type)})),g(f(e),"isBackgroundIgnored",(function(){return e.props.layers.filter((function(t){return t.visibility&&!e.isAllowed(t)})).length>0})),g(f(e),"filterLayers",(function(t){var n=e.props.layers.filter((function(t){return t.visibility&&e.isAllowed(t)}));if(e.isBackgroundIgnored()&&e.props.defaultBackground&&t.defaultBackground){var r=e.props.layers.filter((function(t){return t.type===e.props.defaultBackground}))[0];return[B({},r,{visibility:!0})].concat(i(n))}return n})),g(f(e),"configurePrintMap",(function(t,n){var r=t||e.props.map,o=n||e.props.printSpec;if(r&&r.bbox&&e.props.capabilities){var a=E.reprojectBbox([r.bbox.bounds.minx,r.bbox.bounds.miny,r.bbox.bounds.maxx,r.bbox.bounds.maxy],r.bbox.crs,r.projection),i=e.getMapSize();if(e.props.useFixedScales){var s=e.props.getZoomForExtent(a,i,e.props.minZoom,e.props.maxZoom),c=re.getPrintScales(e.props.capabilities),l=re.getNearestZoom(r.zoom,c);e.props.configurePrintMap(r.center,s,l,c[l],e.filterLayers(o),r.projection,e.props.currentLocale)}else e.props.configurePrintMap(r.center,r.zoom,r.zoom,e.props.scales[r.zoom],e.filterLayers(o),r.projection,e.props.currentLocale)}})),g(f(e),"print",(function(){var t=e.props.getPrintSpecification(e.props.printSpec);e.props.setPage(0),e.props.onBeforePrint(),e.props.onPrint(e.props.capabilities.createURL,a({},t,{},e.props.overrideOptions))})),e}return n=L,(h=[{key:"UNSAFE_componentWillMount",value:function(){if(this.props.usePreview&&!window.PDFJS){var e=document.createElement("script");e.type="text/javascript",e.src="https://unpkg.com/pdfjs-dist@1.4.79/build/pdf.combined.js",document.head.appendChild(e)}this.configurePrintMap()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.open&&!this.props.open,n=this.props.open&&this.props.syncMapPreview&&O.mapUpdated(this.props.map,e.map),r=e.printSpec.defaultBackground!==this.props.printSpec.defaultBackground;(t||n||r)&&this.configurePrintMap(e.map,e.printSpec)}},{key:"render",value:function(){return(this.props.capabilities||this.props.error)&&this.props.open?this.props.withContainer?this.props.withPanelAsContainer?b.createElement(x,{className:"mapstore-print-panel",header:b.createElement("span",null,b.createElement("span",{className:"print-panel-title"},b.createElement(Y,{msgId:"print.paneltitle"})),b.createElement("span",{className:"print-panel-close panel-close",onClick:this.props.toggleControl})),style:this.props.style},this.renderBody()):b.createElement(w,{id:"mapstore-print-panel",style:a({left:"17%",top:"50px",zIndex:1990},this.props.style)},b.createElement("span",{role:"header"},b.createElement("span",{className:"print-panel-title"},b.createElement(Y,{msgId:"print.paneltitle"})),b.createElement("button",{onClick:this.props.toggleControl,className:"print-panel-close close"},this.props.closeGlyph?b.createElement(R,{glyph:this.props.closeGlyph}):b.createElement("span",null,"×"))),this.renderBody()):this.renderBody():null}}])&&u(n.prototype,h),v&&u(n,v),L}(b.Component);g(oe,"propTypes",{map:h.object,layers:h.array,capabilities:h.object,printSpec:h.object,printSpecTemplate:h.object,withContainer:h.bool,withPanelAsContainer:h.bool,open:h.bool,pdfUrl:h.string,title:h.string,style:h.object,mapWidth:h.number,mapType:h.string,alternatives:h.array,toggleControl:h.func,onBeforePrint:h.func,setPage:h.func,onPrint:h.func,configurePrintMap:h.func,getPrintSpecification:h.func,getLayoutName:h.func,error:h.string,getZoomForExtent:h.func,minZoom:h.number,maxZoom:h.number,usePreview:h.bool,mapPreviewOptions:h.object,syncMapPreview:h.bool,useFixedScales:h.bool,scales:h.array,ignoreLayers:h.array,defaultBackground:h.string,closeGlyph:h.string,submitConfig:h.object,previewOptions:h.object,currentLocale:h.string,overrideOptions:h.object}),g(oe,"contextTypes",{messages:h.object}),g(oe,"defaultProps",{withContainer:!0,withPanelAsContainer:!1,title:"print.paneltitle",toggleControl:function(){},onBeforePrint:function(){},setPage:function(){},onPrint:function(){},configurePrintMap:function(){},printSpecTemplate:{},getPrintSpecification:re.getMapfishPrintSpecification,getLayoutName:re.getLayoutName,getZoomForExtent:O.defaultGetZoomForExtent,pdfUrl:null,mapWidth:370,mapType:"leaflet",minZoom:1,maxZoom:23,alternatives:[{name:"legend",component:D,regex:/legend/},{name:"2pages",component:q,regex:/2_pages/},{name:"landscape",component:Z,regex:/landscape/}],usePreview:!0,mapPreviewOptions:{enableScalebox:!1,enableRefresh:!1},syncMapPreview:!0,useFixedScales:!1,scales:[],ignoreLayers:["google","bing"],defaultBackground:"osm",closeGlyph:"1-close",submitConfig:{buttonConfig:{bsSize:"small",bsStyle:"primary"},glyph:""},previewOptions:{buttonStyle:"primary"},style:{},currentLocale:"en-US",overrideOptions:{}});var ae=U([function(e){return e.controls.print&&e.controls.print.enabled||e.controls.toolbar&&"print"===e.controls.toolbar.active},function(e){return e.print&&e.print.capabilities},function(e){return e.print&&e.print.spec&&B({},e.print.spec,e.print.map||{})},function(e){return e.print&&e.print.pdfUrl},function(e){return e.print&&e.print.error},G,F,z,function(e){return e.browser&&(!e.browser.ie||e.browser.ie11)},V,W],(function(e,t,n,r,o,a,i,s,c,l,u){return{open:e,capabilities:t,printSpec:n,pdfUrl:r,error:o,map:a,layers:i.filter((function(e){return!e.loadingError})),scales:s,usePreview:c,currentLocale:l,mapType:u}})),ie=v(ae,{toggleControl:j.bind(null,"print",null),onPrint:M,onBeforePrint:N,setPage:L.bind(null,"print","currentPage"),configurePrintMap:k})(oe);e(ie)}.bind(null,n)).catch(n.oe)},enabler:function(e){return e.print&&e.print.enabled||e.toolbar&&"print"===e.toolbar.active}},{disablePluginIf:"{state('mapType') === 'cesium'}",Toolbar:{name:"print",position:7,help:b.createElement(Y,{msgId:"helptexts.print"}),tooltip:"printbutton",icon:b.createElement(R,{glyph:"print"}),exclusive:!0,panel:!0,priority:1},BurgerMenu:{name:"print",position:2,text:b.createElement(Y,{msgId:"printbutton"}),icon:b.createElement(R,{glyph:"print"}),action:j.bind(null,"print",null),priority:2,doNotHide:!0}}),reducers:{print:n(3306)}}},2704:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(1),c=n(88).connect,l=n(195).createSelector,u=n(3307),p=n(2705),f=n(2113),d=n(767),m=d.offsetEnabledSelector,y=d.currentTimeSelector,g=n(2208),b=g.currentTimeRangeSelector,h=g.isVisible,v=g.rangeSelector,S=g.timelineLayersSelector,E=g.isMapSync,O=n(2137).mapLayoutValuesSelector,w=n(407),A=w.withState,T=w.compose,P=w.branch,C=w.renderNothing,x=w.withStateHandlers,_=w.withProps,R=w.defaultProps,I=n(2479),j=n(2191),L=j.selectTime,D=j.enableOffset,M=j.onRangeChanged,N=j.setMapSync,k=n(774).setCurrentOffset,G=n(2100),F=n(2229).selectPlaybackRange,U=n(2261),B=U.playbackRangeSelector,H=U.statusSelector,z=n(757),V=z.Button,W=z.Glyphicon,Y=n(2132)(V),q=n(13),Z=q.head,K=q.isString,Q=n(12),X=function(e){return K(e)&&-1!==e.indexOf("%")},J=function(e){return parseInt(e,10)/100},$=function(e,t){return Q(t).diff(e)>0},ee=T(c(l(h,S,y,b,m,B,H,v,(function(e,t,n,r,o,a,i,s){return{visible:e,layers:t,currentTime:n,currentTimeRange:r,offsetEnabled:o,playbackRange:a,status:i,viewRange:s}})),{setCurrentTime:L,onOffsetEnabled:D,setOffset:k,setPlaybackRange:F,moveRangeTo:M}),P((function(e){var t=e.visible,n=void 0===t||t,r=e.layers,o=void 0===r?[]:r;return!n||0===Object.keys(o).length}),C),A("options","setOptions",{collapsed:!0}),c(l(E,(function(e){return{mapSync:e}})),{toggleMapSync:N}),T(T(x((function(){return{}}),{onResize:function(){return function(e){return{containerWidth:e.width}}}}),I({querySelector:".ms2",closest:!0,debounceTime:100})),R({style:{marginBottom:35,marginLeft:100,marginRight:80}}),c(l((function(e){return O(e,{right:!0,bottom:!0,left:!0})}),(function(e){return{mapLayoutStyle:e}}))),_((function(e){var t=e.containerWidth,n=e.style,r=e.mapLayoutStyle,o=n||{},i=o.marginLeft,s=o.marginRight,c=r.left,l=void 0===c?0:c,u=r.right,p=void 0===u?0:u;p=X(p)&&J(p)*t||p,l=X(l)&&J(l)*t||l;if(t){var f=t-p-l-i-s;return{hide:f<410,compactToolbar:f<880,style:a({},n,{},r,{minWidth:410})}}return{style:a({},n,{},r,{minWidth:410})}})),P((function(e){return e.hide}),C)))((function(e){var t=e.items,n=e.options,o=e.setOptions,i=e.mapSync,c=e.toggleMapSync,l=void 0===c?function(){}:c,d=e.currentTime,m=e.setCurrentTime,y=e.offsetEnabled,g=e.onOffsetEnabled,b=e.currentTimeRange,h=e.setOffset,v=e.style,S=e.status,E=e.viewRange,O=e.moveRangeTo,w=e.compactToolbar,A=n.hideLayersName,T=n.collapsed,P=Z(t&&t.filter((function(e){return"playback"===e.name}))),C=P&&P.plugin,x=function(e,t,n,r){var o=Q(n.end).diff(n.start)/2;if("time-current"===t&&n&&n.start.toString()!==Q(e).add(-1*o).toString()&&n.end.toString()!==Q(e).add(o).toString()&&O({start:Q(e).add(-1*o),end:Q(e).add(o)}),"range-start"===t||"range-end"===t){var a=Q(r.end).diff(r.start),i=Q(r.start).add(a/2);O(a/2<=o?{start:Q(i).add(-1*o),end:Q(i).add(o)}:{start:Q(i).add(-1*a*5/2),end:Q(i).add(5*a/2)})}};return s.createElement("div",{style:a({position:"absolute",marginBottom:35,marginLeft:100,background:"transparent"},v,{right:T?"auto":v.right||0}),className:"timeline-plugin".concat(A?" hide-layers-name":"").concat(y?" with-time-offset":"")},y&&s.createElement(p,{clickable:!T,glyph:"range-start",onIconClick:function(e,t){return"PLAY"!==S&&x(e,t,E,b)},tooltip:s.createElement(G,{msgId:"timeline.rangeStart"}),showButtons:!0,date:d||b&&b.start,onUpdate:function(e){return(b&&$(e,b.end)||!b)&&"PLAY"!==S&&m(e)},className:"shadow-soft",style:{position:"absolute",top:-5,left:2,transform:"translateY(-100%)"}}),s.createElement("div",{className:"timeline-plugin-toolbar".concat(w?" ms-collapsed":"")},y&&b?s.createElement(p,{clickable:!T,glyph:"range-end",onIconClick:function(e,t){return"PLAY"!==S&&x(e,t,E,b)},tooltip:s.createElement(G,{msgId:"timeline.rangeEnd"}),date:b.end,showButtons:!0,onUpdate:function(e){return"PLAY"!==S&&$(d,e)&&h(e)}}):s.createElement(p,{clickable:!T,glyph:"time-current",showButtons:!0,onIconClick:function(e,t){return"PLAY"!==S&&x(e,t,E)},tooltip:s.createElement(G,{msgId:"timeline.currentTime"}),date:d||b&&b.start,onUpdate:function(e){return(b&&$(e,b.end)||!b)&&"PLAY"!==S&&m(e)}}),s.createElement("div",{className:"timeline-plugin-btn-group"},s.createElement(f,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"list",tooltip:s.createElement(G,{msgId:A?"timeline.showLayerName":"timeline.hideLayerName"}),bsStyle:A?"primary":"success",visible:!T,active:!A,onClick:function(){return o(a({},n,{hideLayersName:!A}))}},{glyph:"time-offset",bsStyle:y?"success":"primary",active:y,disabled:"PLAY"===S,tooltip:s.createElement(G,{msgId:y?"timeline.disableRange":"timeline.enableRange"}),onClick:function(){"PLAY"!==S&&g(!y)}},{glyph:"map-synch",tooltip:s.createElement(G,{msgId:i?"timeline.mapSyncOn":"timeline.mapSyncOff"}),bsStyle:i?"success":"primary",active:i,onClick:function(){return l(!i)}}]}),s.createElement(C,r({},P,{settingsStyle:{right:T||w?40:"unset"}}))),s.createElement(Y,{onClick:function(){return o(a({},n,{collapsed:!T}))},className:"square-button-sm ms-timeline-expand",bsStyle:"primary",tooltip:s.createElement(G,{msgId:T?"timeline.expand":"timeline.collapse"})},s.createElement(W,{glyph:T?"chevron-up":"chevron-down"}))),!T&&s.createElement(u,{offsetEnabled:y,playbackEnabled:!0,hideLayersName:A}))})),te=n(26),ne=n(3315);e.exports={TimelinePlugin:te(ee,{disablePluginIf:"{state('mapType') === 'cesium'}",WidgetsTray:{tool:s.createElement(ne,null),position:0}}),reducers:{dimension:n(2708),timeline:n(3316)},epics:n(3317)}},2705:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1),d=n(0),m=n(757),y=m.Form,g=m.FormGroup,b=m.FormControl,h=m.Glyphicon,v=m.Button,S=n(2132)(h),E=n(13),O=E.padStart,w=E.isNil,A=n(12),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(h,e);var t,n,r,d,m=(t=h,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function h(){var e;o(this,h);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=m.call.apply(m,[this].concat(n))),"onUpdate",(function(t,n){var r=A(e.props.date).utc(),o=n?A(r).add(1,t):A(r).subtract(1,t);o.isValid()&&!isNaN(o.toDate().getTime())&&e.props.onUpdate(o.toISOString())})),p(s(e),"onChange",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if(""!==n){var o=A(e.props.date).utc(),a=o["day"===t?"date":t]&&A(o)["day"===t?"date":t](r(n));a.isValid()&&!isNaN(a.toDate().getTime())&&e.props.onUpdate(a.toISOString())}})),p(s(e),"getForm",(function(){var t=e.props.date&&A(e.props.date).utc();return[{name:"icon",value:"calendar",type:"icon"},{name:"day",placeholder:"DD",value:t&&t.date()},{name:"month",placeholder:"MM",readOnly:!0,value:t&&t.month(),format:function(e){return!w(e)&&""!==e&&A.monthsShort(e)},parseValue:function(e){return e-1}},{name:"year",placeholder:"YYYY",value:t&&t.year()},{name:"icon",value:"time",type:"icon"},{name:"hours",placeholder:"hh",value:t&&t.hours()},{name:"separator",value:":",type:"separator"},{name:"minutes",placeholder:"mm",value:t&&t.minutes()},{name:"separator",value:":",type:"separator"},{name:"seconds",placeholder:"ss",value:t&&t.seconds()},{name:"separator",value:t&&t.utcOffset(),type:"separator",format:function(e){return"UTC "+(e>=0?"+":"-")+O(e/60,2,0)}}]})),e}return n=h,(r=[{key:"render",value:function(){var e=this,t=this.getForm();return f.createElement(y,{className:"ms-inline-datetime ".concat(this.props.className),style:this.props.style},f.createElement(g,{controlId:"inlineDateTime"},this.props.glyph&&f.createElement("div",{style:this.props.clickable?{cursor:"pointer"}:{},onClick:function(){return e.props.clickable&&e.props.onIconClick(e.props.date,e.props.glyph)}},f.createElement(S,{tooltip:this.props.clickable?this.props.tooltip:void 0,tooltipId:this.props.clickable?this.props.tooltipId:void 0,className:"ms-inline-datetime-icon",glyph:this.props.glyph})),t.map((function(t){return"icon"===t.type&&f.createElement("div",{className:"ms-inline-datetime-input ms-dt-".concat(t.name)},f.createElement(S,{glyph:t.value}))||"separator"===t.type&&f.createElement("div",{className:"ms-inline-datetime-input ms-dt-".concat(t.name)},t.format&&t.format(t.value)||t.value)||f.createElement("div",{className:"ms-inline-datetime-input ms-dt-".concat(t.name)},e.props.showButtons&&f.createElement(v,{bsSize:"xs",disabled:!e.props.date,onClick:function(){return e.onUpdate(t.name,!0)}},f.createElement(S,{glyph:"chevron-up"})),f.createElement(b,{type:"text",readOnly:t.readOnly,placeholder:t.placeholder||t.name,disabled:!e.props.date,value:t.format&&t.format(t.value)||t.value,onChange:function(n){return e.onChange(t.name,n.target.value,t.parseValue)}}),e.props.showButtons&&f.createElement(v,{bsSize:"xs",disabled:!e.props.date,onClick:function(){return e.onUpdate(t.name)}},f.createElement(S,{glyph:"chevron-down"})))}))))}}])&&a(n.prototype,r),d&&a(n,d),h}(f.Component);p(T,"propTypes",{date:d.string,clickable:d.bool,onUpdate:d.func,onIconClick:d.func,glyph:d.string,style:d.object,className:d.string,tooltip:d.string,tooltipId:d.string,showButtons:d.bool}),p(T,"defaultProps",{date:"",onIconClick:function(){},clickable:!1,onUpdate:function(){},glyph:"time",style:{},className:"",tooltip:""}),e.exports=T},2706:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=n(1),d=n(2707),m=n(757).Popover,y=n(13).omit,g=n(33);e.exports=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(S,t);var n,r,b,h,v=(n=S,function(){var e,t=u(n);if(l()){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return c(this,e)});function S(){return i(this,S),v.apply(this,arguments)}return r=S,(b=[{key:"render",value:function(){var t=null,n=this.props,r=n.popoverOptions,i=n.keyProp,s=a(n,["popoverOptions","keyProp"]);return f.createElement("span",{className:"mapstore-info-popover"},f.createElement(e,o({},y(s,["renderPopover","tooltipId"]),{key:i,ref:function(e){t=e}})),f.createElement(d,{placement:r.placement,shouldUpdatePosition:!0,show:!0,target:function(){return g.findDOMNode(t)}},f.createElement(m,r.props,r.content)))}}])&&s(r.prototype,b),h&&s(r,h),S}(f.Component)}},2707:function(e,t,n){var r=n(2351);e.exports=r(n(757).Overlay)},2708:function(e,t,n){var r=n(774),o=r.UPDATE_LAYER_DIMENSION_DATA,a=r.SET_CURRENT_TIME,i=r.SET_OFFSET_TIME,s=r.MOVE_TIME,c=n(269).REMOVE_NODE,l=n(267).RESET_CONTROLS,u=n(410).set,p=n(12),f=n(13),d=f.mapValues,m=f.pickBy;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return u("data[".concat(t.dimension,"][").concat(t.layerId,"]"),t.data,e);case a:return u("currentTime",t.time,e);case i:return u("offsetTime",t.offsetTime,e);case s:if(e.offsetTime&&e.currentTime){var n=p(e.offsetTime).diff(e.currentTime),r=p(t.time).add(n);return u("currentTime",t.time,u("offsetTime",r.toISOString(),e))}return u("currentTime",t.time,e);case c:var f=d(e.data,(function(e){return m(e,(function(e,n){return n!==t.node}))}));return u("data",f,e);case l:return u("data",void 0,u("currentTime",void 0,u("offsetTime",void 0,e)));default:return e}}},2709:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(15),i=n(13).castArray,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.startWith.apply(e,r(t))};e.exports={wrapStartStop:function(e,t,n){return function(r){return(n?s(r,i(e)).catch(n):s(r,i(e))).concat(a.Observable.from(i(t)))}}}},2710:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(1),p=n(26),f=n(407),d=f.defaultProps,m=f.compose,y=n(195).createSelector,g=n(2229),b=g.play,h=g.pause,v=g.stop,S=g.STATUS,E=n(767).currentTimeSelector,O=n(2261),w=O.statusSelector,A=O.loadingSelector,T=n(88).connect,P=m(d({statusMap:S}),T(y(w,E,A,(function(e,t,n){return{loading:n,currentTime:t,status:e}})),{play:b,pause:h,stop:v}))(n(3318)),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,r,p,f=(t=d,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function d(){return o(this,d),f.apply(this,arguments)}return n=d,(r=[{key:"render",value:function(){return u.createElement("div",{className:"playback-plugin"},u.createElement(P,this.props))}}])&&a(n.prototype,r),p&&a(n,p),d}(u.Component);e.exports={PlaybackPlugin:p(C,{disablePluginIf:"{state('featuregridmode') === 'EDIT'}",Timeline:{name:"playback",position:1,priority:1}}),epics:n(3322),reducers:{playback:n(3324),dimension:n(2708)}}},2711:function(e,t,n){var r=n(2655),o=r.LOGIN_SUCCESS,a=r.LOGIN_FAIL,i=r.LOGOUT,s=r.CHANGE_PASSWORD_SUCCESS,c=r.CHANGE_PASSWORD_FAIL,l=r.RESET_ERROR,u=r.REFRESH_SUCCESS,p=r.SESSION_VALID,f=n(267).SET_CONTROL_PROPERTY,d=n(3325).USERMANAGER_UPDATE_USER,m=n(197),y=n(26),g=n(13),b=g.cloneDeep,h=g.head;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:null,errorCause:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return e.user&&t.user&&e.user.id===t.user.id?y({},e,{user:b(t.user)}):e;case f:return"ResetPassword"===t.control&&"enabled"===t.property?y({},e,{passwordChanged:!1,passwordError:null}):e;case o:var n=m.getUserAttributes(t.userDetails.User),r=h(n.filter((function(e){return"uuid"===e.name.toLowerCase()}))),g=new Date/1e3|0;return y({},e,{user:t.userDetails.User,token:t.userDetails&&t.userDetails.access_token||r&&r.value,refresh_token:t.userDetails&&t.userDetails.refresh_token,expires:t.userDetails&&t.userDetails.expires?g+t.userDetails.expires:g+172800,authHeader:t.authHeader,loginError:null});case u:var v=new Date/1e3|0;return y({},e,{token:t.userDetails&&t.userDetails.access_token,refresh_token:t.userDetails&&t.userDetails.refresh_token,expires:t.userDetails&&t.userDetails.expires?v+t.userDetails.expires:v+172800});case a:return y({},e,{loginError:t.error});case l:return y({},e,{loginError:null});case i:return y({},e,{user:null,token:null,refresh_token:null,expires:null,authHeader:null,loginError:null});case s:return y({},e,{user:y({},e.user,y({},t.user,{date:(new Date).getTime()})),authHeader:t.authHeader,passwordChanged:!0,passwordError:null});case c:return y({},e,{passwordError:t.error,passwordChanged:!1});case p:return y({},e,{user:t.userDetails.User,loginError:null});default:return e}}},2712:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(413),s=i.MAPS_LIST_LOADED,c=i.MAPS_LIST_LOADING,l=i.MAPS_LIST_LOAD_ERROR,u=i.MAP_CREATED,p=i.MAP_ERROR,f=i.MAP_UPDATING,d=i.MAP_METADATA_UPDATED,m=i.MAP_DELETING,y=i.ATTRIBUTE_UPDATED,g=i.PERMISSIONS_LIST_LOADING,b=i.PERMISSIONS_LIST_LOADED,h=i.SAVE_MAP,v=i.PERMISSIONS_UPDATED,S=i.THUMBNAIL_ERROR,E=i.RESET_UPDATING,O=i.MAPS_SEARCH_TEXT_CHANGED,w=i.METADATA_CHANGED,A=i.SHOW_DETAILS,T=n(418),P=T.EDIT_MAP,C=T.RESET_CURRENT_MAP,x=n(26),_=n(13),R=_.isArray,I=_.isNil;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!1,showMapDetails:!0,errors:[],searchText:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return x({},e,{searchText:t.text});case w:return x({},e,{metadata:x({},e.metadata,a({},t.prop,t.value))});case A:return x({},e,{showMapDetails:t.showMapDetails});case P:return x({},e,{metadata:{name:t.map&&t.map.name||e&&e.metadata&&e.metadata.name||"",description:t.map&&t.map.description||e&&e.metadata&&e.metadata.description||""}});case C:return x({},e,{metadata:{name:"",description:""}});case c:return x({},e,{loading:!0,start:t.params&&t.params.start,limit:t.params&&t.params.limit,searchText:t.searchText});case s:if(t.maps&&t.maps.results&&Array.isArray(t.maps.results))return x({},e,t.maps,{loading:!1,start:t.params&&t.params.start,limit:t.params&&t.params.limit,searchText:t.searchText});var n=""!==t.maps.results?[t.maps.results]:[];return x({},e,t.maps,{results:n,loading:!1});case l:return{loadingError:t.error};case f:for(var o=""===e.results||I(e.results)?[]:r(e.results),i=0;i<o.length;i++)o[i].id&&o[i].id===t.resourceId&&(o[i]=x({},o[i],{updating:!0}));return x({},e,{results:o});case d:for(var T=""===e.results?[]:r(e.results),_=0;_<T.length;_++)T[_].id&&T[_].id===t.resourceId&&(T[_]=x({},T[_],{description:t.newDescription,name:t.newName,updating:!1}));return x({},e,{results:T});case y:for(var j=""===e.results?[]:r(e.results),L=0;L<j.length;L++){var D;if(j[L].id&&j[L].id===t.resourceId)j[L]=x({},j[L],(a(D={},t.name,decodeURIComponent(t.value)),a(D,"updating",!1),a(D,"loadingError",t.error?t.error:null),D))}return x({},e,{results:j});case v:for(var M=""===e.results?[]:r(e.results),N=0;N<M.length;N++)M[N].id&&M[N].id===t.resourceId&&(M[N]=x({},M[N],{loadingError:t.error?t.error:null}));return x({},e,{results:M});case m:for(var k=""===e.results?[]:r(e.results),G=0;G<k.length;G++)k[G].id&&k[G].id===t.resourceId&&(k[G]=x({},k[G],{deleting:!0}));return x({},e,{results:k});case u:var F=""===e.results?[]:r(e.results),U={results:[].concat(r(F),[t.metadata]),totalCount:e.totalCount+1};return x({},e,U);case h:for(var B=""===e.results?[]:r(e.results),H=0;H<B.length;H++)B[H].id&&B[H].id===t.resourceId&&(B[H]=x({},B[H],{files:t.map&&t.map.files,errors:t.map&&t.map.errors,newThumbnail:t.map&&t.map.newThumbnail,thumbnailError:t.map&&t.map.thumbnailError,thumbnail:t.map&&t.map.thumbnail}));return x({},e,{results:B});case S:case p:case E:for(var z=""===e.results?[]:r(e.results),V=0;V<z.length;V++)z[V].id&&z[V].id===t.resourceId&&(z[V]=x({},z[V],{updating:!1}));return x({},e,{results:z});case g:var W=""===e.results?[]:r(e.results),Y=x({},e,{results:W.map((function(e){return e.id===t.mapId?x({},e,{permissionLoading:!0}):e}))});return Y;case b:var q=""===e.results?[]:r(e.results||[]),Z=x({},e,{results:q.map((function(e){if(e.id===t.mapId){var n=[];return t.permissions&&t.permissions.SecurityRuleList&&t.permissions.SecurityRuleList.SecurityRule&&(R(t.permissions.SecurityRuleList.SecurityRule)?n=t.permissions.SecurityRuleList.SecurityRule:n.push(t.permissions.SecurityRuleList.SecurityRule)),x({},e,{permissionLoading:!1,permissions:{SecurityRuleList:{SecurityRule:n}}})}return e}))});return Z;default:return e}}},2713:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(418),a=o.EDIT_MAP,i=o.UPDATE_CURRENT_MAP,s=o.ERROR_CURRENT_MAP,c=o.UPDATE_CURRENT_MAP_PERMISSIONS,l=o.UPDATE_CURRENT_MAP_GROUPS,u=o.RESET_CURRENT_MAP,p=o.ADD_CURRENT_MAP_PERMISSION,f=n(413),d=f.THUMBNAIL_ERROR,m=f.MAP_UPDATING,y=f.SAVE_MAP,g=f.DISPLAY_METADATA_EDIT,b=f.RESET_UPDATING,h=f.MAP_ERROR,v=f.MAP_CREATED,S=f.PERMISSIONS_LIST_LOADING,E=f.PERMISSIONS_LIST_LOADED,O=f.TOGGLE_DETAILS_SHEET,w=f.UPDATE_DETAILS,A=f.SAVE_DETAILS,T=f.DELETE_DETAILS,P=f.BACK_DETAILS,C=f.UNDO_DETAILS,x=f.TOGGLE_GROUP_PROPERTIES,_=f.TOGGLE_UNSAVED_CHANGES,R=f.SET_DETAILS_CHANGED,I=f.SET_UNSAVED_CHANGES,j=f.METADATA_CHANGED,L=f.DETAILS_SAVING,D=f.TOGGLE_DETAILS_EDITABILITY,M=n(26),N=n(13).isArray;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return M({},e,t.map,{newThumbnail:t.map&&t.map.thumbnail?t.map.thumbnail:null,displayMetadataEdit:t.openModalProperties,thumbnailError:null,errors:[],metadata:{name:t.map.name,description:t.map.description},hideGroupProperties:!1,detailsSheetReadOnly:!0});case D:return M({},e,{editDetailsDisabled:!e.editDetailsDisabled});case i:return M({},e,{newThumbnail:t.thumbnail,thumbnailData:t.thumbnailData,unsavedChanges:!0});case m:return M({},e,{updating:!0});case c:var n=[];return t.permissions&&t.permissions.SecurityRuleList&&t.permissions.SecurityRuleList.SecurityRule&&(N(t.permissions.SecurityRuleList.SecurityRule)?n=t.permissions.SecurityRuleList.SecurityRule:n.push(t.permissions.SecurityRuleList.SecurityRule)),M({},e,{permissions:{SecurityRuleList:{SecurityRule:n}}});case l:return M({},e,{availableGroups:t.groups});case p:var o={SecurityRuleList:{SecurityRule:e.permissions&&e.permissions.SecurityRuleList&&e.permissions.SecurityRuleList.SecurityRule?e.permissions.SecurityRuleList.SecurityRule.slice():[]}};return t.rule&&o.SecurityRuleList.SecurityRule.push(t.rule),M({},e,{permissions:o});case s:return M({},e,{thumbnailError:null,mapError:null,errors:t.errors});case d:return M({},e,{thumbnailError:t.error,errors:[],updating:!1});case h:return M({},e,{mapError:t.error,errors:[],updating:!1});case y:return M({},e,{thumbnailError:null});case g:return M({},e,{displayMetadataEdit:t.displayMetadataEditValue});case b:return M({},e,{updating:!1});case v:return M({},e,{mapId:t.resourceId});case S:return M({},e,{permissionLoading:!0});case E:return M({},e,{permissionLoading:!1});case u:return{};case O:return M({},e,{showDetailEditor:!e.showDetailEditor,detailsBackup:e.showDetailEditor||e.detailsDeleted?e.detailsBackup:"",detailsSheetReadOnly:t.detailsSheetReadOnly});case j:var f=t.prop;return M({},e,{metadata:M({},e.metadata,r({},t.prop,t.value)),unsavedChanges:("name"===f?t.value:e.metadata.name)!==e.name||("description"===f?t.value:e.metadata.description)!==e.description});case w:return M({},e,{detailsText:t.detailsText,originalDetails:t.originalDetails||e.originalDetails,detailsBackup:t.doBackup?e.detailsText:e.detailsBackup});case P:return M({},e,{detailsText:e.detailsDeleted?"":t.backupDetails,detailsBackup:e.detailsDeleted?e.detailsBackup:"",showDetailEditor:!1});case C:return M({},e,{detailsText:e.detailsBackup,detailsBackup:"",detailsDeleted:!1});case A:return t.detailsText.length<=5e5?M({},e,{detailsText:t.detailsText,detailsBackup:"",detailsDeleted:!1}):e;case L:return M({},e,{saving:t.saving});case T:return M({},e,{detailsText:"",detailsBackup:e.detailsText,detailsChanged:!0,unsavedChanges:!0,detailsDeleted:!0});case I:return M({},e,{unsavedChanges:t.value});case x:return M({},e,{hideGroupProperties:!e.hideGroupProperties});case _:return M({},e,{showUnsavedChanges:!e.showUnsavedChanges});case R:return M({},e,{unsavedChanges:t.detailsChanged?t.detailsChanged:e.unsavedChanges,detailsChanged:t.detailsChanged});default:return e}}},2714:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n(2575).UPDATE_MAP_LAYOUT,c=n(26);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{layout:{},boundingMapRect:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var n=t.layout,r=n.boundingMapRect,a=void 0===r?{}:r,l=i(n,["boundingMapRect"]);return c({},e,{layout:c({},l,l),boundingMapRect:o({},a)});default:return e}}},2731:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(757),y=m.Glyphicon,g=m.Button,b=m.ButtonGroup,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(h,e);var t,n,r,f,m=(t=h,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function h(){var e;o(this,h);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=m.call.apply(m,[this].concat(n))),"renderLeftButton",(function(){return e.props.useButtons?d.createElement(g,{ref:"left",disabled:0===e.props.index,className:e.props.btnClassName||"square-button-md",bsStyle:"primary",onClick:function(){e.props.onPrevious()}},d.createElement(y,{glyph:"arrow-left"})):d.createElement("a",{ref:"left",disabled:0===e.props.index,className:e.props.btnClassName||"square-button-md",onClick:function(){e.props.onPrevious()}},d.createElement(y,{glyph:"chevron-left"}))})),p(s(e),"renderRightButton",(function(){return e.props.useButtons?d.createElement(g,{ref:"right",disabled:e.props.index===e.props.size-1,className:e.props.btnClassName||"square-button-md",bsStyle:"primary",onClick:function(){e.props.onNext()}},d.createElement(y,{glyph:"arrow-right"})):d.createElement("a",{ref:"right",disabled:e.props.index===e.props.size-1,className:e.props.btnClassName||"square-button-md",onClick:function(){e.props.onNext()}},d.createElement(y,{glyph:"chevron-right"}))})),e}return n=h,(r=[{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){return d.createElement("span",null,d.createElement("span",null,this.props.title),d.createElement(b,{className:"pull-right"},this.renderLeftButton(),this.renderRightButton()))}}])&&a(n.prototype,r),f&&a(n,f),h}(d.Component);p(h,"propTypes",{title:f.string,index:f.number,size:f.number,container:f.oneOfType([f.object,f.func]),useButtons:f.bool,onPrevious:f.func,onNext:f.func,btnClassName:f.string}),p(h,"defaultProps",{useButtons:!0}),e.exports=h},2899:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=n(15),f=n(162),d=n(26),m=n(770).push,y=n(834),g=y.basicError,b=y.basicSuccess,h=n(53),v=n(40),S=v.MAP_INFO_LOADED,E=v.MAP_SAVED,O=v.mapSaveError,w=v.mapSaved,A=v.loadMapInfo,T=n(13),P=T.isNil,C=T.find,x=n(413),_=x.SAVE_DETAILS,R=x.SAVE_RESOURCE_DETAILS,I=x.MAPS_GET_MAP_RESOURCES_BY_CATEGORY,j=x.DELETE_MAP,L=x.OPEN_DETAILS_PANEL,D=x.MAPS_LOAD_MAP,M=x.CLOSE_DETAILS_PANEL,N=x.NO_DETAILS_AVAILABLE,k=x.SAVE_MAP_RESOURCE,G=x.MAP_DELETED,F=x.setDetailsChanged,U=x.updateDetails,B=x.mapsLoading,H=x.mapsLoaded,z=x.mapDeleting,V=x.toggleDetailsEditability,W=x.mapDeleted,Y=x.loadError,q=x.doNothing,Z=x.detailsLoaded,K=x.detailsSaving,Q=x.onDisplayMetadataEdit,X=x.RESET_UPDATING,J=x.resetUpdating,$=x.toggleDetailsSheet,ee=x.getMapResourcesByCategory,te=x.mapUpdating,ne=x.savingMap,re=x.mapCreated,oe=x.loadMaps,ae=n(418),ie=ae.resetCurrentMap,se=ae.EDIT_MAP,ce=n(2130).closeFeatureGrid,le=n(267).toggleControl,ue=n(2900),pe=ue.mapPermissionsFromIdSelector,fe=ue.mapThumbnailsUriFromIdSelector,de=ue.mapDetailsUriFromIdSelector,me=ue.searchTextSelector,ye=ue.searchParamsSelector,ge=ue.totalCountSelector,be=n(268),he=be.mapIdSelector,ve=be.mapInfoDetailsUriFromIdSelector,Se=n(2141).mapTypeSelector,Ee=n(827),Oe=Ee.currentMapDetailsTextSelector,we=Ee.currentMapIdSelector,Ae=Ee.currentMapDetailsUriSelector,Te=Ee.currentMapSelector,Pe=Ee.currentMapDetailsChangedSelector,Ce=Ee.currentMapOriginalDetailsTextSelector,xe=n(271).userParamsSelector,_e=n(775),Re=_e.deleteResourceById,Ie=_e.createAssociatedResource,je=_e.deleteAssociatedResource,Le=_e.updateAssociatedResource,De=n(196).getIdFromUri,Me=n(136).getErrorMessage,Ne=n(273).EMPTY_RESOURCE_VALUE,ke=n(280),Ge=ke.createResource,Fe=ke.updateResource;e.exports={loadMapsEpic:function(e){return e.ofType(D).switchMap((function(e){var t=e.params,n=e.searchText,r=e.geoStoreUrl,o=n.replace(/[/?:;@=&\\]+/g,""),a=d({},{params:t},r?{baseURL:r}:{});return p.Observable.of(B(o,t),ee("MAP",o,a))}))},resetCurrentMapEpic:function(e){return e.ofType(X).switchMap((function(){return p.Observable.from([Q(!1),ie()])}))},storeDetailsInfoEpic:function(e,t){return e.ofType(S).switchMap((function(){var e=he(t.getState());return e?p.Observable.fromPromise(h.getResourceAttributes(e)).switchMap((function(t){var n=C(t,{name:"details"});return n&&n.value!==Ne?p.Observable.of(Z(e,n.value)):p.Observable.empty()})):p.Observable.empty()}))},closeDetailsPanelEpic:function(e){return e.ofType(M).switchMap((function(){return p.Observable.from([le("details","enabled"),ie()])}))},fetchDataForDetailsPanel:function(e,t){return e.ofType(L).switchMap((function(){var e=t.getState(),n=ve(e),r=De(n);return p.Observable.fromPromise(h.getData(r).then((function(e){return e}))).switchMap((function(e){return p.Observable.from([ce(),U(e,!0,e)])})).startWith(le("details","enabled")).catch((function(){return p.Observable.of(g({message:"maps.feedback.errorFetchingDetailsOfMap"}),U(N,!0,N))}))}))},deleteMapAndAssociatedResourcesEpic:function(e,t){return e.ofType(j).switchMap((function(e){var n=t.getState(),r=e.resourceId,a=e.options,i=de(n,r),s=fe(n,r),c=De(i),l=De(s);return p.Observable.forkJoin(Re(l,a),Re(c,a),Re(r,a)).concatMap((function(e){var t=o(e,3),n=t[0],a=t[1],i=t[2],s=[];return"error"===n.resType&&s.push(g({message:"maps.feedback.errorDeletingDetailsOfMap"})),"error"===a.resType&&s.push(g({message:"maps.feedback.errorDeletingThumbnailOfMap"})),"error"===i.resType&&(s.push(g({message:"maps.feedback.errorDeletingMap"})),s.push(W(r,"failure",i.error))),"success"===i.resType&&s.push(W(r,"success")),"success"===i.resType&&"success"===n.resType&&"success"===a.resType&&s.push(b({message:"maps.feedback.allResDeleted"})),p.Observable.from(s)})).startWith(z(r))}))},getMapsResourcesByCategoryEpic:function(e){return e.ofType(I).switchMap((function(e){var t=e.map,n=e.searchText,r=e.opts;return p.Observable.fromPromise(h.getResourcesByCategory(t,n,r).then((function(e){return e}))).switchMap((function(e){return p.Observable.of(H(e,r.params,n))})).catch((function(e){return Y(e)}))}))},setDetailsChangedEpic:function(e,t){return e.ofType(_).switchMap((function(e){var n=[],r=t.getState(),o=Ae(r);if(e.detailsText.length<=5e5?n.push($(!0)):n.push(g({message:"maps.feedback.errorSizeExceeded"})),!o)return n.push(F("<p><br></p>"!==e.detailsText)),p.Observable.from(n);var a=Ce(r),i=Oe(r);return n.push(F(a!==i)),p.Observable.from(n)}))},fetchDetailsFromResourceEpic:function(e,t){return e.ofType(se).switchMap((function(){var e=t.getState(),n=we(e),r=Ae(e);if(!r||r===Ne)return p.Observable.of(U("",!0,""));var o=De(r);return p.Observable.fromPromise(h.getData(o).then((function(e){return e}))).switchMap((function(e){return p.Observable.of(U(e,!0,e))})).catch((function(){return p.Observable.of(g({message:"maps.feedback.errorFetchingDetailsOfMap"}),U(N,!0,N),V(n))}))}))},saveResourceDetailsEpic:function(e,t){return e.ofType(R).switchMap((function(){var e=t.getState(),n=we(e),r=Oe(e,n),o=Pe(e),a={attribute:"details",map:Te(e),resource:null,type:"STRING"};return o?(""!==r&&o?a.resource={category:"DETAILS",userParams:xe(e),metadata:{name:f()},value:r,permissions:pe(e,n),optionsAttr:{},optionsRes:{}}:a.optionsDel={},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{}:t,r=e.attribute,o=void 0===r?"":r,a=e.resource,i=void 0===a?null:a,s=e.type,l=void 0===s?"STRING":s,u=e.optionsDel,p=void 0===u?{}:u,f=e.messages,d=void 0===f?{}:f,m=n[o],y=n.id;return!P(m)&&m!==Ne||P(i)?P(i)?je({mapId:y,attribute:o,type:l,resourceId:De(m),options:p,messages:d}):Le({permissions:i.permissions,resourceId:De(m),value:i.value,attribute:o,options:i.optionsAttr,messages:d}):Ie(c({},i,{attribute:o,mapId:y,type:l,messages:d}))}(c({},a)).concat([K(!1),J(n)]).startWith(K(!0))):p.Observable.of(q())}))},mapSaveMapResourceEpic:function(e,t){return e.ofType(k).exhaustMap((function(e){var n=e.resource;return(n.id?Fe(n):Ge(n)).switchMap((function(e){return p.Observable.from([].concat(r(n.id?[A(e)]:[]),[n.id?le("mapSave"):le("mapSaveAs"),w()],r(n.id?[]:[re(e,d({id:e,canDelete:!0,canEdit:!0,canCopy:!0},n.metadata),n.data),m("/viewer/".concat(Se(t.getState()),"/").concat(e))]))).merge(p.Observable.of(b({title:"map.savedMapTitle",message:"map.savedMapMessage",autoDismiss:6,position:"tc"})))})).catch((function(e){var t=e.status,n=e.statusText,r=e.data,o=e.message,a=u(e,["status","statusText","data","message"]);return p.Observable.of(O(t?{status:t,statusText:n,data:r}:o||a),g(c({},Me(e,"geostore","mapsError"),{autoDismiss:6,position:"tc"})))})).startWith(n.id?te(n.metadata):ne(n.metadata))}))},reloadMapsEpic:function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(G,E).delay(1e3).switchMap((function(){return p.Observable.of(oe(!1,me(r()),(e=r(),t=ge(e),n=ye(e)||{},o=n.start,a=n.limit,i=u(n,["start","limit"]),o===t-1?{start:Math.max(0,o-a),limit:a}:c({start:o,limit:a},i))));var e,t,n,o,a,i}))}}},2900:function(e,t,n){var r=n(13),o=r.find,a=r.get,i=function(e){return a(e,"maps.results",[])},s=function(e,t){return o(i(e),(function(e){return e.id===t}))};e.exports={mapNameSelector:function(e,t){return s(e,t)&&s(e,t).name||""},mapFromIdSelector:s,showMapDetailsSelector:function(e){return a(e,"maps.showMapDetails")},mapsResultsSelector:i,totalCountSelector:function(e){return a(e,"maps.totalCount")},mapMetadataSelector:function(e){return a(e,"maps.metadata",{})},isMapsLastPageSelector:function(e){return e&&e.maps&&e.maps.totalCount===e.maps.start},mapDescriptionSelector:function(e,t){return s(e,t)&&s(e,t).description||""},mapDetailsUriFromIdSelector:function(e,t){return s(e,t)&&s(e,t).details||""},mapPermissionsFromIdSelector:function(e,t){return s(e,t)&&s(e,t).permissions||""},mapThumbnailsUriFromIdSelector:function(e,t){return s(e,t)&&s(e,t).thumbnail||""},searchTextSelector:function(e){return e&&e.maps&&e.maps.searchText},searchParamsSelector:function(e){return{start:a(e,"maps.start"),limit:a(e,"maps.limit")}}}},2901:function(e,t){var n={getWindowSize:function(){return{maxWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,maxHeight:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},onfontready:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=e,i=r,s=o,c=a;if(Object({NODE_ENV:"production"}).isTest){var l={},u=function(e){return l[e]=l[e]||{rootCount:0,iframesCreated:!1,timedOut:!1,fontLoaded:!1,requiredExtraTimeout:!1},l[e]};window.reporter=window.reporter||{modifyRootCount:function(e,t){u(e).rootCount+=t},iframesCreated:function(e){u(e).iframesCreated=!0},timedOut:function(e){u(e).timedOut=!0},fontLoaded:function(e){u(e).fontLoaded=!0},requiredExtraTimeout:function(e){u(e).requiredExtraTimeout=!0},getTests:function(){return l}}}n.timeoutAfter&&setTimeout((function(){i&&(Object({NODE_ENV:"production"}).isTest&&window.reporter.modifyRootCount(c,-1),document.body.removeChild(i),i=0,n.onTimeout&&(Object({NODE_ENV:"production"}).isTest&&window.reporter.timedOut(c),n.onTimeout()))}),n.timeoutAfter),s=function(){i&&i.firstChild.clientWidth===i.lastChild.clientWidth&&(Object({NODE_ENV:"production"}).isTest&&window.reporter.modifyRootCount(c,-1),document.body.removeChild(i),i=0,Object({NODE_ENV:"production"}).isTest&&window.reporter.fontLoaded(c),t())},Object({NODE_ENV:"production"}).isTest&&window.reporter.modifyRootCount(c,1),Object({NODE_ENV:"production"}).isLegacy||s(document.body.appendChild(i=document.createElement("div")).innerHTML='<div style="position:fixed;white-space:pre;bottom:999%;right:999%;font:999px '+(n.generic?"":"'")+a+(n.generic?"":"'")+',serif">'+(n.sampleText||" ")+'</div><div style="position:fixed;white-space:pre;bottom:999%;right:999%;font:999px '+(n.generic?"":"'")+a+(n.generic?"":"'")+',monospace">'+(n.sampleText||" ")+"</div>"),Object({NODE_ENV:"production"}).isLegacy&&s(document.body.appendChild(i=document.createElement("div")).innerHTML='<table style=position:absolute;bottom:999%;right:999%;width:auto><tr><td style=position:relative><tr><td style="font:999px monospace;white-space:pre">.<span style="font:999px '+(n.generic?"":"'")+a+(n.generic?"":"'")+',serif">'+(n.sampleText||" ")+'</span>.</table><table style=position:absolute;bottom:999%;right:999%;width:auto><tr><td style=position:relative><tr><td style="font:999px monospace;white-space:pre">.<span style="font:999px '+(n.generic?"":"'")+a+(n.generic?"":"'")+',monospace">'+(n.sampleText||" ")+"</span>.</table>"),i&&(Object({NODE_ENV:"production"}).isTest&&window.reporter.iframesCreated(c),Object({NODE_ENV:"production"}).isLegacy||(i.firstChild.appendChild(a=document.createElement("iframe")).style.width="999%",a.contentWindow.onresize=s,i.lastChild.appendChild(a=document.createElement("iframe")).style.width="999%",a.contentWindow.onresize=s),Object({NODE_ENV:"production"}).isLegacy&&(i.firstChild.firstChild.firstChild.firstChild.appendChild(a=document.createElement("iframe")).style.cssText="position:absolute;bottom:999%;right:999%;width:999%",a.attachEvent?a.contentWindow.attachEvent("onresize",s):a.contentWindow.onresize=s,i.lastChild.firstChild.firstChild.firstChild.appendChild(a=document.createElement("iframe")).style.cssText="position:absolute;bottom:999%;right:999%;width:999%",a.attachEvent?a.contentWindow.attachEvent("onresize",s):a.contentWindow.onresize=s),Object({NODE_ENV:"production"}).isTest||(a=setTimeout(s)),Object({NODE_ENV:"production"}).isTest&&(a=setTimeout((function(){i&&(window.reporter.requiredExtraTimeout(c),s())}))))},loadFont:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,o){n.onfontready(e,r,{timeoutAfter:t.timeoutAfter,onTimeout:o,sampleText:t.sampleText,generic:t.generic})}))}};e.exports=n},2926:function(e,t,n){var r=n(2927);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},2927:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi .mapErrorMessage {\n    font-size: 16px;\n    color: red;\n}\n",""])},2928:function(e,t,n){var r=n(1),o=n(409),a=o.creationError,i=o.changeMapView,s=o.clickOnMap,c=n(269),l=c.layerLoading,u=c.layerLoad,p=c.layerError,f=n(2400).changeMousePosition,d=n(2325),m=d.changeMeasurementState,y=d.changeGeometry,g=d.resetGeometry,b=d.updateMeasures,h=n(2578).measurementSelector,v=n(2929).changeSelectionState,S=n(2930),E=S.changeLocateState,O=S.onLocateError,w=n(2166),A=w.changeDrawingStatus,T=w.endDrawing,P=w.setCurrentStyle,C=w.geometryChanged,x=w.drawStopped,_=w.selectFeatures,R=w.drawingFeatures,I=n(2401).updateHighlighted,j=n(161).warning,L=n(88).connect,D=n(26),M=n(268).projectionDefsSelector,N=function(){return r.createElement("span",null)};e.exports=function(e,t){var r=n(2931)("./"+e+"/index"),o=L((function(e){return{projectionDefs:M(e),mousePosition:e.mousePosition||{enabled:!1}}}),D({},{onCreationError:a,onMapViewChanges:i,onClick:s,onMouseMove:f,onLayerLoading:l,onLayerLoad:u,onLayerError:p,onWarning:j},t),(function(e,t,n){return D({},n,e,D({},t,{onMouseMove:e.mousePosition.enabled?t.onMouseMove:function(){}}))}))(r.LMap),c=L((function(e){return{enabled:e.controls&&e.controls.measure&&e.controls.measure.enabled||!1,measurement:h(e),useTreshold:e.measurement&&e.measurement.useTreshold||null,uom:e.measurement&&e.measurement.uom||{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}}}}),{changeMeasurementState:m,updateMeasures:b,resetGeometry:g,changeGeometry:y})(r.MeasurementSupport||N),d=L((function(e){return{status:e.locate&&e.locate.state,messages:e.locale&&e.locale.messages?e.locale.messages.locate:void 0}}),{changeLocateState:E,onLocateError:O})(r.Locate||N),S=L((function(e){return e.draw||{}}),{onChangeDrawingStatus:A,onEndDrawing:T,onGeometryChanged:C,onSelectFeatures:_,onDrawingFeatures:R,onDrawStopped:x,setCurrentStyle:P})(r.DrawSupport||N),w=L((function(e){return e.highlight||{}}),{updateHighlighted:I})(r.HighlightFeatureSupport||N),k=L((function(e){return{selection:e.selection||{}}}),{changeSelectionState:v})(r.SelectionSupport||N);return n(2647)("./"+e+"/plugins/index"),{Map:o,Layer:L(null,{onWarning:j})(r.Layer||N),Feature:r.Feature||N,tools:{measurement:c,locate:d,overview:r.Overview||N,scalebar:r.ScaleBar||N,draw:S,highlight:w,selection:k}}}},2929:function(e,t){e.exports={CHANGE_SELECTION_STATE:"CHANGE_SELECTION_STATE",changeSelectionState:function(e){return{type:"CHANGE_SELECTION_STATE",geomType:e.geomType,point:e.point,line:e.line,polygon:e.polygon}}}},2930:function(e,t){e.exports={CHANGE_LOCATE_STATE:"CHANGE_LOCATE_STATE",LOCATE_ERROR:"LOCATE_ERROR",changeLocateState:function(e){return{type:"CHANGE_LOCATE_STATE",state:e}},onLocateError:function(e){return{type:"LOCATE_ERROR",error:e}}}},2931:function(e,t,n){var r={"./cesium/index":2932,"./leaflet/index":2934,"./openlayers/index":2967};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=2931},2932:function(e,t,n){e.exports={LMap:n(2579),Layer:n(2580)}},2933:function(e,t,n){var r=n(2167);e.exports={getMouseXYZ:function(e,t){var n=e.scene,o=t.position||t.endPosition;if(!o)return null;var a=e.camera.getPickRay(o),i=e.scene.globe.pick(a,e.scene),s=n._globe.ellipsoid;if(r.defined(i)){var c=s.cartesianToCartographic(i),l=function(e,t){if(null!==t.position){var n=e.scene,r=n._globe.ellipsoid;return n._camera.pickEllipsoid(t.position||t.endPosition,r)}return null}(e,t);return l&&(c.height=n._globe.getHeight(c),c.cartesian=l,c.position=i),c}return null},getMouseTile:function(e,t){var n=e.scene;if(!t.position)return null;var r=e.camera.getPickRay(t.position);return e.scene.globe.pickTile(r,n)}}},2934:function(e,t,n){e.exports={LMap:n(2402),Layer:n(2403),Feature:n(2404),Locate:n(2422),MeasurementSupport:n(2423),Overview:n(2424),ScaleBar:n(2425),DrawSupport:n(2590),HighlightFeatureSupport:n(2966)}},2935:function(e,t,n){var r=n(760);r.Evented.addInitHook((function(){this._singleClickTimeout=null,this.on("click",this._scheduleSingleClick,this),this.on("dblclick dragstart zoomstart",this._cancelSingleClick,this)})),r.Evented.include({_cancelSingleClick:function(){setTimeout(this._clearSingleClickTimeout.bind(this),0)},_scheduleSingleClick:function(e){this._clearSingleClickTimeout(),this._singleClickTimeout=setTimeout(this._fireSingleClick.bind(this,e),this.options.singleClickTimeout||500)},_fireSingleClick:function(e){e.originalEvent._stopped||this.fire("singleclick",r.Util.extend(e,{type:"singleclick"}))},_clearSingleClickTimeout:function(){null!==this._singleClickTimeout&&(clearTimeout(this._singleClickTimeout),this._singleClickTimeout=null)}})},2936:function(e,t,n){var r=n(760),o=n(13).isFunction;n(2937),n(2938),e.exports={extra:{getIcon:function(e){var t=e.iconPrefix||"fa";return r.ExtraMarkers.icon({icon:t+"-"+e.iconGlyph,markerColor:e.iconColor||"blue",shape:e.iconShape||"square",prefix:t,extraClasses:e.highlight?"marker-selected":""})}},standard:{getIcon:function(e){return r.icon({iconUrl:e.iconUrl||e.symbolUrlCustomized||e.symbolUrl,shadowUrl:e.shadowUrl,iconSize:e.iconSize,shadowSize:e.shadowSize,iconAnchor:e.iconAnchor,shadowAnchor:e.shadowAnchor,popupAnchor:e.popupAnchor})}},html:{getIcon:function(e,t){return r.divIcon(o(e.html)?e.html(t):e.html)}}}},2961:function(e,t,n){var r=n(2962);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},2962:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi .leaflet-control-minimap {\n    border:solid rgba(255, 255, 255, 1.0) 4px;\n    box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n    border-radius: 3px;\n    background: #f8f8f9;\n    transition: all .2s;\n}\n.msgapi .leafletbottom.leafletright, .msgapi .leaflet-control-minimap{\n    position:relative;\n    bottom:5px;\n}\n.msgapi .leaflet-control-minimap a {\n    background-color: rgba(255, 255, 255, 1.0);\n    background-repeat: no-repeat;\n    z-index: 99999;\n    transition: all .2s;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-bottomright {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n    border-radius: 0px;\n    bottom: -3px;\n    right: -3px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-topleft {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-bottomleft {\n    -webkit-transform: rotate(270deg);\n    transform: rotate(270deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-topright {\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap-toggle-display{\n    background-image: url("+n(2963)+");\n    background-size: cover;\n    position: absolute;\n    border-radius: 3px 0px 0px 0px;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap-toggle-display{\n    background-image: url("+n(2964)+");\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-bottomright {\n    bottom: 0;\n    right: 0;\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-topleft{\n    top: 0;\n    left: 0;\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-bottomleft{\n    bottom: 0;\n    left: 0;\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-topright{\n    top: 0;\n    right: 0;\n    -webkit-transform: rotate(270deg);\n    transform: rotate(270deg);\n}\n\n/* Old IE */\n.msgapi .leaflet-oldie .leaflet-control-minimap {\n    border: 1px solid #999;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap a {\n    background-color: #fff;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap a.minimized {\n    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);\n}\n",""])},2963:function(e,t,n){e.exports=n.p+"toggle.svg"},2964:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAH1JREFUOI3t0DEKAjEQheFP8ERWqfUCeg9rL+adbKxkYRFEY7ERhkUhCZb7wyuGYX5ewkIvK6z/ITpjxOHHPtWKrsh4fJEl3GpF29LoI9sHSS6pZjeTnTD0iOayjFevCI7hOKaJZHpObNIsih/b3WiDSzgaS+5lfrY0Wph4A4kFM89VzdVFAAAAAElFTkSuQmCC"},2965:function(e,t,n){"use strict";n.r(t),n.d(t,"boundsToOLExtent",(function(){return r})),n.d(t,"fromLeafletFeatureToQueryform",(function(){return o}));var r=function(e){return[e.getWest(),e.getSouth(),e.getEast(),e.getNorth()]},o=function(e){var t=e.toGeoJSON(),n=e.getBounds(),o=r(n),a=n.getCenter(),i=e.getRadius?e.getRadius():0,s=t.features[0].geometry.coordinates;return{type:t.features[0].geometry.type,extent:o,center:a,coordinates:s,radius:i,projection:"EPSG:4326"}}},2966:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(13).findIndex,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(y,e);var t,n,r,f,d=(t=y,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function y(){var e;o(this,y);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=d.call.apply(d,[this].concat(n))),"setLayer",(function(){var t;e._layer&&e.cleanSupport(),e.props.map.eachLayer((function(n){n.layerId===e.props.layer&&(t=n)}),s(e)),void 0!==t&&t.on("click",e.featureClicked,s(e)),e._layer=t,e.highlightFeatures(e.props.features)})),p(s(e),"featureClicked",(function(t){var n=t.layer;if((t.originalEvent.ctrlKey||t.originalEvent.metaKey)&&n){var r=m(e._selectedFeatures,(function(e){return e===n}));-1!==r?(e._layer.resetStyle(n),e._selectedFeatures=e._selectedFeatures.filter((function(e,t){return t!==r})),n=null):e._selectedFeatures.push(n)}else e._selectedFeatures.map((function(t){e._layer.resetStyle(t)})),e._selectedFeatures=n?[n]:[];n&&(n.bringToFront(),n.setStyle(e.props.selectedStyle)),e.props.updateHighlighted(e._selectedFeatures.map((function(e){return e.msId})),"")})),p(s(e),"cleanSupport",(function(){e._layer&&(e._selectedFeatures.map((function(t){e._layer.resetStyle(t)})),e._layer.off("click",e.featureClicked,s(e))),e._selectedFeatures=[],e._layer=null,e.props.updateHighlighted([],"")})),p(s(e),"highlightFeatures",(function(t){e._layer||e.setLayer(),e._selectedFeatures.map((function(t){e._layer.resetStyle(t)})),e._selectedFeatures=[],e._layer.eachLayer((function(n){-1!==t.indexOf(n.msId)&&(e._selectedFeatures.push(n),n.bringToFront(),n.setStyle(e.props.selectedStyle))}),s(e))})),e}return n=y,(r=[{key:"componentDidMount",value:function(){this._selectedFeatures=[],this._layer=null,"enabled"===this.props.status&&this.setLayer()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props;return e.status!==t.status||e.layer!==t.layer||"update"===e.status&&e.features.toString()!==t.features.toString()}},{key:"UNSAFE_componentWillUpdate",value:function(e){switch(e.status){case"enabled":this.setLayer();break;case"disabled":this.cleanSupport();break;case"update":this.highlightFeatures(e.features);break;default:return}}},{key:"componentWillUnmount",value:function(){this.cleanSupport()}},{key:"render",value:function(){return null}}])&&a(n.prototype,r),f&&a(n,f),y}(d.Component);p(y,"propTypes",{map:f.object,layer:f.string,status:f.oneOf(["disabled","enabled","update"]),updateHighlighted:f.func,selectedStyle:f.object,features:f.array}),p(y,"contextTypes",{messages:f.object}),p(y,"defaultProps",{status:"disabled",updateHighlighted:function(){},selectedStyle:{radius:12,weight:4,opacity:1,fillOpacity:1,color:"yellow",fillColor:"red"},features:[]}),e.exports=y},2967:function(e,t,n){var r=n(2968)(["formatNumber"]);e.exports={LMap:n(2568).default,Layer:n(2446).default,Feature:n(2447).default,Locate:n(2565).default,MeasurementSupport:r(n(2457).default),Overview:n(2458).default,ScaleBar:n(2459).default,DrawSupport:n(2645).default,HighlightFeatureSupport:n(3122).default,SelectionSupport:n(3123).default}},2968:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(412).injectIntl,s=n(0),c=n(13).omit,l=n(407),u=l.compose,p=l.branch,f=l.getContext,d=l.withProps,m=l.withPropsOnChange,y=l.mapProps,g=function(e){return y((function(t){return c(t,e)}))},b={locale:navigator&&navigator.language,formats:{},messages:{},defaultLocale:"en",defaultFormats:{},formatDate:function(e){return e},formatTime:function(e){return e},formatRelative:function(e){return e},formatNumber:function(e){return e},formatPlural:function(e){return e},formatMessage:function(e){return e},formatHTMLMessage:function(e){return e},now:function(){return new Date}};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u(f({intl:s.object}),p((function(e){return!!e.intl}),i,d({intl:b})),m(["intl"],(function(t){var n=t.intl,r=void 0===n?{}:n;return e.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return o({},e,a({},t,r[t]))}),{})})),g(["intl"]))}},2972:function(e,t,n){var r=n(2973);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},2973:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi .ol-control button:hover, .msgapi .ol-control button:focus {\n    background-color: #f4f4f4;\n}\n.msgapi .ol-zoom .ol-zoom-out, .msgapi .ol-zoom .ol-zoom-in{\n    width: 26px;\n    height: 26px;\n    line-height: 26px;\n    display: block;\n\n    color: black;\n    background-color: #fff;\n    border-width: 0;\n    margin:0;\n}\n.msgapi .ol-zoom.ol-unselectable.ol-control .ol-zoom-in, .msgapi .ol-zoom.ol-unselectable.ol-control .ol-zoom-out {\n    font-family: 'Lucida Console', Monaco, monospace;\n    text-align: center;\n    text-decoration: none;\n    font-weight: bold;\n}\n\n.msgapi .ol-zoom .ol-zoom-out{\n    font-size: 18px;\n    border-radius: 0 0 4px 4px;\n}\n.msgapi .ol-zoom .ol-zoom-in{\n    border-bottom: 1px solid #ccc;\n    border-radius: 4px 4px 0 0;\n    font-size: 20px;\n}\n.msgapi .ol-zoom.ol-unselectable.ol-control{\n    top:10px;\n    left:10px;\n    padding:0;\n    box-shadow: rgba(0, 0, 0, 0.65098) 0px 1px 5px 0px;\n    border-radius: 4px;\n}\n\n.msgapi .ol-scale-line.ol-unselectable{\n    background-color: rgba(255, 255, 255, 0.8);\n}\n",""])},3078:function(e,t){e.exports='.fa-glass:before {\n  content: "\\f000";\n}\n.fa-music:before {\n  content: "\\f001";\n}\n.fa-search:before {\n  content: "\\f002";\n}\n.fa-envelope-o:before {\n  content: "\\f003";\n}\n.fa-heart:before {\n  content: "\\f004";\n}\n.fa-star:before {\n  content: "\\f005";\n}\n.fa-star-o:before {\n  content: "\\f006";\n}\n.fa-user:before {\n  content: "\\f007";\n}\n.fa-film:before {\n  content: "\\f008";\n}\n.fa-th-large:before {\n  content: "\\f009";\n}\n.fa-th:before {\n  content: "\\f00a";\n}\n.fa-th-list:before {\n  content: "\\f00b";\n}\n.fa-check:before {\n  content: "\\f00c";\n}\n.fa-remove:before,\n.fa-close:before,\n.fa-times:before {\n  content: "\\f00d";\n}\n.fa-search-plus:before {\n  content: "\\f00e";\n}\n.fa-search-minus:before {\n  content: "\\f010";\n}\n.fa-power-off:before {\n  content: "\\f011";\n}\n.fa-signal:before {\n  content: "\\f012";\n}\n.fa-gear:before,\n.fa-cog:before {\n  content: "\\f013";\n}\n.fa-trash-o:before {\n  content: "\\f014";\n}\n.fa-home:before {\n  content: "\\f015";\n}\n.fa-file-o:before {\n  content: "\\f016";\n}\n.fa-clock-o:before {\n  content: "\\f017";\n}\n.fa-road:before {\n  content: "\\f018";\n}\n.fa-download:before {\n  content: "\\f019";\n}\n.fa-arrow-circle-o-down:before {\n  content: "\\f01a";\n}\n.fa-arrow-circle-o-up:before {\n  content: "\\f01b";\n}\n.fa-inbox:before {\n  content: "\\f01c";\n}\n.fa-play-circle-o:before {\n  content: "\\f01d";\n}\n.fa-rotate-right:before,\n.fa-repeat:before {\n  content: "\\f01e";\n}\n.fa-refresh:before {\n  content: "\\f021";\n}\n.fa-list-alt:before {\n  content: "\\f022";\n}\n.fa-lock:before {\n  content: "\\f023";\n}\n.fa-flag:before {\n  content: "\\f024";\n}\n.fa-headphones:before {\n  content: "\\f025";\n}\n.fa-volume-off:before {\n  content: "\\f026";\n}\n.fa-volume-down:before {\n  content: "\\f027";\n}\n.fa-volume-up:before {\n  content: "\\f028";\n}\n.fa-qrcode:before {\n  content: "\\f029";\n}\n.fa-barcode:before {\n  content: "\\f02a";\n}\n.fa-tag:before {\n  content: "\\f02b";\n}\n.fa-tags:before {\n  content: "\\f02c";\n}\n.fa-book:before {\n  content: "\\f02d";\n}\n.fa-bookmark:before {\n  content: "\\f02e";\n}\n.fa-print:before {\n  content: "\\f02f";\n}\n.fa-camera:before {\n  content: "\\f030";\n}\n.fa-font:before {\n  content: "\\f031";\n}\n.fa-bold:before {\n  content: "\\f032";\n}\n.fa-italic:before {\n  content: "\\f033";\n}\n.fa-text-height:before {\n  content: "\\f034";\n}\n.fa-text-width:before {\n  content: "\\f035";\n}\n.fa-align-left:before {\n  content: "\\f036";\n}\n.fa-align-center:before {\n  content: "\\f037";\n}\n.fa-align-right:before {\n  content: "\\f038";\n}\n.fa-align-justify:before {\n  content: "\\f039";\n}\n.fa-list:before {\n  content: "\\f03a";\n}\n.fa-dedent:before,\n.fa-outdent:before {\n  content: "\\f03b";\n}\n.fa-indent:before {\n  content: "\\f03c";\n}\n.fa-video-camera:before {\n  content: "\\f03d";\n}\n.fa-photo:before,\n.fa-image:before,\n.fa-picture-o:before {\n  content: "\\f03e";\n}\n.fa-pencil:before {\n  content: "\\f040";\n}\n.fa-map-marker:before {\n  content: "\\f041";\n}\n.fa-adjust:before {\n  content: "\\f042";\n}\n.fa-tint:before {\n  content: "\\f043";\n}\n.fa-edit:before,\n.fa-pencil-square-o:before {\n  content: "\\f044";\n}\n.fa-share-square-o:before {\n  content: "\\f045";\n}\n.fa-check-square-o:before {\n  content: "\\f046";\n}\n.fa-arrows:before {\n  content: "\\f047";\n}\n.fa-step-backward:before {\n  content: "\\f048";\n}\n.fa-fast-backward:before {\n  content: "\\f049";\n}\n.fa-backward:before {\n  content: "\\f04a";\n}\n.fa-play:before {\n  content: "\\f04b";\n}\n.fa-pause:before {\n  content: "\\f04c";\n}\n.fa-stop:before {\n  content: "\\f04d";\n}\n.fa-forward:before {\n  content: "\\f04e";\n}\n.fa-fast-forward:before {\n  content: "\\f050";\n}\n.fa-step-forward:before {\n  content: "\\f051";\n}\n.fa-eject:before {\n  content: "\\f052";\n}\n.fa-chevron-left:before {\n  content: "\\f053";\n}\n.fa-chevron-right:before {\n  content: "\\f054";\n}\n.fa-plus-circle:before {\n  content: "\\f055";\n}\n.fa-minus-circle:before {\n  content: "\\f056";\n}\n.fa-times-circle:before {\n  content: "\\f057";\n}\n.fa-check-circle:before {\n  content: "\\f058";\n}\n.fa-question-circle:before {\n  content: "\\f059";\n}\n.fa-info-circle:before {\n  content: "\\f05a";\n}\n.fa-crosshairs:before {\n  content: "\\f05b";\n}\n.fa-times-circle-o:before {\n  content: "\\f05c";\n}\n.fa-check-circle-o:before {\n  content: "\\f05d";\n}\n.fa-ban:before {\n  content: "\\f05e";\n}\n.fa-arrow-left:before {\n  content: "\\f060";\n}\n.fa-arrow-right:before {\n  content: "\\f061";\n}\n.fa-arrow-up:before {\n  content: "\\f062";\n}\n.fa-arrow-down:before {\n  content: "\\f063";\n}\n.fa-mail-forward:before,\n.fa-share:before {\n  content: "\\f064";\n}\n.fa-expand:before {\n  content: "\\f065";\n}\n.fa-compress:before {\n  content: "\\f066";\n}\n.fa-plus:before {\n  content: "\\f067";\n}\n.fa-minus:before {\n  content: "\\f068";\n}\n.fa-asterisk:before {\n  content: "\\f069";\n}\n.fa-exclamation-circle:before {\n  content: "\\f06a";\n}\n.fa-gift:before {\n  content: "\\f06b";\n}\n.fa-leaf:before {\n  content: "\\f06c";\n}\n.fa-fire:before {\n  content: "\\f06d";\n}\n.fa-eye:before {\n  content: "\\f06e";\n}\n.fa-eye-slash:before {\n  content: "\\f070";\n}\n.fa-warning:before,\n.fa-exclamation-triangle:before {\n  content: "\\f071";\n}\n.fa-plane:before {\n  content: "\\f072";\n}\n.fa-calendar:before {\n  content: "\\f073";\n}\n.fa-random:before {\n  content: "\\f074";\n}\n.fa-comment:before {\n  content: "\\f075";\n}\n.fa-magnet:before {\n  content: "\\f076";\n}\n.fa-chevron-up:before {\n  content: "\\f077";\n}\n.fa-chevron-down:before {\n  content: "\\f078";\n}\n.fa-retweet:before {\n  content: "\\f079";\n}\n.fa-shopping-cart:before {\n  content: "\\f07a";\n}\n.fa-folder:before {\n  content: "\\f07b";\n}\n.fa-folder-open:before {\n  content: "\\f07c";\n}\n.fa-arrows-v:before {\n  content: "\\f07d";\n}\n.fa-arrows-h:before {\n  content: "\\f07e";\n}\n.fa-bar-chart-o:before,\n.fa-bar-chart:before {\n  content: "\\f080";\n}\n.fa-twitter-square:before {\n  content: "\\f081";\n}\n.fa-facebook-square:before {\n  content: "\\f082";\n}\n.fa-camera-retro:before {\n  content: "\\f083";\n}\n.fa-key:before {\n  content: "\\f084";\n}\n.fa-gears:before,\n.fa-cogs:before {\n  content: "\\f085";\n}\n.fa-comments:before {\n  content: "\\f086";\n}\n.fa-thumbs-o-up:before {\n  content: "\\f087";\n}\n.fa-thumbs-o-down:before {\n  content: "\\f088";\n}\n.fa-star-half:before {\n  content: "\\f089";\n}\n.fa-heart-o:before {\n  content: "\\f08a";\n}\n.fa-sign-out:before {\n  content: "\\f08b";\n}\n.fa-linkedin-square:before {\n  content: "\\f08c";\n}\n.fa-thumb-tack:before {\n  content: "\\f08d";\n}\n.fa-external-link:before {\n  content: "\\f08e";\n}\n.fa-sign-in:before {\n  content: "\\f090";\n}\n.fa-trophy:before {\n  content: "\\f091";\n}\n.fa-github-square:before {\n  content: "\\f092";\n}\n.fa-upload:before {\n  content: "\\f093";\n}\n.fa-lemon-o:before {\n  content: "\\f094";\n}\n.fa-phone:before {\n  content: "\\f095";\n}\n.fa-square-o:before {\n  content: "\\f096";\n}\n.fa-bookmark-o:before {\n  content: "\\f097";\n}\n.fa-phone-square:before {\n  content: "\\f098";\n}\n.fa-twitter:before {\n  content: "\\f099";\n}\n.fa-facebook-f:before,\n.fa-facebook:before {\n  content: "\\f09a";\n}\n.fa-github:before {\n  content: "\\f09b";\n}\n.fa-unlock:before {\n  content: "\\f09c";\n}\n.fa-credit-card:before {\n  content: "\\f09d";\n}\n.fa-feed:before,\n.fa-rss:before {\n  content: "\\f09e";\n}\n.fa-hdd-o:before {\n  content: "\\f0a0";\n}\n.fa-bullhorn:before {\n  content: "\\f0a1";\n}\n.fa-bell:before {\n  content: "\\f0f3";\n}\n.fa-certificate:before {\n  content: "\\f0a3";\n}\n.fa-hand-o-right:before {\n  content: "\\f0a4";\n}\n.fa-hand-o-left:before {\n  content: "\\f0a5";\n}\n.fa-hand-o-up:before {\n  content: "\\f0a6";\n}\n.fa-hand-o-down:before {\n  content: "\\f0a7";\n}\n.fa-arrow-circle-left:before {\n  content: "\\f0a8";\n}\n.fa-arrow-circle-right:before {\n  content: "\\f0a9";\n}\n.fa-arrow-circle-up:before {\n  content: "\\f0aa";\n}\n.fa-arrow-circle-down:before {\n  content: "\\f0ab";\n}\n.fa-globe:before {\n  content: "\\f0ac";\n}\n.fa-wrench:before {\n  content: "\\f0ad";\n}\n.fa-tasks:before {\n  content: "\\f0ae";\n}\n.fa-filter:before {\n  content: "\\f0b0";\n}\n.fa-briefcase:before {\n  content: "\\f0b1";\n}\n.fa-arrows-alt:before {\n  content: "\\f0b2";\n}\n.fa-group:before,\n.fa-users:before {\n  content: "\\f0c0";\n}\n.fa-chain:before,\n.fa-link:before {\n  content: "\\f0c1";\n}\n.fa-cloud:before {\n  content: "\\f0c2";\n}\n.fa-flask:before {\n  content: "\\f0c3";\n}\n.fa-cut:before,\n.fa-scissors:before {\n  content: "\\f0c4";\n}\n.fa-copy:before,\n.fa-files-o:before {\n  content: "\\f0c5";\n}\n.fa-paperclip:before {\n  content: "\\f0c6";\n}\n.fa-save:before,\n.fa-floppy-o:before {\n  content: "\\f0c7";\n}\n.fa-square:before {\n  content: "\\f0c8";\n}\n.fa-navicon:before,\n.fa-reorder:before,\n.fa-bars:before {\n  content: "\\f0c9";\n}\n.fa-list-ul:before {\n  content: "\\f0ca";\n}\n.fa-list-ol:before {\n  content: "\\f0cb";\n}\n.fa-strikethrough:before {\n  content: "\\f0cc";\n}\n.fa-underline:before {\n  content: "\\f0cd";\n}\n.fa-table:before {\n  content: "\\f0ce";\n}\n.fa-magic:before {\n  content: "\\f0d0";\n}\n.fa-truck:before {\n  content: "\\f0d1";\n}\n.fa-pinterest:before {\n  content: "\\f0d2";\n}\n.fa-pinterest-square:before {\n  content: "\\f0d3";\n}\n.fa-google-plus-square:before {\n  content: "\\f0d4";\n}\n.fa-google-plus:before {\n  content: "\\f0d5";\n}\n.fa-money:before {\n  content: "\\f0d6";\n}\n.fa-caret-down:before {\n  content: "\\f0d7";\n}\n.fa-caret-up:before {\n  content: "\\f0d8";\n}\n.fa-caret-left:before {\n  content: "\\f0d9";\n}\n.fa-caret-right:before {\n  content: "\\f0da";\n}\n.fa-columns:before {\n  content: "\\f0db";\n}\n.fa-unsorted:before,\n.fa-sort:before {\n  content: "\\f0dc";\n}\n.fa-sort-down:before,\n.fa-sort-desc:before {\n  content: "\\f0dd";\n}\n.fa-sort-up:before,\n.fa-sort-asc:before {\n  content: "\\f0de";\n}\n.fa-envelope:before {\n  content: "\\f0e0";\n}\n.fa-linkedin:before {\n  content: "\\f0e1";\n}\n.fa-rotate-left:before,\n.fa-undo:before {\n  content: "\\f0e2";\n}\n.fa-legal:before,\n.fa-gavel:before {\n  content: "\\f0e3";\n}\n.fa-dashboard:before,\n.fa-tachometer:before {\n  content: "\\f0e4";\n}\n.fa-comment-o:before {\n  content: "\\f0e5";\n}\n.fa-comments-o:before {\n  content: "\\f0e6";\n}\n.fa-flash:before,\n.fa-bolt:before {\n  content: "\\f0e7";\n}\n.fa-sitemap:before {\n  content: "\\f0e8";\n}\n.fa-umbrella:before {\n  content: "\\f0e9";\n}\n.fa-paste:before,\n.fa-clipboard:before {\n  content: "\\f0ea";\n}\n.fa-lightbulb-o:before {\n  content: "\\f0eb";\n}\n.fa-exchange:before {\n  content: "\\f0ec";\n}\n.fa-cloud-download:before {\n  content: "\\f0ed";\n}\n.fa-cloud-upload:before {\n  content: "\\f0ee";\n}\n.fa-user-md:before {\n  content: "\\f0f0";\n}\n.fa-stethoscope:before {\n  content: "\\f0f1";\n}\n.fa-suitcase:before {\n  content: "\\f0f2";\n}\n.fa-bell-o:before {\n  content: "\\f0a2";\n}\n.fa-coffee:before {\n  content: "\\f0f4";\n}\n.fa-cutlery:before {\n  content: "\\f0f5";\n}\n.fa-file-text-o:before {\n  content: "\\f0f6";\n}\n.fa-building-o:before {\n  content: "\\f0f7";\n}\n.fa-hospital-o:before {\n  content: "\\f0f8";\n}\n.fa-ambulance:before {\n  content: "\\f0f9";\n}\n.fa-medkit:before {\n  content: "\\f0fa";\n}\n.fa-fighter-jet:before {\n  content: "\\f0fb";\n}\n.fa-beer:before {\n  content: "\\f0fc";\n}\n.fa-h-square:before {\n  content: "\\f0fd";\n}\n.fa-plus-square:before {\n  content: "\\f0fe";\n}\n.fa-angle-double-left:before {\n  content: "\\f100";\n}\n.fa-angle-double-right:before {\n  content: "\\f101";\n}\n.fa-angle-double-up:before {\n  content: "\\f102";\n}\n.fa-angle-double-down:before {\n  content: "\\f103";\n}\n.fa-angle-left:before {\n  content: "\\f104";\n}\n.fa-angle-right:before {\n  content: "\\f105";\n}\n.fa-angle-up:before {\n  content: "\\f106";\n}\n.fa-angle-down:before {\n  content: "\\f107";\n}\n.fa-desktop:before {\n  content: "\\f108";\n}\n.fa-laptop:before {\n  content: "\\f109";\n}\n.fa-tablet:before {\n  content: "\\f10a";\n}\n.fa-mobile-phone:before,\n.fa-mobile:before {\n  content: "\\f10b";\n}\n.fa-circle-o:before {\n  content: "\\f10c";\n}\n.fa-quote-left:before {\n  content: "\\f10d";\n}\n.fa-quote-right:before {\n  content: "\\f10e";\n}\n.fa-spinner:before {\n  content: "\\f110";\n}\n.fa-circle:before {\n  content: "\\f111";\n}\n.fa-mail-reply:before,\n.fa-reply:before {\n  content: "\\f112";\n}\n.fa-github-alt:before {\n  content: "\\f113";\n}\n.fa-folder-o:before {\n  content: "\\f114";\n}\n.fa-folder-open-o:before {\n  content: "\\f115";\n}\n.fa-smile-o:before {\n  content: "\\f118";\n}\n.fa-frown-o:before {\n  content: "\\f119";\n}\n.fa-meh-o:before {\n  content: "\\f11a";\n}\n.fa-gamepad:before {\n  content: "\\f11b";\n}\n.fa-keyboard-o:before {\n  content: "\\f11c";\n}\n.fa-flag-o:before {\n  content: "\\f11d";\n}\n.fa-flag-checkered:before {\n  content: "\\f11e";\n}\n.fa-terminal:before {\n  content: "\\f120";\n}\n.fa-code:before {\n  content: "\\f121";\n}\n.fa-mail-reply-all:before,\n.fa-reply-all:before {\n  content: "\\f122";\n}\n.fa-star-half-empty:before,\n.fa-star-half-full:before,\n.fa-star-half-o:before {\n  content: "\\f123";\n}\n.fa-location-arrow:before {\n  content: "\\f124";\n}\n.fa-crop:before {\n  content: "\\f125";\n}\n.fa-code-fork:before {\n  content: "\\f126";\n}\n.fa-unlink:before,\n.fa-chain-broken:before {\n  content: "\\f127";\n}\n.fa-question:before {\n  content: "\\f128";\n}\n.fa-info:before {\n  content: "\\f129";\n}\n.fa-exclamation:before {\n  content: "\\f12a";\n}\n.fa-superscript:before {\n  content: "\\f12b";\n}\n.fa-subscript:before {\n  content: "\\f12c";\n}\n.fa-eraser:before {\n  content: "\\f12d";\n}\n.fa-puzzle-piece:before {\n  content: "\\f12e";\n}\n.fa-microphone:before {\n  content: "\\f130";\n}\n.fa-microphone-slash:before {\n  content: "\\f131";\n}\n.fa-shield:before {\n  content: "\\f132";\n}\n.fa-calendar-o:before {\n  content: "\\f133";\n}\n.fa-fire-extinguisher:before {\n  content: "\\f134";\n}\n.fa-rocket:before {\n  content: "\\f135";\n}\n.fa-maxcdn:before {\n  content: "\\f136";\n}\n.fa-chevron-circle-left:before {\n  content: "\\f137";\n}\n.fa-chevron-circle-right:before {\n  content: "\\f138";\n}\n.fa-chevron-circle-up:before {\n  content: "\\f139";\n}\n.fa-chevron-circle-down:before {\n  content: "\\f13a";\n}\n.fa-html5:before {\n  content: "\\f13b";\n}\n.fa-css3:before {\n  content: "\\f13c";\n}\n.fa-anchor:before {\n  content: "\\f13d";\n}\n.fa-unlock-alt:before {\n  content: "\\f13e";\n}\n.fa-bullseye:before {\n  content: "\\f140";\n}\n.fa-ellipsis-h:before {\n  content: "\\f141";\n}\n.fa-ellipsis-v:before {\n  content: "\\f142";\n}\n.fa-rss-square:before {\n  content: "\\f143";\n}\n.fa-play-circle:before {\n  content: "\\f144";\n}\n.fa-ticket:before {\n  content: "\\f145";\n}\n.fa-minus-square:before {\n  content: "\\f146";\n}\n.fa-minus-square-o:before {\n  content: "\\f147";\n}\n.fa-level-up:before {\n  content: "\\f148";\n}\n.fa-level-down:before {\n  content: "\\f149";\n}\n.fa-check-square:before {\n  content: "\\f14a";\n}\n.fa-pencil-square:before {\n  content: "\\f14b";\n}\n.fa-external-link-square:before {\n  content: "\\f14c";\n}\n.fa-share-square:before {\n  content: "\\f14d";\n}\n.fa-compass:before {\n  content: "\\f14e";\n}\n.fa-toggle-down:before,\n.fa-caret-square-o-down:before {\n  content: "\\f150";\n}\n.fa-toggle-up:before,\n.fa-caret-square-o-up:before {\n  content: "\\f151";\n}\n.fa-toggle-right:before,\n.fa-caret-square-o-right:before {\n  content: "\\f152";\n}\n.fa-euro:before,\n.fa-eur:before {\n  content: "\\f153";\n}\n.fa-gbp:before {\n  content: "\\f154";\n}\n.fa-dollar:before,\n.fa-usd:before {\n  content: "\\f155";\n}\n.fa-rupee:before,\n.fa-inr:before {\n  content: "\\f156";\n}\n.fa-cny:before,\n.fa-rmb:before,\n.fa-yen:before,\n.fa-jpy:before {\n  content: "\\f157";\n}\n.fa-ruble:before,\n.fa-rouble:before,\n.fa-rub:before {\n  content: "\\f158";\n}\n.fa-won:before,\n.fa-krw:before {\n  content: "\\f159";\n}\n.fa-bitcoin:before,\n.fa-btc:before {\n  content: "\\f15a";\n}\n.fa-file:before {\n  content: "\\f15b";\n}\n.fa-file-text:before {\n  content: "\\f15c";\n}\n.fa-sort-alpha-asc:before {\n  content: "\\f15d";\n}\n.fa-sort-alpha-desc:before {\n  content: "\\f15e";\n}\n.fa-sort-amount-asc:before {\n  content: "\\f160";\n}\n.fa-sort-amount-desc:before {\n  content: "\\f161";\n}\n.fa-sort-numeric-asc:before {\n  content: "\\f162";\n}\n.fa-sort-numeric-desc:before {\n  content: "\\f163";\n}\n.fa-thumbs-up:before {\n  content: "\\f164";\n}\n.fa-thumbs-down:before {\n  content: "\\f165";\n}\n.fa-youtube-square:before {\n  content: "\\f166";\n}\n.fa-youtube:before {\n  content: "\\f167";\n}\n.fa-xing:before {\n  content: "\\f168";\n}\n.fa-xing-square:before {\n  content: "\\f169";\n}\n.fa-youtube-play:before {\n  content: "\\f16a";\n}\n.fa-dropbox:before {\n  content: "\\f16b";\n}\n.fa-stack-overflow:before {\n  content: "\\f16c";\n}\n.fa-instagram:before {\n  content: "\\f16d";\n}\n.fa-flickr:before {\n  content: "\\f16e";\n}\n.fa-adn:before {\n  content: "\\f170";\n}\n.fa-bitbucket:before {\n  content: "\\f171";\n}\n.fa-bitbucket-square:before {\n  content: "\\f172";\n}\n.fa-tumblr:before {\n  content: "\\f173";\n}\n.fa-tumblr-square:before {\n  content: "\\f174";\n}\n.fa-long-arrow-down:before {\n  content: "\\f175";\n}\n.fa-long-arrow-up:before {\n  content: "\\f176";\n}\n.fa-long-arrow-left:before {\n  content: "\\f177";\n}\n.fa-long-arrow-right:before {\n  content: "\\f178";\n}\n.fa-apple:before {\n  content: "\\f179";\n}\n.fa-windows:before {\n  content: "\\f17a";\n}\n.fa-android:before {\n  content: "\\f17b";\n}\n.fa-linux:before {\n  content: "\\f17c";\n}\n.fa-dribbble:before {\n  content: "\\f17d";\n}\n.fa-skype:before {\n  content: "\\f17e";\n}\n.fa-foursquare:before {\n  content: "\\f180";\n}\n.fa-trello:before {\n  content: "\\f181";\n}\n.fa-female:before {\n  content: "\\f182";\n}\n.fa-male:before {\n  content: "\\f183";\n}\n.fa-gittip:before,\n.fa-gratipay:before {\n  content: "\\f184";\n}\n.fa-sun-o:before {\n  content: "\\f185";\n}\n.fa-moon-o:before {\n  content: "\\f186";\n}\n.fa-archive:before {\n  content: "\\f187";\n}\n.fa-bug:before {\n  content: "\\f188";\n}\n.fa-vk:before {\n  content: "\\f189";\n}\n.fa-weibo:before {\n  content: "\\f18a";\n}\n.fa-renren:before {\n  content: "\\f18b";\n}\n.fa-pagelines:before {\n  content: "\\f18c";\n}\n.fa-stack-exchange:before {\n  content: "\\f18d";\n}\n.fa-arrow-circle-o-right:before {\n  content: "\\f18e";\n}\n.fa-arrow-circle-o-left:before {\n  content: "\\f190";\n}\n.fa-toggle-left:before,\n.fa-caret-square-o-left:before {\n  content: "\\f191";\n}\n.fa-dot-circle-o:before {\n  content: "\\f192";\n}\n.fa-wheelchair:before {\n  content: "\\f193";\n}\n.fa-vimeo-square:before {\n  content: "\\f194";\n}\n.fa-turkish-lira:before,\n.fa-try:before {\n  content: "\\f195";\n}\n.fa-plus-square-o:before {\n  content: "\\f196";\n}\n.fa-space-shuttle:before {\n  content: "\\f197";\n}\n.fa-slack:before {\n  content: "\\f198";\n}\n.fa-envelope-square:before {\n  content: "\\f199";\n}\n.fa-wordpress:before {\n  content: "\\f19a";\n}\n.fa-openid:before {\n  content: "\\f19b";\n}\n.fa-institution:before,\n.fa-bank:before,\n.fa-university:before {\n  content: "\\f19c";\n}\n.fa-mortar-board:before,\n.fa-graduation-cap:before {\n  content: "\\f19d";\n}\n.fa-yahoo:before {\n  content: "\\f19e";\n}\n.fa-google:before {\n  content: "\\f1a0";\n}\n.fa-reddit:before {\n  content: "\\f1a1";\n}\n.fa-reddit-square:before {\n  content: "\\f1a2";\n}\n.fa-stumbleupon-circle:before {\n  content: "\\f1a3";\n}\n.fa-stumbleupon:before {\n  content: "\\f1a4";\n}\n.fa-delicious:before {\n  content: "\\f1a5";\n}\n.fa-digg:before {\n  content: "\\f1a6";\n}\n.fa-pied-piper-pp:before {\n  content: "\\f1a7";\n}\n.fa-pied-piper-alt:before {\n  content: "\\f1a8";\n}\n.fa-drupal:before {\n  content: "\\f1a9";\n}\n.fa-joomla:before {\n  content: "\\f1aa";\n}\n.fa-language:before {\n  content: "\\f1ab";\n}\n.fa-fax:before {\n  content: "\\f1ac";\n}\n.fa-building:before {\n  content: "\\f1ad";\n}\n.fa-child:before {\n  content: "\\f1ae";\n}\n.fa-paw:before {\n  content: "\\f1b0";\n}\n.fa-spoon:before {\n  content: "\\f1b1";\n}\n.fa-cube:before {\n  content: "\\f1b2";\n}\n.fa-cubes:before {\n  content: "\\f1b3";\n}\n.fa-behance:before {\n  content: "\\f1b4";\n}\n.fa-behance-square:before {\n  content: "\\f1b5";\n}\n.fa-steam:before {\n  content: "\\f1b6";\n}\n.fa-steam-square:before {\n  content: "\\f1b7";\n}\n.fa-recycle:before {\n  content: "\\f1b8";\n}\n.fa-automobile:before,\n.fa-car:before {\n  content: "\\f1b9";\n}\n.fa-cab:before,\n.fa-taxi:before {\n  content: "\\f1ba";\n}\n.fa-tree:before {\n  content: "\\f1bb";\n}\n.fa-spotify:before {\n  content: "\\f1bc";\n}\n.fa-deviantart:before {\n  content: "\\f1bd";\n}\n.fa-soundcloud:before {\n  content: "\\f1be";\n}\n.fa-database:before {\n  content: "\\f1c0";\n}\n.fa-file-pdf-o:before {\n  content: "\\f1c1";\n}\n.fa-file-word-o:before {\n  content: "\\f1c2";\n}\n.fa-file-excel-o:before {\n  content: "\\f1c3";\n}\n.fa-file-powerpoint-o:before {\n  content: "\\f1c4";\n}\n.fa-file-photo-o:before,\n.fa-file-picture-o:before,\n.fa-file-image-o:before {\n  content: "\\f1c5";\n}\n.fa-file-zip-o:before,\n.fa-file-archive-o:before {\n  content: "\\f1c6";\n}\n.fa-file-sound-o:before,\n.fa-file-audio-o:before {\n  content: "\\f1c7";\n}\n.fa-file-movie-o:before,\n.fa-file-video-o:before {\n  content: "\\f1c8";\n}\n.fa-file-code-o:before {\n  content: "\\f1c9";\n}\n.fa-vine:before {\n  content: "\\f1ca";\n}\n.fa-codepen:before {\n  content: "\\f1cb";\n}\n.fa-jsfiddle:before {\n  content: "\\f1cc";\n}\n.fa-life-bouy:before,\n.fa-life-buoy:before,\n.fa-life-saver:before,\n.fa-support:before,\n.fa-life-ring:before {\n  content: "\\f1cd";\n}\n.fa-circle-o-notch:before {\n  content: "\\f1ce";\n}\n.fa-ra:before,\n.fa-resistance:before,\n.fa-rebel:before {\n  content: "\\f1d0";\n}\n.fa-ge:before,\n.fa-empire:before {\n  content: "\\f1d1";\n}\n.fa-git-square:before {\n  content: "\\f1d2";\n}\n.fa-git:before {\n  content: "\\f1d3";\n}\n.fa-y-combinator-square:before,\n.fa-yc-square:before,\n.fa-hacker-news:before {\n  content: "\\f1d4";\n}\n.fa-tencent-weibo:before {\n  content: "\\f1d5";\n}\n.fa-qq:before {\n  content: "\\f1d6";\n}\n.fa-wechat:before,\n.fa-weixin:before {\n  content: "\\f1d7";\n}\n.fa-send:before,\n.fa-paper-plane:before {\n  content: "\\f1d8";\n}\n.fa-send-o:before,\n.fa-paper-plane-o:before {\n  content: "\\f1d9";\n}\n.fa-history:before {\n  content: "\\f1da";\n}\n.fa-circle-thin:before {\n  content: "\\f1db";\n}\n.fa-header:before {\n  content: "\\f1dc";\n}\n.fa-paragraph:before {\n  content: "\\f1dd";\n}\n.fa-sliders:before {\n  content: "\\f1de";\n}\n.fa-share-alt:before {\n  content: "\\f1e0";\n}\n.fa-share-alt-square:before {\n  content: "\\f1e1";\n}\n.fa-bomb:before {\n  content: "\\f1e2";\n}\n.fa-soccer-ball-o:before,\n.fa-futbol-o:before {\n  content: "\\f1e3";\n}\n.fa-tty:before {\n  content: "\\f1e4";\n}\n.fa-binoculars:before {\n  content: "\\f1e5";\n}\n.fa-plug:before {\n  content: "\\f1e6";\n}\n.fa-slideshare:before {\n  content: "\\f1e7";\n}\n.fa-twitch:before {\n  content: "\\f1e8";\n}\n.fa-yelp:before {\n  content: "\\f1e9";\n}\n.fa-newspaper-o:before {\n  content: "\\f1ea";\n}\n.fa-wifi:before {\n  content: "\\f1eb";\n}\n.fa-calculator:before {\n  content: "\\f1ec";\n}\n.fa-paypal:before {\n  content: "\\f1ed";\n}\n.fa-google-wallet:before {\n  content: "\\f1ee";\n}\n.fa-cc-visa:before {\n  content: "\\f1f0";\n}\n.fa-cc-mastercard:before {\n  content: "\\f1f1";\n}\n.fa-cc-discover:before {\n  content: "\\f1f2";\n}\n.fa-cc-amex:before {\n  content: "\\f1f3";\n}\n.fa-cc-paypal:before {\n  content: "\\f1f4";\n}\n.fa-cc-stripe:before {\n  content: "\\f1f5";\n}\n.fa-bell-slash:before {\n  content: "\\f1f6";\n}\n.fa-bell-slash-o:before {\n  content: "\\f1f7";\n}\n.fa-trash:before {\n  content: "\\f1f8";\n}\n.fa-copyright:before {\n  content: "\\f1f9";\n}\n.fa-at:before {\n  content: "\\f1fa";\n}\n.fa-eyedropper:before {\n  content: "\\f1fb";\n}\n.fa-paint-brush:before {\n  content: "\\f1fc";\n}\n.fa-birthday-cake:before {\n  content: "\\f1fd";\n}\n.fa-area-chart:before {\n  content: "\\f1fe";\n}\n.fa-pie-chart:before {\n  content: "\\f200";\n}\n.fa-line-chart:before {\n  content: "\\f201";\n}\n.fa-lastfm:before {\n  content: "\\f202";\n}\n.fa-lastfm-square:before {\n  content: "\\f203";\n}\n.fa-toggle-off:before {\n  content: "\\f204";\n}\n.fa-toggle-on:before {\n  content: "\\f205";\n}\n.fa-bicycle:before {\n  content: "\\f206";\n}\n.fa-bus:before {\n  content: "\\f207";\n}\n.fa-ioxhost:before {\n  content: "\\f208";\n}\n.fa-angellist:before {\n  content: "\\f209";\n}\n.fa-cc:before {\n  content: "\\f20a";\n}\n.fa-shekel:before,\n.fa-sheqel:before,\n.fa-ils:before {\n  content: "\\f20b";\n}\n.fa-meanpath:before {\n  content: "\\f20c";\n}\n.fa-buysellads:before {\n  content: "\\f20d";\n}\n.fa-connectdevelop:before {\n  content: "\\f20e";\n}\n.fa-dashcube:before {\n  content: "\\f210";\n}\n.fa-forumbee:before {\n  content: "\\f211";\n}\n.fa-leanpub:before {\n  content: "\\f212";\n}\n.fa-sellsy:before {\n  content: "\\f213";\n}\n.fa-shirtsinbulk:before {\n  content: "\\f214";\n}\n.fa-simplybuilt:before {\n  content: "\\f215";\n}\n.fa-skyatlas:before {\n  content: "\\f216";\n}\n.fa-cart-plus:before {\n  content: "\\f217";\n}\n.fa-cart-arrow-down:before {\n  content: "\\f218";\n}\n.fa-diamond:before {\n  content: "\\f219";\n}\n.fa-ship:before {\n  content: "\\f21a";\n}\n.fa-user-secret:before {\n  content: "\\f21b";\n}\n.fa-motorcycle:before {\n  content: "\\f21c";\n}\n.fa-street-view:before {\n  content: "\\f21d";\n}\n.fa-heartbeat:before {\n  content: "\\f21e";\n}\n.fa-venus:before {\n  content: "\\f221";\n}\n.fa-mars:before {\n  content: "\\f222";\n}\n.fa-mercury:before {\n  content: "\\f223";\n}\n.fa-intersex:before,\n.fa-transgender:before {\n  content: "\\f224";\n}\n.fa-transgender-alt:before {\n  content: "\\f225";\n}\n.fa-venus-double:before {\n  content: "\\f226";\n}\n.fa-mars-double:before {\n  content: "\\f227";\n}\n.fa-venus-mars:before {\n  content: "\\f228";\n}\n.fa-mars-stroke:before {\n  content: "\\f229";\n}\n.fa-mars-stroke-v:before {\n  content: "\\f22a";\n}\n.fa-mars-stroke-h:before {\n  content: "\\f22b";\n}\n.fa-neuter:before {\n  content: "\\f22c";\n}\n.fa-genderless:before {\n  content: "\\f22d";\n}\n.fa-facebook-official:before {\n  content: "\\f230";\n}\n.fa-pinterest-p:before {\n  content: "\\f231";\n}\n.fa-whatsapp:before {\n  content: "\\f232";\n}\n.fa-server:before {\n  content: "\\f233";\n}\n.fa-user-plus:before {\n  content: "\\f234";\n}\n.fa-user-times:before {\n  content: "\\f235";\n}\n.fa-hotel:before,\n.fa-bed:before {\n  content: "\\f236";\n}\n.fa-viacoin:before {\n  content: "\\f237";\n}\n.fa-train:before {\n  content: "\\f238";\n}\n.fa-subway:before {\n  content: "\\f239";\n}\n.fa-medium:before {\n  content: "\\f23a";\n}\n.fa-yc:before,\n.fa-y-combinator:before {\n  content: "\\f23b";\n}\n.fa-optin-monster:before {\n  content: "\\f23c";\n}\n.fa-opencart:before {\n  content: "\\f23d";\n}\n.fa-expeditedssl:before {\n  content: "\\f23e";\n}\n.fa-battery-4:before,\n.fa-battery:before,\n.fa-battery-full:before {\n  content: "\\f240";\n}\n.fa-battery-3:before,\n.fa-battery-three-quarters:before {\n  content: "\\f241";\n}\n.fa-battery-2:before,\n.fa-battery-half:before {\n  content: "\\f242";\n}\n.fa-battery-1:before,\n.fa-battery-quarter:before {\n  content: "\\f243";\n}\n.fa-battery-0:before,\n.fa-battery-empty:before {\n  content: "\\f244";\n}\n.fa-mouse-pointer:before {\n  content: "\\f245";\n}\n.fa-i-cursor:before {\n  content: "\\f246";\n}\n.fa-object-group:before {\n  content: "\\f247";\n}\n.fa-object-ungroup:before {\n  content: "\\f248";\n}\n.fa-sticky-note:before {\n  content: "\\f249";\n}\n.fa-sticky-note-o:before {\n  content: "\\f24a";\n}\n.fa-cc-jcb:before {\n  content: "\\f24b";\n}\n.fa-cc-diners-club:before {\n  content: "\\f24c";\n}\n.fa-clone:before {\n  content: "\\f24d";\n}\n.fa-balance-scale:before {\n  content: "\\f24e";\n}\n.fa-hourglass-o:before {\n  content: "\\f250";\n}\n.fa-hourglass-1:before,\n.fa-hourglass-start:before {\n  content: "\\f251";\n}\n.fa-hourglass-2:before,\n.fa-hourglass-half:before {\n  content: "\\f252";\n}\n.fa-hourglass-3:before,\n.fa-hourglass-end:before {\n  content: "\\f253";\n}\n.fa-hourglass:before {\n  content: "\\f254";\n}\n.fa-hand-grab-o:before,\n.fa-hand-rock-o:before {\n  content: "\\f255";\n}\n.fa-hand-stop-o:before,\n.fa-hand-paper-o:before {\n  content: "\\f256";\n}\n.fa-hand-scissors-o:before {\n  content: "\\f257";\n}\n.fa-hand-lizard-o:before {\n  content: "\\f258";\n}\n.fa-hand-spock-o:before {\n  content: "\\f259";\n}\n.fa-hand-pointer-o:before {\n  content: "\\f25a";\n}\n.fa-hand-peace-o:before {\n  content: "\\f25b";\n}\n.fa-trademark:before {\n  content: "\\f25c";\n}\n.fa-registered:before {\n  content: "\\f25d";\n}\n.fa-creative-commons:before {\n  content: "\\f25e";\n}\n.fa-gg:before {\n  content: "\\f260";\n}\n.fa-gg-circle:before {\n  content: "\\f261";\n}\n.fa-tripadvisor:before {\n  content: "\\f262";\n}\n.fa-odnoklassniki:before {\n  content: "\\f263";\n}\n.fa-odnoklassniki-square:before {\n  content: "\\f264";\n}\n.fa-get-pocket:before {\n  content: "\\f265";\n}\n.fa-wikipedia-w:before {\n  content: "\\f266";\n}\n.fa-safari:before {\n  content: "\\f267";\n}\n.fa-chrome:before {\n  content: "\\f268";\n}\n.fa-firefox:before {\n  content: "\\f269";\n}\n.fa-opera:before {\n  content: "\\f26a";\n}\n.fa-internet-explorer:before {\n  content: "\\f26b";\n}\n.fa-tv:before,\n.fa-television:before {\n  content: "\\f26c";\n}\n.fa-contao:before {\n  content: "\\f26d";\n}\n.fa-500px:before {\n  content: "\\f26e";\n}\n.fa-amazon:before {\n  content: "\\f270";\n}\n.fa-calendar-plus-o:before {\n  content: "\\f271";\n}\n.fa-calendar-minus-o:before {\n  content: "\\f272";\n}\n.fa-calendar-times-o:before {\n  content: "\\f273";\n}\n.fa-calendar-check-o:before {\n  content: "\\f274";\n}\n.fa-industry:before {\n  content: "\\f275";\n}\n.fa-map-pin:before {\n  content: "\\f276";\n}\n.fa-map-signs:before {\n  content: "\\f277";\n}\n.fa-map-o:before {\n  content: "\\f278";\n}\n.fa-map:before {\n  content: "\\f279";\n}\n.fa-commenting:before {\n  content: "\\f27a";\n}\n.fa-commenting-o:before {\n  content: "\\f27b";\n}\n.fa-houzz:before {\n  content: "\\f27c";\n}\n.fa-vimeo:before {\n  content: "\\f27d";\n}\n.fa-black-tie:before {\n  content: "\\f27e";\n}\n.fa-fonticons:before {\n  content: "\\f280";\n}\n.fa-reddit-alien:before {\n  content: "\\f281";\n}\n.fa-edge:before {\n  content: "\\f282";\n}\n.fa-credit-card-alt:before {\n  content: "\\f283";\n}\n.fa-codiepie:before {\n  content: "\\f284";\n}\n.fa-modx:before {\n  content: "\\f285";\n}\n.fa-fort-awesome:before {\n  content: "\\f286";\n}\n.fa-usb:before {\n  content: "\\f287";\n}\n.fa-product-hunt:before {\n  content: "\\f288";\n}\n.fa-mixcloud:before {\n  content: "\\f289";\n}\n.fa-scribd:before {\n  content: "\\f28a";\n}\n.fa-pause-circle:before {\n  content: "\\f28b";\n}\n.fa-pause-circle-o:before {\n  content: "\\f28c";\n}\n.fa-stop-circle:before {\n  content: "\\f28d";\n}\n.fa-stop-circle-o:before {\n  content: "\\f28e";\n}\n.fa-shopping-bag:before {\n  content: "\\f290";\n}\n.fa-shopping-basket:before {\n  content: "\\f291";\n}\n.fa-hashtag:before {\n  content: "\\f292";\n}\n.fa-bluetooth:before {\n  content: "\\f293";\n}\n.fa-bluetooth-b:before {\n  content: "\\f294";\n}\n.fa-percent:before {\n  content: "\\f295";\n}\n.fa-gitlab:before {\n  content: "\\f296";\n}\n.fa-wpbeginner:before {\n  content: "\\f297";\n}\n.fa-wpforms:before {\n  content: "\\f298";\n}\n.fa-envira:before {\n  content: "\\f299";\n}\n.fa-universal-access:before {\n  content: "\\f29a";\n}\n.fa-wheelchair-alt:before {\n  content: "\\f29b";\n}\n.fa-question-circle-o:before {\n  content: "\\f29c";\n}\n.fa-blind:before {\n  content: "\\f29d";\n}\n.fa-audio-description:before {\n  content: "\\f29e";\n}\n.fa-volume-control-phone:before {\n  content: "\\f2a0";\n}\n.fa-braille:before {\n  content: "\\f2a1";\n}\n.fa-assistive-listening-systems:before {\n  content: "\\f2a2";\n}\n.fa-asl-interpreting:before,\n.fa-american-sign-language-interpreting:before {\n  content: "\\f2a3";\n}\n.fa-deafness:before,\n.fa-hard-of-hearing:before,\n.fa-deaf:before {\n  content: "\\f2a4";\n}\n.fa-glide:before {\n  content: "\\f2a5";\n}\n.fa-glide-g:before {\n  content: "\\f2a6";\n}\n.fa-signing:before,\n.fa-sign-language:before {\n  content: "\\f2a7";\n}\n.fa-low-vision:before {\n  content: "\\f2a8";\n}\n.fa-viadeo:before {\n  content: "\\f2a9";\n}\n.fa-viadeo-square:before {\n  content: "\\f2aa";\n}\n.fa-snapchat:before {\n  content: "\\f2ab";\n}\n.fa-snapchat-ghost:before {\n  content: "\\f2ac";\n}\n.fa-snapchat-square:before {\n  content: "\\f2ad";\n}\n.fa-pied-piper:before {\n  content: "\\f2ae";\n}\n.fa-first-order:before {\n  content: "\\f2b0";\n}\n.fa-yoast:before {\n  content: "\\f2b1";\n}\n.fa-themeisle:before {\n  content: "\\f2b2";\n}\n.fa-google-plus-circle:before,\n.fa-google-plus-official:before {\n  content: "\\f2b3";\n}\n.fa-fa:before,\n.fa-font-awesome:before {\n  content: "\\f2b4";\n}\n.fa-handshake-o:before {\n  content: "\\f2b5";\n}\n.fa-envelope-open:before {\n  content: "\\f2b6";\n}\n.fa-envelope-open-o:before {\n  content: "\\f2b7";\n}\n.fa-linode:before {\n  content: "\\f2b8";\n}\n.fa-address-book:before {\n  content: "\\f2b9";\n}\n.fa-address-book-o:before {\n  content: "\\f2ba";\n}\n.fa-vcard:before,\n.fa-address-card:before {\n  content: "\\f2bb";\n}\n.fa-vcard-o:before,\n.fa-address-card-o:before {\n  content: "\\f2bc";\n}\n.fa-user-circle:before {\n  content: "\\f2bd";\n}\n.fa-user-circle-o:before {\n  content: "\\f2be";\n}\n.fa-user-o:before {\n  content: "\\f2c0";\n}\n.fa-id-badge:before {\n  content: "\\f2c1";\n}\n.fa-drivers-license:before,\n.fa-id-card:before {\n  content: "\\f2c2";\n}\n.fa-drivers-license-o:before,\n.fa-id-card-o:before {\n  content: "\\f2c3";\n}\n.fa-quora:before {\n  content: "\\f2c4";\n}\n.fa-free-code-camp:before {\n  content: "\\f2c5";\n}\n.fa-telegram:before {\n  content: "\\f2c6";\n}\n.fa-thermometer-4:before,\n.fa-thermometer:before,\n.fa-thermometer-full:before {\n  content: "\\f2c7";\n}\n.fa-thermometer-3:before,\n.fa-thermometer-three-quarters:before {\n  content: "\\f2c8";\n}\n.fa-thermometer-2:before,\n.fa-thermometer-half:before {\n  content: "\\f2c9";\n}\n.fa-thermometer-1:before,\n.fa-thermometer-quarter:before {\n  content: "\\f2ca";\n}\n.fa-thermometer-0:before,\n.fa-thermometer-empty:before {\n  content: "\\f2cb";\n}\n.fa-shower:before {\n  content: "\\f2cc";\n}\n.fa-bathtub:before,\n.fa-s15:before,\n.fa-bath:before {\n  content: "\\f2cd";\n}\n.fa-podcast:before {\n  content: "\\f2ce";\n}\n.fa-window-maximize:before {\n  content: "\\f2d0";\n}\n.fa-window-minimize:before {\n  content: "\\f2d1";\n}\n.fa-window-restore:before {\n  content: "\\f2d2";\n}\n.fa-times-rectangle:before,\n.fa-window-close:before {\n  content: "\\f2d3";\n}\n.fa-times-rectangle-o:before,\n.fa-window-close-o:before {\n  content: "\\f2d4";\n}\n.fa-bandcamp:before {\n  content: "\\f2d5";\n}\n.fa-grav:before {\n  content: "\\f2d6";\n}\n.fa-etsy:before {\n  content: "\\f2d7";\n}\n.fa-imdb:before {\n  content: "\\f2d8";\n}\n.fa-ravelry:before {\n  content: "\\f2d9";\n}\n.fa-eercast:before {\n  content: "\\f2da";\n}\n.fa-microchip:before {\n  content: "\\f2db";\n}\n.fa-snowflake-o:before {\n  content: "\\f2dc";\n}\n.fa-superpowers:before {\n  content: "\\f2dd";\n}\n.fa-wpexplorer:before {\n  content: "\\f2de";\n}\n.fa-meetup:before {\n  content: "\\f2e0";\n}\n'},3079:function(e,t,n){e.exports=n.p+"MapStore2/web/client/components/mapcontrols/annotations/img/markers_default.png"},3080:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAQCAYAAACcN8ZaAAAB3klEQVR42s3U4UdDURzG8czMXJnJ1Vwzc6VJZjaZJdlMlpQsKdmUFNOUspRSSqUolfQfr+fF98Vx5mwv9qbDx7LdznnO7/7Omej3+/+Ga0QMUYkhbvBgmhzCQxwxibIGrGEF8CQhU+LLtKQkQNqScUgjxRxTBIxbgfgD/BgnhM8kM5KTeclLQYqGkkMRBckzR8ic/mAgd5BAZplsUaqyIg2sDtHg2brUZJk5SmwopErJUWE8SpmTMhNvya60Zd/SNrR4bkeaskG4uiwRZk6yrJEYFibGAxn+scECHTmTnuVCzvmty3PHciB7bGKN6lQkzysPqIrHmpFhYbKUtckC1/Ioz4ZHuZdbuSLYiRxRpSZVWXZVxAzC0R4Ik5SQsu6w8yd5l2/5kg95I9SdXMoZQfYIUjeqEUrgOkXGPeN4TYRhxy8E+ZUf+eS7B7miIoeybVSjKDnm8u3+gH3pDTYwu1igATvs/pXqvBKiR4i2bNJfi1ZfUAnjgrOG8wY2quNzBKuU/ZS+uSFEl5O0xRGuUIlZCcw7xG5QPkeHYUSNV5WXGou2sC3rBC0LjenqCXGO0WEiTJa0Lr4KixdHBrDGuGGiRqCUpFk8pGIpQtCU7p4YPwxYxEMCk1aAMQZh8Ac8PfbIzYPJOwAAAABJRU5ErkJggg=="},3081:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACv0lEQVRYw7WXy0vUURTHP3cgM3UUghrHF7bpRe56UNsWQr4giaht/Q0FEpXLoJLAiHb+DbVr0cJFiZmVYI30MghtJCh7aA/t2+Y3cLw4v9+dcbxw4cc97/s795zvcZS4hJqBvUAW2BEdLwBzwCuH+0Sll1Cz0KDQjJAS9pTQRaHtlTBcLzQk9CvAsL+/CQ0IbYmz4WKMdwD3gHaP9AcYA2ajq18FGoFW4BhQ7fFPAL0ON19K5N1RBDaip0Knhepj5GqFTgqNebKzQgdCjXcJrRjhz0JnhFwJATihU0ILRs+XRCeE9gl9NUIzQns2kEMtQpNG30ehlmLMaaF3hvlF3HWXmMhTRu8Toar1GG8apnmhtgo+43ahvNE/4DM0eU+tdxNqSb/Rv7imTghdNcTRQIV1QkeEDgvVBibmI2PngiXmDOFEgOE73o0tCw0nOSLUZ2Se2zJbOPwutDXhnY/HVL/xOCeEaoSWIt5/QhmEjhsF9xMiuBVQgocTdDwwvJ0pIGPoH2IEq4HzAelxLuFXWBu7UlFbLay4VrobqAlwoDpq18WWtdGQAhT4klwJr87F/gXT2FJA3hxkYgRfA8sBxn8DuRh6o/nOp7wraSseklsCRgIcGHG4HzH0tjW/I2oYtkJVxSRi2msu/p4USsfIbxP6afizBYKFWp0JzygtdHedQnRbqC4AZxRkpi1h0BAeBpbiWqFDQgeFagJlRo2dyz7otBF1b0Iz6vVuLOszDBmGuQq349aoxRf0Xy8GHN5vAiCpE3pm9L4tmqhC+z1IltsgJGsWmvCgekeSUI/QqgdKz5YBSvs9FLQi1BWqoCcGljcEwPLHnuxiMZxRzmDy1wwmeeCfGUyOrjOYvAH6HO5luYj2Rpmj2ZLQtRC4FuJIk9AVoenA4fSSUKbSLbbgTDbq903Azqi9FsbzXKnj+X/nN6jncxNcZgAAAABJRU5ErkJggg=="},3103:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII="},3104:function(e,t,n){var r=n(3105);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3105:function(e,t,n){(e.exports=n(758)()).push([e.i,'.msgapi .ol-popup {\n    position: absolute;\n    text-align: center;\n    font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n    -ms-transform: translate(-50%,-100%); /* IE 9 */\n    -webkit-transform: translate(-50%,-100%); /* Safari */\n    transform: translate(-50%,-100%);\n}\n.msgapi a.ol-popup-close-btn {\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 4px 4px 0 0;\n  text-align: center;\n  width: 18px;\n  height: 14px;\n  font: 16px/14px Tahoma, Verdana, sans-serif;\n  color: #c3c3c3;\n  text-decoration: none;\n  font-weight: bold;\n  background: transparent;\n}\n.msgapi .ol-popup-cnt-wrapper {\n  padding: 1px;\n  text-align: left;\n  border-radius: 12px;\n}\n.msgapi .ol-popup-cnt-wrapper, .msgapi .ol-popup-tip {\n  background: white;\n  box-shadow: 0 3px 14px rgba(0,0,0,0.4);\n}\n.msgapi .ol-popup-cnt {\n  margin: 13px 19px;\n  line-height: 1.4;\n   white-space: nowrap;\n\n}\n.msgapi .ol-popup-tip-wrapper {\n  margin: 0 auto;\n  width: 40px;\n  height: 20px;\n  position: relative;\n  overflow: hidden;\n\n}\n.msgapi .ol-popup-tip {\n  width: 17px;\n  height: 17px;\n  padding: 1px;\n  margin: -10px auto 0;\n  -webkit-transform: rotate(45deg);\n  -moz-transform: rotate(45deg);\n  -ms-transform: rotate(45deg);\n  -o-transform: rotate(45deg);\n  transform: rotate(45deg);\n}\n',""])},3114:function(e,t,n){var r=n(3115);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3115:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi .ol-custom-overviewmap,\n       .msgapi .ol-custom-overviewmap.ol-uncollapsible {\n          bottom: 20px;\n          left: auto;\n          right: 10px;\n          top: auto;\n\n      }\n      .msgapi .ol-custom-overviewmap:not(.ol-collapsed)  {\n\n           box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n           border-radius: 1px;\n           transition: all .2s;\n      }\n      .msgapi .ol-custom-overviewmap .ol-overviewmap-map {\n          border: none;\n          width: 300px;\n          height: 150px;\n\n      }\n\n      .msgapi .ol-custom-overviewmap .ol-overviewmap-box {\n          border: 1px solid black;\n          cursor: pointer;\n          border-radius: 5px;\n      }\n\n      .msgapi .ol-custom-overviewmap:not(.ol-collapsed) button{\n          bottom: auto;\n          left: auto;\n          right: 2px;\n          bottom: 2px;\n      }\n\n      .msgapi .ol-rotate {\n          top: 170px;\n          right: 0;\n      }\n      .msgapi .ol-overview-dargbox{\n           border: 1px solid black;\n           background-color: rgba(125,125,0,.5);\n           border-radius: 5px;\n      }\n",""])},3122:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(2348),c=n(2144),l=n(2450),u=n(2338),p=n(2294),f=n(2205);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,n,r,o,a=(t=i,function(){var e,n=E(t);if(S()){var r=E(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return h(this,e)});function i(){var e;g(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(v(e=a.call.apply(a,[this].concat(n))),"getLayer",(function(){var t;return e.props.map.getLayers().forEach((function(n){e.layersFilter(n)&&(t=n)}),v(e)),t})),w(v(e),"setSelectInteraction",(function(){e._selectInteraction.getActive()||e._selectInteraction.setActive(!0)})),w(v(e),"createSelectInteraction",(function(){e.createStyle(),e._selectInteraction=new s.a({layers:e.layersFilter,style:e._style,toggleCondition:c.i}),e._selectInteraction.on("select",e.selectionChange,v(e)),e.props.map.addInteraction(e._selectInteraction)})),w(v(e),"selectionChange",(function(){var t=[];e._selectInteraction.getFeatures().forEach((function(e){t.push(e.getId())})),e.props.updateHighlighted(t,"")})),w(v(e),"cleanSupport",(function(){e._selectInteraction&&e._selectInteraction.getActive()&&(e._selectInteraction.getFeatures().clear(),e.props.updateHighlighted([],""),e._selectInteraction.setActive(!1))})),w(v(e),"layersFilter",(function(t){return e.props.layer&&t.get("msId")===e.props.layer})),w(v(e),"createStyle",(function(){var t=e.props.selectedStyle,n={stroke:new l.default(t.stroke?t.stroke:{color:"blue",width:1}),fill:new u.default(t.fill?t.fill:{color:"blue"})};"Point"===t.type&&(n={image:new f.default(y({},n,{radius:t.radius||5}))}),e._style=new p.default(n)})),w(v(e),"highlightFeatures",(function(t){var n=e.getLayer(),r=e._selectInteraction.getFeatures();(r.clear(),n)&&n.getSource().getFeatures().map((function(e){-1!==t.indexOf(e.getId())&&r.push(e)}),v(e))})),e}return n=i,(r=[{key:"componentDidMount",value:function(){this.createSelectInteraction(),"enabled"===this.props.status?this._selectInteraction.setActive(!0):this._selectInteraction.setActive(!1),this.props.features&&this.highlightFeatures(this.props.features)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props;return e.status!==t.status||e.layer!==t.layer||"update"===e.status&&e.features.toString()!==t.features.toString()}},{key:"UNSAFE_componentWillUpdate",value:function(e){switch(e.status){case"enabled":this.setSelectInteraction(e);break;case"disabled":this.cleanSupport();break;case"update":this.highlightFeatures(e.features);break;default:return}}},{key:"componentWillUnmount",value:function(){this._selectInteraction&&(this.cleanSupport(),this._selectInteraction.un("select",this.selectionChange,this),this.props.map.removeInteraction(this._selectInteraction),this._selectInteraction=null,this._style=null)}},{key:"render",value:function(){return null}}])&&b(n.prototype,r),o&&b(n,o),i}(i.a.Component);w(A,"propTypes",{map:o.a.object,layer:o.a.string.isRequired,status:o.a.oneOf(["disabled","enabled","update"]),updateHighlighted:o.a.func,selectedStyle:o.a.object,features:o.a.array}),w(A,"contextTypes",{messages:o.a.object}),w(A,"defaultProps",{status:"disabled",updateHighlighted:function(){},selectedStyle:{type:"Point",radius:12,stroke:{width:4,color:"yellow"},fill:{color:"red"}}})},3123:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(2220),c=n(2188),l=n(2294),u=n(2338),p=n(2450),f=n(2205),d=n(2296),m=n(2288);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,n,r,o,a=(t=i,function(){var e,n=E(t);if(S()){var r=E(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return h(this,e)});function i(){var e;g(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(v(e=a.call.apply(a,[this].concat(n))),"addDrawInteraction",(function(t){e.drawInteraction&&e.removeDrawInteraction();var n=new s.a,r=new c.a({source:n,zIndex:1e6,style:new l.default({fill:new u.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new p.default({color:"#ffcc33",width:2}),image:new f.default({radius:7,fill:new u.default({color:"#ffcc33"})})})});e.props.map.addLayer(r);var o=new d.a({source:n,type:t.selection.geomType,style:new l.default({fill:new u.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new p.default({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new f.default({radius:5,stroke:new p.default({color:"rgba(0, 0, 0, 0.7)"}),fill:new u.default({color:"rgba(255, 255, 255, 0.2)"})})})});o.on("drawstart",(function(t){e.sketchFeature=t.feature,n.clear()})),o.on("drawend",(function(){e.updateSelectionState()})),e.props.map.addInteraction(o),e.drawInteraction=o,e.selectionLayer=r,e.setDoubleClickZoomEnabled(!1)})),w(v(e),"removeDrawInteraction",(function(){null!==e.drawInteraction&&(e.props.map.removeInteraction(e.drawInteraction),e.drawInteraction=null,e.props.map.removeLayer(e.selectionLayer),e.sketchFeature=null,setTimeout((function(){return e.setDoubleClickZoomEnabled(!0)}),251))})),w(v(e),"updateSelectionState",(function(){if(e.sketchFeature){var t=e.sketchFeature.getGeometry().getCoordinates(),n={geomType:e.props.selection.geomType,point:"Point"===e.props.selection.geomType?[t[0],t[1]]:null,line:"LineString"===e.props.selection.geomType?t.map((function(e){return[e[0],e[1]]})):null,polygon:"Polygon"===e.props.selection.geomType?e.sketchFeature.getGeometry().getLinearRing(0).getCoordinates().map((function(e){return[e[0],e[1]]})):null};e.props.changeSelectionState(n)}})),w(v(e),"setDoubleClickZoomEnabled",(function(t){for(var n=e.props.map.getInteractions(),r=0;r<n.getLength();r++){var o=n.item(r);if(o instanceof m.a){o.setActive(t);break}}})),e}return n=i,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.selection.geomType&&e.selection.geomType!==this.props.selection.geomType&&this.addDrawInteraction(e),e.selection.geomType||this.removeDrawInteraction()}},{key:"render",value:function(){return null}}])&&b(n.prototype,r),o&&b(n,o),i}(i.a.Component);w(A,"propTypes",{map:o.a.object,projection:o.a.string,selection:o.a.object,changeSelectionState:o.a.func}),w(A,"defaultProps",{selection:{}})},3124:function(e,t,n){var r=n(765),o=n(2167);r.registerType("bing",(function(e){var t=e.apiKey;return new o.BingMapsImageryProvider({url:"//dev.virtualearth.net",key:t,mapStyle:o.BingMapsStyle[e.name.toUpperCase()]})}))},3125:function(e,t,n){var r=n(765),o=n(2167);r.registerType("osm",(function(){return o.createOpenStreetMapImageryProvider({url:"//a.tile.openstreetmap.org/"})}))},3126:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(765),i=n(2167),s=n(2463),c=n(47),l=n(2349);function u(e){this.proxy=e}function p(){}u.prototype.getURL=function(e){var t=function(e){var t=e,n="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),n=e.substring(e.indexOf("?")+1)),{url:t,queryString:n}}(e),n=t.url,r=t.queryString;return 0===n.indexOf("//")&&(n=location.protocol+n),l.getProxyUrl()+encodeURIComponent(n+r)},p.prototype.getURL=function(e){return e},a.registerType("tileprovider",(function(e){var t,n=r(s.getLayerConfig(e.provider,e),2),o=n[0],a=n[1],f=c.getProxyUrl({});f&&(t=a.noCors||l.needProxy(o));var d,m,y=a.credits,g=y?new i.Credit(y.text,y.imageUrl,y.link):a.attribution;return new i.UrlTemplateImageryProvider({url:(d=o,m=a,d.replace(/(?!(\{?[zyxs]?\}))\{*([\w_]+)*\}/g,(function(){var e=arguments[0],t=arguments[1]?arguments[1]:arguments[2],n=m[t];if(void 0===n)throw new Error("No value provided for variable "+e);return"function"==typeof n&&(n=n(m)),n}))),enablePickFeatures:!1,subdomains:a.subdomains,maximumLevel:a.maxZoom,minimumLevel:a.minZoom,credit:g,proxy:t?new u(f):new p})}))},3127:function(e,t){e.exports={OpenStreetMap:{url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,credits:{text:"© OpenStreetMap, Open Street Map and contributors, CC-BY-SA",link:"http://www.openstreetmap.org/copyright"},attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",options:{maxZoom:18,maxNativeZoom:18}},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18,maxNativeZoom:18}},France:{url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}}}},OpenSeaMap:{url:"http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors',credits:{text:"Map data: © OpenSeaMap contributors",link:"http://www.openseamap.org"}}},OpenTopoMap:{url:"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{noCors:!0,maxZoom:16,maxNativeZoom:16,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',credits:{text:"Map data: OpenStreetMap contributors CC-BY-SA",link:"https://opentopomap.org"}}},Thunderforest:{url:"//{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, {attribution.OpenStreetMap}',credits:{text:"Map data: OpenCycleMap contributors",link:"http://www.opencyclemap.org"},variant:"cycle"},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport",maxZoom:19,maxNativeZoom:19}},TransportDark:{options:{variant:"transport-dark",maxZoom:19,maxNativeZoom:19}},Landscape:"landscape",Outdoors:"outdoors"}},OpenMapSurfer:{url:"http://openmapsurfer.uni-hd.de/tiles/{variant}/x={x}&y={y}&z={z}",options:{maxZoom:20,maxNativeZoom:20,variant:"roads",credits:{text:"MapQuest, Open Street Map and contributors, CC-BY-SA"},attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Roads:"roads",AdminBounds:{options:{variant:"adminb",maxZoom:19,maxNativeZoom:19}},Grayscale:{options:{variant:"roadsg",maxZoom:19,maxNativeZoom:19}}}},Hydda:{url:"http://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{maxNativeZoom:18,variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}",options:{maxNativeZoom:18,type:"map",ext:"jpg",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:["1","2","3","4"]},variants:{OSM:{},Aerial:{options:{type:"sat",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}},HybridOverlay:{options:{type:"hyb",ext:"png",opacity:.9}}}},MapBox:{url:"//api.tiles.mapbox.com/v4/{source}/{z}/{x}/{y}.png?access_token={accessToken}",options:{maxNativeZoom:18,attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:["a","b","c","d"]}},MapBoxStyle:{url:"https://api.mapbox.com/styles/v1/mapbox/{source}/tiles/{z}/{x}/{y}?access_token={accessToken}",options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a>',subdomains:["a","b","c","d"]}},Stamen:{url:"//stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',credits:{text:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under CC BY SA"},subdomains:["a","b","c","d"],minZoom:0,maxZoom:20,maxNativeZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{options:{variant:"watercolor",minZoom:1,maxZoom:16,maxNativeZoom:16}},Terrain:{options:{variant:"terrain",minZoom:4,maxZoom:18,maxNativeZoom:18,bounds:[[22,-132],[70,-56]]}},TerrainBackground:{options:{variant:"terrain-background",minZoom:4,maxZoom:18,maxNativeZoom:18,bounds:[[22,-132],[70,-56]]}},TopOSMRelief:{options:{variant:"toposm-color-relief",ext:"jpg",bounds:[[22,-132],[51,-56]]}},TopOSMFeatures:{options:{variant:"toposm-features",bounds:[[22,-132],[51,-56]],opacity:.9}}}},Esri:{url:"//server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{maxNativeZoom:18,variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,maxNativeZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,maxNativeZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,maxNativeZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,maxNativeZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"//{s}.{base}.maps.cit.api.here.com/maptile/2.1/maptile/{mapID}/{variant}/{z}/{x}/{y}/256/png8?app_id={app_id}&app_code={app_code}",options:{attribution:'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',subdomains:["1","2","3","4"],mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,maxNativeZoom:20},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},Acetate:{url:"http://a{s}.acetate.geoiq.com/tiles/{variant}/{z}/{x}/{y}.png",options:{attribution:"&copy;2012 Esri & Stamen, Data from OSM and Natural Earth",subdomains:["0","1","2","3"],minZoom:2,maxZoom:18,maxNativeZoom:18,variant:"acetate-base"},variants:{basemap:"acetate-base",terrain:"terrain",all:"acetate-hillshading",foreground:"acetate-fg",roads:"acetate-roads",labels:"acetate-labels",hillshading:"hillshading"}},FreeMapSK:{url:"http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,maxNativeZoom:16,subdomains:["1","2","3","4"],bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"//{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:["a","b","c","d"],maxZoom:19,maxNativeZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels"}},HikeBike:{url:"http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,maxNativeZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"//maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,maxNativeZoom:19,attribution:'Datenquelle: <a href="https://www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:"geolandbasemap",grau:"bmapgrau",overlay:"bmapoverlay",highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{variant:"bmaporthofoto30cm",format:"jpeg"}}}},NASAGIBS:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}9/{z}/{y}/{x}.{format}",options:{attribution:'<span>Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.</span>',credits:{text:"Black Marble imagery courtesy NASA Earth Observatory"},bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,maxNativeZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}8/{z}/{y}/{x}.{format}",options:{variant:"VIIRS_CityLights_2012",maxZoom:8,maxNativeZoom:8}},ModisTerraLSTDay:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}7/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,maxNativeZoom:7,opacity:.75}},ModisTerraSnowCover:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}8/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,maxNativeZoom:8,opacity:.75}},ModisTerraAOD:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}6/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,maxNativeZoom:6,opacity:.75}},ModisTerraChlorophyll:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}7/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,maxNativeZoom:7,opacity:.75}}}},NLS:{url:"//nls-{s}.tileserver.com/{variant}/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,maxNativeZoom:18,subdomains:["0","1","2","3"]},variants:{OS_1900:"NLS_API",OS_1920:"nls",OS_opendata:{url:"http://geo.nls.uk/maps/opendata/{z}/{x}/{y}.png",options:{maxZoom:16,maxNativeZoom:16}},OS_6inch_1st:{url:"http://geo.nls.uk/maps/os/six_inch/{z}/{x}/{y}.png",options:{tms:!0,minZoom:6,maxZoom:16,maxNativeZoom:16,bounds:[[49.86261,-8.66444],[60.89421,1.7785]]}},OS_6inch:"os_6_inch_gb",OS_25k:"25k",OS_npe:{url:"http://geo.nls.uk/maps/os/newpopular/{z}/{x}/{y}.png",options:{tms:!0,minZoom:3,maxZoom:15,maxNativeZoom:15}},OS_7th:"os7gb",OS_London:{options:{variant:"London_1056",minZoom:9,maxNativeZoom:9,bounds:[[51.177621,-.708618],[51.618016,.355682]]}},GSGS_Ireland:{url:"http://geo.nls.uk/maps/ireland/gsgs4136/{z}/{x}/{y}.png",options:{tms:!0,minZoom:5,maxZoom:15,maxNativeZoom:15,bounds:[[51.37178,-10.810546],[55.422779,-5.262451]]}}}},LINZ:{url:"http://tiles-{s}.data-cdn.linz.govt.nz/services;key={linzAPIkey}/tiles/v4/{variant}/{tilematrixset}/{z}/{x}/{y}.png",options:{attribution:'<a href="https://www.linz.govt.nz/data/licensing-and-using-data/attributing-elevation-or-aerial-imagery-data">Sourced from LINZ. CC-BY 4.0</a>',subdomains:["a","b","c","d"],linzAPIkey:"<insert your LINZ API Key here>",variant:"set=4702",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22},variants:{nz_aerial_imagery:{options:{attribution:'<a href="https://www.linz.govt.nz/data/licensing-and-using-data/attributing-elevation-or-aerial-imagery-data">Sourced from LINZ. CC-BY 4.0</a>',variant:"set=4702",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo50_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=50767",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo50_gridless_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=52343",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo250_gridless_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=52324",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo250_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=50798",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_parcel_boundaries_wireframe:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"set=4769",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}}}},PDOK:{url:"https://geodata.nationaalgeoregister.nl/tiles/service/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{attribution:'<a href="https://www.pdok.nl/introductie?articleid=1949876">BRT Achtergrondkaart</a> by <a href="https://www.kadaster.nl/">Kadaster</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>',format:"png",bounds:[[48.0405018704,-1.65729160235],[56.1105896442,12.4317272654]],minZoom:6,maxZoom:19,maxNativeZoom:19},variants:{brtachtergrondkaart:"brtachtergrondkaart",brtachtergrondkaartgrijs:"brtachtergrondkaartgrijs",brtachtergrondkaartpastel:"brtachtergrondkaartpastel",brtachtergrondkaartwater:"brtachtergrondkaartwater",luchtfotoRGB:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{variant:"Actueel_ortho25",attribution:'<a href="https://www.pdok.nl/introductie?articleid=1954278">Luchtfoto Actueel Ortho 25cm RGB</a> by <a href="http://www.beeldmateriaal.nl">Beeldmateriaal.nl</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>'}},luchtfotoIR:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{variant:"Actueel_ortho25IR",attribution:'<a href="https://www.pdok.nl/introductie?articleid=1954278">Luchtfoto Actueel Ortho 25cm Infrarood</a> by <a href="http://www.beeldmateriaal.nl">Beeldmateriaal.nl</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>'}}}}}},3128:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(765),s=n(2167),c=n(3129)(s),l=n(47),u=n(2349),p=n(26),f=n(13).isArray,d=n(3130),m=n(137),y=m.getAuthenticationParam,g=m.getURLs,b=n(414).optionsToVendorParams,h=n(197),v=n(2227).isVectorFormat;function S(e){var t=e,n="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),n=e.substring(e.indexOf("?")+1)),{url:t,queryString:n}}function E(e){this.proxy=e}function O(){}function w(e){return Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&")}E.prototype.getURL=function(e){var t=S(e),n=t.url,r=t.queryString;return u.getProxyUrl()+encodeURIComponent(n+r)},O.prototype.getURL=function(e){var t=S(e);return t.url+t.queryString};var A=function e(t){var n;return t.useForElevation?new c(function(e){var t,n=l.getProxyUrl({}),r=e.url;return n&&(t=u.needProxy(e.url)&&n)&&(r=t+encodeURIComponent(r)),p({url:r,layerName:e.name})}(t)):((n=t.singleTile?new s.SingleTileImageryProvider(function(e){var t=void 0!==e.opacity?e.opacity:1,n=b(e),r=p({styles:e.style||"",format:(v(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,opacity:t,tiled:void 0===e.tiled||e.tiled,layers:e.name,width:e.size||2e3,height:e.size||2e3,bbox:"-180.0,-90,180.0,90",srs:"EPSG:4326"},n||{},y(e));return{url:(f(e.url)?e.url[Math.round(Math.random()*(e.url.length-1))]:e.url)+"?service=WMS&version=1.1.0&request=GetMap&"+w(h.addAuthenticationToSLD(r,e))}}(t)):new s.WebMapServiceImageryProvider(function(e){var t,n=void 0!==e.opacity?e.opacity:1,r=b(e),o=l.getProxyUrl({});o&&(t=u.needProxy(e.url)&&o);var a=e.credits,i=a?new s.Credit(a.text||a.title,a.imageUrl,a.link):e.attribution;return p({url:"{s}",credit:i,subdomains:g(f(e.url)?e.url:[e.url]),proxy:t&&new E(t)||new O,layers:e.name,enablePickFeatures:!1,parameters:p({styles:e.style||"",format:(v(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,opacity:n,tiled:void 0===e.tiled||e.tiled},p({},e._v_?{_v_:e._v_}:{},r||{},y(e)))})}(t))).updateParams=function(n){var r=p({},t,{params:p({},t.params||{},n)});return e(r)},n)};i.registerType("wms",{create:A,update:function(e,t,n){var r=t&&t.params,a=n&&n.params,i=o({},r,{},a);return Object.keys(o({},t,{},n,{},i)).filter((function(e){return d.PARAM_OPTIONS.indexOf(e.toLowerCase())>=0})).filter((function(e){return(void 0===n[e]?a&&a[e]:n[e])!==(void 0===t[e]?r&&r[e]:t[e])})).length>0||t.securityToken!==n.securityToken?A(t):null}})},3129:function(e,t){e.exports=function(e){var t={};t.CRS=[{name:"CRS:84",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:e.GeographicTilingScheme,supportedCRS:"urn:ogc:def:crs:OGC:2:84"},{name:"EPSG:4326",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!0,tilingScheme:e.GeographicTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::4326"},{name:"EPSG:3857",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:e.WebMercatorTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"},{name:"OSGEO:41001",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:e.WebMercatorTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"}],t.FormatImage=[{format:"image/png",extension:"png"},{format:"image/jpeg",extension:"jpg"},{format:"image/jpeg",extension:"jpeg"},{format:"image/gif",extension:"gif"},{format:"image/png; mode=8bit",extension:"png"}],t.FormatArray=[{format:"image/bil",postProcessArray:function(e,t,n,r,o){var a,i=new DataView(e),s=new ArrayBuffer(t.height*t.width*2),c=new DataView(s);if(s.byteLength===e.byteLength){for(var l,u=0;u<s.byteLength;u+=2)(l=i.getInt16(u,!1)-o)>r&&l<n?(c.setInt16(u,l,!0),l):c.setInt16(u,0,!0);a=new Int16Array(s)}return a}}],t.WMSParser={},t.TMSParser={},t.WMTSParser={},t.parser=function(n){var r;switch((n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT)).service){case"TMS":r=t.TMSParser.generate(n);break;case"WMTS":r=t.WMTSParser.generate(n);break;default:r=t.WMSParser.generate(n)}return r},t.WMSParser.generate=function(n){var r;if(n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT),e.defined(n.url)){var o=n.url,a=o.lastIndexOf("?");a>-1&&(o=o.substring(0,a));var i=o+"?SERVICE=WMS&REQUEST=GetCapabilities&tiled=true";e.defined(n.proxy)&&(i=n.proxy.getURL(i)),r=e.when(e.loadXML(i),(function(e){return t.WMSParser.getMetaDatafromXML(e,n)}))}else{if(!e.defined(n.xml))throw new e.DeveloperError("either description.url or description.xml are required.");r=t.WMSParser.getMetaDatafromXML(n.xml,n)}return r},t.WMSParser.getMetaDatafromXML=function(n,r){if(!(n instanceof XMLDocument))throw new e.DeveloperError("xml must be a XMLDocument");if(!e.defined(r.layerName))throw new e.DeveloperError("description.layerName is required.");var o={},a=r.layerName,i=(e.defaultValue(r.maxLevel,11),void 0);o.heightMapWidth=e.defaultValue(r.heightMapWidth,65),o.heightMapHeight=e.defaultValue(r.heightMapHeight,o.heightMapWidth);var s={width:65,height:65},c=void 0;o.formatImage=r.formatImage,o.formatArray=r.formatArray,o.tilingScheme=void 0;var l=void 0,u=void 0;o.ready=!1,o.levelZeroMaximumGeometricError=void 0,o.waterMask=e.defaultValue(r.waterMask,!1),"boolean"!=typeof o.waterMask&&(o.waterMask=!1),o.offset=e.defaultValue(r.offset,0),o.highest=e.defaultValue(r.highest,12e3),o.lowest=e.defaultValue(r.lowest,-500);var p=r.styleName;o.hasStyledImage=e.defaultValue(r.hasStyledImage,"string"==typeof r.styleName);var f=n.querySelector("[version]");null!==f&&(i=f.getAttribute("version"),u=/^1\.[3-9]\./.test(i));var d=n.querySelector("Request>GetMap OnlineResource").getAttribute("xlink:href"),m=d.indexOf("?");m>-1&&(d=d.substring(0,m)),e.defined(r.proxy)&&(d=r.proxy.getURL(d));var y=n.querySelectorAll("Request>GetMap>Format");if(!e.defined(o.formatImage))for(var g=0;g<y.length&&!e.defined(o.formatArray);g++){(b=t.FormatArray.filter((function(e){return e.format===y[g].textContent}))).length>0&&(o.formatArray=b[0])}e.defined(o.formatArray)&&"string"==typeof o.formatArray.format&&"function"==typeof o.formatArray.postProcessArray?o.formatArray.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}:o.formatArray=void 0;for(g=0;g<y.length&&!e.defined(o.formatImage);g++){var b;(b=t.FormatImage.filter((function(e){return e.format===y[g].textContent}))).length>0&&(o.formatImage=b[0])}e.defined(o.formatImage)&&"string"==typeof o.formatImage.format?o.formatImage.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:2,stride:4,elementMultiplier:256,isBigEndian:!0}:o.formatImage=void 0;for(var h,v=n.querySelectorAll("Layer[queryable='1'],Layer[queryable='true']"),S=0;S<v.length&&!e.defined(h);S++)if(v[S].querySelector("Name").textContent===a){var E=(h=v[S]).getAttribute("fixedHeight"),O=h.getAttribute("fixedWidth");e.defined(E)&&(E=parseInt(E),o.heightMapHeight=E>0&&E<o.heightMapHeight?E:o.heightMapHeight,s.height=E>0?E:s.height),e.defined(O)&&(O=parseInt(O),o.heightMapWidth=O>0&&O<o.heightMapWidth?O:o.heightMapWidth,s.width=O>0?O:s.width)}if(e.defined(h)&&e.defined(i)){for(var w=!1,A=0;A<t.CRS.length&&!w;A++){var T=t.CRS[A],P=T.name,C=h.querySelector("BoundingBox[SRS='"+P+"'],BoundingBox[CRS='"+P+"']");if(null!==C){var x,_,R,I;c=P,l=T.firstAxeIsLatitude,o.tilingScheme=new T.tilingScheme({ellipsoid:T.ellipsoid}),l&&u?(x=parseFloat(C.getAttribute("miny")),_=parseFloat(C.getAttribute("maxy")),R=parseFloat(C.getAttribute("minx")),I=parseFloat(C.getAttribute("maxx"))):(x=parseFloat(C.getAttribute("minx")),_=parseFloat(C.getAttribute("maxx")),R=parseFloat(C.getAttribute("miny")),I=parseFloat(C.getAttribute("maxy")));new e.Rectangle(x,R,_,I);o.getTileDataAvailable=function(e,t,n){return!0},w=!0}}if(e.defined(p)){for(var j=h.querySelectorAll("Style>Name"),L=!1,D=0;D<j.length&&!L;D++)p===j[D].textContent&&(L=!0);L||(p=void 0)}for(var M=n.querySelectorAll("VendorSpecificCapabilities>TileSet"),N=!1,k=0;k<M.length&&!N;k++){var G=null!==M[k].querySelector("BoundingBox[SRS='"+c+"'],BoundingBox[CRS='"+c+"']");M[k].querySelector("Layers").textContent===a&&G&&(s.width=parseInt(M[k].querySelector("Width").textContent),s.height=parseInt(M[k].querySelector("Height").textContent),N=!0)}o.ready=w&&(e.defined(o.formatImage)||e.defined(o.formatArray))&&e.defined(i)}if(o.ready){var F=d+"?SERVICE=WMS&REQUEST=GetMap&layers="+a+"&version="+i+"&bbox=";if(F+=u&&l?"{south},{west},{north},{east}":"{west},{south},{east},{north}",F+="&crs="+c+"&srs="+c,o.formatImage){var U=F+"&format="+o.formatImage.format+"&width="+s.width+"&height="+s.height;e.defined(p)&&(U+="&styles="+p+"&style="+p),o.URLtemplateImage=function(){return U},o.imageSize=s}if(o.formatArray){var B=F+"&format="+o.formatArray.format+"&width="+o.heightMapWidth+"&height="+o.heightMapHeight;o.URLtemplateArray=function(){return B}}}return o},t.TMSParser.generate=function(n){var r;if(n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT),e.defined(n.url))r=e.loadXML(n.url).then((function(e){return t.TMSParser.parseXML(e,n)}));else{if(!e.defined(n.xml))throw new e.DeveloperError("either description.url or description.xml are required.");r=t.TMSParser.parseXML(n.xml,n)}return r},t.TMSParser.parseXML=function(n,r){if(!(n instanceof XMLDocument))throw new e.DeveloperError("xml must be a XMLDocument");var o;if(null!=n.querySelector("TileMapService")){if(!e.defined(r.layerName))throw new e.DeveloperError("layerName is required.");var a=[].slice.apply(n.querySelectorAll("TileMap[title='"+r.layerName+"']")).map((function(n){var o=n.getAttribute("href");return e.defined(r.proxy)&&(o=r.proxy.getURL(o)),e.when(e.loadXML(o),(function(e){return t.TMSParser.getMetaDatafromXML(e,r)}))}));o=e.when.all(a).then((function(t){for(var n,r=0;r<t.length&&!e.defined(n);r++)e.defined(t[r])&&(n=t[r]);return n})).then((function(e){return e}))}else o=t.TMSParser.getMetaDatafromXML(n,r);return o},t.TMSParser.getMetaDatafromXML=function(n,r){var o={ready:!1};o.heightMapWidth=e.defaultValue(r.heightMapWidth,65),o.heightMapHeight=e.defaultValue(r.heightMapHeight,o.heightMapWidth);var a=e.defaultValue(r.maxLevel,11),i=r.proxy;o.hasStyledImage=e.defaultValue(r.hasStyledImage,"string"==typeof r.styleName),o.waterMask=e.defaultValue(r.waterMask,!1),"boolean"!=typeof o.waterMask&&(o.waterMask=!1),o.offset=e.defaultValue(r.offset,0),o.highest=e.defaultValue(r.highest,12e3),o.lowest=e.defaultValue(r.lowest,-500);var s=n.querySelector("SRS").textContent,c=t.CRS.filter((function(e){return e.name===s}));c.length>0&&(o.tilingScheme=new c[0].tilingScheme({ellipsoid:c[0].ellipsoid}));var l=n.querySelector("TileFormat"),u=t.FormatImage.filter((function(e){return e.extension==l.getAttribute("extension")}));u.length>0&&(o.formatImage=u[0],o.imageSize={},o.imageSize.width=parseInt(l.getAttribute("width")),o.imageSize.height=parseInt(l.getAttribute("height")));var p=[].slice.call(n.querySelectorAll("TileSets>TileSet")),f=[];if(e.defined(o.formatImage)&&((f=p.map((function(t){var n=t.getAttribute("href")+"/{x}/{tmsY}."+o.formatImage.extension;return e.defined(i)&&(n=i.getURL(n)),{url:n,level:parseInt(t.getAttribute("order"))}}))).sort((function(e,t){return e.level-t.level})),f.length>0&&(o.tileSets=f)),e.defined(o.tileSets)&&e.defined(o.formatImage)&&e.defined(o.tilingScheme)){o.URLtemplateImage=function(e,t,n){var r="";return n<f.length&&(r=f[n].url),r};var d=n.querySelector("BoundingBox"),m=parseFloat(d.getAttribute("miny")),y=parseFloat(d.getAttribute("maxy")),g=parseFloat(d.getAttribute("minx")),b=parseFloat(d.getAttribute("maxx")),h=new e.Rectangle(g,m,b,y);o.getTileDataAvailable=function(t,n,r){var i,s,c,l,u,p,d=o.tilingScheme.tileXYToNativeRectangle(t,n,r),m=(i=h,s=d,c=Math.max(i.west,s.west),l=Math.min(i.east,s.east),u=Math.max(i.south,s.south),p=Math.min(i.north,s.north),l<=c||u>=p?void 0:new e.Rectangle(c,u,l,p));return e.defined(m)&&r<a&&r<f.length},o.ready=!0}else o=void 0;return o},t.WMTSParser.generate=function(n){var r;if(n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT),e.defined(n.url)){var o=n.url,a=o.lastIndexOf("?");a>-1&&(o=o.substring(0,a));var i=o+"?REQUEST=GetCapabilities";e.defined(n.proxy)&&(i=n.proxy.getURL(i)),r=e.loadXML(i).then((function(e){return t.WMTSParser.getMetaDatafromXML(e,n)}))}else{if(!e.defined(n.xml))throw new e.DeveloperError("either description.url or description.xml are required.");r=t.WMTSParser.getMetaDatafromXML(n.xml,n)}return r},t.WMTSParser.getMetaDatafromXML=function(n,r){if(!(n instanceof XMLDocument))throw new e.DeveloperError("xml must be a XMLDocument");var o={},a=r.layerName;o.ready=!1,o.heightMapWidth=e.defaultValue(r.heightMapWidth,65),o.heightMapHeight=e.defaultValue(r.heightMapHeight,o.heightMapWidth);var i,s=e.defaultValue(r.maxLevel,12),c=r.proxy,l=r.styleName;o.hasStyledImage=e.defaultValue(r.hasStyledImage,"string"==typeof r.styleName),o.waterMask=e.defaultValue(r.waterMask,!1),"boolean"!=typeof o.waterMask&&(o.waterMask=!1),o.offset=e.defaultValue(r.offset,0),o.highest=e.defaultValue(r.highest,12e3),o.lowest=e.defaultValue(r.lowest,-500);for(var u,p,f,d=[],m=[].slice.call(n.querySelectorAll('Operation[name="GetTile"] HTTP Get')).map((function(e){var t,n=e.querySelector("Value").textContent;return"KVP"===n&&(t={node:e,type:"KVP"}),"RESTful"===n&&(t={node:e,type:"RESTful"}),t})).filter((function(t){return e.defined(t)})),y=0;y<m.length;y++){var g=m[y];"RESTful"!==g.type||e.defined(p)||(p=g.node.getAttribute("xlink:href"),e.defined(c)&&(p=c.getURL(p))),"KVP"!==g.type||e.defined(u)||(u=g.node.getAttribute("xlink:href"),e.defined(c)&&(u=c.getURL(u)))}var b,h=n.querySelectorAll("Contents>Layer>Identifier");for(y=0;y<h.length&&!e.defined(b);y++)a===h[y].textContent&&(b=h[y].parentNode);if(e.defined(b)){var v,S,E=b.querySelectorAll("Style");for(y=0;y<E.length;y++){var O=E[y].querySelector("Identifier").textContent;null!=E[y].getAttribute("isDefault")&&(v=O),O===l&&(S=O)}e.defined(l)&&l==S||(l=e.defaultValue(v,""));for(var w=[].slice.call(b.querySelectorAll("Format")),A=0;A<t.FormatImage.length&&!e.defined(f);A++){w.filter((function(e){return e.textContent===t.FormatImage[A].format})).length>0&&(f=t.FormatImage[A])}d=b.querySelectorAll("TileMatrixSetLink")}for(var T=[].slice.call(n.querySelectorAll("TileMatrixSet>Identifier")),P=0;P<d.length&&!o.ready;P++){var C,x,_=d[P],R=_.querySelector("TileMatrixSet").textContent;for(y=0;y<T.length&&!e.defined(C);y++)T[y].textContent===R&&(C=T[y].parentNode);for(var I=C.querySelector("SupportedCRS").textContent,j=0;j<t.CRS.length&&!e.defined(x);j++)t.CRS[j].SupportedCRS===I&&(x=t.CRS[j]);if(e.defined(x)){var L,D=[].slice.call(C.querySelectorAll("TileMatrix"));(L=D.map((function(e){var t=e.querySelector("Identifier").textContent,n=parseInt(e.querySelector("MatrixWidth").textContent),r=parseInt(e.querySelector("MatrixHeight").textContent),o=parseInt(e.querySelector("TileWidth").textContent),a=parseInt(e.querySelector("TileHeight").textContent);return{id:t,maxWidth:n,maxHeight:r,scaleDenominator:parseFloat(e.querySelector("ScaleDenominator").textContent),complete:!1,tileWidth:o,tileHeight:a}}))).sort((function(e,t){return t.scaleDenominator-e.scaleDenominator})),listTileMatrixLimits=_.querySelectorAll("TileMatrixSetLimits>TileMatrixLimits");for(var M=0;M<L.length;M++)for(var N=L[M],k=0;k<listTileMatrixLimits.length;k++){var G=listTileMatrixLimits[k];N.id===G.querySelector("TileMatrix").textContent&&(N.minTileRow=parseInt(G.querySelector("MinTileRow").textContent),N.maxTileRow=parseInt(G.querySelector("MaxTileRow").textContent),N.minTileCol=parseInt(G.querySelector("MinTileCol").textContent),N.maxTileCol=parseInt(G.querySelector("MaxTileCol").textContent),N.complete=!0,L[M]=N)}if(L.length>0){o.tilingScheme=new x.tilingScheme({ellipsoid:x.ellipsoid,numberOfLevelZeroTilesX:L[0].maxWidth,numberOfLevelZeroTilesY:L[0].maxHeight});var F=b.querySelector("ResourceURL[format='"+f.format+"']");if(null!=F?i=F.getAttribute("template").replace("{TileRow}","{y}").replace("{TileCol}","{x}").replace("{Style}",l).replace("{TileMatrixSet}",R).replace("{layer}",a).replace("{infoFormatExtension}",f.extension):e.defined(u)&&(i=u+"service=WMTS&request=GetTile&version=1.0.0&layer="+a+"&style=&"+l+"format="+f.format+"&TileMatrixSet="+R+"&TileMatrix={TileMatrix}&TileRow={y}&TileCol={x}"),e.defined(i)){o.getTileDataAvailable=function(e,t,n){var r=!1;if(n<s&&n<L.length){var o=L[n];r=o.complete?t<=o.maxTileRow&&t>=o.minTileRow&&e<=o.maxTileCol&&e>=o.minTileCol:e<o.maxWidth&&t<o.maxHeight}return r},o.URLtemplateImage=function(e,t,n){var r="";if(o.getTileDataAvailable(e,t,n)){var a=L[n];r=i.replace("{TileMatrix}",a.id)}return r};var U={width:L[0].tileWidth,height:L[0].tileHeight};0==L.filter((function(e){return e.tileWidth!=U.width||e.tileHeight!=U.height})).length&&(o.imageSize=U),o.ready=!0}}}}return o};var n=function(n){if(!e.defined(n))throw new e.DeveloperError("description is required.");var o=new e.Event,a=n.credit;"string"==typeof a&&(a=new e.Credit(a)),this.ready=!1,e.defineProperties(this,{errorEvent:{get:function(){return o}},credit:{get:function(){return a}},hasVertexNormals:{get:function(){return!1}}}),r(t.parser(n),this)};function r(t,r){e.when(t,(function(t){e.defined(t)&&t.ready&&(t.levelZeroMaximumGeometricError=e.TerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap(t.tilingScheme.ellipsoid,t.heightMapWidth,t.tilingScheme.getNumberOfXTilesAtLevel(0)),e.defined(t.URLtemplateImage)&&(t.getHeightmapTerrainDataImage=function(i,s,c){var l;if(!isNaN(i+s+c)){var u=o(t.URLtemplateImage(i,s,c),i,s,c,r),p={highest:t.highest,lowest:t.lowest,offset:t.offset},f=a(i,s,c,r),d=e.throttleRequestByServer(u,e.loadImage);e.defined(d)&&(l=e.when(d,(function(e){return n.imageToHeightmapTerrainData(e,p,{width:t.heightMapWidth,height:t.heightMapHeight},t.waterMask,f,t.hasStyledImage)})).otherwise((function(){return new e.HeightmapTerrainData({buffer:new Uint16Array(t.heightMapWidth*t.heightMapHeight),width:t.heightMapWidth,height:t.heightMapHeight,childTileMask:f,waterMask:new Uint8Array(t.heightMapWidth*t.heightMapHeight),structure:t.formatImage.terrainDataStructure})})))}return l}),e.defined(t.URLtemplateArray)&&(t.getHeightmapTerrainDataArray=function(i,s,c){var l;if(!isNaN(i+s+c)){var u=o(t.URLtemplateArray(i,s,c),i,s,c,r),p={highest:t.highest,lowest:t.lowest,offset:t.offset},f=a(i,s,c,r),d=e.throttleRequestByServer(u,e.loadArrayBuffer);e.defined(d)&&(l=e.when(d,(function(e){return n.arrayToHeightmapTerrainData(e,p,{width:t.heightMapWidth,height:t.heightMapHeight},t.formatArray,t.waterMask,f)})).otherwise((function(){return e.defined(t.getHeightmapTerrainDataImage)?t.getHeightmapTerrainDataImage(i,s,c):new e.HeightmapTerrainData({buffer:new Uint16Array(t.heightMapWidth*t.heightMapHeight),width:t.heightMapWidth,height:t.heightMapHeight,childTileMask:f,waterMask:new Uint8Array(t.heightMapWidth*t.heightMapHeight),structure:t.formatImage.terrainDataStructure})})))}return l}),r.getLevelMaximumGeometricError=function(e){return t.levelZeroMaximumGeometricError/(1<<e)},r.requestTileGeometry=function(n,r,o){var a;return e.defined(t.getHeightmapTerrainDataArray)?a=t.getHeightmapTerrainDataArray(n,r,o):e.defined(t.getHeightmapTerrainDataImage)&&(a=t.getHeightmapTerrainDataImage(n,r,o)),a},e.defineProperties(r,{tilingScheme:{get:function(){return t.tilingScheme}},ready:{get:function(){return t.ready}},hasWaterMask:{get:function(){return t.waterMask}},heightMapHeight:{get:function(){return t.heightMapHeight}},heightMapWidth:{get:function(){return t.heightMapWidth}},getTileDataAvailable:{get:function(){return t.getTileDataAvailable}}}))}))}function o(e,t,n,r,o){var a=o.tilingScheme.tileXYToNativeRectangle(t,n,r),i=(a.east-a.west)/(o.heightMapWidth-1),s=(a.north-a.south)/(o.heightMapHeight-1);a.west-=.5*i,a.east+=.5*i,a.south-=.5*s,a.north+=.5*s;var c=o.tilingScheme.getNumberOfYTilesAtLevel(r)-n-1;return e.replace("{south}",a.south).replace("{north}",a.north).replace("{west}",a.west).replace("{east}",a.east).replace("{x}",t).replace("{y}",n).replace("{tmsY}",c)}function a(e,t,n,r){var o=0,a=n+1;return o|=r.getTileDataAvailable(2*e,2*t,a)?1:0,o|=r.getTileDataAvailable(2*e+1,2*t,a)?2:0,o|=r.getTileDataAvailable(2*e,2*t+1,a)?4:0,o|=r.getTileDataAvailable(2*e+1,2*t+1,a)?8:0}return n.arrayToHeightmapTerrainData=function(t,n,r,o,a,i){"number"==typeof r&&(r={width:r,height:r});var s=o.postProcessArray(t,r,n.highest,n.lowest,n.offset);if(!e.defined(s))throw new e.DeveloperError("no good size");var c={buffer:s,width:r.width,height:r.height,childTileMask:i,structure:o.terrainDataStructure};if(a){for(var l=new Uint8Array(s.length),u=0;u<s.length;u++)s[u]<=0&&(l[u]=255);c.waterMask=l}return new e.HeightmapTerrainData(c)},n.imageToHeightmapTerrainData=function(t,n,r,o,a,i){"number"==typeof r&&(r={width:r,height:r});for(var s=e.getImagePixels(t,r.width,r.height),c=new Uint8Array(s.length/4),l=new Int16Array(s.length/4),u=0,p=0,f=0;f<s.length;f+=4){var d=s[f],m=s[f+1],y=s[f+2]>128,g=(d<<8|m)-n.offset-32768;g>n.lowest&&g<n.highest&&(y||i)?(l[f/4]=g,p+=g,u++):l[f/4]=0==u?0:p/u}var b={buffer:l,width:r.width,height:r.height,childTileMask:a,structure:{heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}};if(o){for(c=new Uint8Array(heightBuffer.length),f=0;f<heightBuffer.length;f++)heightBuffer[f]<=0&&(c[f]=255);b.waterMask=c}return new e.HeightmapTerrainData(b)},n}},3130:function(e,t){e.exports={PARAM_OPTIONS:["layers","styles","style","format","transparent","version","tiled","opacity","zindex","srs","singletile","_v_","filterobj"]}},3131:function(e,t,n){"use strict";n.r(t);var r=n(765),o=n.n(r),a=n(47),i=n.n(a),s=n(2349),c=n.n(s),l=n(773),u=n.n(l),p=n(2167),f=n.n(p),d=n(137),m=n(26),y=n.n(m),g=n(13),b=n(55),h=n.n(b),v=n(2227);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=e,n="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),n=e.substring(e.indexOf("?")+1)),{url:t,queryString:n}}function A(e){this.proxy=e}function T(){}A.prototype.getURL=function(e){var t=w(e),n=t.url,r=t.queryString;return c.a.getProxyUrl()+encodeURIComponent(n+r)},T.prototype.getURL=function(e){var t=w(e);return t.url+t.queryString};var P=function(e){return e.indexOf("EPSG:4326")>=0?new f.a.GeographicTilingScheme:e.indexOf("EPSG:3857")>=0?new f.a.WebMercatorTilingScheme:null},C=function(e,t){var n=u.a.getTileMatrixSet(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds);return{tileMatrixSet:n,matrixIds:function(e,t){return e.length>t?Object(g.slice)(e,0,t):e.length<t?e.concat(new Array(t-e.length)):e}(e.matrixIds&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return(Object(g.isObject)(e)&&e[t]||Object(g.isArray)(e)&&e||[]).map((function(e){return e.identifier}))}(e.matrixIds,n)||function(e){for(var t=new Array(30),n=0;n<30;++n)t[n]=e.tileMatrixPrefix+n;return t}(e))}};function x(e){var t="EPSG:4326",n=C(e,t),r=n.tileMatrixSet,o=n.matrixIds;if(0===o.length){var a=C(e,t="EPSG:3857");r=a.tileMatrixSet,o=a.matrixIds}var s,l=i.a.getProxyUrl({});l&&(s=c.a.needProxy(e.url)&&l);var u,p=(u=e.matrixIds&&e.matrixIds[r],function(e,t,n){return u&&u[n]&&!u[n].ranges||e<=parseInt(Object(g.get)(u[n],"ranges.cols.max"),10)&&e>=parseInt(Object(g.get)(u[n],"ranges.cols.min"),10)&&t<=parseInt(Object(g.get)(u[n],"ranges.rows.max"),10)&&t>=parseInt(Object(g.get)(u[n],"ranges.rows.min"),10)}),f=h.a.format({query:E({},Object(d.getAuthenticationParam)(e))});return y()({url:Object(g.head)(Object(d.getURLs)(Object(g.isArray)(e.url)?e.url:[e.url],f)),format:(Object(v.isVectorFormat)(e.format)?"image/png":e.format)||"image/png",isValid:p,layer:e.name,style:e.style||"",tileMatrixLabels:o,tilingScheme:P(t,e.matrixIds[r]),proxy:s&&new A(s)||new T,enablePickFeatures:!1,tileWidth:e.tileWidth||e.tileSize||256,tileHeight:e.tileHeight||e.tileSize||256,tileMatrixSetID:r,maximumLevel:30,parameters:E({},Object(d.getAuthenticationParam)(e))})}var _=function e(t){var n,r=x(t),o=(n=new f.a.WebMapTileServiceImageryProvider(r)).requestImage;return n.requestImage=function(e,t,a){return r.isValid(e,t,a)?o.bind(n)(e,t,a):new Promise((function(){}))},n.updateParams=function(n){var r=y()({},t,{params:y()({},t.params||{},n)});return e(r)},n};o.a.registerType("wmts",{create:_,update:function(e,t,n){return t.securityToken!==n.securityToken||n.format!==t.format?_(t):null}})},3132:function(e,t,n){var r=n(765),o=n(2167),a=n(26),i=function(){var e=[o.Math.toRadians(.05),o.Math.toRadians(.1),o.Math.toRadians(.2),o.Math.toRadians(.5),o.Math.toRadians(1),o.Math.toRadians(2),o.Math.toRadians(5),o.Math.toRadians(10)];function t(e,t){var n=e||{};this._tilingScheme=n.tilingScheme||new o.GeographicTilingScheme,this._color=n.color&&new o.Color(n.color[0],n.color[1],n.color[2],n.color[3])||new o.Color(1,1,1,.4),this._tileWidth=n.tileWidth||256,this._tileHeight=n.tileHeight||256,this._ready=!0,this._sexagesimal=n.sexagesimal||!1,this._numLines=n.numLines||50,this._scene=t,this._labels=new o.LabelCollection,t.primitives.add(this._labels),this._polylines=new o.PolylineCollection,t.primitives.add(this._polylines),this._ellipsoid=t.globe.ellipsoid;var r=document.createElement("canvas");r.width=256,r.height=256,this._canvas=r}var n=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){return!1}}(),r=Object.defineProperties;function a(e){return e<.01?3:e<.1?2:e<1?1:0}return n&&r||(r=function(e){return e}),r(t.prototype,{url:{get:function(){}},proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),t.prototype.makeLabel=function(e,t,n,r){this._labels.add({position:this._ellipsoid.cartographicToCartesian(new o.Cartographic(e,t,10)),text:n,font:"normal",fillColor:this._color,outlineColor:this._color,style:o.LabelStyle.FILL,pixelOffset:new o.Cartesian2(5,r?5:-5),eyeOffset:o.Cartesian3.ZERO,horizontalOrigin:o.HorizontalOrigin.LEFT,verticalOrigin:r?o.VerticalOrigin.BOTTOM:o.VerticalOrigin.TOP,scale:1})},t.prototype._drawGrid=function(t){if(!this._currentExtent||!this._currentExtent.equals(t)){this._currentExtent=t,this._polylines.removeAll(),this._labels.removeAll();for(var n=0,r=0,i=0;i<e.length&&n<(t.north-t.south)/10;i++)n=e[i];for(var s=0;s<e.length&&r<(t.east-t.west)/10;s++)r=e[s];var c=(t.west<0?Math.ceil(t.west/r):Math.floor(t.west/r))*r,l=(t.south<0?Math.ceil(t.south/n):Math.floor(t.south/n))*n,u=(t.east<0?Math.ceil(t.east/n):Math.floor(t.east/n))*n,p=(t.north<0?Math.ceil(t.north/r):Math.floor(t.north/r))*r;c=Math.max(c-2*r,-Math.PI),u=Math.min(u+2*r,Math.PI),l=Math.max(l-2*n,-Math.PI/2),p=Math.min(p+2*r,Math.PI/2);for(var f=this._ellipsoid,d=o.Math.toRadians(1),m=l+Math.floor((p-l)/n/2)*n,y=c;y<u;y+=r){for(var g=[],b=l;b<p;b+=d)g.push(new o.Cartographic(y,b));g.push(new o.Cartographic(y,p)),this._polylines.add({positions:f.cartographicArrayToCartesianArray(g),width:.75,material:new o.Material({fabric:{type:"Color",uniforms:{color:this._color}}})});var h=o.Math.toDegrees(y);this.makeLabel(y,m,this._sexagesimal?this._decToSex(h):h.toFixed(a(r)),!1)}for(var v=c+Math.floor((u-c)/r/2)*r,S=l;S<p;S+=n){for(var E=[],O=c;O<u;O+=d)E.push(new o.Cartographic(O,S));E.push(new o.Cartographic(u,S)),this._polylines.add({positions:f.cartographicArrayToCartesianArray(E),width:1,material:new o.Material({fabric:{type:"Color",uniforms:{color:this._color}}})});var w=o.Math.toDegrees(S);this.makeLabel(v,S,this._sexagesimal?this._decToSex(w):w.toFixed(a(n)),!0)}}},t.prototype.requestImage=function(){return this._show&&this._drawGrid(this._getExtentView()),this._canvas},t.prototype.setVisible=function(e){this._show=e,e?(this._currentExtent=null,this._drawGrid(this._getExtentView())):(this._polylines.removeAll(),this._labels.removeAll())},t.prototype.isVisible=function(){return this._show},t.prototype._decToSex=function(t){var n=Math.floor(t),r=(60*(Math.abs(t)-n)).toFixed(2);return"60.00"===r&&(n+=1,e="0.00"),[n,":",r].join("")},t.prototype._getExtentView=function(){for(var e=this._scene.camera,t=this._scene.canvas,n=[e.pickEllipsoid(new o.Cartesian2(0,0),this._ellipsoid),e.pickEllipsoid(new o.Cartesian2(t.width,0),this._ellipsoid),e.pickEllipsoid(new o.Cartesian2(0,t.height),this._ellipsoid),e.pickEllipsoid(new o.Cartesian2(t.width,t.height),this._ellipsoid)],r=0;r<4;r++)if(void 0===n[r])return o.Rectangle.MAX_VALUE;return o.Rectangle.fromCartographicArray(this._ellipsoid.cartesianArrayToCartographicArray(n))},t.prototype.destroy=function(){this._show=!1,this._polylines&&this._scene.primitives.remove(this._polylines),this._labels&&this._scene.primitives.remove(this._labels)},t}();r.registerType("graticule",{create:function(e,t){var n=t.scene,r=new i(a({tileWidth:512,tileHeight:512,numLines:10},e||{}),n);return e.visibility&&r.setVisible(!0),r}})},3133:function(e,t,n){var r=n(765),o=n(2167),a=n(13).isEqual,i=n(26);r.registerType("marker",{create:function(e,t){var n=i({},{point:{pixelSize:5,color:o.Color.RED,outlineColor:o.Color.WHITE,outlineWidth:2}},e.style),r=t.entities.add(i({position:o.Cartesian3.fromDegrees(e.point.lng,e.point.lat)},n));return{detached:!0,point:r,remove:function(){t.entities.remove(r)}}},update:function(e,t,n,r){return a(t.point,n.point)?null:(e.remove(),this.create(t,r))}})},3134:function(e,t,n){var r=n(765),o=n(2167),a=n(2648),i=function(){function e(e){this._scene=e.scene;var t=document.createElement("div");t.className="infoWindow",this._div=t;var n=document.createElement("div");n.className="frame",this._div.appendChild(n);var r=document.createElement("div");r.className="content",n.appendChild(r),e.container.appendChild(t),this._content=r,this.setVisible(!0)}return e.prototype.setVisible=function(e){this._visible=e,this._div.style.display=e?"block":"none"},e.prototype.setContent=function(e){if("string"==typeof e)this._content.innerHTML=e;else{for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._content.appendChild(e)}},e.prototype.setPosition=function(e,t){this._position=this._scene.globe.ellipsoid.cartographicToCartesian(o.Cartographic.fromDegrees(t,e,0))},e.prototype.showAt=function(e,t,n){this.setPosition(e,t),this.setContent(n),this.setVisible(!0)},e.prototype.hide=function(){this.setVisible(!1)},e.prototype.computeVisible=function(){var e=6356752.314245179,t=this._scene.camera.position,n=t.x/6378137,r=t.y/6378137,o=t.z/e,a=n*n+r*r+o*o-1,i=this._position,s=i.x/6378137-n,c=i.y/6378137-r,l=i.z/e-o,u=-(s*n+c*r+l*o);u>a&&u*u/(s*s+c*c+l*l)>a?this.setVisible(!1):this.setVisible(!0)},e.prototype.update=function(){if(this.computeVisible(),this._visible&&this._position){var e=o.SceneTransforms.wgs84ToWindowCoordinates(this._scene,this._position);if(e){var t=Math.floor(e.x)-this._div.clientWidth/2+"px",n=Math.floor(e.y)-this._div.clientHeight+"px";this._div.tabIndex=5,this._div.style.left=t,this._div.style.top=n}}},e.prototype.destroy=function(){this._div.parentNode.removeChild(this._div)},e}();r.registerType("overlay",{create:function(e,t){var n=function(e,t){var n=e.cloneNode(!0);n.id=t.id+"-overlay",n.className=(t.className||e.className)+"-overlay",n.removeAttribute("data-reactid"),function e(t){if(0!==t.length)for(var n=0;n<t.length;n++){var r=t.item(n);r.removeAttribute("data-reactid"),e(r.children||[])}}(n.children||[]);var r=t.closeClass||"close";if(t.onClose&&1===n.getElementsByClassName(r).length){var o=n.getElementsByClassName(r)[0];a.add(o,"click",(function(e){t.onClose(e.target.getAttribute("data-overlayid"))}))}return n}(document.getElementById(e.id),e),r=new i(t);r.showAt(e.position.y,e.position.x,n),r.setVisible(!0);var o=t.scene.primitives.add(r);return{detached:!0,info:o,remove:function(){t.scene.primitives.remove(o)}}}})},3135:function(e,t,n){var r=n(760),o=n(411);n(3136);var a=n(26);r.BingLayer.prototype.loadMetadata=function(){if(!this.metaRequested){this.metaRequested=!0;var e=this,t="_bing_metadata_"+r.Util.stamp(this);window[t]=function(n){e.meta=n,window[t]=void 0;var r=document.getElementById(t);return r.parentNode.removeChild(r),n.errorDetails?(e.fire("load",{layer:e}),e.onError(n)):(e.initMetadata(n),null)};var n="file:"===document.location.protocol?"https":document.location.protocol.slice(0,-1),o=n+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+t+"&key="+this._key+"&UriScheme="+n,a=document.createElement("script");a.type="text/javascript",a.src=o,a.id=t,document.getElementsByTagName("head")[0].appendChild(a)}},r.BingLayer.prototype.onError=function(e){return this.options.onError?this.options.onError(e):null},o.registerType("bing",{create:function(e){var t=e.apiKey,n={subdomains:[0,1,2,3],type:e.name,attribution:"Bing",culture:"",onError:e.onError,maxNativeZoom:e.maxNativeZoom||19,maxZoom:e.maxZoom||23};return e.zoomOffset&&(n=a({},n,{zoomOffset:e.zoomOffset})),new r.BingLayer(t,n)},isValid:function(e){return!e.meta||!e.meta.statusCode||200===e.meta.statusCode}})},3137:function(e,t,n){var r=n(760);e.exports=r.TileLayer.extend({initialize:function(e){r.TileLayer.prototype.initialize.call(this,this.url,e)}})},3138:function(e,t,n){var r=n(411),o=n(3139),a=n(26);n(3140),r.registerType("graticule",{create:function(e){var t=a({interval:20,showOriginLabel:!0,redraw:"move"},e);return o?new o(t):null},isValid:function(){return!!o}})},3142:function(e,t,n){var r=n(411),o=n(760);n(3143),r.registerType("google",(function(e){return o.gridLayer.googleMutant({type:e.name.toLowerCase(),maxNativeZoom:e.maxNativeZoom||18,maxZoom:e.maxZoom||20})}))},3144:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(411),i=n(3145);a.registerType("mapquest",{create:function(e){return i?i.mapLayer(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({maxZoom:23},e)):(e&&e.onError&&e.onError(),!1)},isValid:function(){return!!i}})},3145:function(e,t){e.exports=window.MQ},3146:function(e,t,n){var r=n(411),o=n(760);r.registerType("osm",(function(e){return o.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoomOffset:e.zoomOffset||0,maxNativeZoom:e.maxNativeZoom||19,maxZoom:e.maxZoom||23})}))},3147:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=n(411),c=n(760),l=n(2463);s.registerType("tileprovider",(function(e){var t=a(l.getLayerConfig(e.provider,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({maxZoom:23},e)),2),n=t[0],i=t[1];return c.tileLayer(n,i)}))},3148:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(1),a=n(2100),i=n(411),s=n(80),c=n(414).optionsToVendorParams,l=n(3149),u=n(760),p=n(26),f=n(13),d=f.isArray,m=f.isNil,y=n(197),g=n(2649),b=n(137).creditsToAttribution,h=n(2227).isVectorFormat;n(3151),u.NonTiledLayer.WMSCustom=u.NonTiledLayer.WMS.extend({initialize:function(e,t){this._wmsUrl=e;var n=u.extend({},this.defaultWmsParams);for(var r in t)this.options.hasOwnProperty(r)||"CRS"===r.toUpperCase()||"maxNativeZoom"===r||(n[r]=t[r]);this.wmsParams=n,u.setOptions(this,t)},removeParams:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return t.forEach((function(t){return delete e.wmsParams[t]})),n||this.redraw(),this}}),u.nonTiledLayer.wmsCustom=function(e,t){return new u.NonTiledLayer.WMSCustom(e,t)},u.TileLayer.MultipleUrlWMS=u.TileLayer.WMS.extend({initialize:function(e,t){this._url=e[0],this._urls=e,this._urlsIndex=0;var n=u.extend({},this.defaultWmsParams),r=t.tileSize||this.options.tileSize;for(var o in t.detectRetina&&u.Browser.retina?n.width=n.height=2*r:n.width=n.height=r,t)this.options.hasOwnProperty(o)||"CRS"===o.toUpperCase()||"maxNativeZoom"===o||(n[o]=t[o]);this.wmsParams=n,u.setOptions(this,t)},getTileUrl:function(e){var t=this._map,n=this.options.tileSize,r=e.multiplyBy(n),o=r.add([n,n]),a=this._crs.project(t.unproject(r,e.z)),i=this._crs.project(t.unproject(o,e.z)),s=this._wmsVersion>=1.3&&this._crs===u.CRS.EPSG4326?[i.y,a.x,a.y,i.x].join(","):[a.x,i.y,i.x,a.y].join(",");this._urlsIndex++,this._urlsIndex===this._urls.length&&(this._urlsIndex=0);var c=u.Util.template(this._urls[this._urlsIndex],{s:this._getSubdomain(e)});return c+u.Util.getParamString(this.wmsParams,c,!0)+"&BBOX="+s},removeParams:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return t.forEach((function(t){return delete e.wmsParams[t]})),n||this.redraw(),this}}),u.tileLayer.multipleUrlWMS=function(e,t){return new u.TileLayer.MultipleUrlWMS(e,t)},u.TileLayer.ElevationWMS=u.TileLayer.MultipleUrlWMS.extend({initialize:function(e,t,n){this._tiles={},this._nodata=n,u.TileLayer.MultipleUrlWMS.prototype.initialize.apply(this,arguments)},_addTile:function(e){var t=this.getTileUrl(e);g.loadTile(t,e,this._tileCoordsToKey(e))},getElevation:function(e,t){try{var n=this._getTileFromCoords(e),r=g.getElevation(this._tileCoordsToKey(n),this._getTileRelativePixel(n,t),this.getTileSize().x,this._nodata);return r.available?r.value:o.createElement(a,{msgId:r.message})}catch(e){return o.createElement(a,{msgId:"elevationLoadingError"})}},_getTileFromCoords:function(e){var t=this._map.project(e).divideBy(256).floor();return p(t,{z:this._tileZoom})},_getTileRelativePixel:function(e,t){var n=Math.floor(t.x-this._getTilePos(e).x-this._map._getMapPanePos().x),r=Math.min(this.getTileSize().x-1,Math.floor(t.y-this._getTilePos(e).y-this._map._getMapPanePos().y));return new u.Point(n,r)},_removeTile:function(){},_abortLoading:function(){}}),u.tileLayer.elevationWMS=function(e,t,n){return new u.TileLayer.ElevationWMS(e,t,n)};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){return m(e[n])?t:p(t,r({},n,e[n]))}),{})};function S(e){var t=void 0!==e.opacity?e.opacity:1,n=c(e),r=p({},e.baseParams,{attribution:e.credits&&b(e.credits),layers:e.name,styles:e.style||"",format:(h(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,tiled:void 0===e.tiled||e.tiled,opacity:t,zIndex:e.zIndex,version:e.version||"1.3.0",SRS:s.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),CRS:s.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),tileSize:e.tileSize||256,maxZoom:e.maxZoom||23,maxNativeZoom:e.maxNativeZoom||18},p(e._v_?{_v_:e._v_}:{},n||{}));return y.addAuthenticationToSLD(r,e)}function E(e){return e.map((function(e){return e.split("?")[0]}))}i.registerType("wms",{create:function(e){var t=E(d(e.url)?e.url:[e.url]),n=v(S(e)||{});return t.forEach((function(t){return y.addAuthenticationParameter(t,n,e.securityToken)})),e.useForElevation?u.tileLayer.elevationWMS(t,n,e.nodata||-9999):e.singleTile?u.nonTiledLayer.wmsCustom(t[0],n):u.tileLayer.multipleUrlWMS(t,n)},update:function(e,t,n){if(n.singleTile!==t.singleTile||n.securityToken!==t.securityToken&&t.visibility){var o=E(d(t.url)?t.url:[t.url]),a=S(t)||{};return o.forEach((function(e){return y.addAuthenticationParameter(e,a,t.securityToken)})),t.singleTile?u.nonTiledLayer.wmsCustom(o[0],a):u.tileLayer.multipleUrlWMS(o,a)}var i=p({},l.filterWMSParamOptions(S(n)),y.addAuthenticationToSLD(n.params||{},n)),s=p({},l.filterWMSParamOptions(S(t)),y.addAuthenticationToSLD(t.params||{},t)),c=Object.keys(s).filter((function(e){return s[e]!==i[e]})),f=Object.keys(i).filter((function(e){return i[e]!==s[e]})),m={};return f.length>0&&e.removeParams(f,c.length>0),c.length>0&&(m=c.reduce((function(e,t){return p({},e,r({},t,s[t]))}),m),e.setParams(v(p(m,m.params,y.addAuthenticationToSLD(t.params||{},t))))),null}})},3149:function(e,t,n){var r=n(26),o={PARAM_OPTIONS:["layers","styles","format","transparent","version","tiled","zindex","_v_","cql_filter","sld"],wmsToLeafletOptions:function(e){var t=void 0!==e.opacity?e.opacity:1;return r({layers:e.name,styles:e.style||"",format:e.format||"image/png",transparent:void 0===e.transparent||e.transparent,tiled:void 0===e.tiled||e.tiled,opacity:t},e.params||{})},getWMSURL:function(e){return e.split("?")[0]},filterWMSParamOptions:function(e){var t={};return Object.keys(e).forEach((function(n){n&&n.toLowerCase&&o.PARAM_OPTIONS.indexOf(n.toLowerCase())>=0&&(t[n]=e[n])})),t}};e.exports=o},3152:function(e,t,n){"use strict";n.r(t);var r=n(411),o=n.n(r),a=n(80),i=n.n(a),s=n(760),c=n.n(s),l=n(26),u=n.n(l),p=n(197),f=n.n(p),d=n(773),m=n.n(d),y=n(3153),g=n.n(y),b=n(13),h=n(2227);function v(e,t){return Object(b.isObject)(e)&&e[t]||e}c.a.tileLayer.wmts=function(e,t,n){return new g.a(e,t,n)};var S=function(e){var t=function(e){return e.map((function(e){return e.split("?")[0]}))}(Object(b.isArray)(e.url)?e.url:[e.url]),n=function(e){var t=i.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),n=m.a.getTileMatrixSet(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds);return u()({requestEncoding:e.requestEncoding,layer:e.name,style:e.style||"",format:(Object(h.isVectorFormat)(e.format)?"image/png":e.format)||"image/png",tileMatrixSet:n,version:e.version||"1.0.0",tileSize:e.tileSize||256,CRS:i.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),maxZoom:e.maxZoom||23,maxNativeZoom:e.maxNativeZoom||18},e.params||{})}(e)||{};t.forEach((function(t){return f.a.addAuthenticationParameter(t,n,e.securityToken)}));var r=i.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS);return c.a.tileLayer.wmts(t,n,{tileMatrixPrefix:e.tileMatrixPrefix||n.tileMatrixSet+":"||r+":",originY:e.originY||20037508.3428,originX:e.originX||-20037508.3428,ignoreErrors:e.ignoreErrors||!1,matrixIds:e.matrixIds&&v(e.matrixIds,n.tileMatrixSet||r)||null,matrixSet:Object(b.head)(e.tileMatrixSet.filter((function(e){return e["ows:Identifier"]===n.tileMatrixSet})))||null})};o.a.registerType("wmts",{create:S,update:function(e,t,n){return n.securityToken!==t.securityToken||n.format!==t.format?S(t):null}})},3153:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(760),i=n(196),s=n(80),c=n(13),l=c.head,u=c.isNumber,p=a.TileLayer.extend({defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.3.0",layer:"",style:"",tileMatrixSet:"",format:"image/jpeg"},initialize:function(e,t,n){this._url=e[0],this._urls=e,this._urlsIndex=0;var r=a.extend({},this.defaultWmtsParams),o=t.tileSize||this.options.tileSize;for(var i in t.detectRetina&&a.Browser.retina?r.width=r.height=2*o:r.width=r.height=o,t)this.options.hasOwnProperty(i)||"crs"===i||(r[i]=t[i]);this.wmtsParams=r,this.matrixIds=n.matrixIds&&this.getMatrix(n.matrixIds,n)||this.getDefaultMatrix(n),this.matrixSet=n.matrixSet&&n.matrixSet.TileMatrix||[],this.ignoreErrors=n.ignoreErrors||!1,a.setOptions(this,t)},getWMTSParams:function(e,t,n,r,o){var a=i.getScales()[n],c=l(e.map((function(t,n){if(n===e.length-1)return null;var r=parseFloat(t.ScaleDenominator),o=parseFloat(e[n+1].ScaleDenominator);return r>=a&&o<a?a-o>(r-o)/2?{id:n,data:t}:{id:n+1,data:e[n+1]}:null})).filter((function(e){return e}))),p=c&&u(c.id)&&c.id+""||0===e.length&&n||null;if(!t[p])return null;var f=t[p].identifier,d=c.data&&c.data.TopLeftCorner&&s.parseString(c.data.TopLeftCorner)||t[p].topLeftCorner,m=d.lng||d.x,y=d.lat||d.y,g=Math.round((r.x-m)/o),b=-Math.round((r.y-y)/o),h=c.data&&c.data.MatrixWidth&&c.data.MatrixHeight&&{cols:{min:0,max:c.data.MatrixWidth-1},rows:{min:0,max:c.data.MatrixHeight-1}},v=t[p].ranges||h;return v&&!function(e,t,n){return!(e<n.cols.min||e>n.cols.max)&&!(t<n.rows.min||t>n.rows.max)}(g,b,v)?null:{ident:f,tilecol:g,tilerow:b}},getTileUrl:function(e){var t=this._map,n=t.options.crs,o=this.options.tileSize,i=e.multiplyBy(o);i.x+=1,i.y-=1;var s=i.add([o,o]),c=n.project(t.unproject(i,e.z)),l=n.project(t.unproject(s,e.z)).x-c.x,u=this.getWMTSParams(r(this.matrixSet),r(this.matrixIds),e.z,c,l);if(!u)return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";this._urlsIndex++,this._urlsIndex===this._urls.length&&(this._urlsIndex=0);var p=a.Util.template(this._urls[this._urlsIndex],{s:this._getSubdomain(e),TileRow:u.tilerow,TileCol:u.tilecol,TileMatrixSet:this.options.tileMatrixSet,TileMatrix:u.ident,Style:this.options.style});return"RESTful"===this.options.requestEncoding?p:p+a.Util.getParamString(this.wmtsParams,p,!0)+"&tilematrix="+u.ident+"&tilerow="+u.tilerow+"&tilecol="+u.tilecol},getMatrix:function(e,t){return e.map((function(e){return{identifier:e.identifier,topLeftCorner:new a.LatLng(t.originY,t.originX),ranges:e.ranges||null}}))},getDefaultMatrix:function(e){for(var t=new Array(22),n=0;n<22;n++)t[n]={identifier:e.tileMatrixPrefix+n,topLeftCorner:new a.LatLng(e.originY,e.originX)};return t},onError:function(){return!this.ignoreErrors}});e.exports=p},3154:function(e,t,n){var r=n(411),o=n(13).isNil,a=n(760),i={radius:5,color:"red",weight:1,opacity:1,fillOpacity:0},s=n(26);r.registerType("vector",{create:function(e){var t=function(e){var t=e.hideLoading,n=a.geoJson([],{pointToLayer:"marker"!==e.styleName?function(t,n){return a.circleMarker(n,e.style||i)}:null,hideLoading:t,style:e.nativeStyle||e.style||i});return n.setOpacity=function(e){var t=s({},n.options.style||i,{opacity:e,fillOpacity:e});n.setStyle(t),function e(t,n){t.eachLayer&&t.eachLayer((function(t){t.setOpacity&&t.setOpacity(n),e(t,n)}))}(n,e)},n.on("layeradd",(function(){n.setOpacity(o(n.opacity)?e.opacity:n.opacity)})),n}(e);return t.opacity=o(e.opacity)?1:e.opacity,t},update:function(e,t,n){t.opacity!==n.opacity&&(e.opacity=t.opacity)},render:function(){return null}})},3155:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(2297),a=n(4287),i=function e(t,n){t.getSource&&"error"===t.getSource().getState()&&n.onError&&n.onError(t),t.getSource&&"loading"===t.getSource().getState()&&setTimeout(e.bind(null,t,n),1e3)};r.default.registerType("bing",{create:function(e){var t=e.apiKey,n=e.maxNativeZoom||19,r=new o.a({preload:1/0,opacity:void 0!==e.opacity?e.opacity:1,zIndex:e.zIndex,visible:e.visibility,source:new a.a({key:t,imagerySet:e.name,maxZoom:n})});return setTimeout(i.bind(null,r,e),1e3),r},isValid:function(e){return!e.getSource||"error"!==e.getSource().getState()}})},3156:function(e,t,n){"use strict";n.r(t);var r,o,a=n(270),i=n(1),s=n.n(i),c=n(2109),l={},u="ontouchstart"in window,p=u?"touchstart":"mousedown",f=u?"touchmove":"mousemove",d=u?"touchend":"mouseup";a.default.registerType("google",{create:function(e,t,n){if(document.getElementById(n+"gmaps")){var o=window.google;r||(r={HYBRID:o.maps.MapTypeId.HYBRID,SATELLITE:o.maps.MapTypeId.SATELLITE,ROADMAP:o.maps.MapTypeId.ROADMAP,TERRAIN:o.maps.MapTypeId.TERRAIN}),l[n]||(l[n]=new o.maps.Map(document.getElementById(n+"gmaps"),{disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1})),l[n].setMapTypeId(r[e.name]);var a=document.getElementById(n+"gmaps"),i=function(){if(l[n]&&"hidden"!==a.style.visibility){var e=Object(c.l)(t.getView().getCenter(),"EPSG:3857","EPSG:4326");l[n].setCenter(new o.maps.LatLng(e[1],e[0]))}},s=function(){l[n]&&"hidden"!==a.style.visibility&&l[n].setZoom(t.getView().getZoom())},u=function(e,t){var n=t[0],r=t[1],o=[[n/2,r/2],[-n/2,r/2],[-n/2,-r/2],[n/2,-r/2]].map((function(t){return n=t,r=e*Math.PI/180,o=n[0],a=n[1],[o*Math.cos(r)-a*Math.sin(r),o*Math.sin(r)+a*Math.cos(r)];var n,r,o,a})),a=o.map((function(e){return e[0]})),i=o.map((function(e){return e[1]})),s=Math.max.apply(null,a),c=Math.min.apply(null,a),l=Math.max.apply(null,i),u=Math.min.apply(null,i),p=Math.abs(l)+Math.abs(u);return{width:Math.abs(s)+Math.abs(c),height:p}},m=function(){if("hidden"!==a.style.visibility){var e=180*t.getView().getRotation()/Math.PI;a.style.transform="rotate("+e+"deg)",o.maps.event.trigger(l[n],"resize")}},y=function(){var e=t.getView();e.on("change:center",i),e.on("change:resolution",s),e.on("change:rotation",m)};t.on("change:view",y),y(),i(),s();var g=t.getViewport(),b=document.getElementById(n+"gmaps").style.transform,h=!1,v=!1;g.addEventListener(p,(function(){h=!0})),g.addEventListener(d,(function(){v&&h&&function(){var e=document.getElementById(n+"gmaps").style.transform;if(l[n]&&e!==b&&-1!==e.indexOf("rotate")){var r=parseFloat(e.match(/[\+\-]?\d+\.?\d*/i)[0]),s=u(-r,t.getSize());a.style.width=s.width+"px",a.style.height=s.height+"px",a.style.left=Math.round((t.getSize()[0]-s.width)/2)+"px",a.style.top=Math.round((t.getSize()[1]-s.height)/2)+"px",o.maps.event.trigger(l[n],"resize"),i()}}(),b=document.getElementById(n+"gmaps").style.transform,h=!1})),g.addEventListener(f,(function(){v=h}))}return null},render:function(e,t,n){o||(o=e.name);var a={zIndex:0};if(!0===e.visibility){var i=document.getElementById(n+"gmaps");i&&(i.style.visibility="visible"),l[n]&&r&&(l[n].setMapTypeId(r[e.name]),l[n].setTilt(0))}else a.visibility="hidden";if(o===e.name){var c=document.getElementById(n+"gmaps");return c&&(c.style.visibility=e.visibility?"visible":"hidden"),s.a.createElement("div",{id:n+"gmaps",className:"fill",style:a})}return null},update:function(e,t,n,r,o){if(l[o]){var a=window.google;if(!n.visibility&&t.visibility){var i=r.getView(),s=Object(c.l)(i.getCenter(),"EPSG:3857","EPSG:4326");l[o].setCenter(new a.maps.LatLng(s[1],s[0])),l[o].setZoom(i.getZoom())}}},remove:function(e,t,n){o===e.name&&(o=void 0,delete l[n])}})},3157:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(4288),a=n(2450);r.default.registerType("graticule",{create:function(e,t){var n=new o.a({strokeStyle:e.style||new a.default({color:"rgba(255,120,0,0.9)",width:2,lineDash:[.5,4]})});return n.setMap(t),{detached:!0,remove:function(){n.setMap(null)}}}})},3158:function(e,t,n){"use strict";n.r(t),n(270).default.registerType("mapquest",{create:function(e){return e.onError(),!1},isValid:function(){return!1}})},3159:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(3160),a=n(2297);r.default.registerType("osm",{create:function(e){return new a.a({opacity:void 0!==e.opacity?e.opacity:1,visible:e.visibility,zIndex:e.zIndex,source:new o.a})}})},3161:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(2648),a=n.n(o),i=n(2345);r.default.registerType("overlay",{create:function(e,t){var n=function(e,t){var n=e.cloneNode(!0);n.id=t.id+"-overlay",n.className=(t.className||e.className)+"-overlay",n.removeAttribute("data-reactid"),function e(t){if(0!==t.length)for(var n=0;n<t.length;n++){var r=t.item(n);r.removeAttribute("data-reactid"),e(r.children||[])}}(n.children||[]);var r=t.closeClass||"close";if(t.onClose&&1===n.getElementsByClassName(r).length){var o=n.getElementsByClassName(r)[0];a.a.add(o,"click",(function(e){t.onClose(e.target.getAttribute("data-overlayid"))}))}if(t.onLink)for(var i=n.getElementsByTagName("a"),s=0;s<i.length;s++)a.a.add(i[s],"click",t.onLink);return n}(document.getElementById(e.id),e);document.body.appendChild(n);var r=new i.a({id:e.id,element:n,autoPan:e.autoPan||!1,positioning:e.positioning||"top-left",offset:e.offset||[0,0],autoPanAnimation:{duration:e.autoPanAnimation||250},position:[e.position.x,e.position.y]});return t.addOverlay(r),{detached:!0,remove:function(){t.removeOverlay(r)}}}})},3162:function(e,t,n){"use strict";n.r(t);var r=n(26),o=n.n(r),a=n(270),i=n(2463),s=n.n(i),c=n(80),l=n.n(c),u=n(3163),p=n(2651),f=n(2297);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}a.default.registerType("tileprovider",{create:function(e){var t=d(s.a.getLayerConfig(e.provider,e),2),n=t[0],r=t[1];return r.url=n,new f.a(function(e){var t,n,r,a,i,s,c,f,m,y=e.url.match(/(\{s\})/)?Object(u.getUrls)(e):[Object(u.template)(e.url,e)],g=o()({},{urls:y,attributions:e.attribution?[e.attribution]:[],maxZoom:e.maxZoom?e.maxZoom:18,minZoom:e.minZoom?e.minZoom:0}),b=new p.a(g);return o()({},{opacity:void 0!==e.opacity?e.opacity:1,visible:!1!==e.visibility,zIndex:e.zIndex,source:b},e.bounds?{extent:(t=e.bounds,n=e.srs?e.srs:"EPSG:3857",r=d(t,2),a=d(r[0],2),i=a[0],s=a[1],c=d(r[1],2),f=c[0],m=c[1],l.a.reprojectBbox([s,i,m,f],"EPSG:4326",l.a.normalizeSRS(n)))}:{})}(r))}})},3163:function(e,t,n){var r=n(13).isArray;function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.replace(/(?!(\{?[zyx]?\}))\{*([\w_]+)*\}/g,(function(){var e=arguments[0],n=arguments[1]?arguments[1]:arguments[2],r=t[n];if(void 0===r)throw new Error("No value provided for variable "+e);return"function"==typeof r&&(r=r(t)),r}))}e.exports={getUrls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url||"",n=e.subdomains||"";return n&&("string"==typeof n&&(n=n.split("")),r(n))?n.map((function(n){return o(t.replace("{s}",n),e)})):["a","b","c"].map((function(n){return o(t.replace("{s}",n),e)}))},template:o}},3164:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(2283),a=n(2186),i=n.n(a),s=n(2220),c=n(2188);r.default.registerType("vector",{create:function(e){var t=new s.a({features:[]}),n=Object(o.d)(e);return new c.a({msId:e.id,source:t,visible:!1!==e.visibility,zIndex:e.zIndex,style:n,opacity:e.opacity})},update:function(e,t,n){var r=n.crs||n.srs||"EPSG:3857",a=t.crs||t.srs||"EPSG:3857";a!==r&&e.getSource().forEachFeature((function(e){e.getGeometry().transform(r,a)})),i()(n.style,t.style)||e.setStyle(Object(o.d)(t))},render:function(){return null}})},3165:function(e,t,n){"use strict";n.r(t);var r=n(2292),o=n.n(r),a=n(55),i=n.n(a),s=n(80),c=n.n(s),l=n(196),u=n.n(l),p=n(270),f=n(197),d=n.n(f),m=n(2109),y=n(2101),g=n(2341),b=n(2466),h=n(2566),v=n(2572),S=n(2227),E=n(2652);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=c.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),n=Object(m.f)(t),r=n.getMetersPerUnit(),a=o()(e.tilingSchemes&&e.tilingSchemes.schemes&&e.tilingSchemes.schemes.filter((function(e){return e.supportedCRS===t})))||{},s=a.identifier,l=a.tileMatrix,p=a.boundingBox,f=l&&l.map((function(e){return e.scaleDenominator})),O=u.a.getResolutions(),A=e.resolutions||f&&f.map((function(e){return 28e-5*e/r}))||O,C="ne"===n.getAxisOrientation().substr(0,2),x=l&&l.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topLeftCorner;return t})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=P(e,2),n=t[0],r=t[1];return C?[r,n]:[n,r]})),_=l&&l.map((function(e){return[e.tileWidth,e.tileHeight]})),R=e.bbox,I=R?Object(y.a)([parseFloat(R.bounds.minx),parseFloat(R.bounds.miny),parseFloat(R.bounds.maxx),parseFloat(R.bounds.maxy)],Object(m.h)(R.crs,e.srs)):null,j=p&&p.lowerCorner&&p.upperCorner?[].concat(T(p.lowerCorner),T(p.upperCorner)):null,L=new g.a({extent:j,minZoom:0,origins:x,origin:x?void 0:[20037508.3428,-20037508.3428],resolutions:A,tileSizes:_,tileSize:_?void 0:[256,256]}),D=(e.url||"").replace(/\{tilingSchemeId\}/,s).replace(/\{level\}/,"{z}").replace(/\{row\}/,"{y}").replace(/\{col\}/,"{x}"),M={};d.a.addAuthenticationParameter(D,M,e.securityToken);var N=decodeURI(D),k=i.a.format({query:w({},M)}),G=Object(S.isVectorFormat)(e.format)&&E.a[e.format]||v.a,F=new h.a({format:new G({dataProjection:t,layerName:"_layer_"}),tileGrid:L,url:N+k}),U=new b.a({extent:I,msId:e.id,source:F,visible:!1!==e.visibility,zIndex:e.zIndex});return Object(E.b)(e.vectorStyle,U),U};p.default.registerType("wfs3",{create:_,update:function(e,t,n){return n.securityToken!==t.securityToken||n.srs!==t.srs?_(t):null},render:function(){return null}})},3168:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(2100),i=n.n(a),s=n(270),c=n(2128),l=n.n(c),u=n(2186),p=n.n(u),f=n(430),d=n.n(f),m=n(34),y=n.n(m),g=n(26),b=n.n(g),h=n(80),v=n.n(h),S=n(2349),E=n.n(S),O=n(414),w=n(197),A=n.n(w),T=n(137),P=n(196),C=n.n(P),x=n(2649),_=n.n(x),R=n(3169),I=n(2890),j=n(2109),L=n(2341),D=n(2297),M=n(2633),N=n(2566),k=n(2466),G=n(2227),F=n(2652);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){var t=Object(O.optionsToVendorParams)(e),n=b()({},e.baseParams,{LAYERS:e.name,STYLES:e.style||"",FORMAT:e.format||"image/png",TRANSPARENT:void 0===e.transparent||e.transparent,SRS:v.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),CRS:v.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),TILED:!e.singleTile&&(!!l()(e.tiled)||e.tiled),VERSION:e.version||"1.3.0"},b()({},e._v_?{_v_:e._v_}:{},t||{}));return A.a.addAuthenticationToSLD(n,e)}function V(e,t){var n=t;E.a.needProxy(t)&&(n=E.a.getProxyUrl()+encodeURIComponent(t));e.getImage().src=n}function W(e){return e.join(":")}function Y(e,t,n){var r=n;e&&E.a.needProxy(n)&&(r=E.a.getProxyUrl()+encodeURIComponent(n));var o=t.getTileCoord();t.getImage().src="",_.a.loadTile(r,o,W(o))}function q(e){try{var t=function(e,t){var n=e.get("map");return e.getSource().getTileGrid().getTileCoordForCoordAndZ(t,n.getView().getZoom())}(this,e),n=this.getSource().getTileGrid().getTileSize(),r=_.a.getElevation(W(t),function(e,t,n){var r=e.getSource().getTileGrid(),o=r.getTileCoordExtent(n),a=r.getTileSize()/(o[2]-o[0]);return{x:Math.floor((t[0]-o[0])*a),y:Math.floor((o[3]-t[1])*a)}}(this,e,t),n,this.get("nodata"));return r.available?r.value:o.a.createElement(i.a,{msgId:r.message})}catch(e){return o.a.createElement(i.a,{msgId:"elevationLoadingError"})}}var Z=function(e){return e&&Object(T.creditsToAttribution)(e)||void 0},K=function(e,t){var n=function(e){return e.map((function(e){return e.split("?")[0]}))}(y()(e.url)?e.url:[e.url]),r=z(e)||{};n.forEach((function(t){return A.a.addAuthenticationParameter(t,r,e.securityToken)}));var o=Object(G.isVectorFormat)(e.format);if(e.singleTile&&!o)return new R.a({opacity:void 0!==e.opacity?e.opacity:1,visible:!1!==e.visibility,zIndex:e.zIndex,source:new I.default({url:n[0],crossOrigin:e.crossOrigin,attributions:Z(e.credits),params:r,ratio:e.ratio||1})});var a,i=t&&t.getView()&&t.getView().getProjection()&&t.getView().getProjection().getCode()||"EPSG:3857",s=Object(j.f)(v.a.normalizeSRS(e.srs||i,e.allowedSRS)).getExtent(),c=function(e,t){return t.useForElevation?b()({},e,{tileLoadFunction:Y.bind(null,[t.forceProxy])}):t.forceProxy?b()({},e,{tileLoadFunction:V}):e}({attributions:Z(e.credits),urls:n,crossOrigin:e.crossOrigin,params:r,tileGrid:new L.a({extent:s,resolutions:C.a.getResolutions(),tileSize:e.tileSize?e.tileSize:256,origin:e.origin?e.origin:[s[0],s[1]]})},e),l=new M.default(B({},c)),u={opacity:void 0!==e.opacity?e.opacity:1,visible:!1!==e.visibility,zIndex:e.zIndex};return(a=o?new k.a(B({},u,{source:new N.a(B({},c,{format:new F.a[e.format]({layerName:"_layer_"}),tileUrlFunction:function(e,t,n){return l.tileUrlFunction(e,t,n)}}))})):new D.a(B({},u,{source:l}))).set("map",t),o&&(a.set("wmsSource",l),e.vectorStyle&&Object(F.b)(e.vectorStyle,a)),e.useForElevation&&(a.set("nodata",e.nodata),a.set("getElevation",q.bind(a))),a};s.default.registerType("wms",{create:K,update:function(e,t,n,r){var o=Object(G.isVectorFormat)(t.format);if(function(e,t){return e.singleTile!==t.singleTile||e.securityToken!==t.securityToken||e.ratio!==t.ratio||e.credits!==t.credits&&!t.credits||Object(G.isVectorFormat)(e.format)!==Object(G.isVectorFormat)(t.format)||Object(G.isVectorFormat)(e.format)&&Object(G.isVectorFormat)(t.format)&&e.format!==t.format}(n,t))return K(t,r);var a=!1;o&&t.vectorStyle&&!p()(t.vectorStyle,n.vectorStyle||{})&&(Object(F.b)(t.vectorStyle,e),a=!0);var i=e.get("wmsSource")||e.getSource(),s=o?e.getSource():null;if(n.srs!==t.srs){var c=Object(j.f)(v.a.normalizeSRS(t.srs,t.allowedSRS)).getExtent();if(t.singleTile&&!o)e.setExtent(c);else{var u=new L.a({extent:c,resolutions:C.a.getResolutions(),tileSize:t.tileSize?t.tileSize:256,origin:t.origin?t.origin:[c[0],c[1]]});i.tileGrid=u,s&&(s.tileGrid=u)}a=!0}n.credits!==t.credits&&t.credits&&(i.setAttributions(Z(t.credits)),a=!0);var f,m,y=!1;if(n&&i&&i.updateParams&&(n.params&&t.params?y=d()(Object.keys(n.params),Object.keys(t.params)).reduce((function(e,r){return t.params[r]!==n.params[r]||e}),!1):(!n.params&&t.params||n.params&&!t.params)&&(y=!0),f=z(n),m=z(t),y=y||["LAYERS","STYLES","FORMAT","TRANSPARENT","TILED","VERSION","_v_","CQL_FILTER","SLD","VIEWPARAMS"].reduce((function(e,t){return f[t]!==m[t]||e}),!1),a=a||y),a&&(i.refresh&&i.refresh(),s&&(s.clear(),s.refresh()),y)){var g=b()(m,A.a.addAuthenticationToSLD(Object(O.optionsToVendorParams)(t)||{},t));i.updateParams(b()(g,Object.keys(f||{}).reduce((function(e,t){return l()(g[t])?b()(e,H({},t,void 0)):e}),{})))}return null}})},3170:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(2336),a=n.n(o),i=n(2292),s=n.n(i),c=n(777),l=n.n(c),u=n(197),p=n.n(u),f=n(773),d=n.n(f),m=n(80),y=n.n(m),g=n(196),b=n.n(g),h=n(2227),v=n(55),S=n.n(v),E=n(2109),O=n(2101),w=n(2297),A=n(2466),T=n(4289),P=n(2566),C=n(2654),x=n(2572),_=n(2343),R=n(2653),I=n(2283);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M={"application/vnd.mapbox-vector-tile":x.a,"application/json;type=geojson":_.a,"application/json;type=topojson":R.a};var N=function(e,t){var n=d.a.getTileMatrixSet(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds),r=s()(e.tileMatrixSet.filter((function(e){return e["ows:Identifier"]===n})));return{tileMatrixSetName:n,tileMatrixSet:r}},k=function(e){var t="RESTful"===e.requestEncoding?"REST":e.requestEncoding,n=function(e,t){return e.map((function(e){return"REST"===t?e:e.split("?")[0]}))}(a()(e.url),t),r=y.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),o=Object(E.f)(r),i=o.getMetersPerUnit(),s=N(e,r),c=s.tileMatrixSetName,u=s.tileMatrixSet,f=u&&u.TileMatrix.map((function(e){return Number(e.ScaleDenominator)})),m=b.a.getResolutions(),g=e.resolutions||f&&f.map((function(e){return 28e-5*e/i}))||m,v=d.a.limitMatrix(e.matrixIds&&d.a.getMatrixIds(e.matrixIds,c||r)||d.a.getDefaultMatrixId(e),g.length),x="ne"===o.getAxisOrientation().substr(0,2),_=u&&u.TileMatrix&&u.TileMatrix.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.TopLeftCorner;return t&&y.a.parseString(t)})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=e.y;return x?[n,t]:[t,n]})),R=u&&u.TileMatrix&&u.TileMatrix.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.MatrixWidth,n=e.MatrixHeight;return[parseInt(t,10),parseInt(n,10)]})),j=u&&u.TileMatrix&&u.TileMatrix.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.TileWidth,n=e.TileHeight;return[parseInt(t,10),parseInt(n,10)]})),D=e.bbox,k=D?Object(O.a)([parseFloat(D.bounds.minx),parseFloat(D.bounds.miny),parseFloat(D.bounds.maxx),parseFloat(D.bounds.maxy)],Object(E.h)(D.crs,e.srs)):o.getExtent(),G=Object(O.B)(k,o.getExtent());Object(O.H)(G)&&(G=o.getExtent());var F={};n.forEach((function(t){return p.a.addAuthenticationParameter(t,F,e.securityToken)}));var U=S.a.format({query:L({},F)}),B=e.maxResolution||l()(m.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return g[0]/e*256<.5}))),H=-1!==(e.availableFormats||[]).indexOf(e.format)&&e.format||!e.availableFormats&&e.format||"image/png",z=Object(h.isVectorFormat)(H),V={requestEncoding:t,urls:n.map((function(e){return e+U})),layer:e.name,version:e.version||"1.0.0",matrixSet:c,format:H,style:e.style,tileGrid:new C.b({origins:_,origin:_?void 0:[20037508.3428,-20037508.3428],resolutions:g,matrixIds:v,sizes:R,extent:G,tileSizes:j,tileSize:!j&&(e.tileSize||[256,256])}),wrapX:!0},W=new T.a(V),Y=new(z?A.a:w.a)({opacity:void 0!==e.opacity?e.opacity:1,zIndex:e.zIndex,maxResolution:B,visible:!1!==e.visibility,source:z?new P.a(L({},V,{format:new M[e.format]({dataProjection:r}),tileUrlFunction:function(){return W.tileUrlFunction.apply(W,arguments)}})):W});return z&&Y.setStyle(Object(I.d)(e)),Y};r.default.registerType("wmts",{create:k,update:function(e,t,n){return n.securityToken!==t.securityToken||n.srs!==t.srs||n.format!==t.format||n.style!==t.style?k(t):null},isCompatible:function(e){return!!s()(y.a.getEquivalentSRS(e.srs||"EPSG:3857").filter((function(t){return function(e,t){var n=N(t,e),r=n.tileMatrixSetName,o=n.tileMatrixSet;return o?y.a.getEPSGCode(o["ows:SupportedCRS"])===e:r===e}(t,e)})))}})},3171:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(13).get,i=n(195).createSelector,s=n(80).reprojectGeoJson,c=function(e){return a(e,e&&e.highlight&&e.highlight.featuresPath||"highlight.emptyFeatures")||[]},l=function(e){return a(e,e&&e.featuregrid&&e.featuregrid.open&&e.featuregrid.showFilteredObject?"query.filterObj.spatialField":"emptyObject")},u=function(e){return l(e)&&l(e).geometry},p=function(e){return u(e)&&u(e).type||"Polygon"},f=function(e){return u(e)&&u(e).coordinates||[]},d=function(e){return u(e)&&u(e).projection||"EPSG:3857"},m=function(e){return u(e)&&u(e).id||"spatial_object"},y=i([f,p,m,d],(function(e,t,n,r){var o={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:t,coordinates:e},style:{fillColor:"#FFFFFF",fillOpacity:"0.2",color:"#ffcc33"},id:n}]};return e.length>0&&t?s(o,r,"EPSG:4326").features:[]})),g=i([y,c],(function(e,t){return[].concat(r(t),r(e))}));e.exports={selectedFeatures:c,filteredFeatures:y,filteredSpatialObjectId:m,filteredSpatialObjectCrs:d,filteredspatialObjectCoord:f,filteredspatialObjectType:p,filteredGeometry:u,filteredspatialObject:l,highlighedFeatures:g}},3172:function(e,t,n){var r=n(2166),o=r.CHANGE_DRAWING_STATUS,a=r.SET_CURRENT_STYLE,i=r.GEOMETRY_CHANGED,s=r.DRAW_SUPPORT_STOPPED,c=n(26),l={drawStatus:null,drawOwner:null,drawMethod:null,options:{},features:[],tempFeatures:[]};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return c({},e,{drawStatus:t.status,drawOwner:t.owner,drawMethod:t.method,options:t.options,features:t.features,style:t.style});case a:return c({},e,{currentStyle:t.currentStyle});case i:return c({},e,{tempFeatures:t.features});case s:return c({},e,{tempFeatures:[]});default:return e}}},3173:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(2401),s=i.HIGHLIGHT_STATUS,c=i.UPDATE_HIGHLIGHTED,l=i.SET_HIGHLIGHT_FEATURES_PATH,u=n(26),p={status:"disabled",layer:"featureselector",features:[],highlighted:0,featuresPath:"highlight.emptyFeatures",emptyFeatures:[]};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return u({},e,{featuresPath:t.featuresPath||"highlight.emptyFeatures"});case s:return o({},e,{status:t.status});case c:return o({},e,{highlighted:t.features.length,features:t.features,status:t.status||e.status});default:return e}}},3174:function(e,t,n){var r=n(3175).MAP_TYPE_CHANGED;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mapType:"leaflet"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r:return{mapType:t.mapType};default:return e}}},3175:function(e,t){e.exports={MAP_TYPE_CHANGED:"MAP_TYPE_CHANGED",changeMapType:function(e){return{type:"MAP_TYPE_CHANGED",mapType:e}}}},3176:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(2256),l=c.UPDATE_ADDITIONAL_LAYER,u=c.REMOVE_ADDITIONAL_LAYER,p=c.UPDATE_OPTIONS_BY_OWNER,f=c.REMOVE_ALL_ADDITIONAL_LAYERS,d=n(13),m=d.head,y=d.pickBy,g=d.identity,b=d.isObject,h=d.isArray;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:var n=y({id:t.id,owner:t.owner,actionType:t.actionType,options:t.options},g),o=m(e.filter((function(e){return e.id===n.id})));return o?e.map((function(e){return e.id===n.id?i({},o,{},n):i({},e)})):[].concat(r(e),[n]);case p:var a=t.options,s=t.owner;return e.map((function(e,t){return e.owner===s?i({},e,{options:b(a)&&a[e.id]||h(a)&&a[t]||{}}):i({},e)}));case u:var c=t.id,d=t.owner;return d?e.filter((function(e){return e.owner!==d})):e.filter((function(e){return e.id!==c}));case f:return[];default:return e}}},3177:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(15),s=n(269).changeLayerProperties,c=n(409),l=c.CREATION_ERROR_LAYER,u=c.INIT_MAP,p=c.ZOOM_TO_EXTENT,f=c.CHANGE_MAP_CRS,d=c.changeMapView,m=c.changeMapLimits,y=n(268),g=y.configuredExtentCrsSelector,b=y.configuredRestrictedExtentSelector,h=y.configuredMinZoomSelector,v=y.mapSelector,S=y.mapIdSelector,E=n(40).loadMapInfo,O=n(2655).LOGIN_SUCCESS,w=n(408),A=w.currentBackgroundLayerSelector,T=w.allBackgroundLayerSelector,P=w.getLayerFromId,C=n(2141).mapTypeSelector,x=n(2137).mapPaddingSelector,_=n(267).setControlProperty,R=n(40).MAP_CONFIG_LOADED,I=n(137).isSupportedLayer,j=n(196),L=n(80),D=n(161).warning,M=n(267).resetControls,N=n(269).clearLayers,k=n(2256).removeAllAdditionalLayers,G=n(13),F=G.head,U=G.isArray,B=G.isObject,H=G.mapValues;e.exports={checkMapPermissions:function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O).filter((function(){return S(r())})).map((function(){var e=S(r());return E(e)}))},handleCreationLayerError:function(e,t){return e.ofType(l).delay(500).switchMap((function(e){var n=C(t.getState()),r=P(t.getState(),e.options.id);return r&&I(r,n)?i.Observable.from([s(e.options.id,{invalid:!0})]):i.Observable.empty()}))},handleCreationBackgroundError:function(e,t){return e.ofType(l).delay(500).filter((function(e){var n=A(t.getState());return n&&e.options.id===n.id&&"background"===e.options.group})).switchMap((function(e){var n=C(t.getState()),r=F(T(t.getState()).filter((function(t){return I(t,n)&&t.id!==e.options.id})));return r?i.Observable.from([s(r.id,{visibility:!0}),_("backgroundSelector","currentLayer",r),_("backgroundSelector","tempLayer",r),D({title:"warning",message:"notification.backgroundLayerNotSupported",action:{label:"close"},position:"tc"})]):i.Observable.of(D({title:"warning",message:"notification.noBackgroundLayerSupported",action:{label:"close"},position:"tc"}))}))},resetMapOnInit:function(e){return e.ofType(u).switchMap((function(){return i.Observable.of(k(),M(),N())}))},resetLimitsOnInit:function(e,t){return e.ofType(R,f).switchMap((function(){var e=g(t.getState()),n=b(t.getState()),r=h(t.getState());return i.Observable.of(m({restrictedExtent:n,crs:e,minZoom:r}))}))},zoomToExtentEpic:function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(p).switchMap((function(e){var t=function(e){if(U(e))return e.map((function(e){return"string"==typeof e||e instanceof String?Number(e):e}));if(B(e)){var t=H(e,(function(e){return"string"==typeof e||e instanceof String?Number(e):e}));return[t.minx,t.miny,t.maxx,t.maxy]}return null}(e.extent);if(!t)return i.Observable.empty();var n=j.getHook(j.ZOOM_TO_EXTENT_HOOK),a=x(r());return n?(n(t,{crs:e.crs,padding:a,maxZoom:e.maxZoom}),i.Observable.empty()):function(e,t){var n=0,r=e.extent,a=void 0===r?[]:r,s=L.reprojectBbox(a,e.crs,t.bbox&&t.bbox.crs||"EPSG:4326");if(s){var c=L.reproject(j.getCenterForExtent(a,e.crs),e.crs,"EPSG:4326");if("EPSG:4326"===e.crs&&a&&a[0]<=-180&&a[1]<=-90&&a[2]>=180&&a[3]>=90)n=1;else{var l=L.reprojectBbox(a,e.crs,t.projection||"EPSG:4326");n=j.getZoomForExtent(l,t.size,0,21,null)}e.maxZoom&&n>e.maxZoom&&(n=e.maxZoom);var u={minx:s[0],miny:s[1],maxx:s[2],maxy:s[3]},p=o({},t.bbox,{bounds:u});return i.Observable.of(d(c,n,p,t.size,e.mapStateSource,t.projection,t.viewerOptions))}return i.Observable.empty()}(o({},e,{extent:t}),v(r()))}))}}},3189:function(e,t,n){var r=n(407),o=r.withHandlers,a=r.defaultProps,i=n(273),s=o({onNext:function(e){var t=e.index,n=void 0===t?0:t,r=e.setIndex,o=void 0===r?function(){}:r,a=e.validResponses,i=void 0===a?[]:a;return function(){o(Math.min(i.length-1,n+1))}},onPrevious:function(e){var t=e.index,n=e.setIndex,r=void 0===n?function(){}:n;return function(){r(Math.max(0,t-1))}}}),c=a({format:i.getDefaultInfoFormatValue(),validator:i.getValidator});e.exports={defaultViewerHandlers:s,defaultViewerDefaultProps:c}},3190:function(e,t,n){var r=n(407),o=r.lifecycle,a=r.withHandlers,i=r.compose,s=n(410).set,c=n(13),l=c.isEqual,u=c.isNil,p=i(a({needsRefresh:function(){return function(e,t){if(t.enabled&&t.point&&t.point.pixel){if(!e.point||!e.point.pixel||e.point.pixel.x!==t.point.pixel.x||e.point.latlng!==t.point.latlng||e.point.pixel.y!==t.point.pixel.y)return!0;if(!e.point||!e.point.pixel||t.point.pixel&&e.format!==t.format)return!0}return!1}},onClose:function(e){var t=e.hideMarker,n=void 0===t?function(){}:t,r=e.purgeResults,o=void 0===r?function(){}:r,a=e.closeIdentify,i=void 0===a?function(){}:a;return function(){n(),o(),i()}},onChangeClickPoint:function(e){var t=e.onChangeClickPoint,n=void 0===t?function(){}:t,r=e.point;return function(e,t){var o=s("latlng.".concat("lat"===e?"lat":"lng"),u(t)?0:parseFloat(t),r);n(o)}},onChangeFormat:function(e){var t=e.onChangeFormat,n=void 0===t?function(){}:t;return function(e){n(e)}}}),o({componentDidMount:function(){var e=this.props,t=e.enabled,n=e.changeMousePointer,r=void 0===n?function(){}:n,o=e.disableCenterToMarker,a=e.onEnableCenterToMarker,i=void 0===a?function(){}:a;t&&r("pointer"),o||i()},componentWillReceiveProps:function(e){var t=this.props,n=t.hideMarker,r=void 0===n?function(){}:n,o=t.purgeResults,a=void 0===o?function(){}:o,i=t.changeMousePointer,s=void 0===i?function(){}:i,c=t.setIndex,u=t.enabled,p=t.responses;e.enabled&&!u?s("pointer"):!e.enabled&&u&&(s("auto"),r(),a()),c&&!l(e.responses,p)&&c(0)}}));e.exports={identifyLifecycle:p}},3191:function(e,t,n){var r=n(2350),o=n(407).withHandlers;e.exports=o({zoomToFeature:function(e){var t=e.zoomToExtent,n=void 0===t?function(){}:t,o=e.currentFeature,a=void 0===o?[]:o,i=e.currentFeatureCrs;return function(){var e=a.filter((function(e){return!!e.geometry}));if(e.length>0){var t=r({type:"FeatureCollection",features:e});t&&n(t,i)}}}})},3192:function(e,t){function n(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}e.exports=function(e){var t=e.showHighlightFeatureButton,r=e.currentFeature,o=e.highlight,a=e.toggleHighlightFeature,i=void 0===a?function(){}:a,s=e.zoomToFeature,c=void 0===s?function(){}:s,l=n(e,["showHighlightFeatureButton","currentFeature","highlight","toggleHighlightFeature","zoomToFeature"]);return[{glyph:"info-sign",tooltipId:"identifyRevGeocodeSubmitText",visible:l.latlng&&l.enableRevGeocode&&l.lngCorrected,onClick:function(){l.showRevGeocode({lat:l.latlng.lat,lng:l.lngCorrected})}},{glyph:"search-coords",tooltipId:l.showCoordinateEditor?"identifyHideCoordinateEditor":"identifyShowCoordinateEditor",visible:l.enabledCoordEditorButton,bsStyle:l.showCoordinateEditor?"success":"primary",onClick:function(){l.onToggleShowCoordinateEditor(l.showCoordinateEditor)}},{glyph:"map-filter",visible:t,tooltipId:o?"identifyStopHighlightingFeatures":"identifyHighlightFeatures",bsStyle:o?"success":"primary",onClick:function(){return i(!o)}},{glyph:"zoom-to",visible:o&&!!r&&r.length>0&&r.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.geometry;return e||!!n}),!1),tooltipId:"identifyZoomToFeature",onClick:c}].filter((function(e){return e&&e.visible}))}},3193:function(e,t){var n=function(e){return!e.viewerOptions.header&&e.validResponses.length>1},r=function(e){return e.index>=e.validResponses.length-1},o=function(e){return e.index<=0};e.exports=function(e){return[{keyProp:"back",glyph:"arrow-left",tooltipId:o(e)?void 0:"wizard.prev",disabled:o(e),visible:n(e),onClick:function(){e.onPrevious()}},{keyProp:"forward",glyph:"arrow-right",tooltipId:r(e)?void 0:"wizard.next",disabled:r(e),visible:n(e),onClick:function(){e.onNext()}}].filter((function(e){return e&&e.visible}))}},3194:function(e,t,n){var r=n(3195);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3195:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi .swipe-header-left-button {\n    float: left;\n}\n\n.msgapi .swipe-header-right-button {\n    float: right;\n}\n",""])},3196:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(1),m=n(0),y=n(273),g=n(828),b=n(2257),h=n(2100),v=n(757),S=v.Alert,E=v.Panel,O=v.Accordion,w=n(3197),A=n(13).isEqual,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(O,e);var t,n,r,m,v=(t=O,function(){var e,n=u(t);if(l()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function O(){var e;a(this,O);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(c(e=v.call.apply(v,[this].concat(n))),"renderEmptyLayers",(function(t){var n=t.getValidResponses(e.props.responses).length,r=t.getNoValidResponses(e.props.responses);if(0===e.props.missingResponses&&0===n)return null;if(0!==r.length){var o=r.map((function(e){return e.layerMetadata.title}));return e.props.showEmptyMessageGFI?d.createElement(S,{bsStyle:"info"},d.createElement(h,{msgId:"noInfoForLayers"}),d.createElement("b",null,o.join(", "))):null}return null})),f(c(e),"renderPage",(function(t){var n=e.props.viewers[e.props.format];return n?d.createElement(n,{response:t}):null})),f(c(e),"renderPages",(function(t){return 0===e.props.missingResponses&&0===t.length?d.createElement(S,{bsStyle:"danger"},d.createElement("h4",null,d.createElement(b,{msgId:"noFeatureInfo"}))):t.map((function(n,r){var a,i=n.response,s=n.layerMetadata,c=n.format,l=n.queryParams;l&&l.hasOwnProperty("info_format")&&(a=l.info_format);var u,p=e.props.header;return s.viewer&&s.viewer.type&&(u=y.getViewer(s.viewer.type)),d.createElement(E,{eventKey:r,key:r,collapsible:e.props.collapsible,header:p?d.createElement("span",null,d.createElement(p,o({size:t.length},e.props.headerOptions,s,{index:e.props.index,onNext:function(){return e.props.onNext()},onPrevious:function(){return e.props.onPrevious()}}))):null,style:e.props.style},d.createElement(w,{response:i,format:a||c&&g.INFO_FORMATS[c]||e.props.format,viewers:u||e.props.viewers,layer:s}))}))})),f(c(e),"renderAdditionalInfo",(function(){var t=e.props.validator(e.props.format);return t?e.renderEmptyLayers(t):null})),e}return n=O,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){A(e.responses,this.props.responses)||this.props.setIndex(0)}},{key:"shouldComponentUpdate",value:function(e){return e.responses!==this.props.responses||e.missingResponses!==this.props.missingResponses||e.index!==this.props.index}},{key:"render",value:function(){var e=this,t=this.props.container,n=this.props.validator(this.props.format).getValidResponses(this.props.responses);return d.createElement("div",{className:"mapstore-identify-viewer"},d.createElement(t,o({},this.props.containerProps,{onChangeIndex:function(t){e.props.setIndex(t)},ref:"container",index:this.props.index||0,key:"swiper",className:"swipeable-view"}),this.renderPages(n)),this.renderAdditionalInfo())}}])&&i(n.prototype,r),m&&i(n,m),O}(d.Component);f(T,"propTypes",{format:m.string,collapsible:m.bool,requests:m.array,responses:m.array,missingResponses:m.number,container:m.oneOfType([m.object,m.func]),header:m.oneOfType([m.object,m.func]),headerOptions:m.object,validator:m.func,viewers:m.object,style:m.object,containerProps:m.object,index:m.number,onNext:m.func,onPrevious:m.func,onUpdateIndex:m.func,setIndex:m.func,showEmptyMessageGFI:m.bool}),f(T,"defaultProps",{format:y.getDefaultInfoFormatValue(),responses:[],missingResponses:0,collapsible:!1,headerOptions:{},container:O,validator:y.getValidator,viewers:y.getViewers(),style:{position:"relative",marginBottom:0},containerProps:{},index:0,showEmptyMessageGFI:!0,onNext:function(){},onPrevious:function(){},setIndex:function(){}}),e.exports=T},3197:function(e,t,n){var r,o;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n(0),y=n(1);e.exports=(o=r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(m,e);var t,n,r,o,a=(t=m,function(){var e,n=p(t);if(u()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function m(){var e;i(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(l(e=a.call.apply(a,[this].concat(n))),"onTouchStart",(function(t){var n=t.touches[0];e.startX=n.pageX,e.startY=n.pageY,e.setState({scrolling:!1})})),d(l(e),"onTouchMove",(function(t){var n=t.touches[0],r=t.currentTarget;if(e.state.scrolling)t.stopPropagation();else if(Math.abs(e.startY-n.pageY)>Math.abs(e.startX-n.pageX))t.stopPropagation();else{var o=e.startX<n.pageX?"left":"right";(r&&"left"===o&&r.clientWidth<r.scrollWidth&&0!==r.scrollLeft||r&&"right"===o&&r.clientWidth+r.scrollLeft!==r.scrollWidth)&&(e.setState({scrolling:!0}),t.stopPropagation())}})),d(l(e),"onTouchEnd",(function(){e.setState({scrolling:!1})})),d(l(e),"renderPage",(function(){var t="function"==typeof e.props.viewers?e.props.viewers:e.props.viewers[e.props.format];return t?y.createElement(t,{response:e.props.response,layer:e.props.layer}):null})),e}return n=m,(r=[{key:"render",value:function(){return y.createElement("div",{style:{width:"100%",height:"100%",overflow:"auto"},onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},this.renderPage())}}])&&s(n.prototype,r),o&&s(n,o),m}(y.Component),d(r,"propTypes",{format:m.string,viewers:m.oneOfType([m.func,m.object]),response:m.oneOfType([m.string,m.object,m.node]),layer:m.object}),o)},3198:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(757),c=s.Row,l=s.Col,u=n(2113),p=n(2100),f=n(2470),d=n(3206),m=n(2170),y=n(2146),g=n(3228);e.exports=function(e){var t=e.enabled,n=e.requests,s=void 0===n?[]:n,b=e.onClose,h=e.responses,v=void 0===h?[]:h,S=e.index,E=e.viewerOptions,O=void 0===E?{}:E,w=e.format,A=e.dock,T=void 0===A||A,P=e.position,C=e.size,x=e.fluid,_=e.validResponses,R=void 0===_?[]:_,I=e.viewer,j=void 0===I?function(){return null}:I,L=e.getToolButtons,D=void 0===L?function(){return[]}:L,M=e.getNavigationButtons,N=void 0===M?function(){return[]}:M,k=e.showFullscreen,G=e.reverseGeocodeData,F=void 0===G?{}:G,U=e.point,B=e.dockStyle,H=void 0===B?{}:B,z=e.draggable,V=e.setIndex,W=e.warning,Y=e.clearWarning,q=e.zIndex,Z=e.showEmptyMessageGFI,K=e.enabledCoordEditorButton,Q=e.showCoordinateEditor,X=e.onChangeClickPoint,J=e.onChangeFormat,$=e.formatCoord,ee=U&&U.latlng||null,te=null;ee&&(te=ee&&Math.round(1e17*ee.lng)/1e17,te-=360*Math.floor(te/360+.5));var ne=j,re=D(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{lngCorrected:te,validResponses:R,latlng:ee})),oe=s.length-v.length,ae=F.error?i.createElement(p,{msgId:"identifyRevGeocodeError"}):F.display_name;return i.createElement("div",{id:"identify-container",className:t&&0!==s.length?"identify-active":""},i.createElement(f,{bsStyle:"primary",glyph:"map-marker",title:O.header?i.createElement(p,{msgId:"identifyTitle"}):R[S]&&R[S].layerMetadata&&R[S].layerMetadata.title||"",open:t&&0!==s.length,size:C,fluid:x,position:P,draggable:z,onClose:b,dock:T,style:H,showFullscreen:k,zIndex:q,header:[i.createElement(g,{key:"coordinate-editor",formatCoord:$,enabledCoordEditorButton:K,onChange:X,onChangeFormat:J,edit:Q,coordinate:{lat:ee&&ee.lat,lon:te}}),i.createElement(d,r({latlng:ee,revGeocodeDisplayName:ae},e)),i.createElement(c,{key:"button-row",className:"text-center",style:{position:"relative"}},i.createElement(l,{key:"tools",xs:12},i.createElement(u,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:re,transitionProps:null})),i.createElement("div",{key:"navigation",style:{zIndex:1,position:"absolute",right:0,top:0,margin:"0 10px"}},i.createElement(u,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:N(e),transitionProps:null})))].filter((function(e){return e})),noResize:!0},i.createElement(ne,r({index:S,setIndex:V,format:w,missingResponses:oe,responses:v,showEmptyMessageGFI:Z},O))),i.createElement(y,null,i.createElement(m,{fade:!0,title:i.createElement(p,{msgId:"warning"}),size:"xs",show:W,onClose:Y,buttons:[{text:i.createElement(p,{msgId:"close"}),onClick:Y,bsStyle:"primary"}]},i.createElement("div",{className:"ms-alert",style:{padding:15}},i.createElement("div",{className:"ms-alert-center text-center"},i.createElement(p,{msgId:"identifyNoQueryableLayers"}))))))}},3199:function(e,t,n){var r=n(1),o=n(407).branch,a=n(13).omit,i=n(2132);e.exports=o((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,n=e.noTooltipWhenDisabled,r=void 0!==n&&n;return!(r&&t)}),i,(function(e){return function(t){return r.createElement(e,a(t,["tooltipId","tooltip","noTooltipWhenDisabled"]),t.children)}}))},3204:function(e,t,n){var r=n(1),o=n(757),a=o.Button,i=o.Glyphicon,s=o.Grid,c=o.Row,l=o.Col,u={bottom:{true:"chevron-down",false:"chevron-up"},top:{true:"chevron-up",false:"chevron-down"},right:{true:"chevron-right",false:"chevron-left"},left:{true:"chevron-left",false:"chevron-right"}};e.exports=function(e){var t=e.position,n=void 0===t?"right":t,o=e.onClose,p=e.bsStyle,f=void 0===p?"default":p,d=e.title,m=void 0===d?"":d,y=e.fullscreen,g=void 0!==y&&y,b=e.showFullscreen,h=void 0!==b&&b,v=e.glyph,S=void 0===v?"info-sign":v,E=e.additionalRows,O=e.onFullscreen,w=void 0===O?function(){}:O,A=o?r.createElement(a,{key:"ms-header-close",className:"square-button ms-close",onClick:o,bsStyle:f},r.createElement(i,{glyph:"1-close"})):null,T=h?r.createElement(a,{key:"ms-header-glyph",className:"square-button",bsStyle:f,onClick:function(){return w(!g)}},r.createElement(i,{glyph:u[n]&&u[n][g]||"resize-full"})):r.createElement("div",{key:"ms-header-glyph",className:"square-button ".concat("bg-"+f),style:{display:"flex"}},r.createElement(i,{glyph:S,className:"".concat("default"===f?"text-primary":"")})),P="left"===n?[A,T]:[T,A];return r.createElement(s,{fluid:!0,style:{width:"100%"},className:"ms-header ms-"+f},r.createElement(c,null,r.createElement(l,{xs:2},P[0]),r.createElement(l,{xs:8},r.createElement("h4",null,m)),r.createElement(l,{xs:2},P[1])),E)}},3206:function(e,t,n){var r=n(1),o=n(2170),a=n(2146),i=n(2100),s=n(757).Glyphicon;e.exports=function(e){var t=e.latlng,n=e.enableRevGeocode,c=e.hideRevGeocode,l=void 0===c?function(){}:c,u=e.showModalReverse,p=e.revGeocodeDisplayName;return n&&t?r.createElement(a,null,r.createElement(o,{fade:!0,title:r.createElement("span",null,r.createElement(s,{glyph:"map-marker"})," ",r.createElement(i,{msgId:"identifyRevGeocodeModalTitle"})),size:"xs",show:u,onClose:l,buttons:[{text:r.createElement(i,{msgId:"close"}),onClick:l,bsStyle:"primary"}]},r.createElement("div",{className:"ms-alert",style:{padding:15}},r.createElement("div",{className:"ms-alert-center text-center"},r.createElement("div",null,p))))):null}},3228:function(e,t,n){var r=n(1),o=n(3229),a=n(3236);e.exports=function(e){var t=e.coordinate,n=void 0===t?{}:t,i=e.formatCoord,s=e.edit,c=e.onChange,l=void 0===c?function(){}:c,u=e.onChangeFormat,p=void 0===u?function(){}:u;return s?r.createElement(o,{removeVisible:!1,formatCoord:i,coordinate:n||{lat:"",lon:""},onChange:l,onChangeFormat:p}):r.createElement(a,{className:"text-center",formatCoord:i,coordinate:n||{lat:"",lon:""}})}},3229:function(e,t,n){var r=n(1),o=n(2669);e.exports=function(e){return r.createElement(o,{format:e.formatCoord||"decimal",aeronauticalOptions:{seconds:{decimals:4,step:1e-4}},idx:1,onChange:function(t,n,r){e.onChange(n,null===r||""===r?void 0:r)},onChangeFormat:function(t){e.onChangeFormat(t)},key:"GFI row coord editor",component:e.coordinate||{},customClassName:"coord-editor",isDraggable:!1,showDraggable:!1,formatVisible:!0,showLabels:!0,removeVisible:!1})}},3230:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(1),c=n(407),l=c.compose,u=c.branch,p=n(781).DragSource,f=n(781).DropTarget,d={beginDrag:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}};e.exports=u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isDraggable;return t}),l(p("row",d,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging(),draggingItem:t.getItem()||null}})),f("row",{drop:function(e,t){var n=t.getItem();n.sortId!==e.sortId&&e.onSort(e.sortId,n.sortId,{id:e.id,containerId:e.containerId},{id:n.id,containerId:n.containerId})}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})),(function(e){return function(t){var n=t.connectDragSource,a=t.connectDragPreview,i=t.connectDropTarget,c=t.isDragging,l=t.isOver,u=o(t,["connectDragSource","connectDragPreview","connectDropTarget","isDragging","isOver"]),p=u.draggingItem&&u.draggingItem.sortId<u.sortId,f=u.draggingItem&&u.draggingItem.containerId===u.containerId,d=f&&c?" ms-dragging":"",m=f&&l?" ms-over":"",y=f&&p?" ms-above":" ms-below";return a(i(s.createElement("div",{className:"ms-dragg".concat(d).concat(m," ").concat(y)},s.createElement("div",null,s.createElement(e,r({},u,{connectDragSource:n,isDragging:c,isOver:l,onDrop:function(e){return e.stopPropagation()}}))))))}})))},3231:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1),d=n(0),m=n(757),y=m.FormGroup,g=m.FormControl,b=n(13).capitalize,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(h,e);var t,n,r,d,m=(t=h,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function h(){var e;o(this,h);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=m.call.apply(m,[this].concat(n))),"verifyOnKeyDownEvent",(function(e){69===e.keyCode&&e.preventDefault()})),p(s(e),"validateDecimalLon",(function(t){var n=e.props.constraints[e.props.format].lon.min,r=e.props.constraints[e.props.format].lon.max,o=parseFloat(t);return isNaN(o)||o<n||o>r?"error":null})),p(s(e),"validateDecimalLat",(function(t){var n=e.props.constraints[e.props.format].lat.min,r=e.props.constraints[e.props.format].lat.max,o=parseFloat(t);return isNaN(o)||o<n||o>r?"error":null})),e}return n=h,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.coordinate,r=t.value,o=t.onChange,a="validateDecimal"+b(n);return f.createElement(y,{validationState:this[a](r)},f.createElement(g,{key:n,value:r,placeholder:n,onChange:function(t){""===t.target.value&&o(""),null===e[a](t.target.value)&&o(t.target.value)},onKeyDown:function(t){e.verifyOnKeyDownEvent(t),e.props.onKeyDown(t)},step:1,type:"number"}))}}])&&a(n.prototype,r),d&&a(n,d),h}(f.Component);p(h,"propTypes",{idx:d.number,value:d.number,constraints:d.object,format:d.string,coordinate:d.string,onChange:d.func,onKeyDown:d.func}),p(h,"defaultProps",{format:"decimal",coordinate:"lat",constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}},onKeyDown:function(){}}),e.exports=h},3232:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n(1),y=n(0),g=n(407).compose,b=n(757),h=b.FormGroup,v=b.FormControl,S=n(13).isNil,E=n(2671),O=n(3233),w=n(3234),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(g,e);var t,n,r,o,y=(t=g,function(){var e,n=p(t);if(u()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function g(){var e;i(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(l(e=y.call.apply(y,[this].concat(n))),"onChange",(function(t,n){var r=e.getUpdatedCoordinateValue(t,n);e.props.onChange(r)})),d(l(e),"getUpdatedCoordinateValue",(function(t,n){try{var r=d({degrees:e.props.degrees,minutes:e.props.minutes,seconds:e.props.seconds,direction:e.props.direction},t,"degrees"===t?Math.min(n,e.props.maxDegrees):n),o=r.seconds,a=r.minutes+e.getSexagesimalStep(o),i=Math.min(e.props.maxDegrees,r.degrees+e.getSexagesimalStep(a)),s=r.direction;return o=e.roundToNextSexagesimalStep(o),a=e.roundToNextSexagesimalStep(a),i===e.props.maxDegrees&&(a=0,o=0),s=i<0?s===e.props.directions[0]?e.props.directions[1]:e.props.directions[0]:s,-1===i&&(r.degrees<0&&r.minutes>=0?i=r.degrees:r.minutes<0&&r.degrees<=0?(i=0,a=r.minutes):(i=0,a=0,o=1e-4)),{degrees:i,minutes:a,seconds:o,direction:s}}catch(e){return null}})),d(l(e),"getSexagesimalStep",(function(e){return e>=60?1:e<0?-1:0})),d(l(e),"getInputStyle",(function(e){return isNaN(e)||""===e?{borderColor:"#a94442"}:{}})),d(l(e),"verifyOnKeyDownEvent",(function(e){69===e.keyCode&&e.preventDefault()})),d(l(e),"roundToNextSexagesimalStep",(function(e){return e<0?60+e:e>=60?e-60:e})),d(l(e),"isValid",(function(t){var n=t.minutes,r=t.seconds,o=t.degrees,a=t.direction;return!S(n)&&n>0&&n<60&&!S(r)&&r>0&&r<60&&!S(o)&&o>0&&o<e.props.maxDegrees&&a})),e}return n=g,(r=[{key:"render",value:function(){var e=this,t={padding:0,textAlign:"center",borderRight:"none"},n=this.getInputStyle(this.props.degrees),r=this.getInputStyle(this.props.minutes),o=this.getInputStyle(this.props.seconds),i={position:"relative",top:0,overflow:"visible",zIndex:3,left:-13,width:0,height:0},s=this.props.aeronauticalOptions.seconds.step;return m.createElement(h,{style:{display:"inline-flex"}},m.createElement("div",{style:{width:50,display:"flex"}},m.createElement(v,{key:this.props.coordinate+"degree",value:this.props.degrees,placeholder:"d",onChange:function(t){return e.onChange("degrees",parseInt(t.target.value,10))},step:1,max:this.props.maxDegrees,min:-1,onKeyDown:function(t){e.verifyOnKeyDownEvent(t),e.props.onKeyDown(t)},style:a({width:"100%"},t,{},n),type:"number"}),m.createElement("span",{style:i},"°")),m.createElement("div",{style:{width:50,display:"flex"}},m.createElement(v,{key:this.props.coordinate+"minutes",placeholder:"m",value:this.props.minutes,onChange:function(t){return e.onChange("minutes",parseInt(t.target.value,10))},max:60,min:-1,onKeyDown:function(t){e.verifyOnKeyDownEvent(t),e.props.onKeyDown(t)},style:a({width:"100%"},t,{},r),step:1,type:"number"}),m.createElement("span",{style:i},"′")),m.createElement("div",{className:"seconds",style:{display:"flex"}},m.createElement(v,{key:this.props.coordinate+"seconds",value:this.props.seconds,placeholder:"s",onChange:function(t){return e.onChange("seconds",parseFloat(t.target.value))},step:s,max:60,onKeyDown:function(t){e.verifyOnKeyDownEvent(t),e.props.onKeyDown(t)},min:-1,style:a({width:"100%"},t,{},o),type:"number"}),m.createElement("span",{style:i},"″")),m.createElement("div",null,m.createElement(v,{componentClass:"select",placeholder:"select",value:this.props.direction,onChange:function(t){return e.onChange("direction",t.target.value)},style:{width:47,paddingLeft:4,paddingRight:4}},this.props.directions.map((function(e){return m.createElement("option",{key:e,value:e},e)})))))}}])&&s(n.prototype,r),o&&s(n,o),g}(m.Component);d(A,"propTypes",{idx:y.number,maxDegrees:y.number,degrees:y.number,minutes:y.number,seconds:y.number,directions:y.array,direction:y.string,aeronauticalOptions:y.object,coordinate:y.string,onChange:y.func,onKeyDown:y.func}),d(A,"defaultProps",{coordinate:"lat",maxDegrees:90,directions:["N","S"],aeronauticalOptions:{seconds:{decimals:4,step:1e-4}},onKeyDown:function(){}}),e.exports=g(O,E,w)(A)},3233:function(e,t,n){var r=n(407).withProps;e.exports=r((function(e){var t=e.coordinate,n=void 0===t?"lat":t;return{maxDegrees:"lat"===n?90:180,directions:"lat"===n?["N","S"]:["E","W"]}}))},3234:function(e,t,n){var r=n(407),o=r.compose,a=r.withHandlers,i=r.withState,s=r.withProps;e.exports=o(s((function(e){return{isValid:""!==e.value}})),i("initial","setInitial",{}),s((function(e){var t=e.isValid,n=e.initial,r=e.degrees,o=e.minutes,a=e.seconds;return t||""===r&&""===o&&""===a?{}:n})),a({onChange:function(e){return function(t){var n=t.degrees,r=t.minutes,o=t.seconds,a=t.direction;isNaN(n)?e.setInitial({degrees:"",minutes:r,seconds:o,direction:a}):isNaN(r)?e.setInitial({degrees:n,minutes:"",seconds:o,direction:a}):isNaN(o)&&e.setInitial({degrees:n,minutes:r,seconds:"",direction:a}),e.onChange({degrees:n,minutes:r,seconds:o,direction:a})}}}))},3235:function(e,t,n){var r=n(407),o=r.compose,a=r.withHandlers;e.exports=o(a({onChange:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.maxLatitude,o=void 0===r?89.9997222222:r,a=e.coordinate;return function(e){return n(Math.abs(parseFloat(e))>o&&"lat"===a?Math.sign(e)*o:e)}}}))},3236:function(e,t,n){var r=n(1),o=n(757),a=o.Row,i=o.Col,s=n(13).isNil,c=n(2207),l=n(2671)((function(e){var t=e.degrees,n=void 0===t?0:t,o=e.minutes,a=void 0===o?0:o,i=e.seconds,s=void 0===i?0:i,l=e.direction,u=e.integerFormat,p=e.decimalFormat;return r.createElement("span",{className:"coordinate-dms"},r.createElement(c,{key:"latD",numberParams:u,value:n}),r.createElement("span",null,"° "),r.createElement(c,{key:"latM",numberParams:u,value:a}),r.createElement("span",null,"' "),r.createElement(c,{key:"latS",numberParams:p,value:s}),r.createElement("span",null,"'' ")," ",r.createElement("span",null,l))}));e.exports=function(e){var t=e.integerFormat,n=void 0===t?{style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0}:t,o=e.decimalFormat,u=void 0===o?{style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:4,minimumFractionDigits:4}:o,p=e.coordinate,f=void 0===p?{}:p,d=e.formatCoord,m=void 0===d?"decimal":d,y=e.className;return r.createElement(a,{className:y},r.createElement(i,{xs:12},s(f.lat)||s(f.lon)?null:"decimal"===m?r.createElement("div",{className:"ms-coordinates-decimal"},"Lat: ",r.createElement(c,{value:Math.round(1e5*f.lat)/1e5})," - Long: ",r.createElement(c,{value:f.lon})):r.createElement("div",{className:"ms-coordinates-aeronautical"},r.createElement("span",null,"Lat: ",r.createElement(l,{integerFormat:n,decimalFormat:u,value:f.lat})),r.createElement("span",null," - "),r.createElement("span",null," Long: ",r.createElement(l,{coordinate:"lon",integerFormat:n,decimalFormat:u,value:f.lon})))))}},3237:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(33),y=n(273),g=n(757),b=g.FormControl,h=g.FormGroup,v=g.ControlLabel,S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(g,e);var t,n,r,f,y=(t=g,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function g(){var e;o(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=y.call.apply(y,[this].concat(n))),"launchChangeInfoFormatAction",(function(){var t=m.findDOMNode(s(e)).getElementsByTagName("select").item(0);e.props.onInfoFormatChange(t.value)})),e}return n=g,(r=[{key:"render",value:function(){var e=this,t=Object.keys(this.props.availableInfoFormat).reduce((function(t,n){return Object.keys(t).map((function(e){return t[e]})).some((function(t){return t===e.props.availableInfoFormat[n]}))||(t[n]=e.props.availableInfoFormat[n]),t}),{}),n=Object.keys(t).map((function(e){var n=t[e],r=e;return d.createElement("option",{value:n,key:n},r)}));return d.createElement(h,{bsSize:"small"},d.createElement(v,null,this.props.label),d.createElement(b,{id:this.props.id,value:this.props.infoFormat,componentClass:"select",onChange:this.launchChangeInfoFormatAction},n))}}])&&a(n.prototype,r),f&&a(n,f),g}(d.Component);p(S,"propTypes",{id:f.string,label:f.oneOfType([f.func,f.string,f.object]),availableInfoFormat:f.object,infoFormat:f.string,onInfoFormatChange:f.func}),p(S,"defaultProps",{id:"mapstore-feature-format-selector",availableInfoFormat:y.getAvailableInfoFormat(),infoFormat:y.getDefaultInfoFormatValue(),onInfoFormatChange:function(){}}),e.exports=S},3241:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(15),l=n(13),u=l.get,p=l.find,f=l.isString,d=l.isNil,m=n(71),y=n(2346),g=n(2165),b=g.LOAD_FEATURE_INFO,h=g.ERROR_FEATURE_INFO,v=g.GET_VECTOR_INFO,S=g.FEATURE_INFO_CLICK,E=g.CLOSE_IDENTIFY,O=g.TOGGLE_HIGHLIGHT_FEATURE,w=g.featureInfoClick,A=g.updateCenterToMarker,T=g.purgeMapInfoResults,P=g.exceptionsFeatureInfo,C=g.loadFeatureInfo,x=g.errorFeatureInfo,_=g.noQueryableLayers,R=g.newMapInfoRequest,I=g.getVectorInfo,j=g.showMapinfoMarker,L=g.hideMapinfoMarker,D=n(267).SET_CONTROL_PROPERTIES,M=n(2130).closeFeatureGrid,N=n(409),k=N.CHANGE_MOUSE_POINTER,G=N.CLICK_ON_MAP,F=N.zoomToPoint,U=n(2476).closeAnnotations,B=n(40).MAP_CONFIG_LOADED,H=n(772),z=H.stopGetFeatureInfoSelector,V=H.identifyOptionsSelector,W=H.clickPointSelector,Y=H.clickLayerSelector,q=n(408),Z=q.centerToMarkerSelector,K=q.queryableLayersSelector,Q=n(2180).modeSelector,X=n(268),J=X.mapSelector,$=X.projectionDefsSelector,ee=X.projectionSelector,te=n(2137).boundingMapRectSelector,ne=n(80),re=ne.centerToVisibleArea,oe=ne.isInsideVisibleArea,ae=ne.isPointInsideExtent,ie=ne.reprojectBbox,se=n(772),ce=se.isHighlightEnabledSelector,le=se.itemIdSelector,ue=se.overrideParamsSelector,pe=se.filterNameListSelector,fe=n(196),de=fe.getCurrentResolution,me=fe.parseLayoutValue,ye=n(273),ge=n(80).parseURN,be=function(e){return z(e)||function(e){return"EDIT"===Q(e)}(e)};e.exports={getFeatureInfoOnFeatureInfoClick:function(e,t){var n=t.getState,o=void 0===n?function(){}:n;return e.ofType(S).switchMap((function(e){var t=e.point,n=e.filterNameList,a=void 0===n?[]:n,s=e.overrideParams,l=void 0===s?{}:s,u=K(o());if(0===u.length)return c.Observable.of(T(),_());var p=["SLD_BODY"],g=["buffer","cql_filter","filter","propertyName"],b=c.Observable.from(u.filter((function(e){return!a.length||a.filter((function(t){return-1!==t.indexOf(e.name)})).length>0}))).mergeMap((function(e){var t=ye.buildIdentifyRequest(e,V(o())),n=t.url,a=t.request,s=t.metadata;return le(o())&&ue(o())&&(a=i({},a,{},ue(o())[e.name])),l[e.name]&&(a=i({},a,{},l[e.name])),n?function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=i({},o,{},t),u=y.v1(),p=function(t){return c.Observable.defer((function(){return m.get(e,{params:t})}))};return(a&&"application/json"!==l.info_format?c.Observable.forkJoin(p(l),p(i({},l,{info_format:"application/json"})).map((function(e){return e.data})).catch((function(){return c.Observable.of({})}))).map((function(e){var t=r(e,2),n=t[0],o=t[1];return i({},n,{features:o&&o.features&&o.features.filter((function(e){return!!d(s)||e.id===s})),featuresCrs:o&&o.crs&&ge(o.crs)})})):p(l).map((function(e){return e.data})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{data:f(e)?e:i({},e,{features:e.features&&e.features.filter((function(e){return!s||e.id===s}))}),features:e.features&&e.features.filter((function(e){return!s||e.id===s})),featuresCrs:e&&e.crs&&ge(e.crs)}}))).map((function(e){return e.data.exceptions?P(u,e.data.exceptions,t,n):C(u,e.data,t,i({},n,{features:e.features,featuresCrs:e.featuresCrs}))})).catch((function(e){return c.Observable.of(x(u,e.data||e.statusText||e.status,t,n))})).startWith(R(u,l))}(n,a,s,ye.filterRequestParams(e,g,p),ce(o()),le(o())):c.Observable.of(I(e,a,s))}));return t&&t.modifiers&&!0===t.modifiers.ctrl&&t.multiSelection?b:b.startWith(T())}))},handleMapInfoMarker:function(e){return e.ofType(S).map((function(e){return e.layer?L():j()}))},closeFeatureGridFromIdentifyEpic:function(e){return e.ofType(b,v).switchMap((function(){return c.Observable.of(M())}))},closeFeatureAndAnnotationEditing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(E).switchMap((function(){return u(r(),"annotations.editing")?c.Observable.of(U()):c.Observable.of(T())}))},changeMapPointer:function(e,t){return e.ofType(k).filter((function(){return!t.getState().map})).switchMap((function(t){return e.ofType(B).mapTo(t)}))},onMapClick:function(e,t){return e.ofType(G).filter((function(){var e=t.getState().mapInfo.disableAlwaysOn;return void 0!==e&&e||!be(t.getState()||{})})).map((function(e){var t=e.point,n=e.layer;return w(t,n)}))},featureInfoClickOnHighligh:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O).filter((function(e){return e.enabled&&W(r())})).switchMap((function(){return c.Observable.from([w(W(r()),Y(r()),pe(r()),ue(r()),le(r())),j()])}))},zoomToVisibleAreaEpic:function(e,t){return e.ofType(S).filter((function(){return Z(t.getState())})).switchMap((function(n){return e.ofType(b,h).switchMap((function(){var e=t.getState(),r=J(e),o=ee(e),a=$(e),i=p(a,{code:o}),s=i&&i.extent,l=s&&ie(s,o,"EPSG:4326"),u=te(e),f=n.point&&n.point&&n.point.latlng,d=de(Math.round(r.zoom),0,21,96),m=u&&r&&r.size&&{left:me(u.left,r.size.width),bottom:me(u.bottom,r.size.height),right:me(u.right,r.size.width),top:me(u.top,r.size.height)};if(!r||!m||!f||n.point.cartographic||oe(f,r,m,d))return c.Observable.of(A("disabled"));if(l&&!ae(f,l))return c.Observable.empty();var y=re(f,r,m,d);return c.Observable.of(A("enabled"),F(y.pos,y.zoom,y.crs))}))}))},closeFeatureInfoOnCatalogOpenEpic:function(e){return e.ofType(D).filter((function(e){return"metadataexplorer"===e.control&&e.properties&&e.properties.enabled})).switchMap((function(){return c.Observable.of(T(),L())}))}}},3242:function(e,t,n){var r=n(3243);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3243:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi .mapToolbar {\n    position: absolute;\n    bottom: 5px;\n    right: 0;\n    z-index: 1000;\n    margin-bottom: 35px;\n    margin-right: 5px;\n}\n\n.msgapi .toolbarexpand-enter {\n  opacity: 0.01;\n}\n\n.msgapi .toolbarexpand-enter.toolbarexpand-enter-active {\n  opacity: 1;\n  transition: opacity 500ms ease-in;\n}\n\n.msgapi .toolbarexpand-leave {\n  opacity: 1;\n}\n\n.msgapi .toolbarexpand-leave.toolbarexpand-leave-active {\n  opacity: 0.01;\n  transition: opacity 300ms ease-in;\n}\n\n.msgapi #navigationBar .toolbar-panel {\n    bottom: 80px !important;\n}\n\n.msgapi #identifyBar .mapToolbar {\n    top: auto !important;\n    bottom: 5px;\n    right: 212px !important;\n}\n",""])},3246:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(757),y=m.Button,g=m.Glyphicon,b=m.Tooltip,h=n(2111),v=n(196),S=n(47),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(E,e);var t,n,r,f,m=(t=E,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function E(){var e;o(this,E);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=m.call.apply(m,[this].concat(n))),"addTooltip",(function(t){var n=d.createElement(b,{id:"locate-tooltip"},e.props.tooltip);return d.createElement(h,{placement:e.props.tooltipPlace,key:"overlay-trigger."+e.props.id,overlay:n},t)})),p(s(e),"zoomToMaxExtent",(function(){var t=e.props.mapConfig.maxExtent,n=e.props.mapConfig.size,r=1,o=e.props.mapConfig.center,a=e.props.mapConfig.projection||"EPSG:3857";t&&"[object Array]"===Object.prototype.toString.call(t)&&(r=v.getZoomForExtent(t,n,0,21),0===(o=v.getCenterForExtent(t,a)).x&&0===o.y||(o=S.getCenter(o,"EPSG:4326")));var i=v.getBbox(o,r,n);e.props.changeMapView(o,r,i,e.props.mapConfig.size,null,e.props.mapConfig.projection)})),p(s(e),"zoomToInitialExtent",(function(){var t=e.props.mapInitialConfig,n=v.getBbox(t.center,t.zoom,e.props.mapConfig.size);e.props.changeMapView(t.center,t.zoom,n,e.props.mapConfig.size,null,e.props.mapConfig.projection)})),e}return n=E,(r=[{key:"render",value:function(){var e=this;return this.addTooltip(d.createElement(y,{id:this.props.id,style:this.props.style,bsSize:this.props.btnSize,onClick:function(){return e.props.useInitialExtent?e.zoomToInitialExtent():e.zoomToMaxExtent()},className:this.props.className,bsStyle:this.props.bsStyle},this.props.glyphicon?d.createElement(g,{glyph:this.props.glyphicon}):null,this.props.glyphicon&&this.props.text?" ":null,this.props.text,this.props.help))}}])&&a(n.prototype,r),f&&a(n,f),E}(d.Component);p(E,"propTypes",{id:f.string,image:f.string,glyphicon:f.string,text:f.string,btnSize:f.oneOf(["large","small","xsmall"]),mapConfig:f.object,mapInitialConfig:f.object,changeMapView:f.func,btnType:f.oneOf(["normal","image"]),help:f.oneOfType([f.string,f.element]),tooltip:f.element,tooltipPlace:f.string,className:f.string,useInitialExtent:f.bool,bsStyle:f.string,style:f.object}),p(E,"defaultProps",{id:"mapstore-zoomtomaxextent",glyphicon:"resize-full",text:void 0,btnSize:"xsmall",btnType:"normal",useInitialExtent:!1,tooltipPlace:"left",bsStyle:"default",className:"square-button"}),e.exports=E},3247:function(e,t,n){var r=n(3248);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3248:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi #mapstore-zoomtomaxextent {\n    z-index: 1;\n    position: relative;\n}\n",""])},3249:function(e,t,n){var r=n(3250);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3250:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi #mapstore-globalspinner  {\n    width: 28px;\n    height: 28px;\n    box-shadow: 0px 0px 4px 2px rgba(0, 0, 0, 0.2);\n    background-color: white;\n    background-size: 80px 80px;\n    background-repeat: no-repeat;\n    border-radius: 4px;\n    border: 1px solid #999;\n    z-index: 10;\n    top: 90px;\n    left: 2px;\n    position: absolute;\n    margin: 8px;\n}\n\n.msgapi #mapstore-globalspinner .circle-wrapper {\n    margin-left: 2px;\n    margin-top: 1px;\n}\n\n.msgapi #mapstore-toolbar #mapstore-globalspinner {\n    position: static;\n    width: 42px;\n    margin: 0;\n    margin-top: 0;\n    height: 35px;\n    box-shadow: none;\n}\n\n.msgapi .ms2-loading .sk-circle-wrapper {\n     width: 30px;\n     height: 30px;\n     margin-left: 10px !important;\n     margin-top: 10px !important;\n }\n",""])},3251:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(2142);n(3252);var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,n,r,u,p=(t=m,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function m(){return o(this,m),p.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){return this.props.loading?f.createElement("div",{className:this.props.className,id:this.props.id},f.createElement(d,{noFadeIn:!0,overrideSpinnerClassName:"spinner",spinnerName:this.props.spinner})):null}}])&&a(n.prototype,r),u&&a(n,u),m}(f.Component);u(m,"propTypes",{id:p.string,loading:p.bool,className:p.string,spinner:p.string}),u(m,"defaultProps",{id:"mapstore-globalspinner",loading:!1,className:"ms2-loading",spinner:"circle"}),e.exports=m},3252:function(e,t,n){var r=n(3253);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3253:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi #mapstore-globalspinner  {\n    margin: 0 !important;\n    width: 40px !important;\n    position:static !important;\n    border-radius: 0 !important;\n}\n",""])},3254:function(e,t,n){var r=n(3255);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3255:function(e,t,n){(e.exports=n(758)()).push([e.i,"/*viewer navbar */\n.msgapi .navbar-dx{\n\tposition:absolute;\n\tright:0;\n\ttop:0;\n}\n\n.msgapi .navbar-dx > ul{\n\tpadding:0;\n}\n\n.msgapi .navbar-dx > ul > li{\n\tfloat: left;\n\tlist-style:none;\n}\n\n.msgapi .navbar-dx .search-wrap .MapSearchBar{\n    right: 0;\n    top: 0;\n    left: 0;\n}\n\n.msgapi .navbar-dx .search-wrap .form-control,.msgapi .navbar-dx .search-wrap .form-control:focus{\n    border-color: #fff;\n    border-right: 0;\n    webkit-box-shadow: none;\n    box-shadow: none;\n}\n.msgapi .navbar-dx .search-wrap .MapSearchBar .input-group-addon{\n    border: 0;\n}\n.msgapi .navbar-dx .search-result-list{\n    left: 0;\n    max-height: none;\n}\n\n.msgapi .navbar-dx .dropdown-menu {\n\tmargin:0;\n\tpadding-top: 0;\n}\n\n@media (min-width: 1200px) {\n    .msgapi .navbar-dx .search-wrap {\n       width: 500px;\n       height: 50px;\n    }\n}\n\n.msgapi .navbar-dx > * {\n\tdisplay: inline-block;\n}\n/* Page Navbar */\n.msgapi .navbar-home .dropdown {\n\tfloat: right;\n}\n.msgapi .navbar-home .navbar-header {\n\tmargin-top: 7px;\n\tmargin-left: 10px;\n\tmargin-right: 10px;\n\tdisplay: inline-block;\n}\n",""])},3256:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/ROADMAP.jpg"},3257:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/TERRAIN.jpg"},3258:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/SATELLITE.jpg"},3259:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/Aerial.jpg"},3260:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/mapnik.jpg"},3261:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/s2cloudless.jpg"},3262:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAD1APUDAREAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGwgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//EABQQAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQEAAQUCcH//xAAUEQEAAAAAAAAAAAAAAAAAAACQ/9oACAEDAQE/AXB//8QAFBEBAAAAAAAAAAAAAAAAAAAAkP/aAAgBAgEBPwFwf//EABQQAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQEABj8CcH//xAAUEAEAAAAAAAAAAAAAAAAAAACQ/9oACAEBAAE/IXB//9oADAMBAAIAAwAAABCSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSf/8QAFBEBAAAAAAAAAAAAAAAAAAAAkP/aAAgBAwEBPxBwf//EABQRAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQIBAT8QcH//xAAUEAEAAAAAAAAAAAAAAAAAAACQ/9oACAEBAAE/EHB//9k="},3263:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/dafault.jpg"},3264:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/NASA_NIGHT.jpg"},3265:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/AerialWithLabels.jpg"},3266:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/OpenTopoMap.jpg"},3267:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/HYBRID.jpg"},3268:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/mapquest-osm.jpg"},3269:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(1),m=n(26),y=n(2100),g=n(3270),b=n(3273),h=n(3275),v=n(2659),S=n(2685).default,E=n(2354),O=n(0),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(A,e);var t,n,r,O,w=(t=A,function(){var e,n=u(t);if(l()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function A(){var e;a(this,A);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(c(e=w.call.apply(w,[this].concat(n))),"getThumb",(function(t){return t.thumbURL||e.props.thumbs[t.source]&&e.props.thumbs[t.source][t.name]||e.props.thumbs.unknown})),f(c(e),"getIcons",(function(t,n,r,o){return e.props.enabled?e.props.layers.map((function(a,i){var s=e.getThumb(a);return d.createElement("div",{style:{width:(o?r:0)+(o?0:r)+t+n,height:r+t+n},className:"background-preview-container"},"mobile"!==e.props.mode&&d.createElement("div",{style:{width:(o?r:0)+t+n},className:"background-tool-buttons"},e.props.mapIsEditable&&e.props.allowDeletion&&e.props.layers.length>1&&d.createElement(v,{glyph:"trash",className:"square-button-md background-tool-button delete-button",bsStyle:"primary",onClick:function(){e.props.onRemoveBackground(!0,a.title||a.name||"",a.id)}}),e.props.mapIsEditable&&!e.props.enabledCatalog&&!("wms"!==a.type&&"wmts"!==a.type)&&d.createElement(v,{glyph:"wrench",className:"square-button-md background-tool-button edit-button",bsStyle:"primary",onClick:function(){e.props.addBackgroundProperties({layer:a,editing:!0})}})),d.createElement(h,{projection:e.props.projection,vertical:o,key:i,src:s,currentLayer:e.props.currentLayer,margin:r,side:t,frame:n,layer:a,onToggle:e.props.onToggle,onPropertiesChange:e.props.onPropertiesChange,onLayerChange:e.props.onLayerChange,setCurrentBackgroundLayer:e.props.setCurrentBackgroundLayer}))})):[]})),f(c(e),"getDimensions",(function(t,n,r,o,a,i){var s=a/2-(t+2*n+2*r)-o,c=t+2*n+2*r+(t+2*n+r)*i+o>a/2,l=Math.floor(s/(t+2*n+r));return l=l>i?i:l,{pagination:c,listSize:e.props.enabled?(t+n+r)*l+52:0,visibleIconsLength:l}})),f(c(e),"renderBackgroundSelector",(function(){var t=m({side:78,sidePreview:104,frame:3,margin:5,label:!0,vertical:!1},e.props.dimensions),n=2*t.frame,r=t.side-n,a=e.props.enabled?t.sidePreview-n:r,i=t.margin,s=e.props.enabled?a-2*n:0,c=e.props.enabled?e.props.tempLayer:e.props.currentLayer,l=e.getIcons(r,n,i,t.vertical),u=e.getDimensions(r,n,i,0,t.vertical?e.props.size.height:e.props.size.width,l.length),p=u.pagination,f=u.listSize,h=u.visibleIconsLength,v=r+n+i,O=r+n+2*i,w=t.vertical?{bottom:O,left:0,width:O,height:f}:{left:a+2*i+n,width:f,height:v},A=t.vertical?{height:v*h,width:v}:{height:v,width:v*h},T=e.props.modalParams&&e.props.modalParams.layer||{},P=(e.props.backgroundList||[]).find((function(e){return e.id===T.id})),C={title:T.title,format:T.format,style:T.style,additionalParameters:T.params,thumbnail:{data:P&&P.thumbnail,url:e.getThumb(T)}},x=e.props.confirmDeleteBackgroundModal||{show:!1},_=x.show,R=x.layerId,I=x.layerTitle;return h<=0&&e.props.enabled?null:d.createElement("span",null,d.createElement(E,{draggable:!1,modal:!0,show:_,onClose:function(){return e.props.onRemoveBackground(!1)},onConfirm:function(){e.props.removeBackground(R),e.props.onRemoveBackground(!1)},confirmButtonBSStyle:"default",confirmButtonContent:d.createElement(y,{msgId:"confirm"}),closeText:d.createElement(y,{msgId:"cancel"}),closeGlyph:"1-close"},d.createElement(y,{msgId:"backgroundSelector.confirmDelete",msgParams:{title:I}})),e.props.modalParams&&e.props.modalParams.editing&&d.createElement(S,o({onClose:e.props.clearModal,onSave:function(t){e.props.updateNode(t.id,"layers",t),e.props.onBackgroundEdit(t.id)},updateThumbnail:e.props.onUpdateThumbnail},C,e.props.modalParams)),d.createElement("div",{className:"background-plugin-position",style:e.props.style},d.createElement(g,{layers:e.props.layers,enabledCatalog:e.props.enabledCatalog,currentLayer:e.props.currentLayer,onAdd:function(){return e.props.onAdd(e.props.source||"backgroundSelector")},showLabel:t.label,src:e.getThumb(c),side:a,frame:n,margin:i,labelHeight:s,label:c.title,onToggle:e.props.onToggle,mode:e.props.mode,mapIsEditable:e.props.mapIsEditable}),d.createElement("div",{className:"background-list-container",style:w},d.createElement(b,{vertical:t.vertical,start:e.props.start,bottom:0,height:A.height,width:A.width,icons:l,pagination:p,length:h,onStartChange:e.props.onStartChange}))))})),e}return n=A,(r=[{key:"componentWillUnmount",value:function(){this.props.onLayerChange("currentLayer",{}),this.props.onLayerChange("tempLayer",{}),this.props.onStartChange(0)}},{key:"render",value:function(){return this.props.layers.length>0?this.renderBackgroundSelector():null}}])&&i(n.prototype,r),O&&i(n,O),A}(d.Component);f(w,"propTypes",{mode:O.string,backgroundList:O.array,backgrounds:O.array,start:O.number,style:O.object,enabled:O.bool,layers:O.array,currentLayer:O.object,tempLayer:O.object,size:O.object,dimensions:O.object,thumbs:O.object,mapIsEditable:O.bool,onPropertiesChange:O.func,onToggle:O.func,onLayerChange:O.func,onStartChange:O.func,onAdd:O.func,enabledCatalog:O.bool,onRemove:O.func,onBackgroundEdit:O.func,source:O.string,addBackgroundProperties:O.func,onUpdateThumbnail:O.func,removeBackground:O.func,onRemoveBackground:O.func,setCurrentBackgroundLayer:O.func,confirmDeleteBackgroundModal:O.object,deletedId:O.string,modalParams:O.object,updateNode:O.func,clearModal:O.func,allowDeletion:O.bool,projection:O.string}),f(w,"defaultProps",{mode:"desktop",addBackgroundProperties:function(){},onBackgroundEdit:function(){},setCurrentBackgroundLayer:function(){},source:"backgroundSelector",start:0,style:{},enabled:!1,layers:[],currentLayer:{},tempLayer:{},size:{width:0,height:0},dimensions:{},allowDeletion:!0,thumbs:{unknown:n(3289)},mapIsEditable:!0,onRemoveBackground:function(){},onPropertiesChange:function(){},onToggle:function(){},onLayerChange:function(){},onStartChange:function(){},onAdd:function(){},onRemove:function(){},clearModal:function(){}}),e.exports=w},3270:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(0),d=n(2113);n(3271);var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,n,r,u,f=(t=m,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function m(){return o(this,m),f.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){var e=this;return p.createElement("div",{className:"background-preview-button",style:{margin:this.props.margin}},p.createElement("div",{className:"background-preview-button-container bg-body",onClick:this.props.onToggle,style:{padding:this.props.frame/2,width:this.props.side+this.props.frame,height:this.props.side+this.props.frame}},this.props.showLabel?p.createElement("div",{className:"background-preview-button-label",style:{width:this.props.side,height:this.props.labelHeight,marginTop:0,padding:0}},p.createElement("div",{className:"bg-body bg-text",style:{padding:this.props.frame}},this.props.label)):null,p.createElement("div",{className:"background-preview-button-frame",style:{width:this.props.side,height:this.props.side}},p.createElement("img",{src:this.props.src}))),this.props.labelHeight>0?p.createElement(d,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:"mobile"!==this.props.mode&&this.props.mapIsEditable?[{glyph:"plus",tooltipId:"backgroundSelector.addTooltip",onClick:function(){return e.props.onAdd()},visible:!this.props.enabledCatalog}]:[]}):null)}}])&&a(n.prototype,r),u&&a(n,u),m}(p.Component);u(m,"propTypes",{mode:f.string,src:f.string,side:f.number,frame:f.number,margin:f.number,labelHeight:f.number,label:f.string,showLabel:f.bool,onToggle:f.func,onAdd:f.func,currentLayer:f.object,enabledCatalog:f.bool,layers:f.array,mapIsEditable:f.bool}),u(m,"defaultProps",{mode:"desktop",src:"./images/mapthumbs/none.jpg",side:50,frame:4,margin:5,labelHeight:29,label:"",showLabel:!0,onToggle:function(){},onAdd:function(){},currentLayer:{},layers:[]}),e.exports=m},3271:function(e,t,n){var r=n(3272);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3272:function(e,t,n){(e.exports=n(758)()).push([e.i,"\n.msgapi .background-preview-button-label {\n    position: absolute;\n    overflow: hidden;\n    font-weight: bold;\n    font-size: 12px;\n    text-align: center;\n    -webkit-transition: all 0.0s;\n    -moz-transition: all 0.0s;\n    -o-transition: all 0.0s;\n    transition: all 0.0s;\n\n}\n\n.msgapi .background-preview-button-label div {\n    overflow: hidden;\n    opacity: 0.8;\n    box-shadow: 0 7px 14px rgba(0,0,0,0.12), 0 5px 5px rgba(0,0,0,0.11);\n    -webkit-box-shadow:  0 7px 14px rgba(0,0,0,0.12), 0 5px 5px rgba(0,0,0,0.11);\n    -moz-box-shadow:  0 7px 14px rgba(0,0,0,0.12), 0 5px 5px rgba(0,0,0,0.11);\n}\n\n.msgapi .background-preview-button-container {\n    -webkit-transition: all 0.3s;\n    -moz-transition: all 0.3s;\n    -o-transition: all 0.3s;\n    transition: all 0.3s;\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -webkit-box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -moz-box-shadow:  0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n\n.msgapi .background-preview-button-frame {\n    overflow: hidden;\n    -webkit-transition: all 0.3s;\n    -moz-transition: all 0.3s;\n    -o-transition: all 0.3s;\n    transition: all 0.3s;\n}\n\n.msgapi .background-preview-button-frame img{\n    width: 100%;\n    height: 100%;\n}\n\n.msgapi .background-preview-button-container:hover {\n    cursor: pointer;\n    box-shadow: none;\n}\n\n.msgapi .background-preview-button-container:active {\n    opacity: 0.6;\n}\n",""])},3273:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(3274),d=n(0),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,n,r,u,d=(t=m,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function m(){return o(this,m),d.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){var e=this,t=[].concat(this.props.icons);t=this.props.pagination?t.slice(this.props.start,this.props.start+this.props.length):t,this.props.vertical&&t.unshift(p.createElement("div",{className:"background-list-arrow-placeholder"})),this.props.pagination&&(0!==this.props.start&&(this.props.vertical&&t.shift(),t.unshift(p.createElement(f,{key:"pagination_0",vertical:this.props.vertical,side:this.props.vertical?this.props.width:this.props.height,direction:!1,onClick:function(){e.props.onStartChange(e.props.start-1)}}))),this.props.start+this.props.length<this.props.icons.length&&t.push(p.createElement(f,{key:"pagination_1",vertical:this.props.vertical,side:this.props.vertical?this.props.width:this.props.height,onClick:function(){e.props.onStartChange(e.props.start+1)}})));var n=this.props.vertical?{height:this.props.pagination?this.props.height+50:this.props.height,width:this.props.width,bottom:this.props.bottom}:{height:this.props.height,width:this.props.pagination?this.props.width+50:this.props.width,bottom:this.props.bottom};return p.createElement("div",{style:n},t)}}])&&a(n.prototype,r),u&&a(n,u),m}(p.Component);u(m,"propTypes",{bottom:d.number,width:d.number,height:d.number,length:d.number,start:d.number,pagination:d.bool,vertical:d.bool,icons:d.array,onStartChange:d.func}),u(m,"defaultProps",{bottom:0,width:0,height:0,length:0,start:0,pagination:!1,vertical:!1,icons:[],onStartChange:function(){}}),e.exports=m},3274:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(757).Glyphicon,d=n(0),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,n,r,u,d=(t=m,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function m(){return o(this,m),d.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){var e=this.props.glyphs[this.props.vertical?"vertical":"horizontal"][this.props.direction?"next":"back"],t=this.props.vertical?"background-plugin-pagination-btn-vertical text-center":"background-plugin-pagination-btn-horizontal",n=this.props.vertical?{width:this.props.side}:{height:this.props.side};return p.createElement("div",{className:t+" text-primary",style:n,onClick:this.props.onClick},p.createElement(f,{glyph:e}))}}])&&a(n.prototype,r),u&&a(n,u),m}(p.Component);u(m,"propTypes",{side:d.number,direction:d.bool,vertical:d.bool,glyphs:d.object,onClick:d.func}),u(m,"defaultProps",{side:0,direction:!0,vertical:!1,glyphs:{horizontal:{next:"chevron-right",back:"chevron-left"},vertical:{next:"chevron-down",back:"chevron-up"}},onClick:function(){}}),e.exports=m},3275:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(0),d=n(13),m=d.indexOf,y=d.has;n(3276);var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,r,u,f=(t=d,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function d(){return o(this,d),f.apply(this,arguments)}return n=d,(r=[{key:"render",value:function(){var e=this,t=m(["EPSG:4326","EPSG:3857","EPSG:900913"],this.props.projection)>-1,n="wmts"===this.props.layer.type&&y(this.props.layer.allowedSRS,this.props.projection),r=this.props.vertical?"background-preview-icon-container-vertical":"background-preview-icon-container-horizontal",o=this.props.layer.visibility?" bg-primary":" bg-body",a=(t||n||"wms"===this.props.layer.type||"empty"===this.props.layer.type)&&!this.props.layer.invalid,i=a?function(){e.props.onToggle(),e.props.onPropertiesChange(e.props.layer.id,{visibility:!0}),e.props.setCurrentBackgroundLayer(e.props.layer.id)}:function(){};return p.createElement("div",{className:r+o+(a?"":" disabled-icon"),style:{padding:this.props.frame/2,marginLeft:this.props.vertical?this.props.margin:0,marginRight:this.props.vertical?0:this.props.margin,marginBottom:this.props.margin,width:this.props.side+this.props.frame,height:this.props.side+this.props.frame}},p.createElement("div",{className:"background-preview-icon-frame",style:{width:this.props.side,height:this.props.side}},p.createElement("img",{onMouseOver:function(){e.props.onLayerChange("tempLayer",e.props.layer)},onMouseOut:function(){e.props.onLayerChange("tempLayer",e.props.currentLayer)},onClick:i,src:this.props.src})))}}])&&a(n.prototype,r),u&&a(n,u),d}(p.Component);u(g,"propTypes",{side:f.number,frame:f.number,margin:f.number,src:f.string,vertical:f.bool,layer:f.object,currentLayer:f.object,onPropertiesChange:f.func,onToggle:f.func,onLayerChange:f.func,setCurrentBackgroundLayer:f.func,projection:f.string}),u(g,"defaultProps",{side:50,frame:4,margin:5,src:"",vertical:!1,layer:{},currentLayer:{},onPropertiesChange:function(){},onToggle:function(){},onLayerChange:function(){}}),e.exports=g},3276:function(e,t,n){var r=n(3277);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3277:function(e,t,n){(e.exports=n(758)()).push([e.i,"\n.msgapi .background-preview-icon-frame {\n    overflow: hidden;\n}\n\n.msgapi .background-preview-icon-frame img{\n    width: 100%;\n    height: 100%;\n}\n\n.msgapi .background-preview-icon-container-horizontal {\n    cursor: pointer;\n    float: left;\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -webkit-box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -moz-box-shadow:  0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n\n.msgapi .background-preview-icon-container-horizontal:hover {\n    cursor: pointer;\n    box-shadow: none;\n    opacity: 0.9;\n}\n\n.msgapi .background-preview-icon-container-horizontal:active {\n    opacity: 0.6;\n}\n\n.msgapi .background-preview-icon-container-horizontal.disabled-icon {\n    cursor: not-allowed;\n    float: left;\n    opacity: 0.5;\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -webkit-box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -moz-box-shadow:  0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n\n.msgapi .background-preview-icon-container-vertical {\n    cursor: pointer;\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -webkit-box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -moz-box-shadow:  0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n\n.msgapi .background-preview-icon-container-vertical:hover {\n    cursor: pointer;\n    box-shadow: none;\n    opacity: 0.9;\n}\n\n.msgapi .background-preview-icon-container-vertical:active {\n    opacity: 0.6;\n}\n\n.msgapi .background-preview-icon-container-vertical.disabled-icon {\n    cursor: not-allowed;\n    opacity: 0.5;\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -webkit-box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -moz-box-shadow:  0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n",""])},3288:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(757).Glyphicon,y=n(2690),g=n(2142),b=n(2100),h={FORMAT:d.createElement(b,{msgId:"map.errorFormat"}),SIZE:d.createElement(b,{msgId:"map.errorSize"})},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(S,e);var t,n,r,f,v=(t=S,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function S(){var e;o(this,S);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=v.call.apply(v,[this].concat(n))),"state",{}),p(s(e),"onRemoveThumbnail",(function(t){null!==t&&t.stopPropagation(),e.files=null,e.props.onUpdate(null,null),e.props.onRemoveThumbnail(),e.props.onError([],e.props.map.id)})),p(s(e),"getThumbnailUrl",(function(){return e.props.map&&e.props.map.newThumbnail&&"NODATA"!==e.props.map.newThumbnail?decodeURIComponent(e.props.map.newThumbnail):null})),p(s(e),"isImage",(function(e){return e&&"image/png"===e[0].type||e&&"image/jpeg"===e[0].type||e&&"image/jpg"===e[0].type})),p(s(e),"getDataUri",(function(e,t){var n=e;if(n&&n.length>0){var r=n[0],o=new FileReader;return o.onload=function(e){return t(e.target.result,r.size)},o.readAsDataURL(r)}return t(null)})),p(s(e),"onDrop",(function(t){var n=e.isImage(t),r=[];e.getDataUri(t,(function(o,a){n&&o&&a<e.props.maxFileSize?(e.props.onError([],e.props.map.id),e.files=t,e.props.onUpdate(o,t&&t[0].preview)):(n||r.push("FORMAT"),o&&a>=e.props.maxFileSize&&r.push("SIZE"),e.props.onError(r,e.props.map.id),e.files=t,e.props.onUpdate(null,null))}))})),p(s(e),"generateUUID",(function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))})),p(s(e),"processUpdateThumbnail",(function(t,n,r){var o=e.generateUUID();!e.props.map||r||!e.props.map.thumbnail||e.refs.imgThumbnail||n||e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!0),e.props.map&&!r&&e.props.map.newThumbnail&&!e.refs.imgThumbnail&&n&&(e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,n,o,r,"THUMBNAIL",e.props.map.id)),e.props.map.newThumbnail&&r&&e.refs.imgThumbnail&&(e.deleteThumbnail(e.props.map.thumbnail,null,!1),e.props.onSaveAll(t,n,o,r,"THUMBNAIL",e.props.map.id)),e.props.map.newThumbnail&&!r&&e.refs.imgThumbnail&&e.props.onSaveAll(t,n,o,r,"THUMBNAIL",e.props.map.id),e.props.map.newThumbnail||r||e.refs.imgThumbnail||(e.props.map.thumbnail&&n&&e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,n,o,r,"THUMBNAIL",e.props.map.id))})),p(s(e),"updateThumbnail",(function(t,n){e.props.map.errors&&e.props.map.errors.length||e.getDataUri(e.files,(function(r){return e.processUpdateThumbnail(t,n,r),r}))})),p(s(e),"getThumbnailDataUri",(function(t){e.getDataUri(e.files,t)})),p(s(e),"deleteThumbnail",(function(t,n){if(t&&-1!==t.indexOf("geostore")){var r=t.indexOf("data%2F")+7,o=t.indexOf("%2Fraw"),a=t.slice(r,o);a&&e.props.onDeleteThumbnail(a,n)}})),e}return n=S,(r=[{key:"renderThumbnailErrors",value:function(){return this.props.thumbnailErrors&&this.props.thumbnailErrors.length>0?d.createElement("div",{className:"dropzone-errorBox alert-danger"},d.createElement("p",null,d.createElement(b,{msgId:"map.error"})),this.props.thumbnailErrors.map((function(e){return d.createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},h[e])}))):null}},{key:"render",value:function(){var e=d.createElement("div",{className:"dropzone-content-image"},this.props.message,d.createElement("br",null),this.props.suggestion,d.createElement("div",{className:"dropzone-errors"},this.renderThumbnailErrors()));return this.props.loading?d.createElement("div",{className:"btn btn-info",style:{float:"center"}}," ",d.createElement(g,{spinnerName:"circle",overrideSpinnerClassName:"spinner"})):d.createElement("div",{className:"dropzone-thumbnail-container",style:{pointerEvents:this.props.map.saving?"none":"auto"}},this.props.withLabel&&d.createElement("label",{className:"control-label"},d.createElement(b,{msgId:"map.thumbnail"})),d.createElement(y,{multiple:!1,className:"dropzone alert alert-info",rejectClassName:"alert-danger",onDrop:this.onDrop},this.getThumbnailUrl()?d.createElement("div",null,d.createElement("img",{src:this.getThumbnailUrl(),ref:"imgThumbnail"}),d.createElement("div",{className:"dropzone-content-image-added"},this.props.message,d.createElement("br",null),this.props.suggestion),d.createElement("div",{className:"dropzone-remove",onClick:this.onRemoveThumbnail},d.createElement(m,{glyph:this.props.glyphiconRemove}))):e))}}])&&a(n.prototype,r),f&&a(n,f),S}(d.Component);p(v,"propTypes",{glyphiconRemove:f.string,style:f.object,thumbnailErrors:f.array,loading:f.bool,withLabel:f.bool,map:f.object,maxFileSize:f.number,onDrop:f.func,onError:f.func,onUpdate:f.func,onSaveAll:f.func,onCreateThumbnail:f.func,onDeleteThumbnail:f.func,onRemoveThumbnail:f.func,message:f.oneOfType([f.string,f.element]),suggestion:f.oneOfType([f.string,f.element])}),p(v,"contextTypes",{messages:f.object}),p(v,"defaultProps",{loading:!1,withLabel:!0,glyphiconRemove:"remove-circle",maxFileSize:5e5,onDrop:function(){},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemoveThumbnail:function(){},onCreateThumbnail:function(){},onDeleteThumbnail:function(){},message:d.createElement(b,{msgId:"map.message"}),suggestion:d.createElement(b,{msgId:"map.suggestion"}),map:{},thumbnailErrors:[]}),e.exports=v},3289:function(e,t,n){e.exports=n.p+"MapStore2/web/client/components/background/img/default.jpg"},3290:function(e,t,n){var r=n(2300),o=r.ADD_BACKGROUND,a=r.SET_BACKGROUND_MODAL_PARAMS,i=r.UPDATE_BACKGROUND_THUMBNAIL,s=r.BACKGROUNDS_CLEAR,c=r.ALLOW_BACKGROUNDS_DELETION,l=r.REMOVE_BACKGROUND,u=r.CREATE_BACKGROUNDS_LIST,p=r.CLEAR_MODAL_PARAMETERS,f=r.CONFIRM_DELETE_BACKGROUND_MODAL,d=n(2260).RESET_CATALOG,m=n(26);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return m({},e,{source:t.source});case d:return m({},e,{source:"metadataExplorer"});case a:return m({},e,{modalParams:t.modalParams});case s:return m({},e,{backgrounds:[],removedBackgroundsThumbIds:[],modalParams:{},lastRemovedId:void 0});case i:if(t.id){var n=e.backgrounds||[],r=-1===n.findIndex((function(e){return e.id===t.id})),y=r?n.concat({id:t.id}):n,g=y.map((function(e){return e.id===t.id?m({},e,{id:t.id,thumbnail:t.thumbnailData}):m({},e)}));return m({},e,{backgrounds:g})}return e;case p:return m({},e,{modalParams:void 0});case l:var b=e.backgrounds||[],h=e.removedBackgroundsThumbIds||[],v=b.filter((function(e){return e.id!==t.backgroundId})),S=b.filter((function(e){return e.id===t.backgroundId&&!!e.thumbId})).map((function(e){return e.thumbId}));return m({},e,{backgrounds:v,removedBackgroundsThumbIds:h.concat(S),lastRemovedId:t.backgroundId});case u:return m({},e,{backgrounds:t.backgrounds});case f:return m({},e,{confirmDeleteBackgroundModal:{show:t.show,layerTitle:t.layerTitle,layerId:t.layerId}});case c:return m({},e,{allowDeletion:t.allow||!1});default:return e}}},3291:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(15),l=n(13).head,u=n(2300),p=u.ADD_BACKGROUND,f=u.ADD_BACKGROUND_PROPERTIES,d=u.SET_CURRENT_BACKGROUND_LAYER,m=u.BACKGROUND_ADDED,y=u.BACKGROUND_EDITED,g=u.REMOVE_BACKGROUND,b=u.createBackgroundsList,h=u.clearModalParameters,v=u.setBackgroundModalParams,S=u.setCurrentBackgroundLayer,E=u.allowBackgroundsDeletion,O=n(267).setControlProperty,w=n(40).MAP_CONFIG_LOADED,A=n(2260).changeSelectedService,T=n(269),P=T.changeLayerProperties,C=T.removeNode,x=n(408),_=x.getLayerFromId,R=x.currentBackgroundSelector,I=n(2301).backgroundLayersSelector,j=n(2358).getLayerCapabilities,L=n(137).formatCapabitiliesOptions;e.exports={accessMetadataExplorer:function(e){return e.ofType(p).switchMap((function(){return c.Observable.of(O("metadataexplorer","enabled",!0),E(!1),A("default_map_backgrounds"))}))},addBackgroundPropertiesEpic:function(e){return e.ofType(f).switchMap((function(e){var t=e.modalParams,n=c.Observable.of(v(i({},t,{loading:!1})));return t.layer&&"wms"===t.layer.type?c.Observable.of(v(i({},t,{loading:!0}))).concat(j(t.layer).switchMap((function(e){return c.Observable.of(v(i({},t,{loading:!1,capabilities:L(e)})))})).catch((function(){return n}))):n}))},backgroundsListInit:function(e){return e.ofType(w).switchMap((function(e){var t,n=e.config,o=n.map&&n.map.backgrounds||[],a=o.filter((function(e){return!!e.thumbnail})).map((function(e){return P(e.id,{thumbURL:function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r),a=0;a<t.length;++a)o[a]=t.charCodeAt(a);return URL.createObjectURL(new Blob([r],{type:n}))}(e.thumbnail)})}));return(t=c.Observable).of.apply(t,r(a.concat(b(o))))}))},setCurrentBackgroundLayerEpic:function(e,t){return e.ofType(d).switchMap((function(e){var n,o=e.layerId,a=t.getState(),i=_(a,o);return(n=c.Observable).of.apply(n,r(i&&"background"===i.group?[O("backgroundSelector","tempLayer",i),O("backgroundSelector","currentLayer",i)]:[]))}))},backgroundAddedEpic:function(e,t){return e.ofType(m).mergeMap((function(e){var n=e.layerId,r=t.getState(),o=_(r,n);return o?c.Observable.of(P(o.id,{visibility:!0}),S(o.id),h()):c.Observable.empty()}))},backgroundEditedEpic:function(e,t){return e.ofType(y).mergeMap((function(e){var n=e.layerId,r=t.getState();return _(r,n)?c.Observable.of(h()):c.Observable.empty()}))},backgroundRemovedEpic:function(e,t){return e.ofType(g).mergeMap((function(e){var n=e.backgroundId,r=t.getState(),o=_(r,n),a=I(r)||[],i=R(r)||{},s=n===i.id?l(a.filter((function(e){return e.id!==n&&!e.invalid}))):i;return o?c.Observable.of(C(n,"layers"),P(s.id,{visibility:!0}),S(s.id)):c.Observable.empty()}))}}},3292:function(e,t,n){var r=n(3293),o=n(13),a=o.head,i=o.last,s=n(267).setControlProperty,c=n(2692).TOGGLE_FULLSCREEN,l=n(47),u=n(15);e.exports={toggleFullscreenEpic:function(e){return e.ofType(c).switchMap((function(e){var t=document.querySelector(e&&e.querySelector||"."+(l.getConfigProp("themePrefix")||"ms2")+" > div");return t&&e.enable&&r.enabled?r.request(t):t&&!e.enable&&r.exit(),u.Observable.merge(u.Observable.fromEvent(document,i(a([["exitFullscreen","fullscreenchange"],["webkitExitFullscreen","webkitfullscreenchange"],["webkitCancelFullScreen","webkitfullscreenchange"],["mozCancelFullScreen","mozfullscreenchange"],["msExitFullscreen","MSFullscreenChange"]].filter((function(e){return document[e[0]]}))))).filter((function(){return r.element!==t})).map((function(){return s("fullscreen","enabled",!1)})),u.Observable.of(s("fullscreen","enabled",e.enable)),u.Observable.fromEvent(window,"hashchange").do((function(){return r.exit()})).map((function(){return s("fullscreen","enabled",!1)})))}))}}},3294:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(0),m=n(1),y=n(2477),g=n(757).Tooltip,b=n(2100),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(v,e);var t,n,r,d,h=(t=v,function(){var e,n=u(t);if(l()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function v(){var e;a(this,v);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(c(e=h.call.apply(h,[this].concat(n))),"getButtonProperties",(function(){return["id","btnConfig","options","text","glyphicon","onClick","tooltipPlace","style","btnType","image","pressedStyle","defaultStyle"].reduce((function(t,n){return t[n]=e.props[n],t}),{})})),e}return n=v,(r=[{key:"render",value:function(){return m.createElement(y,o({},this.getButtonProperties(),{pressed:this.props.active,tooltip:m.createElement(g,{id:"full-screen-button-tip"},m.createElement(b,{msgId:this.props.active?this.props.activeTooltip:this.props.notActiveTooltip}))}))}}])&&i(n.prototype,r),d&&i(n,d),v}(m.Component);f(h,"propTypes",{id:d.string,btnConfig:d.object,options:d.object,text:d.oneOfType([d.string,d.element]),help:d.oneOfType([d.string,d.element]),glyphicon:d.string,active:d.bool,onClick:d.func,activeTooltip:d.string,notActiveTooltip:d.string,tooltipPlace:d.string,style:d.object,btnType:d.oneOf(["normal","image"]),image:d.string,pressedStyle:d.string,defaultStyle:d.string}),f(h,"defaultProps",{id:"fullscreen-btn",activeTooltip:"fullscreen.tooltipDeactivate",notActiveTooltip:"fullscreen.tooltipActivate",tooltipPlace:"left",defaultStyle:"primary",pressedStyle:"success active",glyphicon:"1-full-screen",btnConfig:{className:"square-button"}}),e.exports=h},3295:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(26),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(g,e);var t,n,r,f,y=(t=g,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function g(){var e;o(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=y.call.apply(y,[this].concat(n))),"getStyle",(function(){var t={cursor:e.props.disabled?"not-allowed":"pointer",margin:0,padding:0,display:"inline-block"};return e.props.image?m(t,{overflow:"hidden"}):m(t,{height:"48px",width:"48px",border:"1px solid grey",borderRadius:"4px",backgroundColor:"rgb(250, 250, 250)"}),m(t,e.props.style),t})),e}return n=g,(r=[{key:"render",value:function(){return d.createElement("img",{className:this.props.className,id:this.props.id,title:this.props.tooltip,style:this.getStyle(),src:this.props.image,onClick:this.props.disabled?null:this.props.onClick})}}])&&a(n.prototype,r),f&&a(n,f),g}(d.Component);p(y,"propTypes",{id:f.string,image:f.string,onClick:f.func,style:f.object,disabled:f.bool,tooltip:f.string,className:f.string}),p(y,"defaultProps",{disabled:!1,tooltip:null,className:void 0}),e.exports=y},3296:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi #zoomin-btn, .msgapi #zoomout-btn {\n    z-index: 1;\n    position: relative;\n}\n",""])},3297:function(e,t,n){var r=n(3298);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3298:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi #mapstore-burger-menu {\n    position: absolute;\n    right: 0;\n    top: 0;\n}\n\n.msgapi #mapstore-navbar #mapstore-burger-menu {\n    position: relative;\n    float: right;\n    left: 0;\n}\n",""])},3299:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(0),p=n(1),f=n(2679);n(3300);var d,m,y,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,n,r,u,d=(t=m,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function m(){return o(this,m),d.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){return p.createElement("div",{id:this.props.id},p.createElement(f,{id:"helpbadge-"+(this.props.children.key||this.props.id),isVisible:this.props.helpEnabled,helpText:this.props.helpText,changeHelpText:this.props.changeHelpText,changeHelpwinVisibility:this.props.changeHelpwinVisibility}),this.props.children)}}])&&a(n.prototype,r),u&&a(n,u),m}(p.Component);d=g,m="propTypes",y={id:u.string,helpText:u.oneOfType([u.string,u.element]),helpEnabled:u.bool,changeHelpText:u.func,changeHelpwinVisibility:u.func},m in d?Object.defineProperty(d,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):d[m]=y,e.exports=g},3300:function(e,t,n){var r=n(3301);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3301:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi .mapToolbar .mapstore-tb-helpbadge {\n    display: block;\n    background-color: #777;\n    position: absolute;\n    z-index: 1000;\n    top : -10px;\n    left: -10px;\n}\n\n\n.msgapi #helpbadge-zoomToMaxExtent {\n    display: inline;\n    position: absolute;\n    left: 34px;\n    top: 72px;\n    z-index: 100000\n}\n\n.msgapi #helpbadge-scaleBox {\n    display: inline;\n    position: absolute;\n    left: 116px;\n    bottom: 48px;\n    z-index: 100000\n}\n\n.msgapi #helpbadge-seachBar {\n    display: inline;\n    position: absolute;\n    left: 46px;\n    top: 10px;\n    z-index: 100000\n}\n\n\n.msgapi .btn .badge {\n    position: absolute;\n    top: -10px;\n    left: -10px;\n}\n\n.msgapi .themed .btn .badge {\n    top: -35px;\n    left: -50px;\n}\n\n.msgapi .badge {\n    cursor: pointer;\n}\n\n.msgapi #helpbadge-scaleBox {\n    left: 0 !important;\n}\n\n.msgapi #mapstore-navbar #helpbadge-search-help {\n    position: absolute;\n    left: -10px;\n    bottom: -8px;\n    z-index: 1;\n}\n",""])},3302:function(e,t,n){var r=n(3303);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3303:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi #mapstore-scalebox {\n    /*z-index: 10;\n    bottom: 6px;\n    left: -2px;\n    position: absolute;\n    margin: 8px;\n    width: 148px;*/\n}\n\n.msgapi #mapstore-scalebox-container {\n    /*z-index: 10;\n    bottom: -16px;\n    right: 55px;\n    left: auto;\n    position: absolute;\n    margin: 8px;\n    width: 148px;*/\n}\n",""])},3304:function(e,t,n){var r=n(3305);"string"==typeof r&&(r=[[e.i,r,""]]);n(759)(r,{});r.locals&&(e.exports=r.locals)},3305:function(e,t,n){(e.exports=n(758)()).push([e.i,".msgapi #mappreview-scalebox {\n    position: relative;\n    top: -36px;\n    width: 150px;\n    left: 10px;\n}\n\n.msgapi .print-error {\n    height: 100px;\n    color: #600;\n    background-color: #E8BABA;\n    border: solid #600 1px;\n    border-radius: 10px;\n    padding: 10px;\n}\n.msgapi .print-error span, .msgapi .print-warning span {\n    display: inline-block;\n    max-height: 80px;\n    overflow: auto;\n    width: 100%;\n}\n.msgapi .print-warning {\n    height: 50px;\n    color: #660;\n    background-color: #E6E8BA;\n    border: solid #660 1px;\n    border-radius: 10px;\n    padding: 10px;\n}\n.msgapi .print-preview-panel .spinner {\n    display: inline-block;\n}\n\n.msgapi .print-mappreview-refresh {\n    position: relative;\n    top: -83px;\n    right: -155px;\n    z-index: 1000;\n}\n.msgapi #mapstore-print-panel.modal-dialog {\n    z-index: 2000;\n}\n\n.msgapi #mapstore-print-panel .modal-body {\n    max-height: calc(100vh - 190px);\n    overflow-y: auto;\n}\n\n.msgapi .mapstore-print-panel {\n    width: 850px;\n    position: absolute;\n    top: 50px;\n    right: 60px;\n    zIndex: 100;\n}\n\n.msgapi .mapstore-print-panel .form-inline label {\n    margin-right: 20px;\n}\n\n.msgapi .mapstore-print-panel .print-download {\n    margin-right: 10px;\n    display: inline-block;\n    width: 30px;\n    height: 34px;\n    border: solid 1px #CCC;\n    padding: 7px;\n    border-radius: 4px;\n    padding-right: 25px;\n    padding-left: 11px;\n    top: 2px;\n    position: relative;\n}\n\n.msgapi .print-layout .panel-title {\n    padding-left: 10px;\n}\n\n.msgapi .print-layout .panel-title a{\n    text-decoration: none;\n}\n\n.msgapi .print-layout .panel-title a:hover{\n    color: #d6d6d6;\n}\n\n.msgapi .print-legend-options .panel-title {\n    padding-left: 10px;\n}\n\n.msgapi .print-legend-options .panel-title a{\n    text-decoration: none;\n}\n\n.msgapi .print-legend-options .panel-title a:hover{\n    color: #d6d6d6;\n}\n\n\n@media (min-width: 992px) {\n    .msgapi #mapstore-print-panel {\n        width: 825px;\n    }\n}\n\n@media (max-width: 991px) {\n    .msgapi #mapstore-print-panel {\n        width: 700px;\n    }\n}\n\n@media (max-width: 767px) {\n    .msgapi #mapstore-print-panel {\n        width: 98%;\n    }\n}\n\n.msgapi #mapstore-print-panel .modal-body .print-mappreview-refresh {\n    top: -96px;\n}\n\n.msgapi #mapstore-print-panel .print-submit {\n    float: right;\n}\n\n@media (min-width: 768px) {\n    .msgapi #mapstore-print-panel input[type=radio] {\n        margin: 0 8px 0 20px;\n    }\n}\n\n.msgapi #mapstore-print-panel .print-map-preview {\n    margin-bottom: 15px;\n}\n\n.msgapi #mapstore-print-panel .panel-default {\n    border: none;\n}\n\n.msgapi #mapstore-print-panel .panel-heading .panel-title {\n    font-weight: bold;\n}\n\n.msgapi #mapstore-print-panel .panel-heading {\n    padding-left: 0;\n    background-color: transparent;\n}\n\n.msgapi #mapstore-print-panel .panel-body {\n    padding: 10px;\n}\n\n.msgapi #mapstore-print-panel .form-control {\n    padding: 0 10px;\n    height: 25px;\n}\n\n.msgapi #mapstore-print-panel .print-download {\n    margin-right: 10px;\n}\n\n.msgapi #mapstore-print-panel .print-download a {\n    color: white;\n}\n\n.msgapi #mapstore-print-panel .print-legend-options .container-fluid {\n    padding-left: 0;\n    padding-right: 0;\n}\n",""])},3306:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(782),a=o.SET_PRINT_PARAMETER,i=o.PRINT_CAPABILITIES_LOADED,s=o.PRINT_CAPABILITIES_ERROR,c=o.CONFIGURE_PRINT_MAP,l=o.CHANGE_PRINT_ZOOM_LEVEL,u=o.CHANGE_MAP_PRINT_PREVIEW,p=o.PRINT_SUBMITTING,f=o.PRINT_CREATED,d=o.PRINT_ERROR,m=o.PRINT_CANCEL,y=n(267).TOGGLE_CONTROL,g=n(13),b=g.isObject,h=g.get,v=n(26),S={antiAliasing:!0,iconSize:24,legendDpi:96,fontFamily:"Verdana",fontSize:8,bold:!1,italic:!1,resolution:96,name:"",description:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split("_")[0]};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{spec:S,capabilities:null,map:null,isLoading:!1,pdfUrl:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return"print"===t.control?v({},e,{pdfUrl:null,isLoading:!1,error:null}):e;case i:var n=h(t,"capabilities.layouts",[{name:"A4"}]),o=n.filter((function(t){return E(t.name)===e.spec.sheet})).length?e.spec.sheet:E(n[0].name);return v({},e,{capabilities:t.capabilities,spec:v({},e.spec||{},{sheet:o,resolution:t.capabilities&&t.capabilities.dpis&&t.capabilities.dpis.length&&t.capabilities.dpis[0].value})});case a:return v({},e,{spec:v({},e.spec,r({},t.name,t.value))});case c:var g=t.layers.map((function(e){return e.title?v({},e,{title:b(e.title)&&t.currentLocale&&e.title[t.currentLocale]||b(e.title)&&e.title.default||e.title}):e}));return v({},e,{map:{center:t.center,zoom:t.zoom,scaleZoom:t.scaleZoom,scale:t.scale,layers:g,projection:t.projection},error:null});case l:var O=t.zoom-e.map.scaleZoom;return v({},e,{map:v({},e.map,{scaleZoom:t.zoom,zoom:e.map.zoom+O,scale:t.scale})});case u:return v({},e,{map:v({},e.map,{size:t.size})});case p:return v({},e,{isLoading:!0,pdfUrl:null,error:null});case f:return v({},e,{isLoading:!1,pdfUrl:t.url,error:null});case d:case s:return v({},e,{isLoading:!1,pdfUrl:null,error:t.error});case m:return v({},e,{isLoading:!1,pdfUrl:null,error:null});default:return e}}},3307:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(88).connect,c=n(13),l=c.isString,u=c.differenceBy,p=c.isNil,f=n(767).currentTimeSelector,d=n(2191),m=d.selectTime,y=d.selectLayer,g=d.onRangeChanged,b=n(2208),h=b.itemsSelector,v=b.loadingSelector,S=b.selectedLayerSelector,E=b.currentTimeRangeSelector,O=b.rangeSelector,w=b.timelineLayersSelector,A=n(774),T=A.moveTime,P=A.setCurrentOffset,C=n(2229).selectPlaybackRange,x=n(2261),_=x.playbackRangeSelector,R=x.statusSelector,I=n(195),j=I.createStructuredSelector,L=I.createSelector,D=n(2478).createShallowSelectorCreator,M=n(407),N=M.compose,k=M.withPropsOnChange,G=M.defaultProps,F=n(2359),U=n(2100),B=n(2259),H=n(3308),z=n(3309),V=n(12),W=N(s(L(O,h,D((function(e,t){return e===t||!p(e)&&!p(t)&&e.id===t.id&&e.title===t.title&&e.name===t.name}))(w,(function(e){return e})),v,(function(e,t,n,r){return{viewRange:e,items:t,layers:n,loading:r}}))),k((function(e,t){var n=e.layers,r=void 0===n?[]:n,o=e.loading,a=e.selectedLayer,i=t.layers,s=t.loading,c=t.selectedLayer,l=e.hideLayersName!==t.hideLayersName;return o!==s||a!==c||l||r&&i&&r.length!==i.length||u(r,i||[],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.title,r=e.name;return t+n+r})).length>0}),(function(e){var t=e.layers,n=void 0===t?[]:t,r=e.loading,o=void 0===r?{}:r,a=e.selectedLayer;return{groups:n.map((function(e){return{id:e.id,className:(o[e.id]?"loading":"")+(e.id&&e.id===a?" selected":""),content:'<div class="timeline-layer-label-container">'+(o[e.id]?'<div class="timeline-layer-icon"><div class="timeline-spinner"></div></div>':'<div class="timeline-layer-icon">'.concat(e.id&&e.id===a?'<i class="glyphicon glyphicon-time"></i>':"","</div>"))+'<div class="timeline-layer-title">'.concat(l(e.title)?e.title:e.name,"</div>")+"</div>"}}))}}))),Y=N(s(L(f,E,(function(e,t){return{currentTime:e,currentTimeRange:t}})),{setCurrentTime:m,moveCurrentRange:T,setOffset:P})),q=N(s(j({playbackRange:_,status:R}),{setPlaybackRange:C})),Z=N(s(L(S,(function(e){return{selectedLayer:e}})),{selectGroup:y})),K=N(s((function(){return{}}),{rangechangedHandler:g})),Q=N(Y,q,Z,H,K,W,G({key:"timeline",options:{maxHeight:"90%",verticalScroll:!0,stack:!1,showMajorLabels:!0,showCurrentTime:!1,zoomMin:10,zoomable:!0,type:"background",margin:{item:0,axis:0},format:{minorLabels:{minute:"h:mma",hour:"ha"}},itemsAlwaysDraggable:!0,moment:function(e){return V(e).utc()}}}),k(["viewRange","options"],(function(e){var t=e.viewRange,n=void 0===t?{}:t;return{options:o({},e.options,{},n)}})),k(["status"],(function(e){return{readOnly:"PLAY"===e.status}})),z,F((function(e){var t=e.loading;return t&&t.timeline}),(function(){return i.createElement("div",{style:{margin:"auto",fontWeight:"bold"}},i.createElement(B,{style:{display:"inline-block",verticalAlign:"middle"}}),i.createElement(U,{msgId:"loading"}))}),{white:!0})),X=n(3310);e.exports=Q(X)},3308:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(407).withHandlers,s=n(13).trim,c=n(12),l=function(e,t){return c(t).diff(e)>0},u=n(769).getStartEnd;e.exports=i({clickHandler:function(e){var t=e.selectedLayer,n=e.offsetEnabled,r=e.status,o=e.setCurrentTime,a=void 0===o?function(){}:o,i=e.selectGroup,c=void 0===i?function(){}:i;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.time,i=e.group,l=e.what,u=e.event;if("PLAY"!==r)switch(l){case"group-label":i&&"PLAY"!==r&&c(i);break;default:var p=u&&u.target&&u.target.closest(".vis-custom-time"),f=p&&p.getAttribute("class"),d=f&&s(f.replace("vis-custom-time",""));o&&!n&&"startPlaybackTime"!==d&&"endPlaybackTime"!==d&&a(o.toISOString(),t)}}},timechangedHandler:function(e){var t=e.currentTime,n=e.setOffset,r=void 0===n?function(){}:n,i=e.setCurrentTime,s=void 0===i?function(){}:i,c=e.currentTimeRange,p=void 0===c?{}:c,f=e.playbackRange,d=e.setPlaybackRange,m=void 0===d?function(){}:d,y=e.selectedLayer;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.time,i=e.id;if("startPlaybackTime"!==i&&"endPlaybackTime"!==i)"currentTime"===i&&(p.end?l(n,p.end)?s(n.toISOString(),null):(s(p.end),r(n.toISOString())):s(n.toISOString(),y)),"offsetTime"===i&&(l(t,n)?r(n.toISOString()):(s(n.toISOString()),r(t)));else{var c=o({},f,a({},i,n.toISOString())),d=u(c.startPlaybackTime,c.endPlaybackTime),g=d.start,b=d.end;l(g,b)&&m({startPlaybackTime:g,endPlaybackTime:b})}}}})},3309:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=n(407),l=c.compose,u=c.withPropsOnChange,p=c.withHandlers,f=n(769).getStartEnd;e.exports=l(u(["rangeItems","playbackRange","playbackEnabled","selectedLayer"],(function(e){var t=e.rangeItems,n=void 0===t?[]:t,r=e.playbackEnabled,a=e.playbackRange;return{rangeItems:r&&a&&void 0!==a.startPlaybackTime&&void 0!==a.endPlaybackTime?[].concat(i(n),[o({id:"playback-range"},f(a.startPlaybackTime,a.endPlaybackTime),{type:"background",className:"ms-playback-range"})]).filter((function(e){return e})):n}})),l(p({onUpdate:function(e){var t=e.moveCurrentRange,n=void 0===t?function(){}:t;return function(e){var t=e.id,r=e.start;"current-range"===t&&n(r.toISOString())}}}),u(["options","onUpdate"],(function(e){var t=e.options,n=void 0===t?{}:t,r=e.onUpdate,a=void 0===r?function(){}:r;return{options:o({},n,{snap:null,editable:{add:!1,updateTime:!1,updateGroup:!1,remove:!1,overrideItems:!1},onMove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;a(e),t(e)}})}})),u(["rangeItems","currentTime","offsetEnabled","selectedLayer","currentTimeRange","readOnly"],(function(e){var t=e.currentTimeRange,n=e.rangeItems,r=void 0===n?[]:n,a=e.readOnly;return{rangeItems:e.offsetEnabled&&void 0!==t.start&&void 0!==t.end?[].concat(i(r),[o({id:"current-range",editable:{updateTime:!a,updateGroup:!1,remove:!1}},f(t.start,t.end),{type:"background",className:"ms-current-range"})]).filter((function(e){return e})):r}}))),u(["currentTime","playbackRange","playbackEnabled","offsetEnabled","currentTimeRange"],(function(e){var t=e.currentTime,n=e.playbackRange,r=e.playbackEnabled,a=e.offsetEnabled,i=e.currentTimeRange;return{customTimes:[t?{currentTime:t}:{},r&&n&&n.startPlaybackTime&&n.endPlaybackTime?n:{},a&&i?{offsetTime:i.end}:{}].reduce((function(e,t){return t?o({},e,{},t):o({},e)}),{})}})))},3310:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(1),m=n(0),y=n(12),g=n(3311);g.timeline.components.items.BackgroundItem.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["timeline-item"]=this,this.dirty=!0)},n(3312);var b=n(13),h=b.difference,v=b.differenceBy,S=b.keys,E=b.intersection,O=b.intersectionBy,w=b.each,A=b.omit,T=b.assign,P=function(){},C=["currentTimeTick","click","contextmenu","doubleClick","groupDragged","changed","rangechange","rangechanged","select","drop","timechange","timechanged","mouseOver","mouseMove","mouseleave","itemover","itemout","mouseDown","mouseUp"],x={},_={};w(C,(function(e){return x[e]=m.func,_["".concat(e,"Handler")]=P,[x,_]}));var R={items:m.array,rangeItems:m.array,groups:m.array,options:m.object,selectionOptions:m.object,selection:m.array,customTimes:m.shape({datetime:m.instanceOf(Date),id:m.string}),animate:m.oneOfType([m.bool,m.object]),currentTime:m.oneOfType([m.string,m.instanceOf(Date),m.number])},I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(b,e);var t,n,r,a,m=(t=b,function(){var e,n=u(t);if(l()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),f(c(t=m.call(this,e)),"setAllItems",(function(e){t.$el.setItems([].concat(o(e||[]),o(t.props.rangeItems||[])))})),f(c(t),"setItems",(function(e){(e.length||0)+(t.props.rangeItems&&t.props.rangeItems.length||0)>0?t.$el.initialFitDone?t.setAllItems(e):(t.setAllItems(e),t.$el.emit("changed")):t.$el.initialRangeChangeDone&&t.setAllItems(e)})),t.state={customTimes:[]},t}return n=b,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.refs.container;this.$el=new g.Timeline(t,void 0,this.props.options),C.forEach((function(t){return e.$el.on(t,e.props["".concat(t,"Handler")])})),this.init()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.items,r=t.groups,o=t.options,a=t.selection,i=t.customTimes,s=t.readOnly,c=t.rangeItems,l=n!==e.items,u=r!==e.groups,p=o!==e.options,f=i!==e.customTimes,d=a!==e.selection,m=s!==e.readOnly,y=c!==e.rangeItems;return l||u||p||f||d||m||y}},{key:"componentDidUpdate",value:function(e){this.init(e)}},{key:"componentWillUnmount",value:function(){this.$el.destroy()}},{key:"render",value:function(){return d.createElement("div",{ref:"container",className:this.props.readOnly?"read-only-timeline":"",onMouseOut:this.props.onMouseOutHandler})}},{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props,r=n.items,o=n.rangeItems,a=n.groups,i=n.options,s=n.selection,c=n.selectionOptions,l=void 0===c?{}:c,u=n.customTimes,p=n.animate,f=void 0===p||p,d=n.currentTime,m=i;if(f&&(m=A(i,"start","end"),i.start&&i.end?this.$el.setWindow(i.start,i.end,{animation:f}):this.$el.setWindow(y().subtract(1,"month"),y().add(1,"month"),{animation:f})),this.$el.setOptions(m),a.length>0){var b=new g.DataSet;b.add(a),this.$el.setGroups(b)}if(r&&r!==t.items)this.setItems(r);else if(o!==t.rangeItems){var T=this.$el&&this.$el.itemsData&&this.$el.itemsData.getDataSet();if(T){var P=O(o||[],t.rangeItems||[],"id"),C=v(o||[],t.rangeItems||[],"id"),x=v(t.rangeItems||[],o||[],"id");P.map((function(e){return T.update(e)})),C.map((function(e){return T.add(e)})),x.map((function(e){var t=e.id;return T.remove(t)}))}else this.setItems(r)}this.$el.setSelection(s,l),d&&this.$el.setCurrentTime(d);var _=S(this.state.customTimes),R=S(u),I=h(R,_),j=h(_,R),L=E(_,R);w(j,(function(t){return e.$el.removeCustomTime(t)})),w(I,(function(t){var n=u[t];e.$el.addCustomTime(n,t)})),w(L,(function(t){var n=u[t];e.$el.setCustomTime(n,t)})),this.setState({customTimes:u}),(this.props.readOnly!==t.readOnly||this.props.readOnly&&I.length>0)&&w(this.$el.customTimes,(function(n){e.props.readOnly?n.hammer.off("panstart panmove panend"):!0===t.readOnly&&(n.hammer.on("panstart",n._onDragStart.bind(n)),n.hammer.on("panmove",n._onDrag.bind(n)),n.hammer.on("panend",n._onDragEnd.bind(n)))}))}}])&&i(n.prototype,r),a&&i(n,a),b}(d.Component);f(I,"propTypes",T(R,x)),f(I,"defaultProps",T({items:[],groups:[],options:{},selection:[],customTimes:{}},_)),e.exports=I},3315:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(15),c=n(2100),l=n(757),u=l.Button,p=l.Glyphicon,f=n(2191).setCollapsed,d=n(2208),m=d.isCollapsed,y=d.hasLayers,g=n(407),b=g.compose,h=g.withHandlers,v=g.withProps,S=g.renderNothing,E=g.branch,O=g.mapPropsStream,w=n(2132),A=n(195).createSelector,T=n(88).connect,P=n(2706),C=b(v({collapseHintPopoverOptions:{placement:"top",props:{title:i.createElement("span",null,i.createElement(p,{glyph:"time"})," ",i.createElement("strong",null,i.createElement(c,{msgId:"timeline.collapsed.title"})))},content:i.createElement(c,{msgId:"timeline.collapsed.tooltip"})}}),O((function(e){return e.combineLatest(function(e){return e.distinctUntilKeyChanged("collapsed").filter((function(e){return e.collapsed})).take(1).switchMap((function(e){var t=e.collapseHintPopoverOptions;return s.Observable.timer(5e3).startWith({popoverOptions:t}).concat(s.Observable.of({}))})).startWith({})}(e),(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t)}))})),E((function(e){return e.popoverOptions}),P,w))(u);e.exports=b(T(A(m,y,(function(e,t){return{collapsed:e,visible:t}})),{setCollapsed:f}),E((function(e){return!e.visible}),S),h({onClick:function(e){var t=e.collapsed,n=e.setCollapsed;return function(){return n(!t)}}}),v((function(e){var t=e.collapsed;return{bsStyle:t?"primary":"success",tooltipId:t?"timeline.show":"timeline.hide"}})))((function(e){return i.createElement(C,r({},e,{bsSize:"xsmall"}),i.createElement(p,{glyph:"time"}))}))},3316:function(e,t,n){var r=n(2191).RANGE_CHANGED,o=n(269).REMOVE_NODE,a=n(267).RESET_CONTROLS,i=n(2191),s=i.RANGE_DATA_LOADED,c=i.LOADING,l=i.SELECT_LAYER,u=i.SET_COLLAPSED,p=i.SET_MAP_SYNC,f=n(410).set,d=n(13),m=d.assign,y=d.pickBy,g=d.has;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{autoSelect:!0,collapsed:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return f("settings.collapsed",t.collapsed,e);case p:return f("settings.mapSync",t.mapSync,e);case r:return f("range",{start:t.start,end:t.end},e);case s:return f("rangeData[".concat(t.layerId,"]"),{range:t.range,histogram:t.histogram,domain:t.domain},e);case c:return t.layerId?f("loading[".concat(t.layerId,"]"),t.loading,e):f("loading.timeline",t.loading,e);case l:return f("selectedLayer",t.layerId,e);case o:var n=e;return m({},e,{rangeData:g(n.rangeData,t.node)?y(n.rangeData,(function(e,n){return n!==t.node})):n.rangeData,loading:g(n.rangeData,t.node)?y(n.loading,(function(e,n){return n!==t.node})):n.loading,selectedLayer:e.selectedLayer===t.node?void 0:e.selectedLayer});case a:return m({},e,{range:void 0,rangeData:void 0,selectedLayer:void 0,loading:void 0,MouseEvent:void 0});default:return e}}},3317:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(15),p=n(13),f=p.isString,d=p.get,m=p.head,y=p.castArray,g=n(12),b=n(2709).wrapStartStop,h=n(409).CHANGE_MAP_VIEW,v=n(2191),S=v.SELECT_TIME,E=v.RANGE_CHANGED,O=v.ENABLE_OFFSET,w=v.SET_MAP_SYNC,A=v.timeDataLoading,T=v.rangeDataLoaded,P=v.onRangeChanged,C=v.selectLayer,x=n(774),_=x.setCurrentTime,R=x.UPDATE_LAYER_DIMENSION_DATA,I=x.setCurrentOffset,j=n(269).REMOVE_NODE,L=n(161).error,D=n(408).getLayerFromId,M=n(2208),N=M.rangeSelector,k=M.selectedLayerName,G=M.selectedLayerUrl,F=M.isAutoSelectEnabled,U=M.selectedLayerSelector,B=M.timelineLayersSelector,H=M.multidimOptionsSelectorCreator,z=M.isMapSync,V=n(767),W=V.layerTimeSequenceSelectorCreator,Y=V.timeDataSelector,q=V.offsetTimeSelector,Z=V.currentTimeSelector,K=n(769),Q=K.getNearestDate,X=K.roundRangeResolution,J=K.isTimeDomainInterval,$=n(798),ee=$.getHistogram,te=$.describeDomains,ne=$.getDomainValues,re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=U(e),r=k(e),o=G(e),a=H(n)(e);return[o,r,"time",c({limit:1},t),a]},oe=function(e,t,n){if(k(e))return u.Observable.forkJoin(ne.apply(void 0,o(re(e,{sort:"asc",fromValue:n}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return r(e,1)[0]})).catch((function(e){return e&&u.Observable.of(null)})),ne.apply(void 0,o(re(e,{sort:"desc",fromValue:n}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return r(e,1)[0]})).catch((function(e){return e&&u.Observable.of(null)}))).map((function(e){return Q(e.filter((function(e){return!!e})),n)||n}));var a=W(D(e,t))(e);return u.Observable.of(Q(a,n)||n)},ae=function(e){return f(e)?e:e.toISOString()},ie=function(e,t,n){var r=t.domain.split("--"),o=N(n())||{start:new Date(r[0]),end:new Date(r[1])},a=X(o,20),i=a.range,s=a.resolution,p=D(n(),e).name,f=l({},"time","".concat(ae(i.start),"/").concat(ae(i.end)));return ee(t.source.url,p,"time",l({},"time","".concat(ae(i.start),"/").concat(ae(i.end))),s,H(e)(n())).merge(te(t.source.url,p,f,c({},H(e)(n()),{expandLimit:20}))).scan((function(e,t){return c({},e,{},t)}),{}).switchMap((function(e){var t,n=e.Histogram,r=e.Domains,o=d(m(y(d(r,"DimensionDomain")||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Identifier;return"time"===t}))),"Domain");try{t=n&&n.Values&&n.Values.split(",").map((function(e){return parseInt(e,10)}))||[]}catch(e){t=[]}var a=o&&o.indexOf("--")<0&&o.split(",");return u.Observable.of({range:i,histogram:n&&n.Domain?{values:t,domain:n.Domain}:void 0,domain:o?{values:a}:void 0})}))};e.exports={setTimelineCurrentTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(S).throttleTime(100).switchMap((function(e){var t=e.time,n=e.group,a=r();return n?oe(a,n,t).switchMap((function(e){var t=N(a)||{},n=t.start,r=t.end,i=[];if(n&&r&&(g(e).isBefore(n)||g(e).isAfter(r))){var s=g(r).diff(n);i=[P({start:g(e).subtract(s/2),end:g(e).add(s/2)})]}return u.Observable.from([].concat(o(i),[_(e)]))})).let(b(A(!1,!0),A(!1,!1))):u.Observable.of(_(t))}))},setupTimelineExistingSettings:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(j,R).exhaustMap((function(){return F(r())&&d(B(r()),"[0].id")&&!U(r())?u.Observable.of(C(d(B(r()),"[0].id"))).concat(u.Observable.of(1).switchMap((function(){return oe(r(),d(B(r()),"[0].id"),Z(r)||(new Date).toISOString()).filter((function(e){return e})).map((function(e){return _(e)}))}))):u.Observable.empty()}))},settingInitialOffsetValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O).switchMap((function(e){var t=r(),n=Z(t),o=N(t);if(e.enabled){var a=o||{},i=a.start,s=void 0===i?0:i,c=a.end,l=void 0===c?432e6:c,p=q(t),f=g(l).diff(s),d=o?g(s).add(f/2).toISOString():g(new Date).toISOString(),m=g(n||d).add(f/5),y=e.enabled&&!n?u.Observable.of(_(d)):u.Observable.empty(),b=e.enabled&&!p||e.enabled&&g(p).diff(n)<0?u.Observable.of(I(m.toISOString())):u.Observable.empty(),h=o?u.Observable.empty():u.Observable.of(P({start:g(d).add(-1*f/2),end:g(d).add(f/2)}));return y.concat(b).concat(h)}return u.Observable.of(I())}))},updateRangeDataOnRangeChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(E).merge(e.ofType(h).filter((function(){return z(r())})),e.ofType(w)).debounceTime(400).merge(e.ofType(R).debounceTime(50)).switchMap((function(){var e,t=Y(r())||{},n=Object.keys(t).filter((function(e){return t[e]&&t[e].domain&&J(t[e].domain)||z(r())}));return(e=u.Observable).merge.apply(e,o(n.map((function(e){return ie(e,t[e],r).map((function(t){var n=t.range,r=t.histogram,o=t.domain;return T(e,n,r,o)})).startWith(A(e,!0)).catch((function(){return u.Observable.of(L({uid:"error_with_timeline_update",title:"timeline.errors.multidim_error_title",message:"timeline.errors.multidim_error_message"}))})).concat(u.Observable.of(A(e,!1)))}))))}))}}},3318:function(e,t,n){var r=n(1),o=n(88).connect,a=n(195).createSelector,i=n(407),s=i.compose,c=i.withState,l=i.withProps,u=i.withHandlers,p=n(2208).selectedLayerSelector,f=n(2261),d=f.statusSelector,m=f.hasPrevNextAnimationSteps,y=f.playbackMetadataSelector,g=n(2229),b=g.animationStepMove,h=g.STATUS,v=n(2100),S=n(2113),E=n(3319),O=s(c("showSettings","onShowSettings",!1),c("collapsed","setCollapsed",!0),l((function(e){var t=e.setCollapsed;return{buttons:[{glyph:"minus",onClick:function(){return t(!0)}}]}}))),w=s(o(a(d,p,y,m,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return t?e===h.PLAY||e===h.PAUSE?r:{hasNext:!!n.next,hasPrevious:!!n.previous}:{hasNext:!0,hasPrevious:!0}})),{stepMove:b}),u({forward:function(e){var t=e.stepMove,n=void 0===t?function(){}:t;return function(){return n(1)}},backward:function(e){var t=e.stepMove,n=void 0===t?function(){}:t;return function(){return n(-1)}}})),A=s(O,w);e.exports=A((function(e){var t=e.status,n=e.statusMap,o=e.play,a=void 0===o?function(){}:o,i=e.forward,s=void 0===i?function(){}:i,c=e.backward,l=void 0===c?function(){}:c,u=e.pause,p=void 0===u?function(){}:u,f=e.stop,d=void 0===f?function(){}:f,m=e.hasPrevious,y=e.hasNext,g=e.showSettings,b=e.onShowSettings,h=void 0===b?function(){}:b,O=e.settingsStyle,w=void 0===O?{}:O;return r.createElement("div",{style:{display:"flex"}},t!==n.PLAY&&t!==n.PAUSE&&g&&r.createElement(E,{style:w}),r.createElement(S,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"step-backward",key:"back",onClick:l,disabled:!m,tooltip:r.createElement(v,{msgId:"playback.backwardStep"})},{glyph:t===n.PLAY?"pause":"play",key:"play",active:t===n.PLAY||t===n.PAUSE,disabled:!y,bsStyle:t===n.PLAY||t===n.PAUSE?"success":"primary",onClick:function(){return t===n.PLAY?p():a()},tooltipId:y&&(t===n.PLAY?"playback.pause":t===n.PAUSE?"playback.paused":"playback.play")},{glyph:"stop",key:"stop",disabled:t!==n.PLAY&&t!==n.PAUSE,onClick:d,tooltip:!(t!==n.PLAY&&t!==n.PAUSE)&&r.createElement(v,{msgId:"playback.stop"})},{glyph:"step-forward",key:"forward",onClick:s,disabled:!y,tooltip:y&&r.createElement(v,{msgId:"playback.forwardStep"})},{glyph:"cog",key:"settings",bsStyle:t!==n.PLAY&&t!==n.PAUSE&&g?"success":"primary",active:(t!==n.PLAY||t!==n.PAUSE)&&!!g,disabled:t===n.PLAY||t===n.PAUSE,onClick:function(){return t!==n.PLAY&&h(!g)},tooltip:!(t===n.PLAY||t===n.PAUSE)&&r.createElement(v,{msgId:"playback.settings.tooltip"})}]}))}))},3319:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(88).connect,i=n(195).createSelector,s=n(12),c=n(407),l=c.compose,u=c.withProps,p=c.withHandlers,f=n(2261),d=f.playbackSettingsSelector,m=f.playbackRangeSelector,y=n(2208),g=y.selectedLayerSelector,b=y.rangeSelector,h=y.selectedLayerDataRangeSelector,v=n(2229),S=v.selectPlaybackRange,E=v.changeSetting,O=v.toggleAnimationMode,w=n(2191).onRangeChanged;e.exports=l(a(i(d,g,m,(function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({fixedStep:!t,playbackRange:n},e)})),{setPlaybackRange:S,onSettingChange:E,toggleAnimationMode:O}),l(a(i(b,h,(function(e,t){return{layerRange:t,viewRange:e}})),{moveTo:w}),p({toggleAnimationRange:function(e){var t=e.fixedStep,n=e.layerRange,r=e.viewRange,o=void 0===r?{}:r,a=e.setPlaybackRange,i=void 0===a?function(){}:a;return function(e){var r=t?o:n;r={startPlaybackTime:s(r&&r.start||new Date).subtract(1,"days").toISOString(),endPlaybackTime:s(r&&r.end||new Date).add(1,"days").toISOString()},i(e?r:void 0)}},setPlaybackToCurrentViewRange:function(e){var t=e.viewRange,n=void 0===t?{}:t,r=e.setPlaybackRange,o=void 0===r?function(){}:r;return function(){n.start&&n.end&&o({startPlaybackTime:s(n.start).toISOString(),endPlaybackTime:s(n.end).toISOString()})}},setPlaybackToCurrentLayerDataRange:function(e){var t=e.setPlaybackRange,n=void 0===t?function(){}:t,r=e.layerRange;return function(){return r&&n({startPlaybackTime:r.start,endPlaybackTime:r.end})}}}),u((function(e){var t=e.playbackRange,n=e.fixedStep,r=e.moveTo,o=void 0===r?function(){}:r,a=e.setPlaybackToCurrentViewRange,i=void 0===a?function(){}:a,s=e.setPlaybackToCurrentLayerDataRange,c=void 0===s?function(){}:s;return{playbackButtons:[{glyph:"search",tooltipId:"playback.settings.range.zoomToCurrentPlayackRange",onClick:function(){return o({start:t.startPlaybackTime,end:t.endPlaybackTime})}},{glyph:"resize-horizontal",tooltipId:"playback.settings.range.setToCurrentViewRange",onClick:function(){return i()}},{glyph:"1-layer",visible:!n,tooltipId:"playback.settings.range.fitToSelectedLayerRange",onClick:function(){return c()}}]}}))))(n(3320))},3320:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(12),c=n(13).isNaN,l=n(757),u=l.Form,p=l.FormGroup,f=l.ControlLabel,d=l.FormControl,m=l.InputGroup,y=n(2100),g=n(2262),b=n(2705),h=n(2480),v=n(2230),S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};try{if(!c(parseInt(e,10))){var r=parseInt(e,10);return t(r<1?1:r)}return n()}catch(e){return n(e)}},E=function(e){var t=e.startPlaybackTime,n=e.endPlaybackTime,r=s(t).diff(n);return{startPlaybackTime:r>=0?n:t,endPlaybackTime:r>=0?t:n}};e.exports=function(e){var t=e.following,n=e.frameDuration,r=e.timeStep,a=e.stepUnit,s=e.onSettingChange,c=void 0===s?function(){}:s,l=e.toggleAnimationMode,O=void 0===l?function(){}:l,w=e.toggleAnimationRange,A=void 0===w?function(){}:w,T=e.fixedStep,P=void 0!==T&&T,C=e.playbackRange,x=void 0===C?{}:C,_=e.setPlaybackRange,R=void 0===_?function(){}:_,I=e.playbackButtons,j=e.dateSelectorStyle,L=void 0===j?{padding:0,margin:0,border:"none"}:j,D=e.style,M=void 0===D?{}:D;return i.createElement("div",{className:"ms-playback-settings",style:M},i.createElement("h4",null,i.createElement(y,{msgId:"timeline.settings.title"})),i.createElement(p,{controlId:"timelineSettings"},i.createElement(u,{componentClass:"fieldset",inline:!0},i.createElement(f,null,i.createElement(y,{msgId:"timeline.settings.snapToGuideLayer"})," ",i.createElement(g,{text:i.createElement(y,{msgId:"timeline.settings.snapToGuideLayerTooltip"})})),i.createElement("span",null,i.createElement(h,{checked:!P,onChange:function(){return O()}})))),i.createElement("h4",null,i.createElement(y,{msgId:"playback.settings.title"})),i.createElement(p,{controlId:"frameDuration"},i.createElement(f,null,i.createElement(y,{msgId:"playback.settings.frameDuration"})),i.createElement(m,null,i.createElement(d,{componentClass:"input",type:"number",value:n,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?{}:t;return S(n.value,(function(e){c("frameDuration",e)}))}}),i.createElement(m.Addon,null,"s"))),i.createElement(f,null,i.createElement(y,{msgId:"playback.settings.step.label"})," ",i.createElement(g,{text:i.createElement(y,{msgId:"playback.settings.step.tooltip"})})),i.createElement(p,{controlId:"formPlaybackStep"},i.createElement(u,{componentClass:"fieldset",inline:!0},i.createElement(d,{disabled:!P,componentClass:"input",type:"number",style:{maxWidth:120},value:r,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?{}:t;return S(n.value,(function(e){c("timeStep",e)}))}}),i.createElement(d,{disabled:!P,componentClass:"select",value:a,onChange:function(e){var t=e.target;return c("stepUnit",(void 0===t?{}:t).value)}},i.createElement(y,{msgId:"playback.settings.step.year",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"years"},e)})),i.createElement(y,{msgId:"playback.settings.step.week",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"weeks"},e)})),i.createElement(y,{msgId:"playback.settings.step.day",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"days"},e)})),i.createElement(y,{msgId:"playback.settings.step.hour",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"hour"},e)})),i.createElement(y,{msgId:"playback.settings.step.minute",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"minutes"},e)})),i.createElement(y,{msgId:"playback.settings.step.second",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"seconds"},e)}))))),i.createElement(v,{onSwitch:function(e){return A(e)},expanded:x.startPlaybackTime&&x.endPlaybackTime,title:i.createElement(y,{msgId:"playback.settings.range.title"}),buttons:I},i.createElement(p,{controlId:"formPlaybackMode",style:{margin:10}},i.createElement(b,{tooltipId:"playback.settings.range.animationStart",glyph:"play",date:x.startPlaybackTime,onUpdate:function(e){return R(E(o({},x,{startPlaybackTime:e})))},style:L,showButtons:!0}),i.createElement(b,{glyph:"stop",tooltipId:"playback.settings.range.animationEnd",date:x.endPlaybackTime,onUpdate:function(e){return R(E(o({},x,{endPlaybackTime:e})))},style:L,showButtons:!0}))),i.createElement(p,{controlId:"formPlaybackFollowingMode"},i.createElement(u,{componentClass:"fieldset",inline:!0},i.createElement(f,null,i.createElement(y,{msgId:"playback.settings.mode.following"})," ",i.createElement(g,{text:i.createElement(y,{msgId:"playback.settings.mode.followingDescription"})})),i.createElement("span",null,i.createElement(h,{checked:t,onChange:function(e){return c("following",e)}})))))}},3321:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(2113),c=n.n(s),l=n(2100),u=n.n(l);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(s,e);var t,n,r,a,i=(t=s,function(){var e,n=g(t);if(y()){var r=g(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m(this,e)});function s(){return f(this,s),i.apply(this,arguments)}return n=s,(r=[{key:"render",value:function(){var e=this;return o.a.createElement(c.a,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:10}},buttons:[{glyph:this.props.checked?"chevron-down":"chevron-left",visible:!0,tooltip:this.props.checked?o.a.createElement(u.a,{msgId:"collapse"}):o.a.createElement(u.a,{msgId:"expand"}),onClick:function(){return e.props.onClick(!e.props.checked)}}]})}}])&&d(n.prototype,r),a&&d(n,a),s}(o.a.Component);h(v,"propTypes",{checked:i.a.bool,onClick:i.a.func}),h(v,"defaultProps",{checked:!1,onClick:function(){}}),t.default=v},3322:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(12),p=n(13).get,f=n(2229),d=f.PLAY,m=f.PAUSE,y=f.STOP,g=f.STATUS,b=f.SET_FRAMES,h=f.SET_CURRENT_FRAME,v=f.TOGGLE_ANIMATION_MODE,S=f.ANIMATION_STEP_MOVE,E=f.stop,O=f.setFrames,w=f.appendFrames,A=f.setCurrentFrame,T=f.framesLoading,P=f.updateMetadata,C=n(774),x=C.moveTime,_=C.SET_CURRENT_TIME,R=C.MOVE_TIME,I=n(2191),j=I.selectLayer,L=I.onRangeChanged,D=I.timeDataLoading,M=I.SELECT_LAYER,N=I.SET_MAP_SYNC,k=n(269),G=k.changeLayerProperties,F=k.REMOVE_NODE,U=n(161).error,B=n(767),H=B.currentTimeSelector,z=B.layersWithTimeDataSelector,V=B.layerTimeSequenceSelectorCreator,W=n(770).LOCATION_CHANGE,Y=n(2261),q=Y.currentFrameSelector,Z=Y.currentFrameValueSelector,K=Y.lastFrameSelector,Q=Y.playbackRangeSelector,X=Y.playbackSettingsSelector,J=Y.frameDurationSelector,$=Y.statusSelector,ee=Y.playbackMetadataSelector,te=n(2208),ne=te.selectedLayerSelector,re=te.selectedLayerName,oe=te.selectedLayerUrl,ae=te.selectedLayerData,ie=te.selectedLayerTimeDimensionConfiguration,se=te.rangeSelector,ce=te.timelineLayersSelector,le=te.multidimOptionsSelectorCreator,ue=n(3323),pe=n(2709).wrapStartStop,fe=n(798).getDomainValues,de=n(15),me=function(e,t){return"".concat(e,"/").concat(t)},ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ne(e()),r=re(e()),o=oe(e()),a=Q(e())||{},i=a.startPlaybackTime,s=a.endPlaybackTime,l=$(e())===g.PLAY||$(e())===g.PAUSE;return[o,r,"time",c({limit:20,time:i&&s&&l?me(i,s):void 0},t),le(n)(e())]},ge=function(e,t){if(re(e())){var n=V(ae(e()))(e()),r=ie(e());return"multidim-extension"!==p(r,"source.type")&&n&&n.length>0?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.fromValue,o=n.limit,a=void 0===o?20:o,i=Q(t())||{},s=i.startPlaybackTime,c=i.endPlaybackTime;return de.Observable.of(e.filter((function(e){return!s||!c||u(e).isSameOrAfter(s)&&u(e).isSameOrBefore(c)})).filter((function(e){return!r||u(e).isAfter(r)})).slice(0,a))}(n,e,t):fe.apply(void 0,o(ye(e,t))).map((function(e){return e.DomainValues.Domain.split(",")}))}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fromValue,r=t.limit,o=void 0===r?20:r,a=t.sort,i=void 0===a?"asc":a,s=X(e()),c=s.timeStep,l=s.stepUnit,p=u.duration(c,l),f=Q(e())||{},d=f.startPlaybackTime,m=f.endPlaybackTime,y=void 0!==n?n:d||H(e())||(new Date).toString(),g=[];y!==n&&g.push(u(y).toISOString());for(var b=0;b<o&&(y=u(y).add("asc"===i?p:-1*p),!m||y.isBefore(m));b++)g.push(y.toISOString());return de.Observable.of(g)}(e,t)},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}};return function(t){var n=z(e());return de.Observable.from(n.map((function(e){return G(e.id,{singleTile:!0})}))).concat(t).concat(de.Observable.from(n.map((function(e){return G(e.id,{singleTile:e.singleTile})}))))}},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.start,r=t.end;return n&&r&&(u(e).isBefore(n)||u(e).isAfter(r))};e.exports={retrieveFramesForPlayback:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(d).exhaustMap((function(){return ge(r,{fromValue:Q(r())&&Q(r()).startPlaybackTime&&Q(r()).endPlaybackTime?void 0:H(r())}).map((function(e){return O(e)})).let(pe(T(!0),T(!1)),(function(){return de.Observable.of(U({title:"There was an error retrieving animation",message:"Please contact the administrator"}),E())})).let(pe(D(!1,!0),D(!1,!1))).concat(e.ofType(h).filter((function(e){return e.frame%20==10})).switchMap((function(){return ge(r,{fromValue:K(r())}).map(w).let(pe(T(!0),T(!1)))}))).takeUntil(e.ofType(y,W)).concat(de.Observable.of(D(!1,!1))).let(be(r))}))},updateCurrentTimeFromAnimation:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(h).map((function(){return Z(r())})).map((function(e){return e?x(e):E()}))},timeDimensionPlayback:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(b).exhaustMap((function(){return de.Observable.interval(1e3*J(r())).startWith(0).let(ue(e.ofType(d,m).map((function(e){return e.type===d})))).map((function(){return A(q(r())+1)})).merge(e.ofType(S).map((function(e){var t=e.direction;return A(Math.max(0,q(r())+t))}))).concat(de.Observable.of(E())).takeUntil(e.ofType(y,W))}))},playbackToggleGuideLayerToFixedStep:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(v).exhaustMap((function(){return re(r())?de.Observable.of(j(void 0)):de.Observable.of(j(p(ce(r()),"[0].id")))}))},playbackMoveStep:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(S).filter((function(){return $(o())!==g.PLAY})).switchMap((function(e){var t=e.direction,n=void 0===t?1:t,a=ee(o())||{},i=H(o());return i&&a.forTime===i?de.Observable.of(n>0?a.next:a.previous):ge(o,{limit:1,sort:n>0?"asc":"desc",fromValue:H(o())}).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=r(e,1),n=t[0];return n}))})).filter((function(e){return!!e})).map((function(e){return x(e)}))},playbackCacheNextPreviousTimes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,a=void 0===n?function(){}:n;return e.ofType(_,R,M,y,N).filter((function(){return $(a())!==g.PLAY&&$(a())!==g.PAUSE})).filter((function(){return ne(a())})).filter((function(e){return!!e})).switchMap((function(e){var t=e.time||H(a());return de.Observable.forkJoin(fe.apply(void 0,o(ye(a,{sort:"asc",limit:1,fromValue:t}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return r(e,1)[0]})).catch((function(e){return e&&de.Observable.of(null)})),fe.apply(void 0,o(ye(a,{sort:"desc",limit:1,fromValue:t}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return r(e,1)[0]})).catch((function(e){return e&&de.Observable.of(null)}))).map((function(e){var n=r(e,2),o=n[0],a=n[1];return P({forTime:t,next:o,previous:a})}))}))},playbackFollowCursor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(R).filter((function(e){return(e.type===R||$(r())===g.PLAY)&&he(H(r()),se(r()))})).filter((function(){return p(X(r()),"following")})).switchMap((function(){return de.Observable.of(L((e=H(r()),t=se(r()),n=t.start,o=t.end,a=u(o).diff(u(n)),{start:e,end:u(e).add(a).toISOString()})));var e,t,n,o,a}))},playbackStopWhenDeleteLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(F).filter((function(){return!ne(r())&&"PLAY"===$(r())})).switchMap((function(){return de.Observable.of(E())}))}}},3323:function(e,t){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(o){return o.withLatestFrom(e.startWith(t)).filter((function(e){var t=n(e,2)[1];return r(t)})).map((function(e){return n(e,1)[0]}))}}},3324:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(2229),i=a.PLAY,s=a.PAUSE,c=a.STOP,l=a.STATUS,u=a.SET_FRAMES,p=a.APPEND_FRAMES,f=a.FRAMES_LOADING,d=a.SET_CURRENT_FRAME,m=a.SELECT_PLAYBACK_RANGE,y=a.CHANGE_SETTING,g=a.UPDATE_METADATA,b=n(267).RESET_CONTROLS,h=n(410).set,v={timeStep:1,stepUnit:"days",frameDuration:2,following:!0};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:l.STOP,currentFrame:-1,settings:v},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return h("status",l.PLAY,e);case s:return h("status",l.PAUSE,e);case c:return h("status",l.STOP,h("currentFrame",-1,e));case u:return h("frames",t.frames,h("currentFrame",-1,e));case f:return h("framesLoading",t.loading,e);case p:return h("frames",[].concat(r(e.frames||[]),r(t.frames)),e);case d:return h("currentFrame",t.frame,e);case m:return h("playbackRange",t.range,e);case y:return h("settings[".concat(t.name,"]"),t.value,e);case g:return h("metadata",{next:t.next,previous:t.previous,forTime:t.forTime},e);case b:return h("metadata",void 0,h("framesLoading",void 0,h("playbackRange",void 0,h("frames",void 0,h("currentFrame",-1,h("status","STOP",h("settings",v,e)))))));default:return e}}},3325:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(53),s=n(13),c=s.get,l=s.assign;function u(e,t){var n,r,a=t&&t.params;return a&&(n=a.start,r=a.limit),function(a,s){var u=e,p=s&&s();if(p){var f=c(p,"users.searchText");u=e||f||"*",n=null!=n?n:c(p,"users.start")||0,r=r||c(p,"users.limit")||12}return a(function(e,t,n){return{type:"USERMANAGER_GETUSERS",status:"loading",searchText:e,start:t,limit:n}}(u,n,r)),i.getUsers(u,o({},t,{params:{start:n,limit:r}})).then((function(e){var t;t=e&&e.ExtUserList&&e.ExtUserList.User?c(e,"ExtUserList.User"):[];var o=c(e,"ExtUserList.UserCount");t=(t=Array.isArray(t)?t:[t]).map((function(e){var t=c(e,"groups.group");return t=Array.isArray(t)?t:[t],l({},e,{groups:t})})),a(function(e,t,n,r,o){return{type:"USERMANAGER_GETUSERS",status:"success",searchText:e,start:t,limit:n,users:r,totalCount:o}}(u,n,r,t,o))})).catch((function(e){a(function(e,t,n,r){return{type:"USERMANAGER_GETUSERS",status:"error",searchText:e,start:t,limit:n,error:r}}(u,n,r,e))}))}}function p(e){return function(t){return t({type:"USERMANAGER_GETGROUPS",status:"loading"}),i.getAvailableGroups(e).then((function(e){t(function(e){return{type:"USERMANAGER_GETGROUPS",status:"success",groups:e}}(e))})).catch((function(e){t(function(e){return{type:"USERMANAGER_GETGROUPS",status:"error",error:e}}(e))}))}}function f(e){return{type:"USERMANAGER_EDIT_USER",status:"loading",user:e}}function d(e){return{type:"USERMANAGER_EDIT_USER",status:"success",user:e}}function m(e,t){return{type:"USERMANAGER_EDIT_USER",status:"error",user:e,error:t}}function y(e){return{type:"USERMANAGER_EDIT_USER",user:e}}function g(e){return{type:"USERMANAGER_UPDATE_USER",status:"saving",user:e}}function b(e){return{type:"USERMANAGER_UPDATE_USER",status:"saved",user:e&&e.User}}function h(e,t){return{type:"USERMANAGER_UPDATE_USER",status:"error",user:e,error:t}}function v(e){return{type:"USERMANAGER_UPDATE_USER",status:"creating",user:e}}function S(e,t){return{type:"USERMANAGER_UPDATE_USER",status:"created",user:o({},t,{id:e})}}function E(e,t){return{type:"USERMANAGER_UPDATE_USER",status:"error",user:e,error:t}}function O(e){return{type:"USERMANAGER_DELETE_USER",status:"deleting",id:e}}function w(e){return{type:"USERMANAGER_DELETE_USER",status:"deleted",id:e}}function A(e,t){return{type:"USERMANAGER_DELETE_USER",status:"error",id:e,error:t}}function T(e,t){return{type:"USERMANAGER_DELETE_USER",status:e,id:t}}e.exports={getUsers:u,USERMANAGER_GETUSERS:"USERMANAGER_GETUSERS",editUser:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{params:{includeattributes:!0}};return function(n,r){var a=r&&r();if(a&&(!a.users||!a.users.groups)){var s=a.security&&a.security.user;n(p(s||{role:"ADMIN"}))}e&&e.id?(n(f(e)),i.getUser(e.id,t).then((function(t){var r=t.User,a=r.attribute;a&&(r=o({},r,{attribute:Array.isArray(a)?a:[a]})),r&&(r=o({},r,{groups:e.groups})),n(d(r))})).catch((function(t){n(m(e,t))}))):n(y(e))}},USERMANAGER_EDIT_USER:"USERMANAGER_EDIT_USER",changeUserMetadata:function(e,t){return{type:"USERMANAGER_EDIT_USER_DATA",key:e,newValue:t}},USERMANAGER_EDIT_USER_DATA:"USERMANAGER_EDIT_USER_DATA",saveUser:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=l({},o({},e));if(r&&r.lastError&&delete r.lastError,r&&r.id)return n(g(r)),i.updateUser(r.id,o({},r,{groups:{group:r.groups}}),t).then((function(e){n(b(e)),n(u())})).catch((function(e){n(h(r,e))}));n(v(r));var a=o({},r);return r&&r.groups&&(a=o({},r,{groups:{group:r.groups.filter((function(e){return"everyone"!==e.groupName}))}})),i.createUser(a,t).then((function(e){n(S(e,r)),n(u())})).catch((function(e){n(E(r,e))}))}},USERMANAGER_UPDATE_USER:"USERMANAGER_UPDATE_USER",deleteUser:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"confirm";return"confirm"===t||"cancelled"===t?T(t,e):"delete"===t?function(t){t(O(e)),i.deleteUser(e).then((function(){t(w(e)),t(u())})).catch((function(n){t(A(e,n))}))}:function(){}},USERMANAGER_DELETE_USER:"USERMANAGER_DELETE_USER",getGroups:p,USERMANAGER_GETGROUPS:"USERMANAGER_GETGROUPS",usersSearchTextChanged:function(e){return{type:"USERS_SEARCH_TEXT_CHANGED",text:e}},USERS_SEARCH_TEXT_CHANGED:"USERS_SEARCH_TEXT_CHANGED"}}}]);