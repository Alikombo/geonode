(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{2103:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(412).FormattedMessage,m=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"renderFormattedMsg",(function(e){var t=e.msgId,n=e.msgParams,r=e.children;return r&&"function"==typeof r?f.createElement(d,{id:t,values:n},(function(e){return r(e)})):f.createElement(d,{id:t,values:n})})),u(l(n),"renderMsg",(function(e){var t=e.msgId,n=e.children;return n&&"function"==typeof n?n(t):f.createElement("span",null,t||"")})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return this.context.intl?this.renderFormattedMsg(this.props):this.renderMsg(this.props)}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(m,"propTypes",{msgId:p.string.isRequired,msgParams:p.object}),u(m,"contextTypes",{intl:p.object}),e.exports=m},2114:function(e,t,n){var r=n(2354);e.exports=r(n(758).OverlayTrigger)},2116:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a=n(1),i=n(758).ButtonGroup,s=n(2662),l=n(2470);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buttons,n=void 0===t?[]:t,c=e.btnGroupProps,u=void 0===c?{}:c,p=e.btnDefaultProps,f=void 0===p?{}:p,d=e.transitionProps,m=void 0===d?{transitionName:"toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}:d,y=function(){return n.map((function(e,t){var n=e.visible,i=void 0===n||n,l=e.Element,c=e.renderButton,u=o(e,["visible","Element","renderButton"]);return i?c||(l&&a.createElement(l,r({key:u.key||t},u))||a.createElement(s,r({key:u.key||t},f,u))):null}))};return a.createElement(i,u,m?a.createElement(l,m,y()):y())}},2119:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1);e.exports=function(e){var t=e.id,n=e.children,r=e.header,a=e.footer,s=e.columns,l=e.height,c=e.style,u=void 0===c?{}:c,p=e.className,f=e.bodyClassName,d=void 0===f?"ms2-border-layout-body":f;return i.createElement("div",{id:t,className:p,style:o({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden"},u)},r,i.createElement("div",{className:d,style:{display:"flex",flex:1,overflowY:"auto"}},i.createElement("main",{className:"ms2-border-layout-content",style:{flex:1}},l?i.createElement("div",{style:{height:l}},n):n),l?i.createElement("div",{style:{height:l}},s):s),a)}},2133:function(e,t){var n="FEATUREGRID:TOGGLE_MODE",r="FEATUREGRID:INIT_PLUGIN",o={EDIT:"EDIT",VIEW:"VIEW"};e.exports={SELECT_FEATURES:"FEATUREGRID:SELECT_FEATURES",DESELECT_FEATURES:"FEATUREGRID:DESELECT_FEATURES",CLEAR_SELECTION:"FEATUREGRID:CLEAR_SELECTION",TOGGLE_FEATURES_SELECTION:"FEATUREGRID:TOGGLE_FEATURES_SELECTION",SET_SELECTION_OPTIONS:"FEATUREGRID:SET_SELECTION_OPTIONS",SET_FEATURES:"SET_FEATURES",FEATURES_MODIFIED:"FEATUREGRID:FEATURES_MODIFIED",CREATE_NEW_FEATURE:"FEATUREGRID:NEW_FEATURE",SAVE_CHANGES:"FEATUREGRID:SAVE_CHANGES",CLEAR_CHANGES:"FEATUREGRID:CLEAR_CHANGES",SAVE_SUCCESS:"FEATUREGRID:SAVE_SUCCESS",SAVE_ERROR:"FEATUREGRID:SAVE_ERROR",DELETE_SELECTED_FEATURES_CONFIRM:"FEATUREGRID:DELETE_SELECTED_FEATURES_CONFIRM",DELETE_SELECTED_FEATURES:"FEATUREGRID:DELETE_SELECTED_FEATURES",DOCK_SIZE_FEATURES:"DOCK_SIZE_FEATURES",SORT_BY:"FEATUREGRID:SORT_BY",CHANGE_PAGE:"FEATUREGRID:CHANGE_PAGE",SET_LAYER:"FEATUREGRID:SET_LAYER",TOGGLE_TOOL:"FEATUREGRID:TOGGLE_TOOL",CUSTOMIZE_ATTRIBUTE:"FEATUREGRID:CUSTOMIZE_ATTRIBUTE",TOGGLE_MODE:n,MODES:o,SAVING:"FEATUREGRID:SAVING",SET_PERMISSION:"FEATUREGRID:SET_PERMISSION",setPermission:function(e){return{type:"FEATUREGRID:SET_PERMISSION",permission:e}},START_EDITING_FEATURE:"FEATUREGRID:START_EDITING_FEATURE",startEditingFeature:function(){return{type:"FEATUREGRID:START_EDITING_FEATURE"}},START_DRAWING_FEATURE:"FEATUREGRID:START_DRAWING_FEATURE",startDrawingFeature:function(){return{type:"FEATUREGRID:START_DRAWING_FEATURE"}},GEOMETRY_CHANGED:"FEATUREGRID:GEOMETRY_CHANGED",geometryChanged:function(e){return{type:"FEATUREGRID:GEOMETRY_CHANGED",features:e}},DELETE_GEOMETRY:"FEATUREGRID:DELETE_GEOMETRY",deleteGeometry:function(){return{type:"FEATUREGRID:DELETE_GEOMETRY"}},DELETE_GEOMETRY_FEATURE:"FEATUREGRID:DELETE_GEOMETRY_FEATURE",deleteGeometryFeature:function(e){return{type:"FEATUREGRID:DELETE_GEOMETRY_FEATURE",features:e}},CLEAR_CHANGES_CONFIRMED:"FEATUREGRID:CLEAR_CHANGES_CONFIRMED",clearChangeConfirmed:function(){return{type:"FEATUREGRID:CLEAR_CHANGES_CONFIRMED"}},CLOSE_FEATURE_GRID:"FEATUREGRID:CLOSE_GRID",closeFeatureGrid:function(){return{type:"FEATUREGRID:CLOSE_GRID"}},OPEN_FEATURE_GRID:"FEATUREGRID:OPEN_GRID",openFeatureGrid:function(){return{type:"FEATUREGRID:OPEN_GRID"}},CLOSE_FEATURE_GRID_CONFIRM:"ASK_CLOSE_FEATURE_GRID_CONFIRM",closeFeatureGridConfirm:function(){return{type:"ASK_CLOSE_FEATURE_GRID_CONFIRM"}},FEATURE_GRID_CLOSE_CONFIRMED:"FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",closeFeatureGridConfirmed:function(){return{type:"FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED"}},SET_UP:"FEATUREGRID:SET_UP",setUp:function(e){return{type:"FEATUREGRID:SET_UP",options:e}},DISABLE_TOOLBAR:"FEATUREGRID:DISABLE_TOOLBAR",disableToolbar:function(e){return{type:"FEATUREGRID:DISABLE_TOOLBAR",disabled:e}},OPEN_ADVANCED_SEARCH:"FEATUREGRID:ADVANCED_SEARCH",openAdvancedSearch:function(){return{type:"FEATUREGRID:ADVANCED_SEARCH"}},ZOOM_ALL:"FEATUREGRID:ZOOM_ALL",zoomAll:function(){return{type:"FEATUREGRID:ZOOM_ALL"}},UPDATE_FILTER:"QUERY:UPDATE_FILTER",updateFilter:function(e){return{type:"QUERY:UPDATE_FILTER",update:e}},SIZE_CHANGE:"FEATUREGRID:SIZE_CHANGE",sizeChange:function(e,t){return{type:"FEATUREGRID:SIZE_CHANGE",size:e,dockProps:t}},setLayer:function(e){return{type:"FEATUREGRID:SET_LAYER",id:e}},selectFeatures:function(e,t){return{type:"FEATUREGRID:SELECT_FEATURES",features:e,append:t}},deselectFeatures:function(e){return{type:"FEATUREGRID:DESELECT_FEATURES",features:e}},setSelectionOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,n=void 0!==t&&t;return{type:"FEATUREGRID:SET_SELECTION_OPTIONS",multiselect:n}},clearSelection:function(){return{type:"FEATUREGRID:CLEAR_SELECTION"}},toggleSelection:function(e){return{type:"FEATUREGRID:TOGGLE_FEATURES_SELECTION",features:e}},setFeatures:function(e){return{type:"SET_FEATURES",features:e}},featureModified:function(e,t){return{type:"FEATUREGRID:FEATURES_MODIFIED",features:e,updated:t}},createNewFeatures:function(e){return{type:"FEATUREGRID:NEW_FEATURE",features:e}},saveChanges:function(){return{type:"FEATUREGRID:SAVE_CHANGES"}},featureSaving:function(){return{type:"FEATUREGRID:SAVING"}},clearChanges:function(){return{type:"FEATUREGRID:CLEAR_CHANGES"}},saveSuccess:function(){return{type:"FEATUREGRID:SAVE_SUCCESS"}},saveError:function(){return{type:"FEATUREGRID:SAVE_ERROR"}},deleteFeaturesConfirm:function(){return{type:"FEATUREGRID:DELETE_SELECTED_FEATURES_CONFIRM"}},deleteFeatures:function(){return{type:"FEATUREGRID:DELETE_SELECTED_FEATURES"}},dockSizeFeatures:function(e){return{type:"DOCK_SIZE_FEATURES",dockSize:e}},sort:function(e,t){return{type:"FEATUREGRID:SORT_BY",sortBy:e,sortOrder:t}},changePage:function(e,t){return{type:"FEATUREGRID:CHANGE_PAGE",page:e,size:t}},toggleTool:function(e,t){return{type:"FEATUREGRID:TOGGLE_TOOL",tool:e,value:t}},customizeAttribute:function(e,t,n){return{type:"FEATUREGRID:CUSTOMIZE_ATTRIBUTE",name:e,key:t,value:n}},toggleEditMode:function(){return{type:n,mode:o.EDIT}},toggleViewMode:function(){return{type:n,mode:o.VIEW}},initPlugin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:r,options:e}},INIT_PLUGIN:r,hideSyncPopover:function(){return{type:"FEATUREGRID:HIDE_SYNC_POPOVER"}},HIDE_SYNC_POPOVER:"FEATUREGRID:HIDE_SYNC_POPOVER",toggleShowAgain:function(){return{type:"FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG"}},TOGGLE_SHOW_AGAIN_FLAG:"FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",START_SYNC_WMS:"FEATUREGRID:START_SYNC_WMS",startSyncWMS:function(){return{type:"FEATUREGRID:START_SYNC_WMS"}},STOP_SYNC_WMS:"FEATUREGRID:STOP_SYNC_WMS",storeAdvancedSearchFilter:function(e){return{type:"STORE_ADVANCED_SEARCH_FILTER",filterObj:e}},STORE_ADVANCED_SEARCH_FILTER:"STORE_ADVANCED_SEARCH_FILTER",moreFeatures:function(e){return{type:"LOAD_MORE_FEATURES",pages:e}},LOAD_MORE_FEATURES:"LOAD_MORE_FEATURES",fatureGridQueryResult:function(e,t){return{type:"FEATUREGRID:QUERY_RESULT",features:e,pages:t}},GRID_QUERY_RESULT:"FEATUREGRID:QUERY_RESULT",setTimeSync:function(e){return{type:"FEATUREGRID:SET_TIME_SYNC",value:e}},SET_TIME_SYNC:"FEATUREGRID:SET_TIME_SYNC"}},2135:function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n(1),a=n(407).branch,i=n(758).Tooltip,s=n(2114),l=n(2103),c=n(13).omit;e.exports=a((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tooltip,n=e.tooltipId;return t||n}),(function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.tooltip,a=t.tooltipId,c=t.tooltipPosition,u=void 0===c?"top":c,p=t.tooltipTrigger,f=t.keyProp,d=t.idDropDown,m=r(t,["tooltip","tooltipId","tooltipPosition","tooltipTrigger","keyProp","idDropDown"]);return o.createElement(s,{trigger:p,id:d,key:f,placement:u,overlay:o.createElement(i,{id:"tooltip-"+{keyProp:f}},a?o.createElement(l,{msgId:a}):n)},o.createElement(e,m))}}),(function(e){return function(t){return o.createElement(e,c(t,["tooltipId","tooltip"]),t.children)}}))},2140:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(13).head,s=n(268).mapSelector,l=n(196).parseLayoutValue,c=function(e){return e.maplayout&&e.maplayout.layout||{}},u=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=c(e),r=!!i(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})));return r};e.exports={mapLayoutSelector:c,mapLayoutValuesSelector:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){return o({},e,a({},t,n[t]))}),{})||{}},checkConditionsSelector:p,rightPanelOpenSelector:function(e){return p(e,[{key:"right",value:658}])},bottomPanelOpenSelector:function(e){return p(e,[{key:"bottom",value:30,type:"not"}])},boundingMapRectSelector:u,mapPaddingSelector:function(e){var t=s(e),n=u(e);return n&&t&&t.size&&{left:l(n.left,t.size.width),bottom:l(n.bottom,t.size.height),right:l(n.right,t.size.width),top:l(n.top,t.size.height)}}}},2144:function(e,t){var n=function(e){return e&&e.maptype&&e.maptype.mapType||"leaflet"};e.exports={mapTypeSelector:n,isCesium:function(e){return"cesium"===n(e)},isLeaflet:function(e){return"leaflet"===n(e)},isOpenlayers:function(e){return"openlayers"===n(e)}}},2149:function(e,t,n){var r=n(2354);e.exports=r(n(4283).Portal)},2152:function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(13),l=s.get,c=s.findIndex,u=s.isNil,p=s.fill,f=s.isArray,d=n(765),m=d.getFeatureTypeProperties,y=d.isGeometryType,g=d.isValid,b=d.isValidValueForPropertyName,h=d.findGeometryProperty,v=d.getPropertyDesciptor,S=function(e,t){return"geometry"===e?function(e){return l(h(e),"name")}(t):e},E=function(e,t,n){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return c(e,(function(e){return e<=n&&n<e+t}))}(t,n,e);return-1===r?r:r*n+e-t[r]},O={id:"empty_row",get:function(){}},w=function(e,t){var n=Object.keys(t).filter((function(e){return"geometry"!==e})).reduce((function(e,n){return a({},e,i({},n,t[n]))}),{}),r=Object.keys(t).filter((function(e){return"geometry"===e})).reduce((function(e,n){return a({},e,i({},n,t[n]))}),{});return a({},e,{},r,{properties:a({},e&&e.properties||{},{},n)})},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=c(e,t);return o>=0?e.map((function(e,t){return t===o?n:e})):[].concat(r(e),[n])},A=function(e){return(m(e)||[]).filter((function(e){return!y(e)}))},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return t.map((function(t){return n<=t&&t<=r?0:Math.abs(t-e)})).reduce((function(e,t,n,r){return t>r[e]&&n||e}),0)},C=function(e,t){return t.filter((function(t,n){return n!==e}))},_=function(e,t,n){return e.filter((function(e,r){return r<t||r>=t+n}))},x=function(e,t,n,r){for(var o,a,i=e;i<=t&&void 0===o;i++)-1===E(i*r,n,r)&&(o=i);for(var s=t;s>=e&&void 0===a;s--)-1===E(s*r,n,r)&&(a=s);return[o,a].filter((function(e){return void 0!==e}))};e.exports={getAttributeFields:A,featureTypeToGridColumns:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.editable,o=void 0!==r&&r,a=n.sortable,i=void 0===a||a,s=n.resizable,l=void 0===s||s,c=n.filterable,u=void 0===c||c,p=n.defaultSize,f=void 0===p?200:p,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},m=d.getEditor,y=void 0===m?function(){}:m,g=d.getFilterRenderer,b=void 0===g?function(){}:g,h=d.getFormatter,v=void 0===h?function(){}:h;return A(e).filter((function(e){return!(t[e.name]&&t[e.name].hide)})).map((function(e){return{sortable:i,key:e.name,width:t[e.name]&&t[e.name].width||f||void 0,name:e.name,resizable:l,editable:o,filterable:u,editor:y(e),formatter:v(e),filterRenderer:b(e,e.name)}}))},getRow:function(e,t){return t[e]},getRowVirtual:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;return t[E(e,n,r)]||a({},O)},getToolColumns:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return e.map((function(e){return a({},e,{events:e.events&&Object.keys(e.events).reduce((function(o,s){return a({},o,i({},s,(function(o,a){return e.events[s](t(a.rowIdx),a,n,r)})))}),{})})}))},getGridEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return Object.keys(e).reduce((function(s,l){return a({},s,i({},l,(function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return e[l].apply(e,i.concat([t,n,r,o]))})))}),{})},isProperty:function(e,t){return!!v(e,t)},isValidValueForPropertyName:function(e,t,n){return b(e,S(t,n),n)},getDefaultFeatureProjection:function(){return"EPSG:4326"},toChangesMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return f(e)?e.reduce((function(e,t){return a({},e,i({},t.id,a({},e[t.id],{},t.updated)))}),{}):{}},createNewAndEditingFilter:function(e,t,n){return function(r){return t.length>0?r._new:!e||e&&!!n[r.id]}},hasValidNewFeatures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.map((function(e){return g(e,t)})).reduce((function(e,t){return t&&e}),!0)},applyAllChanges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w(e,t[e.id]||{})},applyChanges:w,gridUpdateToQueryUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attribute,n=e.operator,r=e.value,o=e.type,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a({},i,{groupFields:[{id:1,logic:"AND",index:0}],filterFields:u(r)?(i.filterFields||[]).filter((function(e){return e.attribute!==t})):T(i.filterFields||[],{attribute:t},{attribute:t,rowId:Date.now(),type:o,groupId:1,operator:n,value:r})})},toPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startIndex,n=void 0===t?0:t,r=e.maxFeatures,o=void 0===r?1:r,a=e.totalFeatures,i=void 0===a?0:a,s=e.resultSize;return{page:Math.ceil(n/o),resultSize:s,size:o,total:i,maxPages:Math.ceil(i/o)-1}},getCurrentPaginationOptions:function(e,t,n){var r=e.startPage,o=e.endPage,a=x(r,o,t,n),i=a[1]-a[0]+1;return{startIndex:a[0]*n,maxFeatures:i*n}},updatePages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.endPage,r=t.startPage,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.pages,i=o.features,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=s.size,u=s.maxStoredPages,f=s.startIndex,d=x(r,n,a,c),m=d[1]-d[0]+1,y=l(e,"features",[]);y.length!==m*c&&(y=y.concat(p(Array(m*c-y.length),!1)));var g=a,b=i,h=g.length+m-Math.max(u,n-r+1);if(h>0)for(var v=r*c,S=n*c,E=v+(S-v)/2,O=0;O<h;O++){var w=P(E,a,v,S),T=w*c;g=C(w,g),b=_(i,T,c)}for(var A=[],I=0;I<m;I++)A.push(f+c*I);return{pages:g.concat(A),features:b.concat(y)}},getRowIdx:E,getPagesToLoad:x}},2161:function(e,t,n){var r=n(1),o=n(407).branch,a=n(2469),i=function(e){var t=e.loading,n=e.isLoading;return t||n&&("function"==typeof n?n():!0===n)};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;return o(e,(function(){return function(){return r.createElement(n,t)}}))}},2168:function(e,t,n){var r=n(2579);function o(e){return{type:"SHOW_REVERSE_GEOCODE",reverseGeocodeData:e.data}}e.exports={ERROR_FEATURE_INFO:"ERROR_FEATURE_INFO",EXCEPTIONS_FEATURE_INFO:"EXCEPTIONS_FEATURE_INFO",LOAD_FEATURE_INFO:"LOAD_FEATURE_INFO",CHANGE_MAPINFO_STATE:"CHANGE_MAPINFO_STATE",NEW_MAPINFO_REQUEST:"NEW_MAPINFO_REQUEST",PURGE_MAPINFO_RESULTS:"PURGE_MAPINFO_RESULTS",CHANGE_MAPINFO_FORMAT:"CHANGE_MAPINFO_FORMAT",SHOW_MAPINFO_MARKER:"SHOW_MAPINFO_MARKER",HIDE_MAPINFO_MARKER:"HIDE_MAPINFO_MARKER",SHOW_REVERSE_GEOCODE:"SHOW_REVERSE_GEOCODE",HIDE_REVERSE_GEOCODE:"HIDE_REVERSE_GEOCODE",GET_VECTOR_INFO:"GET_VECTOR_INFO",NO_QUERYABLE_LAYERS:"NO_QUERYABLE_LAYERS",CLEAR_WARNING:"CLEAR_WARNING",FEATURE_INFO_CLICK:"FEATURE_INFO_CLICK",TOGGLE_HIGHLIGHT_FEATURE:"IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",toggleHighlightFeature:function(e){return{type:"IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",enabled:e}},CHANGE_PAGE:"IDENTIFY:CHANGE_PAGE",changePage:function(e){return{type:"IDENTIFY:CHANGE_PAGE",index:e}},TOGGLE_MAPINFO_STATE:"TOGGLE_MAPINFO_STATE",UPDATE_CENTER_TO_MARKER:"UPDATE_CENTER_TO_MARKER",CLOSE_IDENTIFY:"IDENTIFY:CLOSE_IDENTIFY",TOGGLE_EMPTY_MESSAGE_GFI:"IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",toggleEmptyMessageGFI:function(){return{type:"IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI"}},TOGGLE_SHOW_COORD_EDITOR:"IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",toggleShowCoordinateEditor:function(e){return{type:"IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",showCoordinateEditor:e}},CHANGE_FORMAT:"IDENTIFY:CHANGE_FORMAT",changeFormat:function(e){return{type:"IDENTIFY:CHANGE_FORMAT",format:e}},closeIdentify:function(){return{type:"IDENTIFY:CLOSE_IDENTIFY"}},exceptionsFeatureInfo:function(e,t,n,r){return{type:"EXCEPTIONS_FEATURE_INFO",reqId:e,exceptions:t,requestParams:n,layerMetadata:r}},changeMapInfoState:function(e){return{type:"CHANGE_MAPINFO_STATE",enabled:e}},newMapInfoRequest:function(e,t){return{type:"NEW_MAPINFO_REQUEST",reqId:e,request:t}},purgeMapInfoResults:function(){return{type:"PURGE_MAPINFO_RESULTS"}},changeMapInfoFormat:function(e){return{type:"CHANGE_MAPINFO_FORMAT",infoFormat:e}},showMapinfoMarker:function(){return{type:"SHOW_MAPINFO_MARKER"}},hideMapinfoMarker:function(){return{type:"HIDE_MAPINFO_MARKER"}},revGeocodeInfo:o,hideMapinfoRevGeocode:function(){return{type:"HIDE_REVERSE_GEOCODE"}},showMapinfoRevGeocode:function(e){return function(t){r.reverseGeocode(e).then((function(e){t(o(e))})).catch((function(e){t(o(e))}))}},getVectorInfo:function(e,t,n){return{type:"GET_VECTOR_INFO",layer:e,request:t,metadata:n}},noQueryableLayers:function(){return{type:"NO_QUERYABLE_LAYERS"}},clearWarning:function(){return{type:"CLEAR_WARNING"}},errorFeatureInfo:function(e,t,n,r){return{type:"ERROR_FEATURE_INFO",error:t,reqId:e,requestParams:n,layerMetadata:r}},loadFeatureInfo:function(e,t,n,r){return{type:"LOAD_FEATURE_INFO",data:t,reqId:e,requestParams:n,layerMetadata:r}},toggleMapInfoState:function(){return{type:"TOGGLE_MAPINFO_STATE"}},updateCenterToMarker:function(e){return{type:"UPDATE_CENTER_TO_MARKER",status:e}},featureInfoClick:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:"FEATURE_INFO_CLICK",point:e,layer:t,filterNameList:n,overrideParams:r,itemId:o}}}},2169:function(e,t){function n(e,t,n,r,o,a){return{type:"CHANGE_DRAWING_STATUS",status:e,method:t,owner:n,features:r,options:o,style:a}}e.exports={CHANGE_DRAWING_STATUS:"CHANGE_DRAWING_STATUS",changeDrawingStatus:n,drawSupportReset:function(e){return n("clean","",e,[],{})},END_DRAWING:"DRAW:END_DRAWING",endDrawing:function(e,t){return{type:"DRAW:END_DRAWING",geometry:e,owner:t}},SET_CURRENT_STYLE:"DRAW:SET_CURRENT_STYLE",setCurrentStyle:function(e){return{type:"DRAW:SET_CURRENT_STYLE",currentStyle:e}},FEATURES_SELECTED:"DRAW:FEATURES_SELECTED",selectFeatures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"DRAW:FEATURES_SELECTED",features:e}},DRAWING_FEATURE:"DRAW:DRAWING_FEATURES",drawingFeatures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"DRAW:DRAWING_FEATURES",features:e}},DRAW_SUPPORT_STOPPED:"DRAW:DRAW_SUPPORT_STOPPED",drawStopped:function(){return{type:"DRAW:DRAW_SUPPORT_STOPPED"}},GEOMETRY_CHANGED:"DRAW:GEOMETRY_CHANGED",geometryChanged:function(e,t,n,r,o){return{type:"DRAW:GEOMETRY_CHANGED",features:e,owner:t,enableEdit:n,textChanged:r,circleChanged:o}}}},2170:function(e,t){e.exports=window.Cesium},2173:function(e,t,n){var r=n(1),o=n(758).Glyphicon,a=n(2261),i=n(2116),s=n(407).withState,l=n(2470),c=n(2262),u={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},p={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};e.exports=s("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,n=void 0!==t&&t,s=e.loading,f=e.onClose,d=void 0===f?function(){}:f,m=e.title,y=void 0===m?"":m,g=e.clickOutEnabled,b=void 0===g||g,h=e.showClose,v=void 0===h||h,S=e.disabledClose,E=void 0!==S&&S,O=e.showFullscreen,w=void 0!==O&&O,T=e.fullscreenType,A=void 0===T?"full":T,P=e.buttons,C=void 0===P?[]:P,_=e.size,x=void 0===_?"":_,I=e.bodyClassName,j=void 0===I?"":I,L=e.children,R=e.draggable,D=void 0!==R&&R,N=e.fullscreenState,M=e.onFullscreen,k=e.fade,G=void 0!==k&&k,F=e.fitContent,U=e.modalClassName,B=void 0===U?"":U,H=u[x]||"",z=w&&"expanded"===N&&p.className[A]||"",V=n?r.createElement("div",{className:"modal-fixed ".concat(B," ")+(D?"ms-draggable":"")},r.createElement(a,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:b?d:function(){},containerClassName:"ms-resizable-modal",draggable:D,modal:!0,className:"modal-dialog modal-content"+H+z+(F?" ms-fit-content":"")},r.createElement("span",{role:"header"},r.createElement("h4",{className:"modal-title"},r.createElement("div",{className:"ms-title"},y),w&&p.className[A]&&r.createElement(o,{className:"ms-header-btn",onClick:function(){return M("expanded"===N?"collapsed":"expanded")},glyph:p.glyph[N][A]}),v&&d&&r.createElement(o,{glyph:"1-close",className:"ms-header-btn",onClick:d,disabled:E}))),r.createElement("div",{role:"body",className:j},L),r.createElement("div",{role:"footer"},s?r.createElement(c,{style:{position:"absolute",left:0,bottom:0,margin:18}}):null,r.createElement(i,{buttons:C})))):null;return G?r.createElement(l,{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},V):V}))},2183:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(13),i=a.head,s=a.get,l=a.isObject,c=n(408).getLayerFromId,u=n(765).findGeometryProperty,p=n(767).currentLocaleSelector,f=n(196).isSimpleGeomType,d=n(2152).toChangesMap,m=n(768).layerDimensionSelectorCreator,y=c,g=function(e){return s(e,"featuregrid.selectedLayer")},b=function(e,t){return s(e,"featuregrid.attributes[".concat(t.name||t.attribute,"]"))},h=n(2199),v=h.attributesSelector,S=h.describeSelector,E=function(e){return e&&e.featuregrid&&e.featuregrid.select},O=function(e){return e&&e.featuregrid&&e.featuregrid.changes},w=function(e){return e&&e.featuregrid&&e.featuregrid.newFeatures},T=function(e){return i(E(e))},A=function(e){var t=S(e);if(t){var n=u(t);return n&&n.localType}return null},P=["Geometry","GeometryCollection"],C=function(e){return O(e)&&O(e).length>0},_=function(e){return w(e)&&w(e).length>0},x=function(e){return e&&e.featuregrid&&e.featuregrid.filters};e.exports={isFeatureGridOpen:function(e){return e&&e.featuregrid&&e.featuregrid.open},getAttributeFilters:x,getAttributeFilter:function(e,t){return s(x(e),t)},selectedLayerIdSelector:g,getCustomAttributeSettings:b,getTitleSelector:function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.title||e.name}(y(e,g(e)));return l(t)?t[p(e)]||t.default||"":t},getCustomizedAttributes:function(e){return(v(e)||[]).map((function(t){var n=b(e,t);return n?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},n):t}))},modeSelector:function(e){return e&&e.featuregrid&&e.featuregrid.mode},selectedFeaturesSelector:E,selectedFeatureSelector:T,selectedFeaturesCount:function(e){return(E(e)||[]).length},changesSelector:O,toChangesMap:d,changesMapSelector:function(e){return d(O(e))},hasChangesSelector:C,hasGeometrySelector:function(e){return function(e){var t=T(e);if(t){var n=d(O(e));return!(!n[t.id]||null===n[t.id].geometry)||(!n[t.id]||null!==n[t.id].geometry)&&((!t._new||!i(w(e))||null!==i(w(e)).geometry)&&(!(!t._new||!i(w(e))||null===i(w(e)).geometry)||null!==t.geometry))}return!1}(e)},newFeaturesSelector:w,hasNewFeaturesSelector:_,showAgainSelector:function(e){return s(e,"featuregrid.showAgain",!1)},showTimeSync:function(e){if(s(e,"featuregrid.showTimeSync",!1)){var t=g(e);return m({id:t},"time")(e)}return null},timeSyncActive:function(e){return s(e,"featuregrid.timeSync",!1)},showPopoverSyncSelector:function(e){return s(e,"featuregrid.showPopoverSync",!0)},isSavingSelector:function(e){return e&&e.featuregrid&&e.featuregrid.saving},editingAllowedRolesSelector:function(e){return s(e,"featuregrid.editingAllowedRoles",["ADMIN"])},isSavedSelector:function(e){return e&&e.featuregrid&&e.featuregrid.saved},isDrawingSelector:function(e){return e&&e.featuregrid&&e.featuregrid.drawing},geomTypeSelectedFeatureSelector:A,chartDisabledSelector:function(e){return s(e,"featuregrid.chartDisabled",!1)},hasNewFeaturesOrChanges:function(e){return _(e)||C(e)},isSimpleGeomSelector:function(e){return f(A(e))},canEditSelector:function(e){return e&&e.featuregrid&&e.featuregrid.canEdit},hasSupportedGeometry:function(e){return!i(P.filter((function(t){return A(e)===t})))},getDockSize:function(e){return e.featuregrid&&e.featuregrid.dockSize},selectedLayerNameSelector:function(e){var t=y(e,g(e));return t&&t.name||""},queryOptionsSelector:function(e){var t=function(e){return s(y(e,g(e)),"params")}(e);return{viewParams:t&&(t.VIEWPARAMS||t.viewParams||t.viewparams),cqlFilter:t&&(t.CQL_FILTER||t.cqlFilter||t.cql_filter)}}}},2192:function(e,t,n){var r=n(88).connect;e.exports=r((function(e){return{locale:e.locale&&e.locale.currentLocale,messages:e.locale&&e.locale.messages||[]}}))(n(2103))},2193:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(195).createSelector,i=n(13),s=i.get,l=i.pick,c=function(e){return s(e,"catalog.default.staticServices")},u=function(e){return s(e,"catalog.services")},p=a(c,u,(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},l(e,"default_map_backgrounds"))})),f=function(e){return s(e,'catalog.default.staticServices["'.concat(s(e,"catalog.selectedService"),'"].type'),"csw")};e.exports={groupSelector:function(e){return s(e,"controls.metadataexplorer.group")},savingSelector:function(e){return s(e,"catalog.saving")},resultSelector:function(e){return s(e,"catalog.result")},serviceListOpenSelector:function(e){return s(e,"catalog.openCatalogServiceList")},newServiceSelector:function(e){return s(e,"catalog.newService")},staticServicesSelector:c,servicesSelector:u,servicesSelectorWithBackgrounds:p,newServiceTypeSelector:function(e){return s(e,"catalog.newService.type","csw")},selectedCatalogSelector:function(e){return s(e,'catalog.services["'.concat(s(e,"catalog.selectedService"),'"]'))},selectedStaticServiceTypeSelector:f,selectedServiceTypeSelector:function(e){return s(e,'catalog.services["'.concat(s(e,"catalog.selectedService"),'"].type'),f(e))},searchOptionsSelector:function(e){return s(e,"catalog.searchOptions")},formatsSelector:function(e){return s(e,"catalog.supportedFormats")||[{name:"csw",label:"CSW"},{name:"wms",label:"WMS"},{name:"wmts",label:"WMTS"}]},loadingErrorSelector:function(e){return s(e,"catalog.loadingError")},loadingSelector:function(e){return s(e,"catalog.loading",!1)},selectedServiceSelector:function(e){return s(e,"catalog.selectedService")},modeSelector:function(e){return s(e,"catalog.mode","view")},layerErrorSelector:function(e){return s(e,"catalog.layerError")},searchTextSelector:function(e){return s(e,"catalog.searchOptions.text","")},activeSelector:function(e){return"metadataexplorer"===s(e,"controls.toolbar.active")||s(e,"controls.metadataexplorer.enabled")},authkeyParamNameSelector:function(e){return(s(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},pageSizeSelector:function(e){return s(e,"catalog.pageSize",4)},delayAutoSearchSelector:function(e){return s(e,"catalog.delayAutoSearch",1e3)}}},2194:function(e,t){e.exports={RANGE_CHANGED:"TIMELINE:RANGE_CHANGE",onRangeChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,n=e.end;return{type:"TIMELINE:RANGE_CHANGE",start:t,end:n}},SELECT_TIME:"TIMELINE:SELECT_TIME",selectTime:function(e,t,n,r){return{type:"TIMELINE:SELECT_TIME",time:e,group:t,what:n,item:r}},RANGE_DATA_LOADED:"TIMELINE:RANGE_DATA_LOADED",rangeDataLoaded:function(e,t,n,r){return{type:"TIMELINE:RANGE_DATA_LOADED",layerId:e,range:t,histogram:n,domain:r}},LOADING:"TIMELINE:LOADING",timeDataLoading:function(e,t){return{type:"TIMELINE:LOADING",layerId:e,loading:t}},SELECT_LAYER:"TIMELINE:SELECT_LAYER",selectLayer:function(e){return{type:"TIMELINE:SELECT_LAYER",layerId:e}},ENABLE_OFFSET:"TIMELINE:ENABLE_OFFSET",enableOffset:function(e){return{type:"TIMELINE:ENABLE_OFFSET",enabled:e}},SET_COLLAPSED:"TIMELINE:SET_COLLAPSED",setCollapsed:function(e){return{type:"TIMELINE:SET_COLLAPSED",collapsed:e}},SET_MAP_SYNC:"TIMELINE:SET_MAP_SYNC",setMapSync:function(e){return{type:"TIMELINE:SET_MAP_SYNC",mapSync:e}}}},2199:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(13),i=a.isNil,s=a.get,l=a.head,c=function(e){return s(e,"query.filterObj.featureTypeName")},u=function(e){return function(t){return s(t,'query.featureTypes["'.concat(e,'"]'))}},p=function(e,t){return s(u(t)(e),"original")};e.exports={wfsURL:function(e){return e&&e.query&&e.query.searchUrl},wfsURLSelector:function(e){return e&&e.query&&e.query.url},wfsFilter:function(e){return e&&e.query&&e.query.filterObj},attributesSelector:function(e){return s(u(c(e))(e),"attributes")},typeNameSelector:function(e){return s(e,"query.typeName")},resultsSelector:function(e){return s(e,"query.result.features")},featureCollectionResultSelector:function(e){var t=s(e,"query.result");return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{features:(t&&t.features||[]).filter((function(e){return!i(e.geometry)}))})},getFeatureById:function(e,t){var n=e&&e.query&&e.query.result&&e.query.result.features;return l(n.filter((function(e){return e.id===t})))},paginationInfo:{startIndex:function(e){return s(e,"query.filterObj.pagination.startIndex")},maxFeatures:function(e){return s(e,"query.filterObj.pagination.maxFeatures")},resultSize:function(e){return s(e,"query.result.features.length")},totalFeatures:function(e){return s(e,"query.result.totalFeatures")}},isDescribeLoaded:function(e,t){var n=u(t)(e);return!!(n&&n.attributes&&n.geometry&&n.original)},describeSelector:function(e){return p(e,c(e))},featureTypeSelectorCreator:u,layerDescribeSelector:p,featureLoadingSelector:function(e){return s(e,"query.featureLoading")},isSyncWmsActive:function(e){return s(e,"query.syncWmsFilter",!1)},isFilterActive:function(e){var t=s(e,"query.filterObj.crossLayerFilter"),n=s(e,"query.filterObj.spatialField"),r=s(e,"query.filterObj.filterFields");return!!(r&&l(r)||n&&n.method&&n.operation&&n.geometry||t&&t.collectGeometries&&t.operation)}}},2210:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(13).isNil,m=n(412).FormattedNumber,y=function(e){function t(){return a(this,t),s(this,l(t).apply(this,arguments))}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return this.context.intl?f.createElement(m,o({value:this.props.value},this.props.numberParams)):f.createElement("span",null,!d(this.props.value)&&!isNaN(this.props.value)&&this.props.value.toString&&this.props.value.toString()||"")}}])&&i(n.prototype,r),u&&i(n,u),t}(f.Component);u(y,"propTypes",{value:p.oneOfType([p.object,p.number]),numberParams:p.object}),u(y,"contextTypes",{intl:p.object}),e.exports=y},2211:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l=n(13),c=l.get,u=l.head,p=n(195).createSelector,f=n(2480).createShallowSelector,d=n(80).reprojectBbox,m=n(770),y=m.timeIntervalToSequence,g=m.timeIntervalToIntervalSequence,b=m.analyzeIntervalInRange,h=m.isTimeDomainInterval,v=n(768),S=v.timeDataSelector,E=v.currentTimeSelector,O=v.offsetTimeSelector,w=v.layerDimensionRangeSelector,T=v.layersWithTimeDataSelector,A=v.layerDimensionDataSelectorCreator,P=n(268),C=P.mapSelector,_=P.projectionSelector,x=n(408).getLayerFromId,I=function(e){return c(e,"timeline.range")},j=function(e){return c(e,"timeline.rangeData")},L=function(e){return c(e,"timeline.settings.collapsed")},R=function(e){return c(e,"timeline.settings.mapSync")},D=function(e,t){return(e||[]).reduce((function(e,n){return[].concat(i(e),i(function(e,t){var n=s(e.split("/"),3),r=n[0],o=n[1],a=n[2];if(a&&"0"!==a){var i=b({start:r,end:o,duration:a},t),l=i.count,c=i.start,u=i.end;return l>50?[{start:r,end:o,duration:a,type:"range",content:"".concat(l," items")}]:y({start:c,end:u,duration:a}).map((function(e){return{start:new Date(e),end:new Date(e),type:"point"}}))}return isNaN(new Date(r).getTime())?null:[{start:new Date(r),end:new Date(o||r),type:o?"range":"point"}]}(n,t)))}),[]).filter((function(e){return e&&e.start}))},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(e.domain&&e.domain.values)return D(e.domain.values,t);if(e.histogram&&e.histogram.domain&&e.histogram.values){var n=e.histogram.domain.split("/"),r=s(n,3),a=r[0],l=r[1],c=r[2],u=Math.max.apply(Math,i(e.histogram.values)),p=g({start:a,end:l,duration:c});return e.histogram.values.map((function(e,t){return o({},p[t],{type:"range",itemType:"histogram",count:e,className:"histogram-item",content:'<div><div class="histogram-box" style="height: '.concat(100*e/u,'%"></div> <span class="histogram-count">').concat(e,"</span></div>")})}))}return[]},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e&&e.values||e&&e.domain&&!h(e.domain)?D(e.values||e.domain.split(","),t):n&&n.histogram?N(n,t):[]},k=f(S,I,j,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(Object.keys(e).map((function(r){return M(e[r],t,n[r]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o({content:" "},e,{group:r})}))})).reduce((function(e,t){return[].concat(i(e),i(t))}),[]))})),G=function(e){return c(e,"timeline.selectedLayer")},F=function(e){return x(e,G(e))},U=function(e){return F(e)&&F(e).dimensions&&u(F(e).dimensions.filter((function(e){return"time"===e.name})))},B=p(E,O,(function(e,t){return{start:e,end:t}})),H=T,z=p(H,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length>0}));e.exports={isVisible:function(e){return!L(e)&&z(e)},isCollapsed:L,currentTimeRangeSelector:B,timelineLayersSelector:H,hasLayers:z,itemsSelector:k,rangeSelector:I,isAutoSelectEnabled:function(e){return c(e,"timeline.settings.autoSelect")},loadingSelector:function(e){return c(e,"timeline.loading")},selectedLayerSelector:G,selectedLayerData:F,selectedLayerTimeDimensionConfiguration:U,selectedLayerDataRangeSelector:function(e){return w(e,G(e))},selectedLayerName:function(e){return F(e)&&F(e).name},selectedLayerUrl:function(e){return c(U(e),"source.url")},rangeDataSelector:j,isMapSync:R,multidimOptionsSelectorCreator:function(e){return function(t){var n=(C(t)||{}).bbox;if(!n)return{};var r=A(e,"time")(t),i=c(r,"source.version"),l=Object.keys(n.bounds).reduce((function(e,t){return o({},e,a({},t,parseFloat(n.bounds[t])))}),{});if(!l||!R(t))return{};if("1.1"!==i){var u=A(e,"space")(t),p=c(u,"domain.CRS");if(!p||!l||!R(t))return{};var f=s(d(l,_(t),p),4),m=f[0],y=f[1],g=f[2],b=f[3];return g<m&&"EPSG:4326"===p&&(g+=360),{bbox:"".concat(m,",").concat(y,",").concat(g,",").concat(b),crs:p}}var h=l.minx,v=l.miny,S=l.maxx,E=l.maxy,O=n.crs;return{bbox:"".concat(h,",").concat(v,",").concat(S,",").concat(E,",").concat(O)}}}}},2224:function(e,t,n){var r=n(2407),o=n(13).toNumber,a={decToHex:function(e){var t=parseInt(e,10);return t=isNaN(t)?0:t,"0123456789ABCDEF".charAt(((t=t>255||t<0?0:t)-t%16)/16)+"0123456789ABCDEF".charAt(t%16)},rgbToHex:function(e,t,n){return e instanceof Array?a.rgbToHex(e[0],e[1],e[2]):"#"+a.decToHex(e)+a.decToHex(t)+a.decToHex(n)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,n){if(e instanceof Array)return a.rgbToHsv(e[0],e[1],e[2]);var r,o,i,s,l,c=e/255,u=t/255,p=n/255;switch(r=Math.min(Math.min(c,u),p),i=(o=Math.max(Math.max(c,u),p))-r,o){case r:s=0;break;case c:s=60*(u-p)/i,u<p&&(s+=360);break;case u:s=60*(p-c)/i+120;break;case p:s=60*(c-u)/i+240}return l=0===o?0:1-r/o,[Math.round(s),l,o]},distributedColorsHEX:function(e){for(var t=360/(e-1),n=[],r=function e(t,n,r){var o=e(t,n,r);return a.rgbToHex(o)},o=0;o<e;o++)n.push(r(t*o,.57,.63));return n},sameToneRangeColors:function(e,t,n,r){var o=e;isNaN(parseFloat(e))&&(o=a.hexToHsv(e)[0]);var i=.5/(n-1),s=t/(n-1),l=[];1===n&&(i=.5,s=t/2);for(var c=0;c<n;c++){var u=o+c*s-t/2,p=i*c+.3,f=p;r&&(u=r.h||u,p=r.s||p,f=r.v||f),l.push(a.hsvToHex(u,p,f,c))}return l},hsvToRgb:function(e,t,n){if(e instanceof Array)return a.hsvToRgb(e[0],e[1],e[2]);var r,o,i,s=Math.floor(e/60%6),l=e/60-s,c=n*(1-t),u=n*(1-l*t),p=n*(1-(1-l)*t);switch(s){case 0:r=n,o=p,i=c;break;case 1:r=u,o=n,i=c;break;case 2:r=c,o=n,i=p;break;case 3:r=c,o=u,i=n;break;case 4:r=p,o=c,i=n;break;case 5:r=n,o=c,i=u}return[a.realToDec(r),a.realToDec(o),a.realToDec(i)]},hsvToHex:function(e,t,n){var r=a.hsvToRgb(e,t,n);return a.rgbToHex(r)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var n=a.hexToRgb(t);return a.rgbToHsv(n)}return null},hexToRgb:function(e){var t,n,r,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),n=o.charAt(2)+o.charAt(3),r=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(n,16),parseInt(r,16)]},colorToHexStr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return r(e).toHexString()},colorToRgbaStr:function(e,t,n){var a=r(e);return e&&a.setAlpha(o(void 0!==t?t:a.getAlpha())).toRgbString()||n}};e.exports=a},2230:function(e,t,n){"use strict";n.r(t),n.d(t,"VECTOR_FORMATS",(function(){return r})),n.d(t,"isVectorFormat",(function(){return o}));var r=["application/vnd.mapbox-vector-tile","application/json;type=geojson","application/json;type=topojson"],o=function(e){return-1!==r.indexOf(e)}},2231:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(0),l=function(e){return e>100?"full":e>40?"medium":"small"},c=function(e){var t=e.size,n=e.style,r=void 0===n?{}:n,a=e.className;return i.createElement("div",{className:a,style:o({width:t,height:t,overflow:"hidden"},r)},i.createElement("div",{className:"mapstore-".concat(l(t),"-size-loader")}))};c.propTypes={size:s.number,className:s.string,style:s.object},e.exports=c},2232:function(e,t){var n="PLAYBACK:START",r="PLAYBACK:STOP";e.exports={play:function(){return{type:n}},stop:function(){return{type:r}},pause:function(){return{type:"PLAYBACK:PAUSE"}},setFrames:function(e){return{type:"PLAYBACK:SET_FRAMES",frames:e}},appendFrames:function(e){return{type:"PLAYBACK:APPEND_FRAMES",frames:e}},framesLoading:function(e){return{type:"PLAYBACK:FRAMES_LOADING",loading:e}},setCurrentFrame:function(e){return{type:"PLAYBACK:SET_CURRENT_FRAME",frame:e}},selectPlaybackRange:function(e){return{type:"PLAYBACK:SELECT_PLAYBACK_RANGE",range:e}},changeSetting:function(e,t){return{type:"PLAYBACK:SETTINGS_CHANGE",name:e,value:t}},toggleAnimationMode:function(){return{type:"PLAYBACK:TOGGLE_ANIMATION_MODE"}},animationStepMove:function(e){return{type:"PLAYBACK:ANIMATION_STEP_MOVE",direction:e}},updateMetadata:function(e){var t=e.next,n=e.previous;return{type:"PLAYBACK:UPDATE_METADATA",forTime:e.forTime,next:t,previous:n}},PLAY:n,PAUSE:"PLAYBACK:PAUSE",STOP:r,STATUS:{PLAY:"PLAY",STOP:"STOP",PAUSE:"PAUSE"},SET_FRAMES:"PLAYBACK:SET_FRAMES",APPEND_FRAMES:"PLAYBACK:APPEND_FRAMES",FRAMES_LOADING:"PLAYBACK:FRAMES_LOADING",SET_CURRENT_FRAME:"PLAYBACK:SET_CURRENT_FRAME",SELECT_PLAYBACK_RANGE:"PLAYBACK:SELECT_PLAYBACK_RANGE",CHANGE_SETTING:"PLAYBACK:SETTINGS_CHANGE",TOGGLE_ANIMATION_MODE:"PLAYBACK:TOGGLE_ANIMATION_MODE",ANIMATION_STEP_MOVE:"PLAYBACK:ANIMATION_STEP_MOVE",UPDATE_METADATA:"PLAYBACK:UPDATE_METADATA"}},2233:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(0),d=n(758),m=d.Panel,y=d.Button,g=d.Glyphicon,b=n(2482),h=n(3324).default,v=n(2116),S=function(){return p.createElement(y,{className:"square-button-sm no-border switch-error"},p.createElement(g,{glyph:"exclamation-mark",className:"text-danger"}))},E=n(2469),O=function(){return p.createElement("div",{className:"switch-loading"},p.createElement(E,{size:"small"}))},w=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"state",{}),n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"renderHeader",value:function(){var e=this,t=this.props.useToolbar?h:b;return p.createElement("div",null,p.createElement("div",{className:"pull-left"},this.props.title||this.props.header),p.createElement("div",{className:"pull-right"},this.props.locked?null:p.createElement(t,{checked:this.props.expanded,onClick:function(t){e.props.onSwitch(t)}}),this.props.error?p.createElement(S,null):null,this.props.loading?p.createElement(O,null):null,this.props.buttons.length>0&&this.props.expanded&&p.createElement(v,{btnDefaultProps:{className:"square-button-sm no-border"},buttons:this.props.buttons})))}},{key:"render",value:function(){return p.createElement(m,{className:"mapstore-switch-panel",collapsible:!0,expanded:this.props.expanded,defaultExpanded:this.props.defaultExpanded,header:this.renderHeader()},this.props.children)}}])&&a(n.prototype,r),f&&a(n,f),t}(p.Component);u(w,"propTypes",{header:f.node,title:f.oneOfType([f.string,f.node]),defaultExpanded:f.string,expanded:f.bool,onSwitch:f.func,locked:f.bool,buttons:f.array,loading:f.bool,error:f.any,errorMsgId:f.string,transitionProps:f.object,useToolbar:f.bool}),u(w,"defaultProps",{title:"",expanded:!1,onSwitch:function(){},locked:!1,buttons:[],useToolbar:!1}),e.exports=w},2247:function(e,t){e.exports={UPDATE_TEMPORARY_STYLE:"STYLEEDITOR:UPDATE_TEMPORARY_STYLE",UPDATE_STATUS:"STYLEEDITOR:UPDATE_STATUS",TOGGLE_STYLE_EDITOR:"STYLEEDITOR:TOGGLE_STYLE_EDITOR",RESET_STYLE_EDITOR:"STYLEEDITOR:RESET_STYLE_EDITOR",SELECT_STYLE_TEMPLATE:"STYLEEDITOR:SELECT_STYLE_TEMPLATE",CREATE_STYLE:"STYLEEDITOR:CREATE_STYLE",LOADING_STYLE:"STYLEEDITOR:LOADING_STYLE",LOADED_STYLE:"STYLEEDITOR:LOADED_STYLE",ADD_STYLE:"STYLEEDITOR:ADD_STYLE",ERROR_STYLE:"STYLEEDITOR:ERROR_STYLE",UPDATE_STYLE_CODE:"STYLEEDITOR:UPDATE_STYLE_CODE",EDIT_STYLE_CODE:"STYLEEDITOR:EDIT_STYLE_CODE",DELETE_STYLE:"STYLEEDITOR:DELETE_STYLE",INIT_STYLE_SERVICE:"STYLEEDITOR:INIT_STYLE_SERVICE",SET_EDIT_PERMISSION:"STYLEEDITOR:SET_EDIT_PERMISSION",SET_DEFAULT_STYLE:"STYLEEDITOR:SET_DEFAULT_STYLE",updateTemporaryStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.temporaryId,n=e.templateId,r=e.code,o=e.format,a=e.languageVersion,i=e.init;return{type:"STYLEEDITOR:UPDATE_TEMPORARY_STYLE",temporaryId:t,templateId:n,code:r,format:o,init:i,languageVersion:a}},updateStatus:function(e){return{type:"STYLEEDITOR:UPDATE_STATUS",status:e}},toggleStyleEditor:function(e,t){return{type:"STYLEEDITOR:TOGGLE_STYLE_EDITOR",layer:e,enabled:t}},resetStyleEditor:function(){return{type:"STYLEEDITOR:RESET_STYLE_EDITOR"}},selectStyleTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code,n=e.templateId,r=e.format,o=e.languageVersion,a=e.init;return{type:"STYLEEDITOR:SELECT_STYLE_TEMPLATE",code:t,templateId:n,format:r,init:a,languageVersion:o}},createStyle:function(e){return{type:"STYLEEDITOR:CREATE_STYLE",settings:e}},loadingStyle:function(e){return{type:"STYLEEDITOR:LOADING_STYLE",status:e}},loadedStyle:function(){return{type:"STYLEEDITOR:LOADED_STYLE"}},addStyle:function(e){return{type:"STYLEEDITOR:ADD_STYLE",add:e}},errorStyle:function(e,t){return{type:"STYLEEDITOR:ERROR_STYLE",status:e,error:t}},updateStyleCode:function(){return{type:"STYLEEDITOR:UPDATE_STYLE_CODE"}},editStyleCode:function(e){return{type:"STYLEEDITOR:EDIT_STYLE_CODE",code:e}},deleteStyle:function(e){return{type:"STYLEEDITOR:DELETE_STYLE",styleName:e}},initStyleService:function(e,t){return{type:"STYLEEDITOR:INIT_STYLE_SERVICE",service:e,canEdit:t}},setEditPermissionStyleEditor:function(e){return{type:"STYLEEDITOR:SET_EDIT_PERMISSION",canEdit:e}},setDefaultStyle:function(){return{type:"STYLEEDITOR:SET_DEFAULT_STYLE"}}}},2248:function(e,t,n){var r=n(13),o=r.isArray,a=r.head,i=r.isNaN;function s(e){var t=Math.floor(e),n=60*(e-t),r=Math.floor(n),o=60*(n-r);return t+"° "+r+"' "+Math.floor(o)+"'' "}var l={yd:{ft:3,m:.9144,km:9144e-7,yd:1,mi:.00056818181818,nm:.00049373650107},ft:{ft:1,m:.3048,km:3048e-7,yd:.33333333333334,mi:.0001893932,nm:164579e-9},m:{ft:3.28084,m:1,km:.001,yd:1.0936132983377,mi:621371e-9,nm:.000539956803},km:{ft:3280.84,m:1e3,km:1,yd:1093.6132983377,mi:.62137121212121,nm:.5399568207343395},mi:{ft:5280.000168959982,m:1609.3440514990027,km:1.6093440514990027,yd:1760,mi:1,nm:.8689762697078849},nm:{ft:6076.115679999979,m:1852.0000592639938,km:1.8520000592639938,yd:2025.3718285214,mi:1.150779484848481,nm:1},sqft:{sqft:1,sqm:.09290304,sqkm:9.2903043596611e-8,sqmi:3.587e-8,sqnm:2.7051601137505e-8},sqyd:{sqft:8.9999247491639,sqm:.83612040133779,sqkm:8.3612040133779e-7,sqyd:1,sqmi:3.228278917579e-7,sqnm:2.4346237458194e-7},sqm:{sqft:10.76391,sqm:1,sqkm:1e-6,sqyd:1.196,sqmi:3.8610215854245e-7,sqnm:2.91181e-7},sqkm:{sqft:10763910,sqm:1e6,sqkm:1,sqyd:1196e3,sqmi:.38610215854245,sqnm:.291181},sqmi:{sqft:27878398.920726,sqm:2589988.110336,sqkm:2.589988110336,sqyd:27878398.920726,sqmi:1,sqnm:.75415532795574},sqnm:{sqft:36966388.603652,sqm:3434290.0120544,sqkm:3.4342900120544,sqyd:36966388.603652,sqmi:1.325986786715,sqnm:1}};var c=function(e){return!i(parseFloat(e[0]))&&!i(parseFloat(e[1]))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coordinates,n=e.type,r=t;if("LineString"===n){if((r=t.filter(c)).length<2)return[]}else if("Polygon"===n){if((r=a(t).filter(c)).length<3)return[[]];r=[r.concat([a(r)])]}return r};e.exports={validateFeatureCoordinates:u,isValidGeometry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coordinates,n=e.type;if(!n||!t||t&&o(t)&&0===t.length)return!1;var r=u({coordinates:t,type:n});return(r="Polygon"===n?a(r):r).length>0},convertUom:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return l[t]&&l[t][n]?e*l[t][n]:e},getFormattedBearingValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="";return e>=0&&e<90?t="N "+s(e)+"E":e>90&&e<=180?t="S "+s(180-e)+"E":e>180&&e<270?t="S "+s(e-180)+"W":e>=270&&e<=360&&(t="N "+s(360-e)+"W"),t},degToDms:s}},2249:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(13).isNil,s=n(410).set,l=n(2224).colorToRgbaStr,c=n(415),u={sld:new(0,n(2947).default)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.filter((function(t){return!i(e[t])})).length>0},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["color","opacity","dashArray","dashOffset","lineCap","lineJoin","weight"];return p(e,t)},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["fillColor","fillOpacity"];return p(e,t)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["label","font","fontFamily","fontSize","fontStyle","fontWeight","textAlign"];return p(e,t)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["radius"];return p(e,t)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["iconGlyph","iconShape","iconUrl"];return p(e,t)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["symbolUrl"];return p(e,t)},h={centerPoint:{type:"Point",func:function(){}},lineToArc:{type:"LineString",func:function(){}},startPoint:{type:"Point",func:function(){}},endPoint:{type:"Point",func:function(){}}},v=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n},S={},E=function(e,t){if(!e||!t)throw new Error("specify all the params: sha, style");S[e]=t},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"style";return S[e]&&S[e][t]},w=function(e){if(e)return v(JSON.stringify(e));throw new Error("hashAndStringify: specify mandatory params: style")},T=function(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return b(e)&&e.symbolUrl?c.get(t,{"Content-Type":"image/svg+xml;charset=utf-8"}).then((function(t){var n=window.URL||window.webkitURL||window,r=(new DOMParser).parseFromString(t.data,"image/svg+xml").firstElementChild;r.setAttribute("fill",e.fillColor||"#FFCC33"),r.setAttribute("fill-opacity",i(e.fillOpacity)?.2:e.fillOpacity),r.setAttribute("stroke",l(e.color||"#FFCC33",i(e.opacity)?1:e.opacity)),r.setAttribute("stroke-opacity",i(e.opacity)?1:e.opacity),r.setAttribute("stroke-width",e.weight||1),r.setAttribute("width",e.size||32),r.setAttribute("height",e.size||32),r.setAttribute("stroke-dasharray",e.dashArray||"none");var a=new Blob([T(r)],{type:"image/svg+xml;charset=utf-8"}),s=n.createObjectURL(a),c=document.createElement("canvas");c.width=e.size,c.height=e.size;var u=c.getContext("2d"),p=new Image;p.src=s;var f="",d=w(e);return p.onload=function(){try{u.drawImage(p,c.width/2-p.width/2,c.height/2-p.height/2),f=c.toDataURL("image/png"),c=null,E(d,{style:o({},e,{symbolUrlCustomized:s}),base64:f})}catch(e){return}},E(d,{style:o({},e,{symbolUrlCustomized:s}),svg:r,base64:f}),s})).catch((function(){return n(2423)})):new Promise((function(e){e(null)}))};e.exports={getGeometryFunction:function(e,t){return h[e]&&h[e][t]},SymbolsStyles:S,registerStyle:E,fetchStyle:O,hashCode:v,hashAndStringify:w,domNodeToString:T,createSvgUrl:A,registerGeometryFunctions:function(e,t,n){if(!(e&&t&&n))throw new Error("specify all the params: functionName, func, type");h[e]={func:t,type:n}},geometryFunctions:h,getStylerTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g(e)?"Marker":b(e)?"Symbol":m(e)?"Text":y(e)||"Circle Style"===e.title?"Circle":d(e)?"Polygon":f(e)?"Polyline":""},isAttrPresent:p,addOpacityToColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#FFCC33",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;return s("a",t,e)},isMarkerStyle:g,isSymbolStyle:b,isTextStyle:m,isCircleStyle:y,isStrokeStyle:f,isFillStyle:d,getSymbolsStyles:function(){return S},setSymbolsStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S=e},createStylesAsync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return b(e)&&!O(w(e))?A(e,e.symbolUrl||e.symbolUrlCustomized).then((function(t){return t?o({},e,{symbolUrlCustomized:t}):O(w(e))})).catch((function(){return o({},e,{symbolUrlCustomized:n(2423)})})):new Promise((function(t){t(b(e)?O(w(e)):e)}))}))},getStyleParser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sld";return u[e]}}},2259:function(e,t){e.exports={UPDATE_ADDITIONAL_LAYER:"ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",updateAdditionalLayer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",r=arguments.length>3?arguments[3]:void 0;return{type:"ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",id:e,owner:t,actionType:n,options:r}},REMOVE_ADDITIONAL_LAYER:"ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",removeAdditionalLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.owner;return{type:"ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",id:t,owner:n}},REMOVE_ALL_ADDITIONAL_LAYERS:"ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",removeAllAdditionalLayers:function(){return{type:"ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS"}},UPDATE_OPTIONS_BY_OWNER:"ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",updateOptionsByOwner:function(e,t){return{type:"ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",owner:e,options:t}}}},2260:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(0),p=n(1),f=n(412).FormattedHTMLMessage,d=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return this.context.intl?p.createElement(f,{id:this.props.msgId,values:this.props.msgParams}):p.createElement("span",null,this.props.msgId||"")}}])&&a(n.prototype,r),c&&a(n,c),t}(p.Component);c(d,"propTypes",{msgId:u.string.isRequired,msgParams:u.object}),c(d,"contextTypes",{intl:u.object}),e.exports=d},2261:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(1),m=n(0),y=n(3208),g=n(2145),b=n(26),h=n(2103),v=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return f(u(n=l(this,(e=c(t)).call.apply(e,[this].concat(o)))),"renderLoading",(function(){return n.props.maskLoading?d.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},d.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},d.createElement(h,{msgId:"loading"}),d.createElement(g,{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),f(u(n),"renderRole",(function(e){return d.Children.toArray(n.props.children).filter((function(t){return t.props.role===e}))})),f(u(n),"hasRole",(function(e){return d.Children.toArray(n.props.children).filter((function(t){return t.props.role===e})).length>0})),f(u(n),"onClickOut",(function(e){n.props.onClickOut&&n.mask===e.target&&n.props.onClickOut(e)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=d.createElement("div",{id:this.props.id,style:a({zIndex:3},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},d.createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),d.createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?d.createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):d.createElement("span",null)),n=this.props.draggable?d.createElement(y,{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,r=b({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?d.createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:r,className:"fade in modal "+this.props.containerClassName,role:"dialog"},n):n}}])&&s(n.prototype,r),o&&s(n,o),t}(d.Component);f(v,"propTypes",{id:m.string.isRequired,style:m.object,backgroundStyle:m.object,className:m.string,maskLoading:m.bool,containerClassName:m.string,headerClassName:m.string,bodyClassName:m.string,footerClassName:m.string,onClickOut:m.func,modal:m.bool,start:m.object,draggable:m.bool,bounds:m.oneOfType([m.string,m.object])}),f(v,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"}),e.exports=v},2262:function(e,t,n){var r=n(1);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{display:"inline-block"}:t;return r.createElement("div",{style:n,className:"mapstore-inline-loader"})}},2263:function(e,t,n){"use strict";n.r(t),n.d(t,"ADD_LAYERS_FROM_CATALOGS",(function(){return E})),n.d(t,"TEXT_SEARCH",(function(){return O})),n.d(t,"RECORD_LIST_LOADED",(function(){return w})),n.d(t,"RESET_CATALOG",(function(){return T})),n.d(t,"CATALOG_CLOSE",(function(){return A})),n.d(t,"RECORD_LIST_LOAD_ERROR",(function(){return P})),n.d(t,"CHANGE_CATALOG_FORMAT",(function(){return C})),n.d(t,"ADD_LAYER_ERROR",(function(){return _})),n.d(t,"DESCRIBE_ERROR",(function(){return x})),n.d(t,"CHANGE_SELECTED_SERVICE",(function(){return I})),n.d(t,"CHANGE_CATALOG_MODE",(function(){return j})),n.d(t,"CHANGE_METADATA_TEMPLATE",(function(){return L})),n.d(t,"CHANGE_TITLE",(function(){return R})),n.d(t,"CHANGE_TEXT",(function(){return D})),n.d(t,"CHANGE_TYPE",(function(){return N})),n.d(t,"CHANGE_AUTOLOAD",(function(){return M})),n.d(t,"CHANGE_SERVICE_FORMAT",(function(){return k})),n.d(t,"FOCUS_SERVICES_LIST",(function(){return G})),n.d(t,"CHANGE_URL",(function(){return F})),n.d(t,"ADD_CATALOG_SERVICE",(function(){return U})),n.d(t,"DELETE_CATALOG_SERVICE",(function(){return B})),n.d(t,"ADD_SERVICE",(function(){return H})),n.d(t,"DELETE_SERVICE",(function(){return z})),n.d(t,"SAVING_SERVICE",(function(){return V})),n.d(t,"CATALOG_INITED",(function(){return W})),n.d(t,"GET_METADATA_RECORD_BY_ID",(function(){return Y})),n.d(t,"SET_LOADING",(function(){return q})),n.d(t,"TOGGLE_TEMPLATE",(function(){return Z})),n.d(t,"TOGGLE_THUMBNAIL",(function(){return K})),n.d(t,"TOGGLE_ADVANCED_SETTINGS",(function(){return Q})),n.d(t,"addLayersMapViewerUrl",(function(){return X})),n.d(t,"textSearch",(function(){return J})),n.d(t,"recordsLoaded",(function(){return $})),n.d(t,"changeCatalogFormat",(function(){return ee})),n.d(t,"savingService",(function(){return te})),n.d(t,"setLoading",(function(){return ne})),n.d(t,"changeSelectedService",(function(){return re})),n.d(t,"focusServicesList",(function(){return oe})),n.d(t,"changeCatalogMode",(function(){return ae})),n.d(t,"changeTitle",(function(){return ie})),n.d(t,"changeText",(function(){return se})),n.d(t,"changeAutoload",(function(){return le})),n.d(t,"changeServiceFormat",(function(){return ce})),n.d(t,"changeType",(function(){return ue})),n.d(t,"changeUrl",(function(){return pe})),n.d(t,"addService",(function(){return fe})),n.d(t,"addCatalogService",(function(){return de})),n.d(t,"deleteCatalogService",(function(){return me})),n.d(t,"deleteService",(function(){return ye})),n.d(t,"resetCatalog",(function(){return ge})),n.d(t,"recordsLoadError",(function(){return be})),n.d(t,"catalogInited",(function(){return he})),n.d(t,"initCatalog",(function(){return ve})),n.d(t,"catalogClose",(function(){return Se})),n.d(t,"getRecords",(function(){return Ee})),n.d(t,"describeError",(function(){return Oe})),n.d(t,"addLayerAndDescribe",(function(){return we})),n.d(t,"addLayer",(function(){return Te})),n.d(t,"addLayerError",(function(){return Ae})),n.d(t,"getMetadataRecordById",(function(){return Pe})),n.d(t,"changeMetadataTemplate",(function(){return Ce})),n.d(t,"toggleAdvancedSettings",(function(){return _e})),n.d(t,"toggleTemplate",(function(){return xe})),n.d(t,"toggleThumbnail",(function(){return Ie})),n.d(t,"recordsNotFound",(function(){return je}));var r=n(2358),o=n.n(r),a=n(769),i=n.n(a),s=n(2359),l=n.n(s),c=n(2360),u=n.n(c),p=n(269),f=n(137),d=n(47),m=n(13),y=n(2193),g=n(408),b=n(161);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={csw:o.a,wms:i.a,wmts:l.a,backgrounds:u.a},E="CATALOG:ADD_LAYERS_FROM_CATALOGS",O="CATALOG:TEXT_SEARCH",w="CATALOG:RECORD_LIST_LOADED",T="CATALOG:RESET_CATALOG",A="CATALOG:CATALOG_CLOSE",P="CATALOG:RECORD_LIST_LOAD_ERROR",C="CATALOG:CHANGE_CATALOG_FORMAT",_="CATALOG:ADD_LAYER_ERROR",x="CATALOG:DESCRIBE_ERROR",I="CATALOG:CHANGE_SELECTED_SERVICE",j="CATALOG:CHANGE_CATALOG_MODE",L="CATALOG:CHANGE_METADATA_TEMPLATE",R="CATALOG:CHANGE_TITLE",D="CATALOG:CHANGE_TEXT",N="CATALOG:CHANGE_TYPE",M="CATALOG:CHANGE_AUTOLOAD",k="CATALOG:CHANGE_SERVICE_FORMAT",G="CATALOG:FOCUS_SERVICES_LIST",F="CATALOG:CHANGE_URL",U="CATALOG:ADD_CATALOG_SERVICE",B="CATALOG:DELETE_CATALOG_SERVICE",H="CATALOG:ADD_SERVICE",z="CATALOG:DELETE_SERVICE",V="CATALOG:SAVING_SERVICE",W="CATALOG:INIT",Y="CATALOG:GET_METADATA_RECORD_BY_ID",q="CATALOG:SET_LOADING",Z="CATALOG:TOGGLE_TEMPLATE",K="CATALOG:TOGGLE_THUMBNAIL",Q="CATALOG:TOGGLE_ADVANCED_SETTINGS";function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:E,layers:e,sources:t}}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,n=e.url,r=e.startPosition,o=e.maxRecords,a=e.text,i=e.options,s=void 0===i?{}:i;return{type:O,format:t,url:n,startPosition:r,maxRecords:o,text:a,options:s}}function $(e,t){return{type:w,searchOptions:e,result:t}}function ee(e){return{type:C,format:e}}function te(e){return{type:V,status:e}}function ne(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:q,loading:e}}function re(e){return{type:I,service:e}}function oe(e){return{type:G,status:e}}function ae(e,t){return{type:j,mode:e,isNew:t}}function ie(e){return{type:R,title:e}}function se(e){return{type:D,text:e}}function le(e){return{type:M,autoload:e}}function ce(e){return{type:k,format:e}}function ue(e){return{type:N,newType:e}}function pe(e){return{type:F,url:e}}function fe(){return{type:H}}function de(e){return{type:U,service:e}}function me(e){return{type:B,service:e}}function ye(){return{type:z}}function ge(){return{type:T}}function be(e){return{type:P,error:e}}function he(){return{type:W}}function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;return function(t){Object.keys(e).forEach((function(t){e[t].reset()})),t(he())}}function Se(){return{type:A}}function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return function(i){i(ne(!0)),S[e].getRecords(t,n,r,o,a).then((function(e){e.error?i(be(e)):i($({url:t,startPosition:n,maxRecords:r,filter:o},e))})).catch((function(e){i(be(e))}))}}function Oe(e,t){return{type:x,layer:e,error:t}}function we(e){return function(t,n){var r=n(),o=Object(g.layersSelector)(r),a=f.getLayerId(e,o||[]);return t(Object(p.addLayer)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{id:a}))),"wms"===e.type?S.wms.describeLayers(e.url,e.name).then((function(n){if(n){var o=Object(m.find)(n,(function(t){return t.name===e.name}));if(o&&"WFS"===o.owsType){var i=d.filterUrlParams(d.cleanDuplicatedQuestionMarks(o.owsURL),Object(y.authkeyParamNameSelector)(r));t(Object(p.changeLayerProperties)(a,{search:{url:i,type:"wfs"}}))}}})).catch((function(n){return t(Oe(e,n))})):null}}var Te=we;function Ae(e){return{type:_,error:e}}function Pe(){return{type:Y}}var Ce=function(e){return{type:L,metadataTemplate:e}},_e=function(){return{type:Q}},xe=function(){return{type:Z}},Ie=function(){return{type:K}};function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(b.error)({title:"catalog.notification.errorTitle",message:"catalog.notification.errorSearchingRecords",values:{records:e}})}},2264:function(e,t,n){var r=n(195).createSelector,o=function(e){return e&&e.playback&&e.playback.settings},a=function(e){return e&&e.playback&&e.playback.frames},i=function(e){return e&&e.playback&&e.playback.currentFrame},s=r(a,i,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return{hasNext:e[t+1],hasPrevious:e[t-1]}}));e.exports={playbackSettingsSelector:o,frameDurationSelector:function(e){return(o(e)||{}).frameDuration||5},statusSelector:function(e){return e&&e.playback&&e.playback.status},loadingSelector:function(e){return e&&e.playback&&e.playback.framesLoading},lastFrameSelector:function(e){var t=a(e)||[];return t[t.length-1]},framesSelector:a,currentFrameSelector:i,currentFrameValueSelector:function(e){return(a(e)||[])[i(e)]},playbackRangeSelector:function(e){return function(e){return e&&e.playback&&e.playback.playbackRange}(e)},playbackMetadataSelector:function(e){return e&&e.playback&&e.playback.metadata},hasPrevNextAnimationSteps:s}},2265:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(1),p=n(33),f=n(0),d=n(758),m=d.Popover,y=d.Glyphicon,g=n(2710),b=n(2114),h=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"renderPopover",value:function(){return u.createElement(m,{id:this.props.id,placement:this.props.placement,positionLeft:this.props.left,positionTop:this.props.top,title:this.props.title},this.props.text)}},{key:"renderContent",value:function(){var e=this;return u.createElement(y,{ref:function(t){e.target=t},className:"text-".concat(this.props.bsStyle),glyph:this.props.glyph})}},{key:"render",value:function(){var e=this,t=!0===this.props.trigger?["hover","focus"]:this.props.trigger;return u.createElement("span",{className:"mapstore-info-popover"},this.props.trigger?u.createElement(b,{trigger:t,placement:this.props.placement,overlay:this.renderPopover()},this.renderContent()):[this.renderContent(),u.createElement(g,{placement:this.props.placement,show:!0,target:function(){return p.findDOMNode(e.target)}},this.renderPopover())])}}])&&a(n.prototype,r),c&&a(n,c),t}(u.Component);c(h,"propTypes",{id:f.string,title:f.string,text:f.string,glyph:f.string,bsStyle:f.string,placement:f.string,left:f.number,top:f.number,trigger:f.oneOfType([f.array,f.bool])}),c(h,"defaultProps",{id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info",trigger:["hover","focus"]}),e.exports=h},2286:function(e,t,n){"use strict";var r=n(2131),o=n.n(r),a=n(2618),i=n.n(a),s=n(2200),l=n.n(s),c=n(34),u=n.n(c),p=n(2339),f=n.n(p),d=n(2295),m=n.n(d),y=n(778),g=n.n(y),b=n(2294),h=n.n(b),v=n(48),S=n.n(v),E=n(2224),O=n(80),w=n(2619),T=n.n(w),A=n(2287),P=n.n(A),C=n(2297),_=n(4285),x=n(2635),I=n(2341),j=n(3084),L=n.n(j),R=T.a.markers.extra,D=R.icons[0],N=R.icons[1],M=T.a.getGlyphs("fontawesome"),k=function(e){var t=e.highlight,n=e.rotation,r=void 0===n?0:n;return t?[new C.default({image:new _.default({anchor:[.5,2*(R.size[1]+18)],rotation:r,anchorXUnits:"fraction",anchorYUnits:"pixels",src:L.a,scale:.5})})]:[]},G={extra:{getIcon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o()(e.style&&e.style.rotation)?0:e.style.rotation;return[new C.default({image:new _.default({rotation:t,anchor:[12,12],anchorXUnits:"pixels",anchorYUnits:"pixels",src:N})}),new C.default({image:new _.default({rotation:t,src:D,anchor:[R.size[0]/2,R.size[1]],anchorXUnits:"pixels",anchorYUnits:"pixels",size:R.size,offset:[R.colors.indexOf(e.style.iconColor||"blue")*R.size[0],R.shapes.indexOf(e.style.iconShape||"circle")*R.size[1]]}),text:new x.default({rotation:t,text:M[e.style.iconGlyph],font:"14px FontAwesome",offsetY:2*-R.size[1]/3,fill:new I.default({color:"#FFFFFF"})})})].concat(k(e.style))}},standard:{getIcon:function(e){var t=e.style,n=e.iconAnchor,r=o()(t&&t.rotation)?0:t.rotation,a=t.iconAnchor||n,i=[new C.default({image:new _.default({anchor:a||[.5,1],anchorXUnits:t.anchorXUnits||(a||0===a?"pixels":"fraction"),anchorYUnits:t.anchorYUnits||(a||0===a?"pixels":"fraction"),size:u()(t.size)?t.size:P()(t.size)?[t.size,t.size]:void 0,rotation:r,anchorOrigin:t.anchorOrigin||"top-left",src:t.iconUrl||t.symbolUrlCustomized||t.symbolUrl})})];return t.shadowUrl&&(i=[new C.default({image:new _.default({anchor:[12,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:t.shadowUrl})}),i[0]]),i.concat(k(t))}},html:{getIcon:function(){return null}}},F=n(2249),U=n(2208),B=n(2452),H=n(2201),z=n(2252),V=n(417),W=n(71),Y=n.n(W),q=n(3085),Z=n.n(q),K=n(830),Q=n.n(K),X=n(3106),J=n.n(X),$=n(26),ee=n.n($),te=n(410);function ne(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=[0,153,255,1],se=new U.default({radius:5,fill:null,stroke:new B.default({color:"red",width:1})}),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"green":r,a=e.applyToPolygon,i=void 0!==a&&a;return new C.default({image:new U.default({radius:n,fill:new I.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!i&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new H.a(m()(r)):null}})},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"red":r,a=e.applyToPolygon,i=void 0!==a&&a;return new C.default({image:new U.default({radius:n,fill:new I.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!i&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new H.a(r.length>3?r[r.length-("Polygon"===n?2:1)]:g()(r))}})},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[le(e),ce(t)]},pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new C.default({text:new x.default({offsetY:-4*Math.sqrt(e.fontSize),textAlign:e.textAlign||"center",text:t||"",font:e.font,fill:new I.default({color:Object(E.colorToRgbaStr)(e.stroke||e.color||"#000000",e.opacity||1)}),stroke:n?new B.default({color:[255,255,255,1],width:2}):null}),image:n?new U.default({radius:5,fill:null,stroke:new B.default({color:Object(E.colorToRgbaStr)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null})},fe={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,radius:10},de={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},me={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},ye={Marker:{iconColor:"orange",iconShape:"circle",iconGlyph:"comment"},Text:{fontStyle:"normal",fontSize:"14",fontSizeUom:"px",fontFamily:"Arial",fontWeight:"normal",font:"14px Arial",textAlign:"center",color:"#000000",opacity:1},Circle:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2},Point:fe,MultiPoint:fe,LineString:de,MultiLineString:de,Polygon:me,MultiPolygon:me},ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"blue",width:3,lineDash:[6]};return{stroke:new B.default(e.style?e.style.stroke||{color:e.style.color||t.color,lineDash:l()(e.style.dashArray)&&i()(e.style.dashArray).split(" ")||t.lineDash,width:e.style.weight||t.width,lineCap:e.style.lineCap||"round",lineJoin:e.style.lineJoin||"round",lineDashOffset:e.style.dashOffset||0}:oe({},t))}},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"rgba(0, 0, 255, 0.1)"};return{fill:new I.default(e.style?e.style.fill||{color:Object(E.colorToRgbaStr)(e.style.fillColor,e.style.fillOpacity)||t.color}:oe({},t))}},he={Point:function(){return[new C.default({image:se})]},LineString:function(e){return[new C.default(ee()({},ge(e,{color:"blue",width:3})))]},MultiLineString:function(e){return[new C.default(ee()({},ge(e,{color:"blue",width:3})))]},MultiPoint:function(){return[new C.default({image:se})]},MultiPolygon:function(e){return[new C.default(ee()({},ge(e),be(e)))]},Polygon:function(e){return[new C.default(ee()({},ge(e),be(e)))]},GeometryCollection:function(e){return[new C.default(ee()({},ge(e),be(e),{image:new U.default({radius:10,fill:null,stroke:new B.default({color:"magenta"})})}))]},Circle:function(){return[new C.default({stroke:new B.default({color:"red",width:2}),fill:new I.default({color:"rgba(255,0,0,0.2)"})})]},marker:function(e){return[new C.default({image:new _.default({anchor:[14,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:J.a})}),new C.default({image:new _.default({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:Q.a}),text:new x.default({text:e.label,scale:1.25,offsetY:8,fill:new I.default({color:"#000000"}),stroke:new B.default({color:"#FFFFFF",width:2})})})]}},ve=function(e,t){var n=e.getGeometry().getType();return he[n](t&&t.style&&t.style[n]&&{style:oe({},t.style[n])}||t||{})};function Se(e){if(e.style.iconUrl)return G.standard.getIcon(e);var t=e.style.iconLibrary||"extra";return G[t]?G[t].getIcon(e):null}var Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{style:ye},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=t.style[e]||t.style;if("MultiLineString"===e||"LineString"===e){var s=[new C.default({stroke:t.style.useSelectedStyle?new B.default({color:[255,255,255,1],width:i.weight+2}):null}),new C.default(i?{stroke:new B.default(i&&i.stroke?i.stroke:{color:Object(E.colorToRgbaStr)(t.style&&i.color||"#0000FF",i.opacity||1),lineDash:t.style.highlight?[10]:[0],width:i.weight||1}),image:n?se:null}:{stroke:new B.default(ye[e]&&ye[e].stroke?ye[e].stroke:{color:Object(E.colorToRgbaStr)(t.style&&ye[e].color||"#0000FF",ye[e].opacity||1),lineDash:t.style.highlight?[10]:[0],width:ye[e].weight||1})})],l=t.style.useSelectedStyle?ue({radius:i.weight,applyToPolygon:!0},{radius:i.weight,applyToPolygon:!0}):[];return[].concat(ne(l),s)}if(("MultiPoint"===e||"Point"===e)&&(i.iconUrl||i.iconGlyph))return n?new C.default({image:se}):Se({style:oe({},i,{highlight:t.style.highlight||t.style.useSelectedStyle})});if("Circle"===e&&a){var c=[new C.default({stroke:t.style.useSelectedStyle?new B.default({color:[255,255,255,1],width:i.weight+4}):null}),new C.default({stroke:new B.default(i&&i.stroke?i.stroke:{color:t.style.useSelectedStyle?ie:Object(E.colorToRgbaStr)(t.style&&i.color||"#0000FF",i.opacity||1),lineDash:t.style.highlight?[10]:[0],width:i.weight||1}),fill:new I.default(i.fill?i.fill:{color:Object(E.colorToRgbaStr)(t.style&&i.fillColor||"#0000FF",i.fillOpacity||.2)})}),new C.default({image:t.style.useSelectedStyle?new U.default({radius:3,fill:new I.default(i.fill?i.fill:{color:ie})}):null,geometry:function(e){var t=e.getGeometry();if("Circle"===t.getType()){var n=t.getCenter();return new H.a(n)}return null}})];return c}if("Text"===e&&i.font)return[pe(i,r[0],t.style.useSelectedStyle||t.style.highlight)];if("MultiPolygon"===e||"Polygon"===e){var u=[new C.default({stroke:t.style.useSelectedStyle?new B.default({color:[255,255,255,1],width:i.weight+2}):null}),new C.default({stroke:new B.default(i.stroke?i.stroke:{color:t.style.useSelectedStyle?ie:Object(E.colorToRgbaStr)(t.style&&i.color||"#0000FF",i.opacity||1),lineDash:t.style.highlight?[10]:[0],width:i.weight||1}),image:n?se:null,fill:new I.default(i.fill?i.fill:{color:Object(E.colorToRgbaStr)(t.style&&i.fillColor||"#0000FF",i.fillOpacity||1)})})],p=t.style.useSelectedStyle?ue({radius:i.weight,applyToPolygon:!0},{radius:i.weight,applyToPolygon:!0}):[];return[].concat(u,ne(p))}return o};function Oe(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=e.nativeStyle,a=r,i=0,s=e.style&&e.style.type||(e.features&&e.features[0]&&e.features[0].geometry?e.features[0].geometry.type:void 0);if("FeatureCollection"===s||e.features&&e.features[0]&&"FeatureCollection"===e.features[0].type)return function(r){var o=this||r;t=o.getGeometry()&&o.getGeometry().getType();var s=o&&o.getProperties();s&&s.isCircle&&(t="Circle",i=s.radius),s&&s.isText&&(t="Text",a=[s.valueText]);var l=Object(te.set)("style.useSelectedStyle",s.canEdit,e);return Ee(t,l,n,a,null,i)};if(e&&e.properties&&e.properties.isText)return t="Text",a=[e.properties.valueText],Ee(t,e,n,a,null,i);if(e&&e.properties&&e.properties.isCircle)return t="Circle",i=e.properties.radius,Ee(t,e,n,a,null,i);if(!o&&e.style){if(o={stroke:new B.default(e.style.stroke?e.style.stroke:{color:Object(E.colorToRgbaStr)(e.style&&e.style.color||"#0000FF",e.style.opacity||1),lineDash:e.style.highlight?[10]:[0],width:e.style.weight||1}),fill:new I.default(e.style.fill?e.style.fill:{color:Object(E.colorToRgbaStr)(e.style&&e.style.fillColor||"#0000FF",e.style.fillOpacity||1)})},"Point"===s&&(o={image:new U.default(ee()({},o,{radius:e.style.radius||5}))}),e.style.iconUrl||e.style.iconGlyph){var l=Se(e);return o=function(n){var r=this||n;switch(t=r.getGeometry().getType()){case"Point":case"MultiPoint":return l;default:return ve(r,e)}}}return o=new C.default(o),"GeometryCollection"===s?o=function(o){var a,i=this||o;t=i.getGeometry().getType();var s=i.get("textGeometriesIndexes")||[],l=i.get("circles")||[],c=i.get("textValues");return"GeometryCollection"===i.getGeometry().getType()?i.getGeometry().getGeometries().reduce((function(o,i,p){if(("Point"===(t=i.getType())||"MultiPoint"===t)&&s.length&&-1!==s.indexOf(p)){var f=Ee("Text",e,n,[c[s.indexOf(p)]]);return f.setGeometry(i),o.concat([f])}if("Polygon"===t&&l.length&&-1!==l.indexOf(p)){var d=Ee("Circle",e,n,[]);return d.setGeometry(i),o.concat([d])}if("Point"===t||"MultiPoint"===t)return a=Se({style:oe({},e.style[t],{highlight:e.style.highlight})}),o.concat(a.map((function(e){return e.setGeometry(i),e})));var m=Ee(t,e,n,r);return u()(m)?m.forEach((function(e){return e.setGeometry(i)})):m.setGeometry(i),o.concat([m])}),[]):"Point"===t||"MultiPoint"===t?(a=Se({style:oe({},e.style[t],{highlight:e.style.highlight})}),n?new C.default({image:se,geometry:i.getGeometry()}):a.map((function(e){return e.setGeometry(i.getGeometry()),e}))):Ee(t,e,n,r)}:("Circle"===s&&(i=e.features&&e.features.length&&e.features[0].properties&&e.features[0].properties.radius||10),Ee(s,e,n,r,o,i))}return e.styleName&&!e.overrideOLStyle?function(n){if("marker"===e.styleName)switch(t=n.getGeometry().getType()){case"Point":case"MultiPoint":return he.marker(e)}return he[e.styleName](e)}:o||ve}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return xe})),n.d(t,"e",(function(){return Fe})),n.d(t,"d",(function(){return Ue})),n.d(t,"c",(function(){return Be})),n.d(t,"f",(function(){return He})),n.d(t,"a",(function(){return ze}));var Pe=new Z.a,Ce={white:[255,255,255,1],blue:[0,153,255,1],width:3},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(F.isCircleStyle)(e)?new U.default({stroke:t,fill:n,radius:e.radius||5}):null},xe=function(e){if(Object(F.isMarkerStyle)(e)){if(e.iconUrl)return G.standard.getIcon({style:e});var t=e.iconLibrary||"extra";if(G[t])return G[t].getIcon({style:e})}return null},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(F.isStrokeStyle)(e)?new B.default(e.stroke&&S()(e.stroke)?e.stroke:{color:e.highlight?Ce.blue:Object(E.colorToRgbaStr)(e.color||e.stroke||"#0000FF",o()(e.opacity)?1:e.opacity),width:o()(e.weight)?1:e.weight,lineDash:l()(e.dashArray)&&i()(e.dashArray).split(" ")||u()(e.dashArray)&&e.dashArray||[0],lineCap:e.lineCap||"round",lineJoin:e.lineJoin||"round",lineDashOffset:e.dashOffset||0}):null},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(F.isFillStyle)(e)?new I.default(e.fill&&S()(e.fill)?e.fill:{color:Object(E.colorToRgbaStr)(e.fillColor||"#0000FF",o()(e.fillOpacity)?1:e.fillOpacity)}):null},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return Object(F.isTextStyle)(e)?new x.default({fill:n,offsetY:e.offsetY||-4*Math.sqrt(e.fontSize),textAlign:e.textAlign||"center",text:e.label||r&&r.properties&&r.properties.valueText||"New",font:e.font||"Arial",stroke:e.highlight?new B.default({color:[255,255,255,1],width:2}):t,image:e.highlight?new U.default({radius:5,fill:null,stroke:new B.default({color:Object(E.colorToRgbaStr)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null}):null},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"green":r,a=e.applyToPolygon,i=void 0!==a&&a;return new C.default({image:new U.default({radius:n,fill:new I.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!i&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new H.a(m()(r)):null}})},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"red":r,a=e.applyToPolygon,i=void 0!==a&&a;return new C.default({image:new U.default({radius:n,fill:new I.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!i&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new H.a(r.length>3?r[r.length-("Polygon"===n?2:1)]:g()(r))}})},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{radius:3,fillColor:"green",applyToPolygon:!0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{radius:3,fillColor:"red",applyToPolygon:!0},r=[];return h()(e,(function(e){return"startPoint"===e.geometry&&e.filtering}))||r.push(Re(Te({},t))),h()(e,(function(e){return"endPoint"===e.geometry&&e.filtering}))||r.push(De(Te({},n))),r};Object(F.registerGeometryFunctions)("centerPoint",(function(e){var t=e.getGeometry(),n=t.getExtent(),r=t.getCenter&&t.getCenter()||[n[2]-n[0],n[3]-n[1]];return new H.a(r)}),"Point"),Object(F.registerGeometryFunctions)("lineToArc",(function(e){var t=e.getGeometry().getType();if("LineString"===t||"MultiPoint"===t){var n=e.getGeometry().getCoordinates();return n=Object(O.transformLineToArcs)(n.map((function(e){var t=Object(O.reproject)(e,"EPSG:3857","EPSG:4326");return[t.x,t.y]}))),new z.a(n.map((function(e){var t=Object(O.reproject)(e,"EPSG:4326","EPSG:3857");return[t.x,t.y]})))}return e.getGeometry()}),"LineString"),Object(F.registerGeometryFunctions)("startPoint",(function(e){var t=e.getGeometry(),n="Polygon"===t.getType()?t.getCoordinates()[0]:t.getCoordinates();return n.length>1?new H.a(m()(n)):null}),"Point"),Object(F.registerGeometryFunctions)("endPoint",(function(e){var t=e.getGeometry(),n=t.getType(),r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new H.a(r.length>3?r[r.length-("Polygon"===n?2:1)]:g()(r))}),"Point");var Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.geometry?function(t){var n=e.geometry||"centerPoint";return F.geometryFunctions[n].func(t)}:function(e){return e.getGeometry()}},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!o()(e.filtering)||e.filtering},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=ke(t,e);if(r){var o=Ie(t),a=je(t),i=_e(t,o,a);if(Object(F.isMarkerStyle)(t))return xe(t).map((function(e){return e.setGeometry(Me(t)),e}));if(Object(F.isSymbolStyle)(t))return G.standard.getIcon({style:t}).map((function(e){return e.setGeometry(Me(t)),e}));var s=Le(t,o,a,e),l=t.zIndex,c=new C.default({geometry:Me(t),image:i,text:s,stroke:!s&&!i&&o||null,fill:!s&&!i&&a||null,zIndex:l});return[c].concat(e&&e.properties&&e.properties.canEdit&&!e.properties.isCircle?Ne(n):[])}return new C.default({})},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=e.style;if(t){var n=u()(t)?t:f()(t);return n.reduce((function(t,r){return t.concat(Ge(e,r,n))}),[])}return[]},Ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.style&&e.style.url)return Y.a.get(e.style.url).then((function(t){return Object(F.getStyleParser)(e.style.format).readStyle(t.data).then((function(e){return Pe.writeStyle(e)}))}));var r=Oe(e,t,n);return e.asPromise?new V.Promise((function(e){e(r)})):r},Be=Se,He=ue,ze=ye},2302:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n(1),y=n(0),g=n(88).connect,b=n(200).compose,h=n(801),v=h.changeHelpText,S=h.changeHelpwinVisibility,E=g((function(e){return{isVisible:e.controls&&e.controls.help&&e.controls.help.enabled}}),{changeHelpText:v,changeHelpwinVisibility:S})(n(2682)),O=n(2103),w=n(758),T=w.Button,A=w.Tooltip,P=w.Panel,C=w.Collapse,_=w.Glyphicon,x=n(2114),I=n(267),j=I.setControlProperty,L=I.toggleControl,R=n(13).partial,D=n(26),N=function(e){function t(){var e,n;s(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return d(p(n=c(this,(e=u(t)).call.apply(e,[this].concat(a)))),"getToolConfig",(function(e){return e.tool?{}:n.props.toolCfg})),d(p(n),"getTool",(function(e){if(e.tool)return!0===e.tool?e.plugin:e.tool;var t=function(){return{}},r={};return e.exclusive?(t=function(t){return{active:t.controls&&t.controls[n.props.stateSelector]&&t.controls[n.props.stateSelector].active===e.name}},r[n.props.eventSelector]=j.bind(null,n.props.stateSelector,"active",e.name,!0)):e.toggle?(t=function(t){return{bsStyle:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]?n.props.activeStyle:n.props.toolStyle,active:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]||!1}},r[n.props.eventSelector]=L.bind(null,e.toggleControl||e.name,e.toggleProperty||null)):e.action&&(r[n.props.eventSelector]=R(e.action,n.context),t=e.selector||t),g(t,r,(function(e,t,r){return n.mergeHandlers(i({},r,{},e),t)}))(n.props.tool)})),d(p(n),"renderTools",(function(){return n.props.tools.map((function(e,t){if(e.element)return e.element;var r=e.help?m.createElement(E,{className:"mapstore-helpbadge",helpText:e.help}):m.createElement("span",null),a=e.tooltip?m.createElement(O,{msgId:e.tooltip}):null,i=n.getTool(e),s=n.getToolConfig(e);return n.addTooltip(m.createElement(i,o({},s,{pluginCfg:e.cfg,tooltip:a,btnSize:n.props.toolSize,bsStyle:n.props.toolStyle,help:r,key:e.name||"tool"+t,mapType:n.props.mapType},e.cfg,{items:e.items||[]}),e.cfg&&e.cfg.glyph?m.createElement(_,{glyph:e.cfg.glyph}):e.icon,r," ",e.text),e)}))})),d(p(n),"renderPanels",(function(){return n.props.panels.filter((function(e){return!e.panel.loadPlugin})).map((function(e){var t=e.panel,r=m.createElement(t,o({key:e.name,mapType:n.props.mapType},e.cfg,e.props||{},{items:e.items||[]})),a=e.title?m.createElement(O,{msgId:e.title}):null;return e.wrap?m.createElement(C,{key:"mapToolBar-item-collapse-"+e.name,in:n.props.activePanel===e.name},m.createElement(P,{header:a,style:n.props.panelStyle,className:n.props.panelClassName},r)):r}))})),d(p(n),"mergeHandlers",(function(e,t){return Object.keys(t).reduce((function(n,r){return D(n,d({},r,e[r]?b(e[r],t[r]):t[r]))}),e)})),d(p(n),"addTooltip",(function(e,t){if(t.tooltip){var r=m.createElement(A,{id:n.props.id+"-"+t.name+"-tooltip"},m.createElement(O,{msgId:t.tooltip}));return m.createElement(x,{key:n.props.id+"-"+t.name+"-overlay",rootClose:!0,placement:"left",overlay:r},e)}return e})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.container;return m.createElement("span",{id:this.props.id},m.createElement(e,{id:this.props.id+"-container",style:this.props.style,className:this.props.className},this.renderTools()),this.renderPanels())}}])&&l(n.prototype,r),a&&l(n,a),t}(m.Component);d(N,"propTypes",{id:y.string.isRequired,container:y.func,tool:y.func,className:y.string,style:y.object,tools:y.array,panels:y.array,mapType:y.string,toolStyle:y.string,activeStyle:y.string,toolSize:y.string,stateSelector:y.string.isRequired,eventSelector:y.string,panelStyle:y.object,panelClassName:y.string,activePanel:y.string,toolCfg:y.object}),d(N,"contextTypes",{messages:y.object,router:y.object}),d(N,"defaultProps",{container:P,className:"tools-container",style:{},toolStyle:"default",activeStyle:"primary",tools:[],panels:[],tool:T,mapType:"leaflet",eventSelector:"onClick",panelStyle:{},panelClassName:"tools-container-panel",toolSize:null,toolCfg:{}}),e.exports=N},2303:function(e,t,n){"use strict";n.r(t),n.d(t,"ADD_BACKGROUND",(function(){return r})),n.d(t,"REMOVE_BACKGROUND",(function(){return o})),n.d(t,"SET_CURRENT_BACKGROUND_LAYER",(function(){return a})),n.d(t,"BACKGROUND_ADDED",(function(){return i})),n.d(t,"BACKGROUND_EDITED",(function(){return s})),n.d(t,"ADD_BACKGROUND_PROPERTIES",(function(){return l})),n.d(t,"SET_BACKGROUND_MODAL_PARAMS",(function(){return c})),n.d(t,"UPDATE_BACKGROUND_THUMBNAIL",(function(){return u})),n.d(t,"BACKGROUNDS_CLEAR",(function(){return p})),n.d(t,"CREATE_BACKGROUNDS_LIST",(function(){return f})),n.d(t,"CLEAR_MODAL_PARAMETERS",(function(){return d})),n.d(t,"CONFIRM_DELETE_BACKGROUND_MODAL",(function(){return m})),n.d(t,"ALLOW_BACKGROUNDS_DELETION",(function(){return y})),n.d(t,"createBackgroundsList",(function(){return g})),n.d(t,"addBackground",(function(){return b})),n.d(t,"addBackgroundProperties",(function(){return h})),n.d(t,"setBackgroundModalParams",(function(){return v})),n.d(t,"backgroundAdded",(function(){return S})),n.d(t,"backgroundEdited",(function(){return E})),n.d(t,"setCurrentBackgroundLayer",(function(){return O})),n.d(t,"allowBackgroundsDeletion",(function(){return w})),n.d(t,"updateThumbnail",(function(){return T})),n.d(t,"removeBackground",(function(){return A})),n.d(t,"clearBackgrounds",(function(){return P})),n.d(t,"clearModalParameters",(function(){return C})),n.d(t,"confirmDeleteBackgroundModal",(function(){return _}));var r="ADD_BACKGROUND",o="REMOVE_BACKGROUND",a="SET_CURRENT_BACKGROUND_LAYER",i="BACKGROUND_ADDED",s="BACKGROUND_EDITED",l="ADD_BACKGROUND_PROPERTIES",c="SET_BACKGROUND_MODAL_PARAMS",u="UPDATE_BACKGROUND_THUMBNAIL",p="BACKGROUNDS_CLEAR",f="CREATE_BACKGROUNDS_LIST",d="CLEAR_MODAL_PARAMETERS",m="CONFIRM_DELETE_BACKGROUND_MODAL",y="ALLOW_BACKGROUNDS_DELETION";function g(e){return{type:f,backgrounds:e}}function b(e){return{type:r,source:e}}function h(e){return{type:l,modalParams:e}}function v(e){return{type:c,modalParams:e}}function S(e){return{type:i,layerId:e}}function E(e){return{type:s,layerId:e}}function O(e){return{type:a,layerId:e}}function w(e){return{type:y,allow:e}}function T(e,t){return{type:u,thumbnailData:e,id:t}}function A(e){return{type:o,backgroundId:e}}function P(){return{type:p}}function C(){return{type:d}}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:m,show:e,layerTitle:t,layerId:n}}},2304:function(e,t,n){"use strict";n.r(t),n.d(t,"metadataSourceSelector",(function(){return s})),n.d(t,"modalParamsSelector",(function(){return l})),n.d(t,"backgroundListSelector",(function(){return c})),n.d(t,"isDeletedIdSelector",(function(){return u})),n.d(t,"removedBackgroundsThumbIdsSelector",(function(){return p})),n.d(t,"confirmDeleteBackgroundModalSelector",(function(){return f})),n.d(t,"backgroundControlsSelector",(function(){return d})),n.d(t,"allowBackgroundsDeletionSelector",(function(){return m})),n.d(t,"backgroundLayersSelector",(function(){return y}));var r=n(195),o=n(408),a=n(2144),i=n(137),s=function(e){return e.backgroundSelector&&e.backgroundSelector.source},l=function(e){return e.backgroundSelector&&e.backgroundSelector.modalParams},c=function(e){return e.backgroundSelector&&e.backgroundSelector.backgrounds||[]},u=function(e){return e.backgroundSelector&&e.backgroundSelector.lastRemovedId},p=function(e){return e.backgroundSelector&&e.backgroundSelector.removedBackgroundsThumbIds},f=function(e){return e.backgroundSelector&&e.backgroundSelector.confirmDeleteBackgroundModal},d=function(e){return e.controls&&e.controls.backgroundSelector||{}},m=function(e){return e.backgroundSelector&&e.backgroundSelector.allowDeletion},y=Object(r.createSelector)(o.layersSelector,a.mapTypeSelector,(function(e,t){return e.filter((function(e){return e&&"background"===e.group})).map((function(e){return Object(i.invalidateUnsupportedLayer)(e,t)}))||[]}))},2328:function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o="MEASUREMENT:INIT";function a(e){return function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({type:"CHANGE_MEASUREMENT_TOOL"},e)}e.exports={CHANGE_MEASUREMENT_TOOL:"CHANGE_MEASUREMENT_TOOL",CHANGE_MEASUREMENT_STATE:"CHANGE_MEASUREMENT_STATE",changeUom:function(e,t,n){return{type:"MEASUREMENT:CHANGE_UOM",uom:e,value:t,previousUom:n}},CHANGE_UOM:"MEASUREMENT:CHANGE_UOM",changeGeometry:function(e){return{type:"MEASUREMENT:CHANGED_GEOMETRY",feature:e}},CHANGED_GEOMETRY:"MEASUREMENT:CHANGED_GEOMETRY",changeFormatMeasurement:function(e){return{type:"MEASUREMENT:CHANGE_FORMAT",format:e}},CHANGE_FORMAT:"MEASUREMENT:CHANGE_FORMAT",updateMeasures:function(e){return{type:"MEASUREMENT:UPDATE_MEASURES",measures:e}},UPDATE_MEASURES:"MEASUREMENT:UPDATE_MEASURES",changeCoordinates:function(e){return{type:"MEASUREMENT:CHANGE_COORDINATES",coordinates:e}},CHANGE_COORDINATES:"MEASUREMENT:CHANGE_COORDINATES",resetGeometry:function(){return{type:"MEASUREMENT:RESET_GEOMETRY"}},RESET_GEOMETRY:"MEASUREMENT:RESET_GEOMETRY",addAnnotation:function(e,t,n,r){return{type:"MEASUREMENT:ADD_MEASURE_AS_ANNOTATION",feature:e,value:t,uom:n,measureTool:r}},ADD_MEASURE_AS_ANNOTATION:"MEASUREMENT:ADD_MEASURE_AS_ANNOTATION",init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o,defaultOptions:e}},INIT:o,changeMeasurement:function(e){return function(t){t(a(e))}},toggleMeasurement:a,changeMeasurementState:function(e){return{type:"CHANGE_MEASUREMENT_STATE",pointMeasureEnabled:e.pointMeasureEnabled,lineMeasureEnabled:e.lineMeasureEnabled,areaMeasureEnabled:e.areaMeasureEnabled,bearingMeasureEnabled:e.bearingMeasureEnabled,geomType:e.geomType,point:e.point,len:e.len,area:e.area,bearing:e.bearing,lenUnit:e.lenUnit,areaUnit:e.areaUnit,feature:e.feature}}}},2350:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(162),l=n(136),c=n(2619).extraMarkers,u=n(2249),p=u.geometryFunctions,f=u.fetchStyle,d=u.hashAndStringify,m=n(410).set,y=n(13),g=y.values,b=y.isNil,h=y.slice,v=y.head,S=y.castArray,E=y.last,O=y.isArray,w=y.findIndex,T=y.isString,A=n(2349),P=n(4286).default,C=n(26),_={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2},x={iconGlyph:"comment",iconShape:"square",iconColor:"blue"},I={fontStyle:"normal",fontSize:"14",fontSizeUom:"px",fontFamily:"Arial",fontWeight:"normal",font:"14px Arial",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},j={color:"#ffcc33",opacity:1,weight:3,editing:{fill:1}},L={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},R={Text:I,Point:x,Circle:_,MultiPoint:x,LineString:j,MultiLineString:j,Polygon:L,MultiPolygon:L},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return-1!==e.indexOf("rgba")?"rgb".concat(e.slice(e.indexOf("("),e.lastIndexOf(",")),")"):e},N=function(e){return("start"===e?"lm":"end"===e&&"rm")||"cm"},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=void 0===t?"Point":t,r=e.features,o=void 0===r?[]:r;return"FeatureCollection"===n?o.reduce((function(e,t){return e[t.geometry.type]=R[t.geometry.type],e}),{type:"FeatureCollection"}):a({},R[n])},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a({title:"annotations.defaulttitle"!==l.getMessageById(t,"annotations.defaulttitle")?l.getMessageById(t,"annotations.defaulttitle"):"Default title",id:s()},e)},G=function(e){return T(e)&&e||O(e)&&e.join(" ")},F=function(e){return e.color&&e.opacity&&e.weight},U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=t&&t[e]?t[e]:t,o=r,i=o.dashArray?G(o.dashArray):"solid";switch(e){case"MultiPolygon":case"Polygon":case"Circle":return{strokeColor:D(o.color),strokeOpacity:o.opacity,strokeWidth:o.weight,fillColor:D(o.fillColor),fillOpacity:o.fillOpacity,strokeDashstyle:i};case"LineString":case"MultiLineString":return{strokeColor:D(o.color),strokeOpacity:o.opacity,strokeWidth:o.weight,strokeDashstyle:i};case"Text":var s=F(o)?{labelOutlineColor:D(o.color),labelOutlineOpacity:o.opacity,labelOutlineWidth:o.weight}:{};return a({fontStyle:o.fontStyle,fontSize:o.fontSize,fontFamily:o.fontFamily,fontWeight:o.fontWeight,labelAlign:N(o.textAlign),fontColor:D(o.fillColor),fontOpacity:o.fillOpacity,label:n,stroke:!0,strokeColor:D(o.color),strokeOpacity:o.opacity,strokeWidth:o.weight,strokeDashstyle:i},s);case"Point":case"MultiPoint":var l=o.symbolUrl&&f(d(o),"base64")||c.markerToDataUrl(o),u=-18,p=-46;return o.iconAnchor&&O(o.iconAnchor)&&o.size&&(u="pixels"===o.anchorXUnits?-1*o.iconAnchor[0]:-1*o.size*o.iconAnchor[0],p="pixels"===o.anchorYUnits?-1*o.iconAnchor[1]:-1*o.size*o.iconAnchor[1]),l?{graphicWidth:o.size||36,graphicHeight:o.size||46,externalGraphic:l,graphicXOffset:u,graphicYOffset:p,display:!1===o.filtering&&"none"}:{fillColor:"#0000AE",fillOpacity:.5,strokeColor:"#0000FF",pointRadius:10,strokeOpacity:1,strokeWidth:1,display:!1===o.filtering&&"none"};default:return{fillColor:"#FF0000",fillOpacity:0,strokeColor:"#FF0000",pointRadius:5,strokeOpacity:1,strokeDashstyle:i,strokeWidth:1}}},B={convertGeoJSONToInternalModel:function(e){var t=e.type,n=void 0===t?"Point":t,r=e.geometries,o=void 0===r?[]:r,a=e.features,i=void 0===a?[]:a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];switch(n){case"Point":case"MultiPoint":return{type:1===s.length?"Text":n};case"Polygon":return{type:1===l.length?"Circle":n};case"GeometryCollection":var c=o.filter((function(e){return"Point"===e.type||"MultiPoint"===e.type})),u=o.filter((function(e){return"Polygon"===e.type})),p=0,f=0;return{type:"GeometryCollection",geometries:o.map((function(e){if("Point"===e.type||"MultiPoint"===e.type){if(c.length===s.length)return{type:"Text"};if(0===s.length)return{type:e.type};if(0===p)return p++,{type:"Text"}}if("Polygon"===e.type){if(u.length===l.length)return{type:"Circle"};if(0===l.length)return{type:e.type};if(0===f)return f++,{type:"Circle"}}return{type:e.type}}))};case"FeatureCollection":var d=i.map((function(e){return e.properties&&e.properties.isCircle?{type:"Circle"}:e.properties&&e.properties.isText?{type:"Text"}:{type:e.geometry.type}}));return{type:"FeatureCollection",features:d};default:return{type:n}}},getAvailableStyler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=void 0===t?"Point":t,r=e.geometries,o=void 0===r?[]:r,a=e.features,i=void 0===a?[]:a;switch(n){case"Point":case"MultiPoint":case"Symbol":return[B.getRelativeStyler(n)];case"LineString":case"MultiLineString":return[B.getRelativeStyler(n)];case"Polygon":case"MultiPolygon":case"Text":case"Circle":return[B.getRelativeStyler(n)];case"GeometryCollection":return o.reduce((function(e,t){return-1!==e.indexOf(B.getRelativeStyler(t.type))?e:e.concat(B.getAvailableStyler(t))}),[]);case"FeatureCollection":return i.reduce((function(e,t){return-1!==e.indexOf(B.getRelativeStyler(t.type))?e:e.concat(B.getAvailableStyler(t))}),[]);default:return[]}},getRelativeStyler:function(e){switch(e){case"Point":case"MultiPoint":return"marker";case"Symbol":return"symbol";case"Circle":return"circle";case"LineString":case"MultiLineString":return"lineString";case"Polygon":case"MultiPolygon":return"polygon";case"Text":return"text";default:return""}},createFont:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fontSize,n=void 0===t?"14":t,r=e.fontSizeUom,o=void 0===r?"px":r,a=e.fontFamily,i=void 0===a?"Arial":a,s=e.fontStyle,l=void 0===s?"normal":s,c=e.fontWeight,u=void 0===c?"normal":c;return"".concat(l," ").concat(u," ").concat(n).concat(o," ").concat(i)},DEFAULT_ANNOTATIONS_STYLES:R,STYLE_CIRCLE:_,STYLE_POINT:x,STYLE_TEXT:I,STYLE_LINE:j,STYLE_POLYGON:L,normalizeAnnotation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="FeatureCollection"===e.type?a({},e):{type:"Feature",geometry:e},r=M(n),o=k(n.properties,t);return a({style:r,properties:o},n)},removeDuplicate:function(e){return g(e.reduce((function(e,t){return a({},e,i({},t.properties.id,t))}),{}))},circlesToMultiPolygon:function(e,t){var n=e.geometries,r=void 0===n?[]:n,o=t.circles,a=void 0===o?[]:o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,l=a.reduce((function(e,t){return e.concat([r[t].coordinates])}),[]);return{type:"Feature",geometry:{type:"MultiPolygon",coordinates:l},properties:{id:s(),ms_style:U("Circle",i)}}},fromCircleToPolygon:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return{type:"Feature",geometry:t.polygonGeom||e,properties:{id:t.id||s(),ms_style:U("Circle",n)}}},fromTextToPoint:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I;return{type:"Feature",geometry:e,properties:{id:t.id||s(),ms_style:U("Text",n,t.valueText)}}},fromLineStringToGeodesicLineString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;return{type:"Feature",geometry:e.geometryGeodesic,properties:{id:e.id||s(),ms_style:U(e.geometryGeodesic.type,t)}}},textToPoint:function(e,t){var n=e.geometries,r=void 0===n?[]:n,o=t.textGeometriesIndexes,a=void 0===o?[]:o,i=t.textValues,l=void 0===i?[]:i,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I;return a.map((function(e,t){return{type:"Feature",geometry:r[e],properties:{id:s(),ms_style:U("Text",c,l[t])}}}))},flattenGeometryCollection:function(e){var t=e.geometry,n=e.properties,r=e.style,o=n.circles&&B.circlesToMultiPolygon(t,n,r.Circle)||[],a=n.textGeometriesIndexes&&B.textToPoint(t,n,r.Text)||[],i=(n.circles||[]).concat(n.textGeometriesIndexes||[]);return t.geometries.filter((function(e,t){return-1===i.indexOf(t)})).map((function(e){return{type:"Feature",geometry:e,properties:{id:s(),ms_style:U(e.type,r[e.type])}}})).concat(o,a)},createGeometryFromGeomFunction:function(e){var t=p[e.style.geometry]&&p[e.style.geometry].type||e.geometry.type,n=e.geometry.coordinates||[];switch(e.style.geometry){case"startPoint":n=v(n);break;case"endPoint":n=E(n);break;case"centerPoint":n=P(e).geometry.coordinates}return{type:t,coordinates:n}},fromAnnotationToGeoJson:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geometry,n=e.properties,r=void 0===n?{}:n,o=e.style,a=void 0===o?{}:o,i=a.geometry?B.createGeometryFromGeomFunction({geometry:t,properties:r,style:a,type:"Feature"}):t;return r.isCircle&&"Polygon"===i.type?B.fromCircleToPolygon(i,r,a):r.isText?B.fromTextToPoint(i,r,a):"LineString"===i.type&&r.useGeodesicLines&&a.filtering?B.fromLineStringToGeodesicLineString(r,a):{type:"Feature",geometry:i,properties:{id:r.id||s(),ms_style:U(i.type,a)}}},annotationsToPrint:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return"FeatureCollection"===t.type?e.concat(t.features.map((function(e){return S(e.style||t.style||{}).filter((function(e){return!!b(e.filtering)||e.filtering})).map((function(t){return B.fromAnnotationToGeoJson(a({},e,{style:t}))}))})).reduce((function(e,t){return e.concat(t)}),[])):t.geometry&&"GeometryCollection"===t.geometry.type?e.concat(B.flattenGeometryCollection(t)):e.concat({type:"Feature",geometry:t.geometry,properties:a({},t.properties,{ms_style:U(t.geometry.type,t.style)})})}),[])},formatCoordinates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[]];return e.map((function(e){return{lat:e&&e[1],lon:e&&e[0]}}))},getBaseCoord:function(e){switch(e){case"Polygon":case"LineString":case"MultiPoint":return[];default:return[[{lat:"",lon:""}]]}},getComponents:function(e){var t=e.type,n=e.coordinates;switch(t){case"Polygon":return B.isCompletePolygon(n)?B.formatCoordinates(h(n[0],0,n[0].length-1)):B.formatCoordinates(n[0]);case"LineString":case"MultiPoint":return B.formatCoordinates(n);default:return B.formatCoordinates([n])}},addIds:function(e){return e.map((function(e){return e.properties&&e.properties.id?e:m("properties.id",A.v1(),e)}))},COMPONENTS_VALIDATION:{Point:{min:1,add:!1,remove:!1,validation:"validateCoordinates",notValid:"Add a valid coordinate to complete the Point"},MultiPoint:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"Add 2 valid coordinates to complete the Polyline"},Polygon:{min:3,add:!0,remove:!0,validation:"validateCoordinates",notValid:"Add 3 valid coordinates to complete the Polygon"},LineString:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"Add 2 valid coordinates to complete the Polyline"},Circle:{add:!1,remove:!1,validation:"validateCircle",notValid:"Add a valid coordinate and a radius (m) to complete the Circle"},Text:{add:!1,remove:!1,validation:"validateText",notValid:"Add a valid coordinate and a Text value"}},validateCoords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lat,n=e.lon;return!isNaN(parseFloat(t))&&!isNaN(parseFloat(n))},validateCoordsArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=r(e,2),n=t[0],o=t[1];return!isNaN(parseFloat(o))&&!isNaN(parseFloat(n))},validateCoord:function(e){return!isNaN(parseFloat(e))},coordToArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[e.lon,e.lat]},validateCoordinates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.components,n=void 0===t?[]:t,r=e.remove,o=void 0!==r&&r,a=e.type;if(n&&n.length){var i=n.filter(B.validateCoords);return o?i.length>B.COMPONENTS_VALIDATION[a].min&&i.length===n.length:i.length>=B.COMPONENTS_VALIDATION[a].min&&i.length===n.length}return!1},validateCircle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.components,n=void 0===t?[]:t,r=e.properties,o=void 0===r?{radius:0}:r;if(n&&n.length){var a=v(n);return!isNaN(parseFloat(o.radius))&&B.validateCoords(a)}return!1},validateText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.components,n=void 0===t?[]:t,r=e.properties,o=void 0===r?{valueText:""}:r;if(n&&n.length){var a=v(n);return o&&!!o.valueText&&B.validateCoords(a)}return!1},validateFeature:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.components,n=void 0===t?[[]]:t,r=e.type,o=e.remove,a=void 0!==o&&o,i=e.properties,s=void 0===i?{}:i;return!b(r)&&("Text"===r?B.validateText({components:n,properties:s}):"Circle"===r?B.validateCircle({components:n,properties:s}):B.validateCoordinates({components:n,remove:a,type:r}))},updateAllStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.features&&e.features.length?a({},e,{features:e.features.map((function(e){return C({},e,{style:S(e.style).map((function(e){return C({},e,t)}))})}))}):e},getStartEndPointsForLinestring:function(){return[a({},R.Point,{highlight:!0,iconAnchor:[.5,.5],type:"Point",title:"StartPoint Style",geometry:"startPoint",filtering:!1,id:s()}),a({},R.Point,{highlight:!0,iconAnchor:[.5,.5],type:"Point",title:"EndPoint Style",geometry:"endPoint",filtering:!1,id:s()})]},DEFAULT_SHAPE:"triangle",DEFAULT_PATH:"product/assets/symbols/",checkSymbolsError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading_symbols_path";return e.length&&-1!==w(e,(function(e){return e===t}))},isAMissingSymbol:function(e){return e.symbolUrlCustomized===n(2423)},isCompletePolygon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[[]]],t=e[0].filter(B.validateCoordsArray);return t.length>3&&v(t)[0]===E(t)[0]&&v(t)[1]===E(t)[1]},getDashArrayFromStyle:G};e.exports=B},2352:function(e,t,n){var r=n(47),o=n(13),a=o.isArray,i=o.isObject,s={needProxy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(e))return e.reduce((function(e,t){return s.needProxy(t)&&e}),!0);var n=!1,o=!(0===e.indexOf("http")),l=!o&&e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(l){var c=window.location;o=l[1]===c.protocol&&l[3]===c.hostname;var u=l[4],p=c.port;(80!==u&&""!==u||"80"!==p&&""!==p)&&(o=o&&u===p)}if(!o){var f=r.getProxyUrl(t);if(f){var d=[];i(f)&&(d=f.useCORS||[],f=f.url);var m=d.reduce((function(t,n){return t||0===e.indexOf(n)}),!1);m||(n=!0)}}return n},getProxyUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.getProxyUrl(e);return t&&i(t)&&(t=t.url),t}};e.exports=s},2354:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(1),a=n(47);e.exports=function(e){return function(t){return o.createElement(e,r({},t,{container:document.querySelector("."+(a.getConfigProp("themePrefix")||"ms2")+" > div")||document.body}))}}},2357:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(0),p=n(1),f=n(758),d=f.Button,m=f.ButtonGroup,y=f.Glyphicon,g=n(2261),b=n(26),h=n(2103),v=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return p.createElement(g,{draggable:this.props.draggable,onClickOut:this.props.onClose,id:"confirm-dialog",modal:this.props.modal,style:b({},this.props.style,{display:this.props.show?"block":"none"})},p.createElement("span",{role:"header"},p.createElement("span",{className:"user-panel-title"},this.props.title),p.createElement("button",{onClick:this.props.onClose,className:"login-panel-close close"},this.props.closeGlyph?p.createElement(y,{glyph:this.props.closeGlyph}):p.createElement("span",null,"×"))),p.createElement("div",{role:"body"},this.props.children),p.createElement("div",{role:"footer"},p.createElement(m,null,p.createElement(d,{onClick:this.props.onConfirm,disabled:this.props.confirmButtonDisabled,bsStyle:this.props.confirmButtonBSStyle},this.props.confirmButtonContent),p.createElement(d,{onClick:this.props.onClose},this.props.closeText))))}}])&&a(n.prototype,r),c&&a(n,c),t}(p.Component);c(v,"propTypes",{show:u.bool,draggable:u.bool,onClose:u.func,onConfirm:u.func,onSave:u.func,modal:u.bool,closeGlyph:u.string,style:u.object,buttonSize:u.string,inputStyle:u.object,title:u.node,confirmButtonContent:u.node,confirmButtonDisabled:u.bool,closeText:u.node,confirmButtonBSStyle:u.string}),c(v,"defaultProps",{onClose:function(){},onChange:function(){},modal:!0,title:p.createElement(h,{msgId:"confirmTitle"}),closeGlyph:"",confirmButtonBSStyle:"danger",confirmButtonDisabled:!1,confirmButtonContent:p.createElement(h,{msgId:"confirm"})||"Confirm",closeText:p.createElement(h,{msgId:"close"}),includeCloseButton:!0}),e.exports=v},2358:function(e,t,n){var r=n(71),o=n(13),a=n(55),i=n(47),s=n(26),l=function(e){var t=a.parse(e,!0);return a.format(s({},t,{search:null},{query:s({service:"CSW",version:"2.0.2"},t.query,{request:void 0})}))},c={parseUrl:l,getRecordById:function(e){return new Promise((function(t){Promise.all([n.e(0),n.e(17)]).then(function(){t(r.get(e).then((function(e){if(e){var t=n(2243).unmarshaller.unmarshalString(e.data);if(t&&t.name&&"GetRecordByIdResponse"===t.name.localPart&&t.value&&t.value.abstractRecord){var r=t.value.abstractRecord[0].value.dcElement;if(r){for(var o={references:[]},a=0;a<r.length;a++){var s=r[a],l=s.name.localPart,c={};if("references"===l&&s.value)c={value:s.value.content&&i.cleanDuplicatedQuestionMarks(s.value.content[0])||s.value.content||s.value,scheme:s.value.scheme};else c=s.value.content&&s.value.content[0]||s.value.content||s.value;o[l]&&Array.isArray(o[l])?o[l].push(c):o[l]?o[l]=[o[l],c]:o[l]=c}return{dc:o}}}else if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"};return null}return null})))}.bind(null,n)).catch(n.oe)}))},getRecords:function(e,t,a,s){return new Promise((function(c){Promise.all([n.e(0),n.e(1)]).then(function(){var u=n(2243),p=u.CSW,f=u.marshaller,d=u.unmarshaller,m=f.marshalString({name:"csw:GetRecords",value:p.getRecords(t,a,s)});c(r.post(l(e),m,{headers:{"Content-Type":"application/xml"}}).then((function(e){if(e){var t=d.unmarshalString(e.data);if(t&&t.name&&"GetRecordsResponse"===t.name.localPart&&t.value&&t.value.searchResults){var n=t.value,r=n.searchResults.abstractRecord||n.searchResults.any,a={numberOfRecordsMatched:n.searchResults.numberOfRecordsMatched,numberOfRecordsReturned:n.searchResults.numberOfRecordsReturned,nextRecord:n.searchResults.nextRecord},s=[];if(r)for(var l=0;l<r.length;l++){var c=r[l].value,u={dateStamp:c.dateStamp&&c.dateStamp.date,fileIdentifier:c.fileIdentifier&&c.fileIdentifier.characterString&&c.fileIdentifier.characterString.value,identificationInfo:c.abstractMDIdentification&&c.abstractMDIdentification.value};if(c.boundingBox){var p=void 0,f=void 0,m=void 0;if((m=Array.isArray(c.boundingBox)?o.head(c.boundingBox):c.boundingBox)&&m.value){var y=m.value.lowerCorner,g=m.value.upperCorner;p=[y[1],y[0],g[1],g[0]];var b=m.value&&m.value.crs&&o.last(m.value.crs.split(":"));f="WGS 1984"===b||"WGS84"===b?"EPSG:4326":b?"EPSG:"+b:"EPSG:4326"}u.boundingBox={extent:p,crs:f}}var h=c.dcElement;if(h){for(var v={references:[]},S=0;S<h.length;S++){var E=h[S],O=E.name.localPart,w={};if("references"===O&&E.value)w={value:E.value.content&&i.cleanDuplicatedQuestionMarks(E.value.content[0])||E.value.content||E.value,scheme:E.value.scheme};else w=E.value.content&&E.value.content[0]||E.value.content||E.value;v[O]&&Array.isArray(v[O])?v[O].push(w):v[O]?v[O]=[v[O],w]:v[O]=w}u.dc=v}s.push(u)}return a.records=s,a}if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"}}return null})))}.bind(null,n)).catch(n.oe)}))},textSearch:function(e,t,r,o){return new Promise((function(a){Promise.all([n.e(0),n.e(1)]).then(function(){var i=n(2325).Filter,s=null;if(o){var l=i.propertyIsLike("csw:AnyText","%"+o+"%");s=i.filter(l)}a(c.getRecords(e,t,r,s))}.bind(null,n)).catch(n.oe)}))},workspaceSearch:function(e,t,r,o,a){return new Promise((function(i){Promise.all([n.e(0),n.e(1)]).then(function(){var s=n(2325).Filter,l=a||"%",u=o&&"%"+o+"%"||"%",p=s.propertyIsLike("identifier",l+":"+u),f=s.filter(p);i(c.getRecords(e,t,r,f))}.bind(null,n)).catch(n.oe)}))},reset:function(){}};e.exports=c},2359:function(e,t,n){var r=n(71),o=n(47),a=n(55),i=n(26),s=n(275),l={},c=n(13).castArray,u=n(80),p=n(774),f=p.getOperations,d=p.getOperation,m=p.getRequestEncoding,y=p.getDefaultStyleIdentifier,g=p.getDefaultFormat,b=function(e){var t=a.parse(e,!0);return a.format(i({},t,{search:null},{query:i({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"getcapabilities"},t.query)}))},h=function(e,t,n,r,o){for(var a=e.Capabilities.Contents,s=f(e),l=m(e),p=a.TileMatrixSet&&c(a.TileMatrixSet)||[],b=[],h=p.length,v=0;v<h;v++)b.push(u.getEPSGCode(p[v]["ows:SupportedCRS"]));var S=a.Layer,E=c(S).filter((function(e){return!r||-1!==e["ows:Identifier"].toLowerCase().indexOf(r.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(r.toLowerCase())}));return{numberOfRecordsMatched:E.length,numberOfRecordsReturned:Math.min(n,E.length),nextRecord:t+Math.min(n,E.length)+1,records:E.filter((function(e,r){return r>=t-1&&r<t-1+n})).map((function(e){return i({},e,{SRS:b,TileMatrixSet:p,queryable:!!d(s,"GetFeatureInfo","KVP"),requestEncoding:l,style:y(e),format:g(e),GetTileURL:d(s,"GetTile",l),capabilitiesURL:o})}))}},v={parseUrl:b,getRecords:function(e,t,n,a){var i=l[e];return i&&(new Date).getTime()<i.timestamp+1e3*(o.getConfigProp("cacheExpire")||60)?new Promise((function(r){r(h(i.data,t,n,a,e))})):r.get(b(e)).then((function(r){var o;return s.parseString(r.data,{explicitArray:!1},(function(e,t){o=t})),l[e]={timestamp:(new Date).getTime(),data:o},h(o,t,n,a,e)}))},textSearch:function(e,t,n,r){return v.getRecords(e,t,n,r)},reset:function(){Object.keys(l).forEach((function(e){delete l[e]}))}};e.exports=v},2360:function(e,t,n){var r=n(13).get,o=n(47),a=function(e,t,n,a){var i=r(o.getDefaults(),"initialState.defaultState.catalog.default.staticServices.default_map_backgrounds.backgrounds").filter((function(e){return!a||e.title.indexOf(a)>-1})),s=i.filter((function(e,r){return r>=t-1&&r<n+t-1}));return new Promise((function(e){return e({numberOfRecordsMatched:i.length,numberOfRecordsReturned:s.length,records:s,service:{Name:"Background Provider"}})}))};e.exports={getRecords:a,reset:function(){},textSearch:function(e,t,n,r){return a(0,t,n,r)}}},2361:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(15).Observable,s=n(71),l=n(769),c=n(137),u=n(197),p=n(80),f=n(55),d=n(776).interceptOGCError,m=n(13).head,y=n(274).default,g=function(e){return i.defer((function(){return s.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.search,r=void 0===n?{}:n,a=e.url,i=f.parse(r.url||a,!0);return f.format(o({},i,{search:void 0,query:o({},i.query,{service:"WMS",version:"1.1.1",layers:t,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(d)},b=function(e){return i.defer((function(){return l.getCapabilities(c.getCapabilitiesUrl(e))})).let(d).map((function(t){return l.parseLayerCapabilities(t,e)}))};e.exports={getLayerCapabilities:b,describeLayer:g,addSearch:function(e){return g(e).map((function(e){var t=e.data,n=void 0===t?{}:t;return n&&n.layerDescriptions[0]})).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.owsURL;return o({},e,{params:{},search:n?{type:"wfs",url:u.cleanAuthParamsFromURL(n)}:void 0})}))},getNativeCrs:function(e){return i.of(e).filter((function(e){return!e.nativeCrs})).switchMap((function(e){return b(e).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m(e.crs)||"EPSG:3587";if(!p.determineCrs(t)){var n=2===t.split(":").length?t.split(":")[1]:"3857";return i.fromPromise(p.fetchProjRemotely(t,p.getProjUrl(n)).then((function(e){return y.defs(t,e.data),t})))}return i.of(t)}))}))}}},2362:function(e,t,n){var r=n(1),o=n(407),a=o.branch,i=o.nest,s=function(e,t,n){var o=n.maskContainerStyle,a=n.maskStyle,s=n.className,l=n.white;return function(n){return i((function(n){return r.createElement("div",{className:"ms2-mask-container ".concat(s||""," ").concat(e(n)?"":"ms2-mask-empty"),style:o},n.children,e(n)?r.createElement("div",{className:"ms2-mask"+(l?" white-mask":""),style:a},t(n)):null)}),n)}};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.alwaysWrap,o=void 0===r||r,i=n.white,l=void 0!==i&&i,c=n.maskContainerStyle,u=void 0===c?{}:c,p=n.maskStyle,f=void 0===p?{}:p,d=n.className;return o?s(e,t,{maskContainerStyle:u,maskStyle:f,className:d,white:l}):a(e,s((function(){return!0}),t,{maskContainerStyle:u,maskStyle:f,white:l}))}},2402:function(e,t){e.exports={CHANGE_MOUSE_POSITION:"CHANGE_MOUSE_POSITION",CHANGE_MOUSE_POSITION_CRS:"CHANGE_MOUSE_POSITION_CRS",CHANGE_MOUSE_POSITION_STATE:"CHANGE_MOUSE_POSITION_STATE",changeMousePosition:function(e){return{type:"CHANGE_MOUSE_POSITION",position:e}},changeMousePositionCrs:function(e){return{type:"CHANGE_MOUSE_POSITION_CRS",crs:e}},changeMousePositionState:function(e){return{type:"CHANGE_MOUSE_POSITION_STATE",enabled:e}}}},2403:function(e,t){e.exports={HIGHLIGHT_STATUS:"HIGHLIGHT_STATUS",highlightStatus:function(e){return{type:"HIGHLIGHT_STATUS",status:e}},UPDATE_HIGHLIGHTED:"UPDATE_HIGHLIGHTED",updateHighlighted:function(e,t){return{type:"UPDATE_HIGHLIGHTED",features:e,status:t}},SET_HIGHLIGHT_FEATURES_PATH:"HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH",setHighlightFeaturesPath:function(e){return{type:"HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH",featuresPath:e}}}},2404:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(761),f=n(0),d=n(1),m=n(47),y=n(80),g=n(26),b=n(196),h=n(15),v=n(13).throttle;n(2938);var S=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"state",{}),u(l(n),"getResolutions",(function(){return n.props.resolutions})),u(l(n),"_updateMapPositionFromNewProps",(function(e){var t=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},r=e.center,o=n.props.center,a=n.map.getCenter(),i=t(r.x,o.x)&&t(r.y,o.y)||t(r.x,a.lng)&&t(r.y,a.lat),s=e.zoom,l=n.props.zoom,c=n.map.getZoom(),u=s===l||s===c;i||u?u?i||n.map.setView([e.center.y,e.center.x]):n.map.setZoom(e.zoom):n.map.setView([e.center.y,e.center.x],Math.round(e.zoom))})),u(l(n),"updateMapInfoState",(function(){var e=n.map.getBounds().toBBoxString().split(","),t={height:n.map.getSize().y,width:n.map.getSize().x},r=n.map.getCenter();n.props.onMapViewChanges({x:r.lng,y:r.lat,crs:"EPSG:4326"},n.map.getZoom(),{bounds:{minx:parseFloat(e[0]),miny:parseFloat(e[1]),maxx:parseFloat(e[2]),maxy:parseFloat(e[3])},crs:"EPSG:4326",rotation:0},t,n.props.id,n.props.projection)})),u(l(n),"setMousePointer",(function(e){n.map&&(n.map.getContainer().style.cursor=e||"auto")})),u(l(n),"mouseMoveEvent",(function(e){var t=e.latlng.wrap();n.props.onMouseMove({x:t.lng||0,y:t.lat||0,z:n.elevationLayer&&n.elevationLayer.getElevation(t,e.containerPoint)||void 0,crs:"EPSG:4326",pixel:{x:e.containerPoint.x,y:e.containerPoint.x}})})),u(l(n),"registerHooks",(function(){n.props.hookRegister.registerHook(b.EXTENT_TO_ZOOM_HOOK,(function(e){var t=y.reproject([e[0],e[1]],n.props.projection,"EPSG:4326"),r=y.reproject([e[2],e[3]],n.props.projection,"EPSG:4326");return n.map.getBoundsZoom([[t.y,t.x],[r.y,r.x]])-1})),n.props.hookRegister.registerHook(b.RESOLUTIONS_HOOK,(function(){return n.getResolutions()})),n.props.hookRegister.registerHook(b.COMPUTE_BBOX_HOOK,(function(e,t){var r=p.latLng([e.y,e.x]),o=n.map._getNewPixelOrigin(r,t),a=new p.Bounds(o,o.add(n.map.getSize())),i=n.map.unproject(a.getBottomLeft(),t),s=n.map.unproject(a.getTopRight(),t),l=new p.LatLngBounds(i,s).toBBoxString().split(",");return{bounds:{minx:parseFloat(l[0]),miny:parseFloat(l[1]),maxx:parseFloat(l[2]),maxy:parseFloat(l[3])},crs:"EPSG:4326",rotation:0}})),n.props.hookRegister.registerHook(b.GET_PIXEL_FROM_COORDINATES_HOOK,(function(e){var t=y.reproject(e,n.props.projection,"EPSG:4326"),r=n.map.latLngToContainerPoint([t.y,t.x]);return[r.x,r.y]})),n.props.hookRegister.registerHook(b.GET_COORDINATES_FROM_PIXEL_HOOK,(function(e){var t=n.map.containerPointToLatLng(e),r=y.reproject([t.lng,t.lat],"EPSG:4326",n.props.projection);return[r.x,r.y]})),n.props.hookRegister.registerHook(b.ZOOM_TO_EXTENT_HOOK,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.padding,o=t.crs,a=t.maxZoom,i=t.duration,s=r&&p.point(r.left||0,r.top||0),l=r&&p.point(r.right||0,r.bottom||0),c=y.reprojectBbox(e,o,"EPSG:4326");n.map.fitBounds([[c[1],c[0]],[c[3],c[2]]],{paddingTopLeft:s,paddingBottomRight:l,maxZoom:a,duration:i,animate:0!==i&&void 0})}))})),u(l(n),"addLayerObservable",(function(e,t){!e.layer.layerId||e.layer&&e.layer.options&&"vector"===e.layer.options.msLayer||e&&e.layer&&e.layer.on&&t&&(e.layer._ms2LoadingTileCount=0,e.layer.layerLoadingStream$=new h.Subject,e.layer.layerLoadStream$=new h.Subject,e.layer.layerErrorStream$=new h.Subject,e.layer.layerErrorStream$.bufferToggle(e.layer.layerLoadingStream$,(function(){return e.layer.layerLoadStream$})).subscribe({next:function(t){var r=e.layer._ms2LoadingTileCount||t&&t.length||0;t&&t.length>0&&n.props.onLayerError(t[0].target.layerId,r,t.length),e.layer._ms2LoadingTileCount=0}}))})),n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){if(this.zoomOffset=0,this.props.mapOptions&&this.props.mapOptions.view&&this.props.mapOptions.view.resolutions&&this.props.mapOptions.view.resolutions.length>0){var e=p.CRS.EPSG3857.scale,t=this.props.mapOptions.view.resolutions[0]/b.getGoogleMercatorResolutions(0,23)[0];this.crs=g({},p.CRS.EPSG3857,{scale:function(n){return e.call(p.CRS.EPSG3857,n)/Math.pow(2,Math.round(Math.log2(t)))}}),this.zoomOffset=Math.round(Math.log2(t))}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.limits,n=void 0===t?{}:t,r=n.restrictedExtent&&n.crs&&y.reprojectBbox(n.restrictedExtent,n.crs,"EPSG:4326"),o=g({},this.props.interactive?{}:{dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,tap:!1,attributionControl:!1,maxBounds:r&&p.latLngBounds([[r[1],r[0]],[r[3],r[2]]]),maxBoundsViscosity:r&&1,minZoom:n&&n.minZoom,maxZoom:n&&n.maxZoom||23},this.props.mapOptions,this.crs?{crs:this.crs}:{}),a=p.map(this.props.id,g({zoomControl:this.props.zoomControl},o)).setView([this.props.center.y,this.props.center.x],Math.round(this.props.zoom));this.map=a,this.attribution=p.control.attribution(),this.attribution.addTo(this.map),this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&(document.querySelector(this.props.mapOptions.attribution.container).appendChild(this.attribution.getContainer()),document.querySelector(".leaflet-control-container .leaflet-control-attribution")&&document.querySelector(".leaflet-control-container .leaflet-control-attribution").parentNode.removeChild(document.querySelector(".leaflet-control-container .leaflet-control-attribution"))),this.map.on("moveend",this.updateMapInfoState),this.map.on("singleclick",(function(t){e.props.onClick&&e.props.onClick({pixel:{x:t.containerPoint.x,y:t.containerPoint.y},latlng:{lat:t.latlng.lat,lng:t.latlng.lng,z:e.elevationLayer&&e.elevationLayer.getElevation(t.latlng,t.containerPoint)||void 0},modifiers:{alt:t.originalEvent.altKey,ctrl:t.originalEvent.ctrlKey,shift:t.originalEvent.shiftKey}})}));var i=v(this.mouseMoveEvent,100);this.map.on("dragstart",(function(){e.map.off("mousemove",i)})),this.map.on("dragend",(function(){e.map.on("mousemove",i)})),this.map.on("mousemove",i),this.map.on("contextmenu",(function(){e.props.onRightClick&&e.props.onRightClick(event.containerPoint)})),this.updateMapInfoState(),this.setMousePointer(this.props.mousePointer),this.forceUpdate(),this.map.on("layeradd",(function(t){if(t.layer._ms2Added){var n=t.layer.layerLoadingStream$&&t.layer.layerLoadingStream$.isStopped;e.addLayerObservable(t,n)}else t.layer._ms2Added=!0,t.layer.getElevation&&(e.elevationLayer=t.layer),t.layer.layerId&&(t.layer&&t.layer.options&&"vector"===t.layer.options.msLayer||t&&t.layer&&t.layer.on&&(e.addLayerObservable(t,!0),t.layer.options&&t.layer.options.hideLoading||(e.props.onLayerLoading(t.layer.layerId),t.layer.layerLoadingStream$.next()),t.layer.on("loading",(function(n){e.props.onLayerLoading(n.target.layerId),t.layer.layerLoadingStream$.next()})),t.layer.on("load",(function(n){e.props.onLayerLoad(n.target.layerId),t.layer.layerLoadStream$.next()})),t.layer.on("tileloadstart ",(function(){t.layer._ms2LoadingTileCount++})),t.layer.on("tileerror",(function(e){t.layer.layerErrorStream$.next(e)}))))})),this.map.on("layerremove",(function(e){e.layer.layerLoadingStream$&&(e.layer.layerLoadingStream$.complete(),e.layer.layerLoadStream$.complete(),e.layer.layerErrorStream$.complete())})),this.drawControl=null,this.props.registerHooks&&this.registerHooks()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.mousePointer!==this.props.mousePointer&&this.setMousePointer(e.mousePointer),this.map&&e.mapStateSource!==this.props.id&&this._updateMapPositionFromNewProps(e),e.zoomControl!==this.props.zoomControl&&(e.zoomControl?this.map.addControl(p.control.zoom()):this.map.removeControl(this.map.zoomControl)),this.map&&e.resize!==this.props.resize&&setTimeout((function(){t.map.invalidateSize(!1)}),0),this.props.limits!==e.limits){var n=e.limits,r=void 0===n?{}:n,o=this.props.limits;if(r.restrictedExtent!==(o&&o.restrictedExtent)){var a=r.restrictedExtent&&r.crs&&y.reprojectBbox(r.restrictedExtent,r.crs,"EPSG:4326");this.map.setMaxBounds(r.restrictedExtent&&p.latLngBounds([[a[1],a[0]],[a[3],a[2]]]))}r.minZoom!==(o&&o.minZoom)&&this.map.setMinZoom(r.minZoom)}return!1}},{key:"componentWillUnmount",value:function(){var e=this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&document.querySelector(this.props.mapOptions.attribution.container);e&&this.attribution.getContainer()&&e.querySelector(".leaflet-control-attribution")&&e.removeChild(this.attribution.getContainer()),this.map.remove()}},{key:"render",value:function(){var e=this,t=this.map,n=this.props.projection,r=t?d.Children.map(this.props.children,(function(r){return r?d.cloneElement(r,{map:t,projection:n,zoomOffset:e.zoomOffset,onCreationError:e.props.onCreationError,onClick:e.props.onClick}):null})):null;return d.createElement("div",{id:this.props.id,style:this.props.style},r)}}])&&a(n.prototype,r),f&&a(n,f),t}(d.Component);u(S,"propTypes",{id:f.string,center:m.PropTypes.center,zoom:f.number.isRequired,mapStateSource:m.PropTypes.mapStateSource,style:f.object,projection:f.string,onMapViewChanges:f.func,onClick:f.func,onRightClick:f.func,mapOptions:f.object,limits:f.object,zoomControl:f.bool,mousePointer:f.string,onMouseMove:f.func,onLayerLoading:f.func,onLayerLoad:f.func,onLayerError:f.func,resize:f.number,measurement:f.object,changeMeasurementState:f.func,registerHooks:f.bool,interactive:f.bool,resolutions:f.array,hookRegister:f.object,onCreationError:f.func}),u(S,"defaultProps",{id:"map",onMapViewChanges:function(){},onCreationError:function(){},onClick:null,onMouseMove:function(){},zoomControl:!0,mapOptions:{zoomAnimation:!0,attributionControl:!1},projection:"EPSG:3857",center:{x:13,y:45,crs:"EPSG:4326"},zoom:5,onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},resize:0,registerHooks:!0,hookRegister:b,style:{},interactive:!0,resolutions:b.getGoogleMercatorResolutions(0,23)}),e.exports=S},2405:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(0),m=n(1),y=n(411),g=n(26),b=n(13).isEqual,h=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return f(u(n=l(this,(e=c(t)).call.apply(e,[this].concat(o)))),"setLayerVisibility",(function(e){e!==(n.props.options&&!1!==n.props.options.visibility)&&(e?n.addLayer():n.removeLayer(),n.updateZIndex())})),f(u(n),"setLayerOpacity",(function(e){e!==(n.props.options&&void 0!==n.props.options.opacity?n.props.options.opacity:1)&&n.layer&&n.layer.setOpacity&&n.layer.setOpacity(e)})),f(u(n),"generateOpts",(function(e,t,r){return g({},e,t?{zIndex:t,srs:n.props.srs}:null,{zoomOffset:-n.props.zoomOffset,onError:function(){n.props.onCreationError(e)},securityToken:r})})),f(u(n),"updateZIndex",(function(e){var t=e||n.props.position;t&&n.layer&&n.layer.setZIndex&&n.layer.setZIndex(t)})),f(u(n),"createLayer",(function(e,t,r,o){if(e){var a=n.generateOpts(t,r,o);n.layer=y.createLayer(e,a),n.layer&&(n.layer.layerName=t.name,n.layer.layerId=t.id),n.forceUpdate()}})),f(u(n),"updateLayer",(function(e,t){var r=y.updateLayer(e.type,n.layer,n.generateOpts(e.options,e.position,e.securityToken),n.generateOpts(t.options,t.position,t.securityToken));r&&(n.removeLayer(),n.layer=r,n.addLayer())})),f(u(n),"addLayer",(function(){if(n.isValid()&&(n.props.map.addLayer(n.layer),n.props.options.refresh&&n.layer.setParams)){var e=0;n.refreshTimer=setInterval((function(){n.layer.setParams(g({},n.props.options.params,{_refreshCounter:e++}))}),n.props.options.refresh)}})),f(u(n),"removeLayer",(function(){n.isValid()&&n.props.map.removeLayer(n.layer)})),f(u(n),"isValid",(function(){if(n.layer){var e=y.isValid(n.props.type,n.layer);return n.valid=e,e}return!1})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.valid=!0,this.createLayer(this.props.type,this.props.options,this.props.position,this.props.securityToken),this.props.options&&this.layer&&!1!==this.props.options.visibility&&(this.addLayer(),this.updateZIndex())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.options&&!1!==e.options.visibility;this.setLayerVisibility(t);var n=e.options&&void 0!==e.options.opacity?e.options.opacity:1;this.setLayerOpacity(n),e.position!==this.props.position&&this.updateZIndex(e.position),this.updateLayer(e,this.props)}},{key:"shouldComponentUpdate",value:function(e){var t=this;return!["map","type","srs","position","zoomOffset","onClick","options","children"].reduce((function(n,r){switch(r){case"map":case"type":case"srs":case"position":case"zoomOffset":case"onClick":case"children":return n&&t.props[r]===e[r];case"options":return n&&(t.props[r]===e[r]||b(a({},t.props[r],{loading:!1}),a({},e[r],{loading:!1})));default:return n}}),!0)}},{key:"componentWillUnmount",value:function(){this.layer&&this.props.map&&(this.removeLayer(),this.refreshTimer&&clearInterval(this.refreshTimer))}},{key:"render",value:function(){var e=this;if(this.props.children){var t=this.layer,n=t?m.Children.map(this.props.children,(function(n){return n?m.cloneElement(n,{container:t,styleName:e.props.options&&e.props.options.styleName,onClick:e.props.onClick,options:e.props.options||{}}):null})):null;return m.createElement(m.Fragment,null,n)}return y.renderLayer(this.props.type,this.props.options,this.props.map,this.props.map.id,this.layer)}}])&&s(n.prototype,r),o&&s(n,o),t}(m.Component);f(h,"propTypes",{map:d.object,type:d.string,srs:d.string,options:d.object,position:d.number,zoomOffset:d.number,onCreationError:d.func,onClick:d.func,securityToken:d.string}),f(h,"defaultProps",{onCreationError:function(){},options:{}}),e.exports=h},2406:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(0),m=n(1),y=n(13),g=y.isEqual,b=y.isArray,h=y.castArray,v=n(26),S=n(415),E=n(2584).geometryToLayer,O=n(2249).createStylesAsync,w=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return f(u(n=l(this,(e=c(t)).call.apply(e,[this].concat(o)))),"createLayer",(function(e){e.geometry&&n.addFeature(a({},e,{style:e.style&&h(e.style)||void 0})),e.features&&e.features.forEach((function(t){var r=v({},e,{type:t.type,geometry:t.geometry,style:t.style&&h(t.style)||void 0,properties:t.properties});n.addFeature(r)}))})),f(u(n),"removeLayer",(function(e){n._layers&&(n._layers.forEach((function(t){e.container.removeLayer(t)})),n._layers=[])})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._layers=[],(this.props.container&&this.props.geometry||this.props.features)&&this.createLayer(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){g(e.properties,this.props.properties)&&g(e.geometry,this.props.geometry)&&e.features===this.props.features&&e.style===this.props.style||(this.removeLayer(e),this.createLayer(e))}},{key:"shouldComponentUpdate",value:function(e){return!g(e.properties,this.props.properties)||!g(e.geometry,this.props.geometry)||e.features!==this.props.features}},{key:"componentWillUnmount",value:function(){this.removeLayer(this.props)}},{key:"render",value:function(){return null}},{key:"addFeature",value:function(e){var t=this;if(b(e.style)){var n=O(e.style);S.all(n).then((function(n){t.addLayer(e,n)}))}else this.addLayer(e,e.style)}},{key:"addLayer",value:function(e,t){var n=this,r=E({type:e.type,geometry:e.geometry,styleName:e.styleName,properties:e.properties,msId:e.msId},{style:t});e.container.addLayer(r),r.on("click",(function(t){e.onClick&&e.onClick({pixel:{x:t.originalEvent&&t.originalEvent.x,y:t.originalEvent&&t.originalEvent.y},latlng:t.latlng},n.props.options.handleClickOnLayer?n.props.options.id:null)})),this._layers.push(r)}}])&&s(n.prototype,r),o&&s(n,o),t}(m.Component);f(w,"propTypes",{msId:d.oneOfType([d.string,d.number]),type:d.string,styleName:d.string,properties:d.object,container:d.object,geometry:d.object,features:d.array,style:d.object,onClick:d.func,options:d.object}),e.exports=w},2423:function(e,t,n){e.exports=n.p+"symbolMissing.svg"},2424:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(761),m=n(26);n(2960),n(2961);var y={follow:!0,remainActive:!0,stopFollowingOnDrag:!0,locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:1/0,watch:!0}};d.Control.MSLocate=d.Control.Locate.extend({setMap:function(e){this._map=e,this._layer=this.options.layer||new d.LayerGroup,this._layer.addTo(e),this._event=void 0,this._prevBounds=null;var t={};d.extend(t,this.options.markerStyle,this.options.followMarkerStyle),this.options.followMarkerStyle=t,t={},d.extend(t,this.options.circleStyle,this.options.followCircleStyle),this.options.followCircleStyle=t,this._resetVariables(),this._map.on("unload",this._unload,this)},_setClasses:function(e){return this._map.fire("locatestatus",{state:e}),e},_updateContainerStyle:function(){this._isFollowing()?this._setClasses("following"):this._active&&this._setClasses("active")},_cleanClasses:function(){return null},setStrings:function(e){this.options.strings=m({},this.options.strings,e)}});var g=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"onLocationError",(function(e){n.props.onLocateError(e.message),n.props.changeLocateState("DISABLED")})),u(l(n),"locateControlState",(function(e){"requesting"===e.state&&"LOCATING"!==n.props.status?n.props.changeLocateState("LOCATING"):"following"!==e.state||n.fol?"active"===e.state&&"ENABLED"!==n.props.status&&n.props.changeLocateState("ENABLED"):n.props.changeLocateState("FOLLOWING")})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.map&&(this.locate=new d.Control.MSLocate(y),this.locate.setMap(this.props.map),this.props.map.on("locatestatus",this.locateControlState),this.locate.options.onLocationError=this.onLocationError,this.locate.options.onLocationOutsideMapBounds=this.onLocationError),this.props.status.enabled&&this.locate.start()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.fol=!1,e.status!==this.props.status&&("ENABLED"!==e.status||this.locate._active?"FOLLOWING"===e.status&&this.locate._active&&!this.locate._following?(this.fol=!0,this.locate.stop(),this.locate.start()):"DISABLED"===e.status&&(this.locate._following=!1,this.locate.stop()):this.locate.start()),e.messages!==this.props.messages&&(this.locate.setStrings(e.messages),"DISABLED"!==e.status&&this.locate.drawMarker(this.locate._map))}},{key:"render",value:function(){return null}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(g,"displayName","Locate"),u(g,"propTypes",{map:p.object,status:p.string,messages:p.object,changeLocateState:p.func,onLocateError:p.func}),u(g,"defaultProps",{id:"overview",status:"DISABLED",changeLocateState:function(){},onLocateError:function(){}}),e.exports=g},2425:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n(0),y=n(1),g=n(26),b=n(761),h=n(13).slice,v=n(80),S=v.reproject,E=v.calculateAzimuth,O=v.calculateDistance,w=v.transformLineToArcs,T=n(2248),A=T.convertUom,P=T.getFormattedBearingValue;n(2592);var C={km:2,ha:2,m:2,mi:2,ac:2,yd:0,ft:0,nm:2,sqkm:2,sqha:2,sqm:2,sqmi:2,sqac:2,sqyd:2,sqft:2,sqnm:2};b.getMeasureWithTreshold=function(e,t,n,r,o,a,i){return e>t?b.GeometryUtil.formattedNumber(A(e,n,r),o[r])+" "+i:b.GeometryUtil.formattedNumber(e,o[n])+" "+a};var _=b.GeometryUtil.readableDistance;b.GeometryUtil.readableDistance=function(e,t,n,r,o,a){if(!a)return _.apply(null,arguments);if("Bearing"===a.geomType)return a.bearing;var i=b.Util.extend({},C,o),s=a.uom.length,l=s.unit,c=s.label,u=b.GeometryUtil.formattedNumber(A(e,"m",l),i[l])+" "+c;return a.useTreshold&&(t&&(u=b.getMeasureWithTreshold(e,1e3,"m","km",i,"m","km")),"mi"===l&&(u=b.getMeasureWithTreshold(A(e,"m","yd"),1760,"yd","mi",i,"yd","mi"))),u};var x=b.GeometryUtil.readableArea;b.GeometryUtil.readableArea=function(e,t,n,r){if(!r)return x.apply(null,arguments);var o=r.uom.area,a=o.unit,i=o.label,s=b.Util.extend({},C,n),l=b.GeometryUtil.formattedNumber(A(e,"sqm",a),s[a])+" "+i;return r.useTreshold&&(t&&(l=b.getMeasureWithTreshold(e,1e6,"sqm","sqkm",s,"m²","km²")),"sqmi"===a&&(l=b.getMeasureWithTreshold(A(e,"sqm","sqyd"),3097600,"sqyd","sqmi",s,"yd²","mi²"))),l};var I=b.Draw.Polygon.prototype._getMeasurementString;b.Draw.Polygon.prototype._getMeasurementString=function(){if(!this.options.uom)return I.apply(this,arguments);var e=this._area,t="";if(!e&&!this.options.showLength)return null;if(this.options.showLength&&(t=b.Draw.Polyline.prototype._getMeasurementString.call(this)),e){var n={uom:this.options.uom,useTreshold:this.options.useTreshold};t+=this.options.showLength?"<br>":""+b.GeometryUtil.readableArea(e,this.options.metric,this.options.precision,n)}return t};var j=b.Draw.Polyline.prototype._getMeasurementString;b.Draw.Polyline.prototype._getMeasurementString=function(){if(!this.options.uom)return j.apply(this,arguments);var e,t=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();e=b.GeometryUtil.isVersion07x()?n&&t&&t.distanceTo?this._measurementRunningTotal+t.distanceTo(n)*(this.options.factor||1):this._measurementRunningTotal||0:n&&t?this._measurementRunningTotal+this._map.distance(t,n)*(this.options.factor||1):this._measurementRunningTotal||0;var r={uom:this.options.uom,useTreshold:this.options.useTreshold,geomType:this.options.geomType,bearing:this.options.bearing?P(this.options.bearing):0};return b.GeometryUtil.readableDistance(e,this.options.metric,this.options.feet,this.options.nautic,this.options.precision,r)};var L=function(e){function t(){var e,n;s(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return d(p(n=c(this,(e=u(t)).call.apply(e,[this].concat(o)))),"onDrawStart",(function(){n.props.map.off("click",n.restartDrawing,p(n)),n.removeArcLayer(),n.props.map.doubleClickZoom&&n.props.map.doubleClickZoom.disable(),n.drawing=!0})),d(p(n),"onDrawCreated",(function(e){n.drawing=!1,n.props.map.addLayer(e.layer),n.lastLayer=e.layer;var t=n.lastLayer&&n.lastLayer.toGeoJSON()||{};if("LineString"===n.props.measurement.geomType&&(t=g({},t,{geometry:g({},t.geometry,{coordinates:w(t.geometry.coordinates)})})),"Point"===n.props.measurement.geomType){var r=n.drawControl._marker.getLatLng(),o={x:r.lng,y:r.lat,srs:"EPSG:4326"},a=g({},n.props.measurement,{point:o,feature:t});n.props.changeMeasurementState(a)}else{var i=g({},n.props.measurement,{feature:t});n.props.changeMeasurementState(i)}n.props.measurement.lineMeasureEnabled&&n.lastLayer&&n.addArcsToMap([t]),setTimeout((function(){n.props.map.off("click",n.restartDrawing,p(n)),n.props.map.on("click",n.restartDrawing,p(n))}),100)})),d(p(n),"onDrawVertex",(function(){var e=n.drawControl._markers||[];"Bearing"===n.props.measurement.geomType&&e.length>=2?setTimeout((function(){n.drawControl._markers=h(n.drawControl._markers,0,2),n.drawControl._poly._latlngs=h(n.drawControl._poly._latlngs,0,2),n.drawControl._poly._originalPoints=h(n.drawControl._poly._originalPoints,0,2),n.updateMeasurementResults(),n.drawControl._finishShape(),n.drawControl.disable()}),100):n.updateMeasurementResults()})),d(p(n),"addArcsToMap",(function(e){n.removeLastLayer();var t=e.map((function(e){return g({},e,{geometry:g({},e.geometry,{coordinates:w(e.geometry.coordinates)})})}));n.arcLayer=b.geoJson(t,{style:{color:"#ffcc33",opacity:1,weight:1,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}}),n.props.map.addLayer(n.arcLayer),t&&t.length>0&&n.arcLayer.addData(t)})),d(p(n),"updateMeasurementResults",(function(){if(n.drawing&&n.drawControl){var e=0,t=0,r=0,o=n.drawControl._currentLatLng;if("LineString"===n.props.measurement.geomType&&n.drawControl._markers&&n.drawControl._markers.length>1){var a=n.drawControl._markers.reduce((function(e,t){var n=t.getLatLng(),r=n.lng,o=n.lat;return[].concat(i(e),[[r,o]])}),[]);e=O(a,n.props.measurement.lengthFormula)}else if("Polygon"===n.props.measurement.geomType&&n.drawControl._poly){var s=[].concat(i(n.drawControl._poly.getLatLngs()),[o]);t=b.GeometryUtil.geodesicArea(s)}else"Bearing"===n.props.measurement.geomType&&n.drawControl._markers&&n.drawControl._markers.length>0&&(r=n.calculateBearing());var l=g({},n.props.measurement,{point:null,len:e,area:t,bearing:r});n.props.changeMeasurementState(l)}})),d(p(n),"restartDrawing",(function(){n.props.map.off("click",n.restartDrawing,p(n)),n.props.map.doubleClickZoom&&n.props.map.doubleClickZoom.enable(),n.props.map.removeLayer(n.lastLayer),n.drawControl.enable(),n.drawing=!0})),d(p(n),"addDrawInteraction",(function(e){if(n.removeDrawInteraction(),n.props.map.on("draw:created",n.onDrawCreated,p(n)),n.props.map.on("draw:drawstart",n.onDrawStart,p(n)),n.props.map.on("draw:drawvertex",n.onDrawVertex,p(n)),n.props.map.on("mousemove",n.updateBearing,p(n)),n.props.updateOnMouseMove&&n.props.map.on("mousemove",n.updateMeasurementResults,p(n)),"Point"===e.measurement.geomType)n.drawControl=new b.Draw.Marker(n.props.map,{repeatMode:!1});else if("LineString"===e.measurement.geomType||"Bearing"===e.measurement.geomType){var t=n.uomLengthOptions(e);n.drawControl=new b.Draw.Polyline(n.props.map,a({shapeOptions:{color:"#ffcc33",weight:2},showLength:!0,useTreshold:e.useTreshold,uom:e.uom,geomType:e.measurement.geomType},t,{repeatMode:!1,icon:new b.DivIcon({iconSize:new b.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new b.DivIcon({iconSize:new b.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}))}else if("Polygon"===e.measurement.geomType){var r=n.uomAreaOptions(e);n.drawControl=new b.Draw.Polygon(n.props.map,a({shapeOptions:{color:"#ffcc33",weight:2,fill:"rgba(255, 255, 255, 0.2)"},showArea:!0,allowIntersection:!1,showLength:!1,repeatMode:!1,useTreshold:e.useTreshold,uom:e.uom,geomType:e.measurement.geomType},r,{icon:new b.DivIcon({iconSize:new b.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new b.DivIcon({iconSize:new b.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}))}n.drawControl.enable()})),d(p(n),"removeDrawInteraction",(function(){null!==n.drawControl&&void 0!==n.drawControl&&(n.drawControl.disable(),n.drawControl=null,n.removeLastLayer(),n.removeArcLayer(),n.props.map.off("draw:created",n.onDrawCreated,p(n)),n.props.map.off("draw:drawstart",n.onDrawStart,p(n)),n.props.map.off("draw:drawvertex",n.onDrawVertex,p(n)),n.props.map.off("mousemove",n.updateBearing,p(n)),n.props.map.off("click",n.restartDrawing,p(n)),n.props.updateOnMouseMove&&n.props.map.off("mousemove",n.updateMeasurementResults,p(n)),n.props.map.doubleClickZoom&&n.props.map.doubleClickZoom.enable())})),d(p(n),"removeLastLayer",(function(){n.lastLayer&&n.props.map.removeLayer(n.lastLayer)})),d(p(n),"removeArcLayer",(function(){n.arcLayer&&n.props.map.removeLayer(n.arcLayer)})),d(p(n),"uomLengthOptions",(function(e){var t=e.uom.length.unit;return{metric:"m"===t||"km"===t,nautic:"nm"===t,feet:"ft"===t}})),d(p(n),"uomAreaOptions",(function(e){var t=e.uom.area.unit;return{metric:"sqm"===t||"sqkm"===t,nautic:"sqnm"===t,feet:"sqft"===t}})),d(p(n),"calculateBearing",(function(){var e,t=n.drawControl._currentLatLng,r=n.drawControl._markers,o=[r[0].getLatLng().lng,r[0].getLatLng().lat];return 1===r.length?e=[t.lng,t.lat]:2===r.length&&(e=[r[1].getLatLng().lng,r[1].getLatLng().lat]),o=S(o,"EPSG:4326",n.props.projection),e=S(e,"EPSG:4326",n.props.projection),E(o,e,n.props.projection)})),d(p(n),"updateBearing",(function(){"Bearing"===n.props.measurement.geomType&&n.drawControl._markers&&n.drawControl._markers.length>0&&n.drawControl.setOptions({bearing:n.calculateBearing()})})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if((e&&e.uom&&e.uom.length&&e.uom.length.unit)!==(this.props&&this.props.uom&&this.props.uom.length&&this.props.uom.length.unit)&&this.drawControl){var t=this.uomLengthOptions(e);this.drawControl.setOptions(a({},t,{uom:e.uom}))}if((e&&e.uom&&e.uom.area&&e.uom.area.unit)!==(this.props&&this.props.uom&&this.props.uom.area&&this.props.uom.area.unit)&&this.drawControl){var n=this.uomAreaOptions(e);this.drawControl.setOptions(a({},n,{uom:e.uom}))}(e.measurement.geomType&&e.measurement.geomType!==this.props.measurement.geomType||e.measurement.geomType&&this.props.measurement.geomType&&(e.measurement.lineMeasureEnabled||e.measurement.areaMeasureEnabled||e.measurement.bearingMeasureEnabled)&&!this.props.enabled&&e.enabled)&&this.addDrawInteraction(e),e.measurement.geomType||this.removeDrawInteraction()}},{key:"render",value:function(){var e=this.props.messages||!!this.context.messages&&this.context.messages.drawLocal;return e&&(b.drawLocal=e),null}}])&&l(n.prototype,r),o&&l(n,o),t}(y.Component);d(L,"displayName","MeasurementSupport"),d(L,"propTypes",{map:m.object,metric:m.bool,feet:m.bool,nautic:m.bool,enabled:m.bool,useTreshold:m.bool,projection:m.string,measurement:m.object,changeMeasurementState:m.func,messages:m.object,uom:m.object,updateOnMouseMove:m.bool}),d(L,"contextTypes",{messages:m.object}),d(L,"defaultProps",{uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},updateOnMouseMove:!1,metric:!0,nautic:!1,useTreshold:!1,feet:!1}),e.exports=L},2426:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(0),p=n(1),f=n(2963),d=n(761),m=n(411),y=n(26);n(2964);var g={position:"bottomright",width:300,height:150,collapsedWidth:25,collapsedHeight:25,zoomLevelOffset:-5,zoomLevelFixed:null,zoomAnimation:!1,toggleDisplay:!0,autoToggleDisplay:!1,minimized:!0},b=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=y({},g,this.props.overviewOpt);if(this.props.layers){var t=[];this.props.layers.forEach((function(e){t.push(m.createLayer(e.type,e.options||{}))})),1===t.length?this.overview=new f(t[0],e):t.length>1&&(this.overview=new f(d.layerGroup(t),e))}this.props.map&&this.overview&&this.overview.addTo(this.props.map)}},{key:"render",value:function(){return null}}])&&a(n.prototype,r),c&&a(n,c),t}(p.Component);c(b,"displayName","Overview"),c(b,"propTypes",{map:u.object,overviewOpt:u.object,layers:u.array}),c(b,"defaultProps",{id:"overview",overviewOpt:{},layers:[{type:"osm",options:{}}]}),e.exports=b},2427:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(0),p=n(1),f=n(761),d=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){if(this.scalebar=f.control.scale(this.props),this.props.map&&(this.scalebar.addTo(this.props.map),this.props.container)){document.querySelector(this.props.container).appendChild(this.scalebar.getContainer());var e=document.querySelector(".leaflet-control-container .leaflet-control-scale-line");e&&e.parentNode&&e.parentNode.removeChild(e)}}},{key:"componentWillUnmount",value:function(){if(this.props.container&&this.scalebar&&this.scalebar.getContainer())try{document.querySelector(this.props.container).removeChild(this.scalebar.getContainer())}catch(e){}}},{key:"render",value:function(){return null}}])&&a(n.prototype,r),c&&a(n,c),t}(p.Component);c(d,"propTypes",{map:u.object,position:u.oneOf(["topleft","topright","bottomleft","bottomright"]),maxWidth:u.number,metric:u.bool,imperial:u.bool,updateWhenIdle:u.bool,container:u.string}),c(d,"defaultProps",{map:null,position:"bottomleft",maxWidth:100,metric:!0,imperial:!1,updateWhenIdle:!1}),e.exports=d},2429:function(e,t,n){"use strict";n.r(t),n.d(t,"createOLGeometry",(function(){return v})),n.d(t,"isPolygon",(function(){return S})),n.d(t,"DEFAULT_INTERACTION_OPTIONS",(function(){return E}));var r=n(2434),o=n(2573),a=n(2437),i=n(2291),s=n(2438),l=n(2439),c=n(2440),u=n(2441),p=n(2443),f=n(2201),d=n(2252),m=n(2290),y=n(2334),g=n(2335),b=n(2972),h=n(2182),v=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,r=t.coordinates,o=t.radius,a=t.center;switch(n){case"Point":e=new f.a(r||[]);break;case"LineString":e=new d.a(r||[]);break;case"MultiPoint":e=new m.a(r||[]);break;case"MultiLineString":e=new y.a(r||[]);break;case"MultiPolygon":e=new g.a(r||[]);break;default:e=o&&a?Object(h.c)(new b.a([a.x,a.y],o),100):new h.b(r||[])}return e},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.geometry&&"Polygon"===e.geometry.type},E={dragPan:{options:{kinetic:!1},Instance:r.a},keyboardPan:{options:{kinetic:!1},Instance:o.a},mouseWheelZoom:{options:{duration:0},Instance:a.a},doubleClickZoom:{options:{duration:0},Instance:i.a},shiftDragZoom:{options:{duration:0},Instance:s.a},keyboardZoom:{options:{},Instance:l.a},pinchZoom:{options:{duration:0},Instance:c.a},pinchRotate:{options:{},Instance:u.a},altShiftDragRotate:{options:{},Instance:p.a}}},2448:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return I}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(270),l=n(80),c=n.n(l),u=n(26),p=n.n(u),f=n(15),d=n.n(f),m=n(2287),y=n.n(m),g=n(34),b=n.n(g),h=n(2616),v=n.n(h),S=n(2189),E=n.n(S);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?C(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){function t(){var e,n;w(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return x(C(n=A(this,(e=P(t)).call.apply(e,[this].concat(o)))),"setLayerVisibility",(function(e){e!==(n.props.options&&!1!==n.props.options.visibility)&&n.layer&&n.isValid()&&n.layer.setVisible(e)})),x(C(n),"setLayerOpacity",(function(e){e!==(n.props.options&&void 0!==n.props.options.opacity?n.props.options.opacity:1)&&n.layer&&n.layer.setOpacity(e)})),x(C(n),"generateOpts",(function(e,t,r,o){return p()({},e,y()(t)?{zIndex:t}:null,{srs:r,onError:function(){n.props.onCreationError(e)},securityToken:o})})),x(C(n),"createLayer",(function(e,t,r,o){if(e){var a=n.generateOpts(t,r,c.a.normalizeSRS(n.props.srs),o);n.layer=s.default.createLayer(e,a,n.props.map,n.props.mapId);var i=s.default.isCompatible(e,a);if(n.layer&&!n.layer.detached){var l=n.props.map,u=l&&l.getView().getProjection().getExtent(),p=t&&t.bbox&&t.bbox.bounds,f=u&&c.a.reprojectBbox(u,n.props.srs,"EPSG:4326"),d=p&&c.a.reprojectBbox(c.a.getExtentFromNormalized(p,n.props.srs).extent,"EPSG:4326");d&&2===d.length&&b()(d[1])&&(d=d[1]),(f&&d&&!c.a.isBboxCompatible(c.a.getPolygonFromExtent(f),c.a.getPolygonFromExtent(d))||!i)&&n.props.onWarning({title:"warning",message:"notification.incompatibleDataAndProjection",action:{label:"close"},position:"tc",uid:"1"}),n.addLayer(t)}n.layer&&n.layer.get&&n.layer.get("getElevation")&&n.props.map.set("elevationLayer",n.layer),n.forceUpdate()}})),x(C(n),"updateLayer",(function(e,t){if(e.position===t.position&&e.srs===t.srs&&e.securityToken===t.securityToken){if(e.options===t.options)return;if(E()(v()(e.options,["loading"]),v()(t.options,["loading"])))return}var r=s.default.updateLayer(n.props.type,n.layer,n.generateOpts(e.options,e.position,e.projection,e.securityToken),n.generateOpts(t.options,t.position,t.projection,t.securityToken),n.props.map,n.props.mapId);r&&(n.props.map.removeLayer(n.layer),n.layer=r,n.addLayer(e.options))})),x(C(n),"addLayer",(function(e){if(n.isValid()){n.props.map.addLayer(n.layer);var t=new d.a.Subject,r=new d.a.Subject;e.handleClickOnLayer&&n.layer.set("handleClickOnLayer",!0),n.layer.getSource().on("tileloadstart",(function(){0===n.tilestoload?(n.props.onLayerLoading(e.id),n.tilestoload++):n.tilestoload++})),n.layer.getSource().on("tileloadend",(function(){t.next({type:"tileloadend"}),n.tilestoload--,0===n.tilestoload&&r.next()})),n.layer.getSource().on("tileloaderror",(function(e){t.next({type:"tileloaderror",event:e}),n.tilestoload--,0===n.tilestoload&&r.next()})),t.bufferWhen((function(){return r})).subscribe({next:function(t){var r=t.filter((function(e){return"tileloaderror"===e.type}));r.length>0?(n.props.onLayerLoad(e.id,{error:!0}),n.props.onLayerError(e.id,t.length,r.length)):n.props.onLayerLoad(e.id)}}),n.tileLoadEndStream$=t,n.tileStopStream$=r;var o=new d.a.Subject,a=new d.a.Subject;if(n.layer.getSource().on("imageloadstart",(function(){0===n.imagestoload?(n.props.onLayerLoading(e.id),n.imagestoload++):n.imagestoload++})),n.layer.getSource().on("imageloadend",(function(){n.imagestoload--,o.next({type:"imageloadend"}),0===n.imagestoload&&a.next()})),n.layer.getSource().on("imageloaderror",(function(e){n.imagestoload--,o.next({type:"imageloaderror",event:e}),0===n.imagestoload&&a.next()})),o.bufferWhen((function(){return a})).subscribe({next:function(t){var r=t.filter((function(e){return"imageloaderror"===e.type}));r.length>0?(n.props.onLayerLoad(e.id,{error:!0}),n.props.onLayerError(e.id,t.length,r.length)):n.props.onLayerLoad(e.id)}}),n.imageLoadEndStream$=o,n.imageStopStream$=a,e.refresh){var i=0;n.refreshTimer=setInterval((function(){n.layer.getSource().updateParams(p()({},e.params,{_refreshCounter:i++}))}),e.refresh)}}})),x(C(n),"isValid",(function(){var e=s.default.isValid(n.props.type,n.layer);return n.valid=e,e})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.valid=!0,this.tilestoload=0,this.imagestoload=0,this.createLayer(this.props.type,this.props.options,this.props.position,this.props.securityToken)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.options&&!1!==e.options.visibility;this.setLayerVisibility(t);var n=e.options&&void 0!==e.options.opacity?e.options.opacity:1;this.setLayerOpacity(n),e.position!==this.props.position&&this.layer&&this.layer.setZIndex&&this.layer.setZIndex(e.position),this.props.options&&this.updateLayer(e,this.props)}},{key:"componentWillUnmount",value:function(){this.layer&&this.props.map&&(this.tileLoadEndStream$&&(this.tileLoadEndStream$.complete(),this.tileStopStream$.complete(),this.imageLoadEndStream$.complete(),this.imageStopStream$.complete()),this.layer.detached?this.layer.remove():this.props.map.removeLayer(this.layer)),this.refreshTimer&&clearInterval(this.refreshTimer),s.default.removeLayer(this.props.type,this.props.options,this.props.map,this.props.mapId,this.layer)}},{key:"render",value:function(){var e=this;if(this.props.children){var t=this.layer,n=t?i.a.Children.map(this.props.children,(function(n){return n?i.a.cloneElement(n,{container:t,styleName:e.props.options&&e.props.options.styleName}):null})):null;return i.a.createElement(i.a.Fragment,null,n)}return s.default.renderLayer(this.props.type,this.props.options,this.props.map,this.props.mapId,this.layer)}}])&&T(n.prototype,r),o&&T(n,o),t}(i.a.Component);x(I,"propTypes",{onWarning:o.a.func,maxExtent:o.a.array,map:o.a.object,mapId:o.a.string,srs:o.a.string,type:o.a.string,options:o.a.object,onLayerLoading:o.a.func,onLayerError:o.a.func,onCreationError:o.a.func,onLayerLoad:o.a.func,position:o.a.number,observables:o.a.array,securityToken:o.a.string}),x(I,"defaultProps",{observables:[],onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},onCreationError:function(){},onWarning:function(){},srs:"EPSG:3857"})},2449:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(415),l=n.n(s),c=n(2189),u=n.n(c),p=n(2294),f=n.n(p),d=n(2339),m=n.n(d),y=n(2286),g=n(2642),b=n(2249),h=n(2346);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?P(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(){var e,n;O(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return _(P(n=T(this,(e=A(t)).call.apply(e,[this].concat(o)))),"addFeatures",(function(e){var t=new h.a,r=null,o=!1;"FeatureCollection"===e.type?(r={features:e.features},o=!!e.features):(r={geometry:e.geometry},o=!(!e.geometry||!e.geometry.geometries&&!e.geometry.coordinates)),e.container&&o&&(n._feature=t.readFeatures(E({type:e.type,properties:e.properties,id:e.msId},r),{dataProjection:e.featuresCrs}),n._feature.map((function(t){var n=t;return t.getProperties().isCircle&&(n=Object(g.a)(t,e.crs||"EPSG:3857",e.featuresCrs)).setGeometry(n.getGeometry().transform(e.crs||"EPSG:3857",e.featuresCrs)),n})).forEach((function(t){return t.getGeometry().transform(e.featuresCrs,e.crs||"EPSG:3857")})),e.style&&e.style!==e.layerStyle&&n._feature.forEach((function(t){var n=[],r={};"FeatureCollection"===e.type?(r=f()(e.features,(function(e){return e.properties.id===t.getProperties().id})),n=Object(b.createStylesAsync)(m()(r.style))):(n=Object(b.createStylesAsync)(m()(e.style)),r={type:e.type,geometry:e.geometry,properties:e.properties,style:e.style}),l.a.all(n).then((function(e){t.setStyle((function(){return Object(y.e)(E({},r,{style:e}))}))}))})),e.container.getSource().addFeatures(n._feature))})),_(P(n),"removeFromContainer",(function(){if(n._feature)if(Array.isArray(n._feature)){var e=n.props.container.getSource();n._feature.map((function(t){var n=t.getId();void 0!==n&&e.getFeatureById(n)?e.removeFeature(e.getFeatureById(n)):e.removeFeature(t)}))}else n.props.container.getSource().removeFeature(n._feature)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.addFeatures(this.props)}},{key:"shouldComponentUpdate",value:function(e){return!(u()(e.properties,this.props.properties)&&u()(e.geometry,this.props.geometry)&&u()(e.features,this.props.features)&&u()(e.crs,this.props.crs)&&u()(e.style,this.props.style))}},{key:"UNSAFE_componentWillUpdate",value:function(e){this.removeFromContainer(),this.addFeatures(e)}},{key:"componentWillUnmount",value:function(){this.removeFromContainer()}},{key:"render",value:function(){return null}}])&&w(n.prototype,r),o&&w(n,o),t}(o.a.Component);_(x,"propTypes",{type:i.a.string,layerStyle:i.a.object,style:i.a.object,properties:i.a.object,crs:i.a.string,container:i.a.object,features:i.a.array,geometry:i.a.object,msId:i.a.oneOfType([i.a.string,i.a.number]),featuresCrs:i.a.string}),_(x,"defaultProps",{featuresCrs:"EPSG:4326"})},2459:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return q}));var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(3110),l=n.n(s),c=n(2189),u=n.n(c),p=n(3112),f=n.n(p),d=n(3113),m=n.n(d),y=n(26),g=n.n(y),b=n(80),h=n(2248),v=n(410),S=n(2286),E=n(136),O=n(2429),w=n(2182),T=n(2252),A=n(2348),P=n(2223),C=n(2191),_=n(2229),x=n(2297),I=n(2341),j=n(2452),L=n(2208),R=n(2299),D=n(2346),N=n(2331),M=n(2428);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?z(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=function(e){return e.getView().getProjection().getCode()},q=function(e){function t(){var e,n;F(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return W(z(n=B(this,(e=H(t)).call.apply(e,[this].concat(o)))),"validateCoords",(function(e){return e.filter((function(e){return!isNaN(parseFloat(e[0]))&&!isNaN(parseFloat(e[1]))}))})),W(z(n),"updateMeasures",(function(e){if(n.replaceFeatures([e.measurement.feature],e),e.measurement.showLabel){n.removeMeasureTooltips(),n.measureTooltipElement=document.createElement("div"),n.measureTooltipElement.className=n.drawing?"tooltip tooltip-measure":"tooltip tooltip-static";var t,r=n.source.getFeatures()[0].getGeometry();r instanceof w.b?(t=n.formatArea(r,e),n.tooltipCoord=r.getInteriorPoint().getCoordinates()):r instanceof T.a&&(t=n.formatLength(r,e),n.tooltipCoord=r.getLastCoordinate()),n.measureTooltipElement.innerHTML=t,n.measureTooltip=new A.a({element:n.measureTooltipElement,offset:[0,-7],positioning:"bottom-center"}),n.measureTooltip.setPosition(n.tooltipCoord),e.map.addOverlay(n.measureTooltip)}n.sketchFeature=n.source.getFeatures()[0],n.updateMeasurementResults(e,!0)})),W(z(n),"replaceFeatures",(function(e,t){var r=e;if(t.measurement.lineMeasureEnabled){var o=Object(b.transformLineToArcs)(t.measurement.feature.geometry.coordinates);r=[Object(v.set)("geometry.coordinates",o,e[0])]}n.source=new P.a,r.forEach((function(e){var t=Object(b.reprojectGeoJson)(e,"EPSG:4326",Y(n.props.map)).geometry,r=new _.a({geometry:Object(O.createOLGeometry)(t)});n.source.addFeature(r)})),n.measureLayer.setSource(n.source)})),W(z(n),"addDrawInteraction",(function(e){var t,r,o,a=e.measurement.startEndPoint;n.continueLineMsg=Object(E.getMessageById)(n.context.messages,"measureSupport.continueLine"),n.continuePolygonMsg=Object(E.getMessageById)(n.context.messages,"measureSupport.continuePolygon"),n.drawInteraction&&n.removeDrawInteraction(),n.source=new P.a;var i=[new x.default({fill:new I.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new j.default({color:"#ffcc33",width:2}),image:new L.default({radius:7,fill:new I.default({color:"#ffcc33"})})})],s=[],l=a||!0===a;if(l||void 0===a){var c=l?void 0===a?{}:a:e.startEndPoint;s=Object(S.f)(c.startPointOptions,c.endPointOptions)}t=new C.a({source:n.source,zIndex:1e6,style:[].concat(i,G(s))}),n.props.map.addLayer(t),o="Bearing"===e.measurement.geomType?"LineString":e.measurement.geomType,r=new R.a({source:n.source,type:o,style:new x.default({fill:new I.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new j.default({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new L.default({radius:5,stroke:new j.default({color:"rgba(0, 0, 0, 0.7)"}),fill:new I.default({color:"rgba(255, 255, 255, 0.2)"})})})}),n.clickListener=n.props.map.on("click",(function(){return n.updateMeasurementResults(n.props)})),n.props.updateOnMouseMove&&n.props.map.on("pointermove",(function(){return n.updateMeasurementResults(n.props)})),n.props.map.on("pointermove",(function(e){return n.pointerMoveHandler(e)})),r.on("drawstart",(function(e){n.sketchFeature=e.feature,n.drawing=!0;for(var t=document.getElementsByClassName("tooltip-static")||[],r=0;r<t.length;r++)t[r].parentNode.removeChild(t[r]);n.props.measurement.showLabel&&n.createMeasureTooltip(),n.source.clear(),n.listener=n.sketchFeature.getGeometry().on("change",(function(e){var t,r=e.target;r instanceof w.b?(t=n.formatArea(r,n.props),n.tooltipCoord=r.getInteriorPoint().getCoordinates()):r instanceof T.a&&(t=n.formatLength(r,n.props),n.tooltipCoord=r.getLastCoordinate()),n.props.measurement.showLabel&&(n.measureTooltipElement.innerHTML=t,n.measureTooltip.setPosition(n.tooltipCoord))})),n.props.resetGeometry()})),r.on("drawend",(function(e){n.drawing=!1;var t=new D.a,r=Object(b.reprojectGeoJson)(t.writeFeatureObject(e.feature.clone()),Y(n.props.map),"EPSG:4326");if(n.props.changeGeometry(r),n.props.measurement.lineMeasureEnabled){var o=Object(b.transformLineToArcs)(r.geometry.coordinates);r=Object(v.set)("geometry.coordinates",o,r)}n.replaceFeatures([r],n.props),n.props.measurement.showLabel&&(n.measureTooltipElement.className="tooltip tooltip-static",n.measureTooltip.setOffset([0,-7]),Object(N.b)(n.listener))})),n.props.map.addInteraction(r),n.props.measurement.showLabel&&n.createMeasureTooltip(),n.createHelpTooltip(),n.drawInteraction=r,n.measureLayer=t})),W(z(n),"removeDrawInteraction",(function(){null!==n.drawInteraction&&(n.removeHelpTooltip(),n.removeMeasureTooltips(),n.props.map.removeInteraction(n.drawInteraction),n.drawInteraction=null,n.props.map.removeLayer(n.measureLayer),n.sketchFeature=null,n.props.map.un("click",(function(){return n.updateMeasurementResults(n.props)}),z(n)),Object(N.b)(n.clickListener),n.props.updateOnMouseMove&&n.props.map.un("pointermove",(function(){return n.updateMeasurementResults(n.props)}),z(n)))})),W(z(n),"pointerMoveHandler",(function(e){if(!e.dragging){var t=Object(E.getMessageById)(this.context.messages,"measureSupport.startDrawing");if(this.sketchFeature&&this.drawing){var n=this.sketchFeature.getGeometry();n instanceof w.b?t=this.continuePolygonMsg:n instanceof T.a&&(t=this.continueLineMsg)}this.helpTooltipElement.innerHTML=t,this.helpTooltip.setPosition(e.coordinate),this.helpTooltipElement.classList.remove("hidden")}})),W(z(n),"updateMeasurementResults",(function(e,t){if(n.sketchFeature){var r=0,o=n.sketchFeature.getGeometry().getCoordinates();if("Bearing"===e.measurement.geomType&&o.length>1&&(r=Object(b.calculateAzimuth)(o[0],o[1],Y(e.map)),o.length>2)){for(n.drawInteraction.sketchCoords_=[o[0],o[1],o[0]];n.sketchFeature.getGeometry().getCoordinates().length>3;)n.drawInteraction.removeLastPoint();n.sketchFeature.getGeometry().setCoordinates([o[0],o[1]]),n.drawInteraction.sketchFeature_=n.sketchFeature,n.drawInteraction.finishDrawing()}var a=new D.a,i=Object(b.reprojectGeoJson)(a.writeFeatureObject(n.sketchFeature.clone()),Y(e.map),"EPSG:4326"),s=g()({},e.measurement,{point:"Point"===e.measurement.geomType?Object(b.reproject)(o,Y(n.props.map),"EPSG:4326"):null,len:"LineString"===e.measurement.geomType?Object(b.calculateDistance)(n.reprojectedCoordinatesIn4326(o),e.measurement.lengthFormula):0,area:"Polygon"===e.measurement.geomType?n.calculateGeodesicArea(n.sketchFeature.getGeometry().getLinearRing(0).getCoordinates()):0,bearing:"Bearing"===e.measurement.geomType?r:0,lenUnit:e.measurement.lenUnit,areaUnit:e.measurement.areaUnit,feature:Object(v.set)("geometry.coordinates",n.drawing?"Polygon"===e.measurement.geomType?[f()(i.geometry.coordinates[0],i.geometry.coordinates[0].length<=2?0:1)]:f()(i.geometry.coordinates):i.geometry.coordinates,i)});t?n.props.updateMeasures(m()(s,["bearing","area","len","point"])):n.props.changeMeasurementState(s)}})),W(z(n),"reprojectedCoordinatesIn4326",(function(e){return e.map((function(e){var t=Object(b.reproject)(e,Y(n.props.map),"EPSG:4326");return[t.x,t.y]}))})),W(z(n),"calculateGeodesicArea",(function(e){if(e.length>=4){var t=n.reprojectedCoordinatesIn4326(e);return Math.abs(Object(M.a)(new w.b([t]),{projection:"EPSG:4326"}))}return 0})),W(z(n),"createHelpTooltip",(function(){n.removeHelpTooltip(),n.helpTooltipElement=document.createElement("div"),n.helpTooltipElement.className="tooltip hidden",n.helpTooltip=new A.a({element:n.helpTooltipElement,offset:[15,0],positioning:"center-left"}),n.props.map.addOverlay(n.helpTooltip)})),W(z(n),"createMeasureTooltip",(function(){n.removeMeasureTooltips(),n.measureTooltipElement=document.createElement("div"),n.measureTooltipElement.className="tooltip tooltip-measure",n.measureTooltip=new A.a({element:n.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),n.props.map.addOverlay(n.measureTooltip)})),W(z(n),"formatLength",(function(e,t){var r=e.getCoordinates();if("Bearing"===t.measurement.geomType&&r.length>1){var o=Object(b.calculateAzimuth)(r[0],r[1],Y(t.map));return Object(h.getFormattedBearingValue)(o)}var a=n.reprojectedCoordinatesIn4326(r),i=Object(b.calculateDistance)(a,t.measurement.lengthFormula),s=t.uom&&t.uom.length,c=s.label,u=s.unit,p=l()(Object(h.convertUom)(i,"m",u),2);return n.props.formatNumber(p)+" "+c})),W(z(n),"formatArea",(function(e,t){var r=n.calculateGeodesicArea(e.getLinearRing(0).getCoordinates()),o=t.uom&&t.uom.area,a=o.label,i=o.unit,s=l()(Object(h.convertUom)(r,"sqm",i),2);return n.props.formatNumber(s)+" "+a})),W(z(n),"removeHelpTooltip",(function(){n.helpTooltipElement&&n.helpTooltipElement.parentNode&&n.helpTooltipElement.parentNode.removeChild(n.helpTooltipElement)})),W(z(n),"removeMeasureTooltips",(function(){if(n.measureTooltipElement&&n.measureTooltipElement.parentNode){for(var e=document.getElementsByClassName("tooltip-static")||[],t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);e=document.getElementsByClassName("tooltip-measure")||[];for(var r=0;r<e.length;r++)e[r].parentNode.removeChild(e[r])}})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){(e.measurement.geomType&&e.measurement.geomType!==this.props.measurement.geomType||e.measurement.geomType&&(e.measurement.lineMeasureEnabled||e.measurement.areaMeasureEnabled||e.measurement.bearingMeasureEnabled)&&!this.props.enabled&&e.enabled)&&this.addDrawInteraction(e),e.measurement.geomType||this.removeDrawInteraction();var t=this.props.measurement.feature,n=e.measurement.feature;!(n&&n.geometry&&e.measurement.updatedByUI)||u()(t,n)&&u()(this.props.uom,e.uom)||this.updateMeasures(e)}},{key:"render",value:function(){return null}}])&&U(n.prototype,r),o&&U(n,o),t}(o.a.Component);W(q,"propTypes",{startEndPoint:i.a.object,map:i.a.object,measurement:i.a.object,enabled:i.a.bool,uom:i.a.object,formatNumber:i.a.func,changeMeasurementState:i.a.func,updateMeasures:i.a.func,resetGeometry:i.a.func,changeGeometry:i.a.func,updateOnMouseMove:i.a.bool}),W(q,"contextTypes",{messages:i.a.object}),W(q,"defaultProps",{changeMeasurementState:function(){},resetGeometry:function(){},updateMeasures:function(){},changeGeometry:function(){},formatNumber:function(e){return e},startEndPoint:{startPointOptions:{radius:3,fillColor:"green"},endPointOptions:{radius:3,fillColor:"red"}},updateOnMouseMove:!1})},2460:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(270),l=n(26),c=n.n(l),u=n(3116),p=n.n(u),f=n(3119);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?h(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(3117);var E={className:"ol-overviewmap ol-custom-overviewmap",collapseLabel:"»",label:"«",collapsed:!0,collapsible:!0},O=function(e){function t(){var e,n;m(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return S(h(n=g(this,(e=b(t)).call.apply(e,[this].concat(o)))),"dragstart",(function(e){n.dragging||(n.dragBox=n.box.cloneNode(),n.dragBox.setAttribute("class","ol-overview-dargbox"),n.dragBox.style.position="relative",n.box.appendChild(n.dragBox),""===n.box.style.top?n.offsetStartTop=0:n.offsetStartTop=parseInt(n.box.style.top.slice(0,-2),10),""===n.box.style.left?n.offsetStartLeft=0:n.offsetStartLeft=parseInt(n.box.style.left.slice(0,-2),10),n.mouseStartTop=e.pageY,n.mouseStartLeft=e.pageX,n.dragging=!0)})),S(h(n),"draggingel",(function(e){!0===n.dragging&&(n.dragBox.style.top=n.offsetStartTop+e.pageY-n.mouseStartTop+"px",n.dragBox.style.left=n.offsetStartLeft+e.pageX-n.mouseStartLeft+"px",e.stopPropagation(),e.preventDefault())})),S(h(n),"dragend",(function(){if(!0===n.dragging){var e={};e.top=""===n.dragBox.style.top?0:parseInt(n.dragBox.style.top.slice(0,-2),10),e.left=""===n.dragBox.style.left?0:parseInt(n.dragBox.style.left.slice(0,-2),10),n.box.removeChild(n.dragBox),delete n.dragBox,n.dragging=!1,n.setNewExtent(e)}})),S(h(n),"setNewExtent",(function(e){var t=n.box.offsetWidth,r=n.box.offsetHeight,o=n.props.map.getSize(),a=e.left*Math.abs(o[0]/t),i=e.top*Math.abs(o[1]/r);a=p()(a)?a:0,i=p()(i)?i:0;var s=[0+a,o[1]+i],l=[o[0]+a,0+i],c=n.props.map.getCoordinateFromPixel(s)||[0,0],u=n.props.map.getCoordinateFromPixel(l)||[0,0],f=[c[0],c[1],u[0],u[1]];n.props.map.getView().fit(f,o,{nearest:!0})})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=[];this.props.layers.forEach((function(e){t.push(s.default.createLayer(e.type,e.options||{}))}));var n=c()({},E,this.props.overviewOpt,{layers:t});this.overview=new f.a(n),this.props.map&&this.overview.setMap(this.props.map),this.box=this.overview.element.getElementsByClassName("ol-overviewmap-box").item(0),this.box.onmousedown=function(t){e.dragstart(t),e.box.onmousemove=function(t){e.draggingel(t)},e.overview.element.onmousemove=function(t){e.draggingel(t)},e.box.onmouseup=function(){e.dragend(),e.overview.element.onmousemove=null,e.box.onmousemove=null,e.box.onmouseup=null}}}},{key:"render",value:function(){return null}}])&&y(n.prototype,r),o&&y(n,o),t}(i.a.Component);S(O,"displayName","Overview"),S(O,"propTypes",{id:o.a.string,map:o.a.object,overviewOpt:o.a.object,layers:o.a.array}),S(O,"defaultProps",{id:"overview",overviewOpt:{},layers:[{type:"osm",options:{}}]})},2461:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(26),l=n.n(s),c=n(3120);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function t(){return p(this,t),d(this,m(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.scalebar=new c.a(l()({},this.props,this.props.container?{target:document.querySelector(this.props.container)}:{})),this.props.map&&this.props.map.addControl(this.scalebar)}},{key:"componentWillUnmount",value:function(){this.props.container&&document.querySelector(".ol-scale-line")&&document.querySelector(this.props.container).removeChild(document.querySelector(".ol-scale-line"))}},{key:"render",value:function(){return null}}])&&f(n.prototype,r),o&&f(n,o),t}(i.a.Component);g(b,"propTypes",{map:o.a.object,className:o.a.string,minWidth:o.a.number,units:o.a.oneOf(["degrees","imperial","nautical","metric","us"]),container:o.a.string}),g(b,"defaultProps",{map:null,className:"ol-scale-line",minWidth:64,units:"metric"})},2464:function(e,t,n){e.exports={BingLayer:n(3127),OSMLayer:n(3128),TileProviderLayer:n(3129),WMSLayer:n(3131),WMTSLayer:n(3134),GraticuleLayer:n(3135),MarkerLayer:n(3136),OverlayLayer:n(3137)}},2465:function(e,t,n){var r=n(26),o=n(3130),a=n(47),i={getLayerConfig:function(e,t){var n=o,i=e.split("."),s=i[0],l=i[1];if(!n[s])throw new Error("No such provider ("+s+")");var c={url:n[s].url,options:n[s].options};if(l&&"variants"in n[s]){if(!(l in n[s].variants))throw new Error("No such variant of "+s+" ("+l+")");var u,p=n[s].variants[l];u="string"==typeof p?{variant:p}:p.options,c={url:p.url||c.url,options:r({},c.options,u)}}else"function"==typeof c.url&&(c.url=c.url(i.splice(1,i.length-1).join(".")));var f="file:"===window.location.protocol||c.options.forceHTTP;0===c.url.indexOf("//")&&f&&(c.url="http:"+c.url),c.options.retina&&(t.detectRetina&&a.getBrowserProperties().retina?t.detectRetina=!1:c.options.retina="");c.options.attribution=function e(t){return-1===t.indexOf("{attribution.")?t:t.replace(/\{attribution.(\w*)\}/,(function(t,r){return e(n[r].options.attribution)}))}(c.options.attribution);var d=r({},c.options,t);return[c.url,d]}};e.exports=i},2466:function(e,t,n){e.exports={BingLayer:n(3138),Commons:n(3140),GraticuleLayer:n(3141),GoogleLayer:n(3145),MapQuest:n(3147),OSMLayer:n(3149),TileProviderLayer:n(3150),WMSLayer:n(3151),WMTSLayer:n(3155),VectorLayer:n(3157)}},2467:function(e,t,n){e.exports={BingLayer:n(3158).default,GoogleLayer:n(3159).default,GraticuleLayer:n(3160).default,MapQuest:n(3161).default,OSMLayer:n(3162).default,OverlayLayer:n(3164).default,TileProviderLayer:n(3165).default,VectorLayer:n(3167).default,WFS3Layer:n(3168).default,WMSLayer:n(3171).default,WMTSLayer:n(3173).default}},2469:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(2209).default,l=n(2231);e.exports=function(e){var t=e.width,n=e.height,r=e.className,a=void 0===r?"loader-container":r,c=e.contentStyle,u=void 0===c?{}:c;return i.createElement("div",{className:a},i.createElement(s,null,(function(e){var r=e.width,a=void 0===r?200:r,s=e.height,c=void 0===s?200:s,p=t||(c>0?Math.min(a,c):a),f=n||(c>0?Math.min(a,c):a),d=Math.min(p,f);return i.createElement(l,{size:d,style:o({padding:d/10,margin:"auto",display:"flex"},u)})})))}},2472:function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n(1),a=n(407),i=a.branch,s=a.renameProps,l=n(2119),c=n(2473),u=n(2173),p=s({open:"show"})((function(e){var t=e.children,n=e.header,a=r(e,["children","header"]);return o.createElement(u,a,o.createElement(l,{header:o.createElement("div",{className:"ms-header"},n)},t))}));e.exports=i((function(e){return!e.dock}),(function(){return function(e){return o.createElement(p,e)}}))(c)},2473:function(e,t,n){var r=n(1),o=n(792).default,a=n(2119),i=n(407).withState,s=n(3207);e.exports=i("fullscreen","onFullscreen",!1)((function(e){var t=e.fluid,n=e.className,i=void 0===n?"":n,l=e.fullscreen,c=void 0!==l&&l,u=e.position,p=e.open,f=e.size,d=void 0===f?550:f,m=e.style,y=void 0===m?{}:m,g=e.zIndex,b=void 0===g?1030:g,h=e.onClose,v=e.bsStyle,S=e.title,E=e.showFullscreen,O=void 0!==E&&E,w=e.glyph,T=e.header,A=e.footer,P=e.children,C=e.onFullscreen,_=void 0===C?function(){}:C,x=e.fixed,I=void 0!==x&&x,j=e.noResize,L=void 0!==j&&j,R=e.hideHeader;return r.createElement("div",{className:"ms-side-panel "+(I?"":"ms-absolute-dock ")+(L?"react-dock-no-resize ":"")+i},r.createElement(o,{fluid:t||c,position:u,dimMode:"none",isVisible:p,size:c?1:d,dockStyle:y,zIndex:b},r.createElement(a,{header:!R&&p&&r.createElement(s,{position:u,onClose:h,bsStyle:v,title:S,fullscreen:c,showFullscreen:O,glyph:w,additionalRows:T,onFullscreen:_}),footer:p&&A},p&&P)))}))},2478:function(e,t,n){var r=n(13).head;e.exports={SHOW_ANNOTATION:"ANNOTATIONS:SHOW",EDIT_ANNOTATION:"ANNOTATIONS:EDIT",NEW_ANNOTATION:"ANNOTATIONS:NEW",REMOVE_ANNOTATION:"ANNOTATIONS:REMOVE",CONFIRM_REMOVE_ANNOTATION:"ANNOTATIONS:CONFIRM_REMOVE",CANCEL_REMOVE_ANNOTATION:"ANNOTATIONS:CANCEL_REMOVE",CANCEL_EDIT_ANNOTATION:"ANNOTATIONS:CANCEL_EDIT",SAVE_ANNOTATION:"ANNOTATIONS:SAVE",TOGGLE_ADD:"ANNOTATIONS:TOGGLE_ADD",UPDATE_ANNOTATION_GEOMETRY:"ANNOTATIONS:UPDATE_GEOMETRY",VALIDATION_ERROR:"ANNOTATIONS:VALIDATION_ERROR",REMOVE_ANNOTATION_GEOMETRY:"ANNOTATIONS:REMOVE_GEOMETRY",TOGGLE_STYLE:"ANNOTATIONS:TOGGLE_STYLE",SET_STYLE:"ANNOTATIONS:SET_STYLE",RESTORE_STYLE:"ANNOTATIONS:RESTORE_STYLE",HIGHLIGHT:"ANNOTATIONS:HIGHLIGHT",CLEAN_HIGHLIGHT:"ANNOTATIONS:CLEAN_HIGHLIGHT",CANCEL_SHOW_ANNOTATION:"ANNOTATIONS:CANCEL_SHOW",FILTER_ANNOTATIONS:"ANNOTATIONS:FILTER",CLOSE_ANNOTATIONS:"ANNOTATIONS:CLOSE",CONFIRM_CLOSE_ANNOTATIONS:"ANNOTATIONS:CONFIRM_CLOSE",CANCEL_CLOSE_ANNOTATIONS:"ANNOTATIONS:CANCEL_CLOSE",START_DRAWING:"ANNOTATIONS:START_DRAWING",startDrawing:function(){return{type:"ANNOTATIONS:START_DRAWING"}},UNSAVED_CHANGES:"ANNOTATIONS:UNSAVED_CHANGES",setUnsavedChanges:function(e){return{type:"ANNOTATIONS:UNSAVED_CHANGES",unsavedChanges:e}},UNSAVED_STYLE:"ANNOTATIONS:UNSAVED_STYLE",setUnsavedStyle:function(e){return{type:"ANNOTATIONS:UNSAVED_STYLE",unsavedStyle:e}},TOGGLE_CHANGES_MODAL:"ANNOTATIONS:TOGGLE_CHANGES_MODAL",toggleUnsavedChangesModal:function(){return{type:"ANNOTATIONS:TOGGLE_CHANGES_MODAL"}},TOGGLE_STYLE_MODAL:"ANNOTATIONS:TOGGLE_STYLE_MODAL",toggleUnsavedStyleModal:function(){return{type:"ANNOTATIONS:TOGGLE_STYLE_MODAL"}},CHANGED_PROPERTIES:"ANNOTATIONS:CHANGED_PROPERTIES",changedProperties:function(e,t){return{type:"ANNOTATIONS:CHANGED_PROPERTIES",field:e,value:t}},ADD_TEXT:"ANNOTATIONS:ADD_TEXT",addText:function(){return{type:"ANNOTATIONS:ADD_TEXT"}},editAnnotation:function(e){return function(t,n){var o=r(r(n().layers.flat.filter((function(e){return"annotations"===e.id}))).features.filter((function(t){return t.properties.id===e})));"FeatureCollection"===o.type?t({type:"ANNOTATIONS:EDIT",feature:o,featureType:o.type}):t({type:"ANNOTATIONS:EDIT",feature:o,featureType:o.geometry.type})}},newAnnotation:function(){return{type:"ANNOTATIONS:NEW"}},removeAnnotation:function(e){return{type:"ANNOTATIONS:REMOVE",id:e}},confirmRemoveAnnotation:function(e){return{type:"ANNOTATIONS:CONFIRM_REMOVE",id:e}},cancelRemoveAnnotation:function(){return{type:"ANNOTATIONS:CANCEL_REMOVE"}},cancelEditAnnotation:function(){return{type:"ANNOTATIONS:CANCEL_EDIT"}},saveAnnotation:function(e,t,n,r,o,a){return{type:"ANNOTATIONS:SAVE",id:e,fields:t,geometry:n,style:r,newFeature:o,properties:a}},toggleAdd:function(e){return{type:"ANNOTATIONS:TOGGLE_ADD",featureType:e}},updateAnnotationGeometry:function(e,t,n){return{type:"ANNOTATIONS:UPDATE_GEOMETRY",geometry:e,textChanged:t,circleChanged:n}},validationError:function(e){return{type:"ANNOTATIONS:VALIDATION_ERROR",errors:e}},removeAnnotationGeometry:function(){return{type:"ANNOTATIONS:REMOVE_GEOMETRY"}},toggleStyle:function(){return{type:"ANNOTATIONS:TOGGLE_STYLE"}},setStyle:function(e){return{type:"ANNOTATIONS:SET_STYLE",style:e}},restoreStyle:function(){return{type:"ANNOTATIONS:RESTORE_STYLE"}},highlight:function(e){return{type:"ANNOTATIONS:HIGHLIGHT",id:e}},cleanHighlight:function(){return{type:"ANNOTATIONS:CLEAN_HIGHLIGHT"}},showAnnotation:function(e){return{type:"ANNOTATIONS:SHOW",id:e}},cancelShowAnnotation:function(){return{type:"ANNOTATIONS:CANCEL_SHOW"}},filterAnnotations:function(e){return{type:"ANNOTATIONS:FILTER",filter:e}},closeAnnotations:function(){return{type:"ANNOTATIONS:CLOSE"}},confirmCloseAnnotations:function(){return{type:"ANNOTATIONS:CONFIRM_CLOSE"}},cancelCloseAnnotations:function(){return{type:"ANNOTATIONS:CANCEL_CLOSE"}},DOWNLOAD:"ANNOTATIONS:DOWNLOAD",download:function(e){return{type:"ANNOTATIONS:DOWNLOAD",annotation:e}},OPEN_EDITOR:"ANNOTATIONS:OPEN_EDITOR",openEditor:function(e){return{type:"ANNOTATIONS:OPEN_EDITOR",id:e}},CONFIRM_DELETE_FEATURE:"ANNOTATIONS:CONFIRM_DELETE_FEATURE",confirmDeleteFeature:function(){return{type:"ANNOTATIONS:CONFIRM_DELETE_FEATURE"}},TOGGLE_DELETE_FT_MODAL:"ANNOTATIONS:TOGGLE_DELETE_FT_MODAL",toggleDeleteFtModal:function(){return{type:"ANNOTATIONS:TOGGLE_DELETE_FT_MODAL"}},HIGHLIGHT_POINT:"ANNOTATIONS:HIGHLIGHT_POINT",highlightPoint:function(e){return{type:"ANNOTATIONS:HIGHLIGHT_POINT",point:e}},ADD_NEW_FEATURE:"ANNOTATIONS:ADD_NEW_FEATURE",addNewFeature:function(){return{type:"ANNOTATIONS:ADD_NEW_FEATURE"}},SET_EDITING_FEATURE:"ANNOTATIONS:SET_EDITING_FEATURE",setEditingFeature:function(e){return{type:"ANNOTATIONS:SET_EDITING_FEATURE",feature:e}},LOAD_ANNOTATIONS:"ANNOTATIONS:LOAD_ANNOTATIONS",loadAnnotations:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"ANNOTATIONS:LOAD_ANNOTATIONS",features:e,override:t}},RESET_COORD_EDITOR:"ANNOTATIONS:RESET_COORD_EDITOR",resetCoordEditor:function(){return{type:"ANNOTATIONS:RESET_COORD_EDITOR"}},CHANGE_TEXT:"ANNOTATIONS:CHANGE_TEXT",changeText:function(e,t){return{type:"ANNOTATIONS:CHANGE_TEXT",text:e,components:t}},CHANGE_RADIUS:"ANNOTATIONS:CHANGE_RADIUS",changeRadius:function(e,t,n){return{type:"ANNOTATIONS:CHANGE_RADIUS",radius:e,components:t,crs:n}},TOGGLE_GEOMETRY_MODAL:"ANNOTATIONS:TOGGLE_GEOMETRY_MODAL",toggleUnsavedGeometryModal:function(){return{type:"ANNOTATIONS:TOGGLE_GEOMETRY_MODAL"}},SET_INVALID_SELECTED:"ANNOTATIONS:SET_INVALID_SELECTED",setInvalidSelected:function(e,t){return{type:"ANNOTATIONS:SET_INVALID_SELECTED",errorFrom:e,coordinates:t}},CHANGE_FORMAT:"ANNOTATIONS:CHANGE_FORMAT",changeFormat:function(e){return{type:"ANNOTATIONS:CHANGE_FORMAT",format:e}},CHANGED_SELECTED:"ANNOTATIONS:CHANGED_SELECTED",changeSelected:function(e,t,n,r){return{type:"ANNOTATIONS:CHANGED_SELECTED",coordinates:e,radius:t,text:n,crs:r}},UPDATE_SYMBOLS:"ANNOTATIONS:UPDATE_SYMBOLS",updateSymbols:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"ANNOTATIONS:UPDATE_SYMBOLS",symbols:e}},ERROR_SYMBOLS:"ANNOTATIONS:ERROR_SYMBOLS",setErrorSymbol:function(e){return{type:"ANNOTATIONS:ERROR_SYMBOLS",symbolErrors:e}}}},2479:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1),d=n(0),m=n(758),y=m.Button,g=m.Glyphicon,b=n(2114),h=n(3298),v=function(e){function t(){var e,n;a(this,t);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return p(c(n=s(this,(e=l(t)).call.apply(e,[this].concat(i)))),"onClick",(function(){n.props.onClick(!n.props.pressed,n.props.options)})),p(c(n),"renderNormalButton",(function(){return f.createElement(y,o({id:n.props.id},n.props.btnConfig,{onClick:n.onClick,bsStyle:n.props.pressed?n.props.pressedStyle:n.props.defaultStyle,style:n.props.style}),n.props.glyphicon?f.createElement(g,{glyph:n.props.glyphicon}):null,n.props.glyphicon&&n.props.text&&!f.isValidElement(n.props.text)?" ":null,n.props.text,n.props.help)})),p(c(n),"renderImageButton",(function(){return f.createElement(h,{id:n.props.id,image:n.props.image,onClick:n.onClick,style:n.props.style})})),p(c(n),"addTooltip",(function(e){return f.createElement(b,{placement:n.props.tooltipPlace,key:"overlay-trigger."+n.props.id,overlay:n.props.tooltip},e)})),n}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e="normal"===this.props.btnType?this.renderNormalButton():this.renderImageButton();return this.props.tooltip?this.addTooltip(e):e}}])&&i(n.prototype,r),d&&i(n,d),t}(f.Component);p(v,"propTypes",{id:d.string,btnConfig:d.object,options:d.object,text:d.oneOfType([d.string,d.element]),help:d.oneOfType([d.string,d.element]),glyphicon:d.string,pressed:d.bool,onClick:d.func,tooltip:d.element,tooltipPlace:d.string,style:d.object,btnType:d.oneOf(["normal","image"]),image:d.string,pressedStyle:d.string,defaultStyle:d.string}),p(v,"defaultProps",{onClick:function(){},options:{},pressed:!1,tooltipPlace:"top",style:{},btnType:"normal",pressedStyle:"primary",defaultStyle:"default"}),e.exports=v},2480:function(e,t,n){var r=n(13),o=r.isEqualWith,a=r.isObject,i=n(195),s=i.defaultMemoize,l=i.createSelectorCreator,c=function(e,t){return e===t},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return function(t,n){return Array.isArray(t)&&Array.isArray(n)?t===n||t.length===n.length&&t.reduce((function(t,r,o){return t&&e(r,n[o])}),!0):a(t)&&a(n)?t===n||Object.keys(t).length===Object.keys(n).length&&Object.keys(t).reduce((function(r,o){return r&&e(t[o],n[o])}),!0):t===n}},p=l(s,(function(e,t){return o(e,t,u())}));e.exports={createShallowSelector:p,createShallowSelectorCreator:function(e){return l(s,(function(t,n){return o(t,n,u(e))}))}}},2481:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(1),m=n(13).debounce,y=n(0),g=n(33),b=n(3317).default;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debounceTime,n=e.querySelector,r=e.closest,a=void 0!==r&&r;return function(e){var r,p;return p=r=function(r){function p(e){var r;return o(this,p),f(c(r=s(this,l(p).call(this,e))),"findDomNode",(function(){if(!r.isMounded)return null;var e=g.findDOMNode(c(r));return e&&a&&n?e.closest(n||"*"):e&&(n?e.querySelector(n):e)})),r.width=void 0,r.height=void 0,r.skipOnMount=e.skipOnMount,r.onResize=m((function(){var e;return(e=r.props).onResize.apply(e,arguments)}),void 0!==t?t:e.debounceTime||1e3),r.ro=new b((function(e){e.forEach((function(e){var t=e.contentRect,n=t.width,o=t.height,a=r.props.handleWidth&&r.width!==n,i=r.props.handleHeight&&r.height!==o;r.skipOnMount||!a&&!i||r.onResize({width:n,height:o}),r.width=n,r.height=o,r.skipOnMount=!1}))})),r}return u(p,r),i(p,[{key:"componentDidMount",value:function(){this.isMounded=!0;var e=this.findDomNode();e&&this.ro.observe(e)}},{key:"componentWillUnmount",value:function(){var e=this.findDomNode();e&&this.ro&&this.ro.unobserve&&this.ro.unobserve(e)}},{key:"render",value:function(){return d.createElement(e,this.props)}}]),p}(d.Component),f(r,"propTypes",{handleWidth:y.bool,handleHeight:y.bool,onResize:y.func}),f(r,"defaultProps",{onResize:function(){},handleWidth:!0,handleHeight:!0}),p}}},2482:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(1),p=n(0),f=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return u.createElement("label",{className:"mapstore-switch-btn ".concat(this.props.className)},u.createElement("input",{type:"checkbox",checked:this.props.checked,onChange:function(){return e.props.onChange(!e.props.checked)}}),u.createElement("span",{onClick:function(){return e.props.onClick(!e.props.checked)},className:"m-slider"}))}}])&&a(n.prototype,r),c&&a(n,c),t}(u.Component);c(f,"propTypes",{className:p.string,checked:p.bool,onChange:p.func,onClick:p.func}),c(f,"defaultProps",{className:"",checked:!1,onChange:function(){},onClick:function(){}}),e.exports=f},2568:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=(n(3107),n(26)),l=n.n(s),c=n(2108),u=n(2128),p=n(2348),f=n(2229),d=n(2223),m=n(2191),y=n(3109),g=n(2201),b=n(2972),h=n(2345),v=n(2297),S=n(2341),E=n(2452),O=n(2208),w=function(){var e=document.createElement("div");e.setAttribute("class","ol-popup");var t=document.createElement("a");t.setAttribute("class","ol-popup-close-btn"),t.setAttribute("href","#close"),t.innerHTML="x";var n=document.createElement("div");n.setAttribute("class","ol-popup-cnt-wrapper");var r=document.createElement("div");r.setAttribute("class","ol-popup-cnt"),n.appendChild(r);var o=document.createElement("div");o.setAttribute("class","ol-popup-tip-wrapper");var a=document.createElement("div");return a.setAttribute("class","ol-popup-tip"),o.appendChild(a),e.appendChild(t),e.appendChild(n),e.appendChild(o),e}(),T=function(e,t){u.a.call(this,{state:"DISABLED"}),this.map=e;var n={drawCircle:!0,follow:!0,stopFollowingOnDrag:!1,remainActive:!0,locateStyle:this._getDefaultStyles(),metric:!0,onLocationError:this.onLocationError,keepCurrentZoomLevel:!1,showPopup:!0,strings:{metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point"},locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:18}};this.options=l()({},n,t||{}),this.geolocate=new y.a({projection:this.map.getView().getProjection(),trackingOptions:this.options.locateOptions}),this.updateHandler=this._updatePosFt.bind(this),this.geolocate.on("change:position",this.updateHandler),this.popup=w,this.popup.hidden=!0,this.popCnt=w.getElementsByClassName("ol-popup-cnt")[0],this.overlay=new p.a({element:this.popup,positioning:"top-center",stopEvent:!1}),this.layer=new m.a({source:new d.a({useSpatialIndex:!1})}),this.posFt=new f.a({geometry:this.geolocate.getAccuracyGeometry(),name:"position",id:"_locate-pos"}),this.posFt.setStyle(this.options.locateStyle),this.layer.getSource().addFeature(this.posFt),this.clickHandler=this.mapClick.bind(this),this.stopHandler=this.stopFollow.bind(this),this.errorHandler=this.options.onLocationError.bind(this)};Object(c.d)(T,u.a),T.prototype.start=function(){this.geolocate.on("error",this.errorHandler),this.follow=this.options.follow,this.geolocate.setTracking(!0),this.layer.setMap(this.map),this.map.addOverlay(this.overlay),this.options.showPopup&&(this.map.on("click",this.clickHandler),this.map.on("touch",this.clickHandler)),this.options.stopFollowingOnDrag&&this.map.on("pointerdrag",this.stopHandler),this.p?this._updatePosFt():this.set("state","LOCATING")},T.prototype.startFollow=function(){this.follow=!0,this.options.stopFollowingOnDrag&&this.map.on("pointerdrag",this.stopHandler),this.p&&this._updatePosFt()},T.prototype.stop=function(){this.geolocate.un("error",this.errorHandler),this.geolocate.setTracking(!1),this.popup.hide=!0,this.map.removeOverlay(this.overlay),this.layer.setMap(null),this.options.showPopup&&(this.map.un("click",this.clickHandler),this.map.un("touch",this.clickHandler)),this.options.stopFollowingOnDrag&&!this.follow&&this.map.un("pointerdrag",this.stopHandler),this.set("state","DISABLED")},T.prototype.stopFollow=function(){this.follow=!1,this.map.un("pointerdrag",this.stopHandler),this.set("state","ENABLED")},T.prototype._updatePosFt=function(){var e=this.get("state"),t=this.follow?"FOLLOWING":"ENABLED";t!==e&&this.set("state",t);var n=this.geolocate.getPosition();this.p=n;var r=new g.a([parseFloat(n[0]),parseFloat(n[1])]);if(this.options.drawCircle){var o=new b.a([parseFloat(n[0]),parseFloat(n[1])],this.geolocate.getAccuracy());this.posFt.setGeometry(new h.default([r,o]))}else this.posFt.setGeometry(new h.default([r]));this.popup.hidden||this._updatePopUpCnt(),this.follow&&this.updateView(r),this.options.remainActive||this.geolocate.setTracking(!1)},T.prototype.updateView=function(e){this.follow&&(this.map.getView().setCenter(e.getCoordinates()),this.options.keepCurrentZoomLevel||this.map.getView().setZoom(this.options.locateOptions.maxZoom))},T.prototype._updatePopUpCnt=function(){var e,t;this.options.metric?(e=this.geolocate.getAccuracy(),t=this.options.strings.metersUnit):(e=Math.round(3.2808399*this.geolocate.getAccuracy()),t=this.options.strings.feetUnit);var n=this.options.strings.popup.replace("{distance}",e);this.popCnt.innerHTML=n.replace("{unit}",t),this.overlay.setPosition(this.posFt.getGeometry().getGeometries()[0].getCoordinates()),this.popup.hidden=!1},T.prototype.onLocationError=function(e){alert(e.message)},T.prototype.mapClick=function(e){var t=this.map.forEachFeatureAtPixel(e.pixel,(function(e){return e}));t&&"_locate-pos"===t.get("id")&&this.popup.hidden?this._updatePopUpCnt():this.popup.hidden||(w.hidden=!0)},T.prototype._getDefaultStyles=function(){return new v.default({image:new O.default({radius:6,fill:new S.default({color:"rgba(42,147,238,0.7)"}),stroke:new E.default({color:"rgba(19,106,236,1)",width:2})}),fill:new S.default({color:"rgba(19,106,236,0.15)"}),stroke:new E.default({color:"rgba(19,106,236,1)",width:2})})},T.prototype.setStrings=function(e){this.options.strings=l()({},this.options.strings,e)};var A=T;function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?j(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return N}));var D={follow:!0,remainActive:!0,metric:!0,stopFollowingOnDrag:!0,keepCurrentZoomLevel:!1,locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:18}},N=function(e){function t(){var e,n;C(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return R(j(n=x(this,(e=I(t)).call.apply(e,[this].concat(o)))),"onStateChange",(function(e){n.props.status!==e&&n.props.changeLocateState(e)})),R(j(n),"onLocationError",(function(e){n.props.onLocateError(e.message),n.props.changeLocateState("DISABLED")})),R(j(n),"configureLocate",(function(e){var t=n.locate.get("state");"ENABLED"===e&&"DISABLED"===t?n.locate.start():"FOLLOWING"===e&&"ENABLED"===t?n.locate.startFollow():"DISABLED"===e&&n.locate.stop()})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.props.map&&(this.locate=new A(this.props.map,D),this.locate.setStrings(this.props.messages),this.locate.options.onLocationError=this.onLocationError,this.locate.on("propertychange",(function(t){e.onStateChange(t.target.get(t.key))})),this.configureLocate(this.props.status))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.status!==this.props.status&&this.configureLocate(e.status),e.messages!==this.props.messages&&this.locate.setStrings(e.messages)}},{key:"render",value:function(){return null}}])&&_(n.prototype,r),o&&_(n,o),t}(i.a.Component);R(N,"displayName","Locate"),R(N,"propTypes",{map:o.a.object,status:o.a.string,messages:o.a.object,changeLocateState:o.a.func,onLocateError:o.a.func}),R(N,"defaultProps",{id:"overview",status:"DISABLED",changeLocateState:function(){},onLocateError:function(){}})},2571:function(e,t,n){"use strict";n.r(t);var r=n(2570),o=n(2434),a=n(2437),i=n(4287),s=n(2567),l=n(2894),c=n(2112),u=n(2603),p=n(2146),f=n(2104),d=n(274),m=n.n(d),y=n(2977),g=n(0),b=n.n(g),h=n(1),v=n.n(h),S=n(26),E=n.n(S),O=n(80),w=n.n(O),T=n(47),A=n.n(T),P=n(196),C=n.n(P),_=n(2250),x=function(e,t,n,r,o){Object(c.c)(new _.a({code:e,extent:t,worldExtent:n,axisOrientation:r,units:o}))},I=n(2429),j=n(13);n(2973),n(2975);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?k(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=function(e){function t(){var e,n;R(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return F(k(n=N(this,(e=M(t)).call.apply(e,[this].concat(o)))),"getResolutions",(function(){if(n.props.mapOptions&&n.props.mapOptions.view&&n.props.mapOptions.view.resolutions)return n.props.mapOptions.view.resolutions;var e=void 0!==n.props.mapOptions.minZoom?n.props.mapOptions.minZoom:0,t=void 0!==n.props.mapOptions.maxZoom?n.props.mapOptions.maxZoom:28,r=void 0!==n.props.mapOptions.zoomFactor?n.props.mapOptions.zoomFactor:2,o=n.map.getView().getProjection(),a=o.getExtent(),i=(a?Object(f.E)(a):360*p.default.METERS_PER_UNIT[p.default.DEGREES]/p.default.METERS_PER_UNIT[o.getUnits()])/256,s=(a?Object(f.A)(a):360*p.default.METERS_PER_UNIT[p.default.DEGREES]/p.default.METERS_PER_UNIT[o.getUnits()])/256;i<=s?(1,s/=Math.round(s/i)):(1,i/=Math.round(i/s));var l=Math.max(i,s),c=l/Math.pow(2,28),u=n.props.mapOptions.maxResolution;void 0!==u?e=0:u=l/Math.pow(r,e);var d=n.props.mapOptions.minResolution;return void 0===d&&(d=void 0!==n.props.mapOptions.maxZoom?void 0!==n.props.mapOptions.maxResolution?u/Math.pow(r,t):l/Math.pow(r,t):c),t=e+Math.floor(Math.log(u/d)/Math.log(r)),Array.apply(0,Array(t-e+1)).map((function(e,t){return u/Math.pow(r,t)}))})),F(k(n),"mouseMoveEvent",(function(e){if(!e.dragging&&e.coordinate){var t=e.coordinate.slice(),r=Object(c.k)(t,n.props.projection),o=r[0]/360%1*360;o<-180?o+=360:o>180&&(o-=360),n.props.onMouseMove({y:r[1]||0,x:o||0,z:n.map.get("elevationLayer")&&n.map.get("elevationLayer").get("getElevation")(t,e.pixel)||void 0,crs:"EPSG:4326",pixel:{x:e.pixel[0],y:e.pixel[1]}})}})),F(k(n),"updateMapInfoState",(function(){var e=n.map.getView(),t=e.getCenter(),r=e.getProjection().getExtent(),o=e.getProjection().getCode();if(-1!==["EPSG:3857","EPSG:900913","EPSG:4326"].indexOf(o)||t&&t[0]>=r[0]&&t[0]<=r[2]&&t[1]>=r[1]&&t[1]<=r[3]){var a=n.normalizeCenter(e.getCenter()),i=e.calculateExtent(n.map.getSize()),s={width:n.map.getSize()[0],height:n.map.getSize()[1]};n.props.onMapViewChanges({x:a[0]||0,y:a[1]||0,crs:"EPSG:4326"},e.getZoom(),{bounds:{minx:i[0],miny:i[1],maxx:i[2],maxy:i[3]},crs:o,rotation:e.getRotation()},s,n.props.id,n.props.projection)}})),F(k(n),"haveResolutionsChanged",(function(e){var t=n.props.mapOptions&&n.props.mapOptions.view?n.props.mapOptions.view.resolutions:void 0,r=e.mapOptions&&e.mapOptions.view?e.mapOptions.view.resolutions:void 0;return!Object(j.isEqual)(t,r)})),F(k(n),"createView",(function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=o.restrictedExtent&&o.crs&&w.a.reprojectBbox(o.restrictedExtent,o.crs,w.a.normalizeSRS(n)),i=!r||r&&!r.view?E()({},r,{extent:a}):E()({},r),s=E()({},{projection:w.a.normalizeSRS(n),center:[e.x,e.y],zoom:t,minZoom:o.minZoom},i||{});return new l.a(s)})),F(k(n),"_updateMapPositionFromNewProps",(function(e){var t=n.map.getView(),r=n.props.center;if(!(e.center.y===r.y&&e.center.x===r.x)){var o=w.a.reproject({x:e.center.x,y:e.center.y},"EPSG:4326",e.projection,!0);t.setCenter([o.x,o.y])}Math.round(e.zoom)!==n.props.zoom&&t.setZoom(Math.round(e.zoom)),(e.bbox&&void 0!==e.bbox.rotation||n.bbox&&void 0!==n.bbox.rotation&&e.bbox.rotation!==n.props.bbox.rotation)&&t.setRotation(e.bbox.rotation)})),F(k(n),"normalizeCenter",(function(e){var t=w.a.reproject({x:e[0],y:e[1]},n.props.projection,"EPSG:4326",!0);return[t.x,t.y]})),F(k(n),"setMousePointer",(function(e){n.map&&(n.map.getViewport().style.cursor=e||"auto")})),F(k(n),"registerHooks",(function(){n.props.hookRegister.registerHook(C.a.RESOLUTIONS_HOOK,(function(){return n.getResolutions()})),n.props.hookRegister.registerHook(C.a.RESOLUTION_HOOK,(function(){return n.map.getView().getResolution()})),n.props.hookRegister.registerHook(C.a.COMPUTE_BBOX_HOOK,(function(e,t){var r=w.a.reproject([e.x,e.y],"EPSG:4326",n.props.projection),o=n.createView(r,t,n.props.projection,n.props.mapOptions&&n.props.mapOptions.view,n.props.limits),a=n.map.getSize(),i=o.calculateExtent(a);return{bounds:{minx:i[0],miny:i[1],maxx:i[2],maxy:i[3]},crs:n.props.projection,rotation:n.map.getView().getRotation()}})),n.props.hookRegister.registerHook(C.a.GET_PIXEL_FROM_COORDINATES_HOOK,(function(e){return n.map.getPixelFromCoordinate(e)})),n.props.hookRegister.registerHook(C.a.GET_COORDINATES_FROM_PIXEL_HOOK,(function(e){return n.map.getCoordinateFromPixel(e)})),n.props.hookRegister.registerHook(C.a.ZOOM_TO_EXTENT_HOOK,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.padding,o=t.crs,a=t.maxZoom,i=t.duration,s=w.a.reprojectBbox(e,o,n.props.projection);s&&s[0]===s[2]&&s[1]===s[3]&&"EPSG:4326"===o&&Object(j.isArray)(e)&&-180===e[0]&&-90===e[1]&&(s=n.map.getView().getProjection().getExtent());var l=a;s&&s[0]===s[2]&&s[1]===s[3]&&Object(j.isNil)(l)&&(l=21),n.map.getView().fit(s,{padding:r&&[r.top||0,r.right||0,r.bottom||0,r.left||0],maxZoom:l,duration:i})}))})),n}var n,d,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,e),n=t,(d=[{key:"componentDidMount",value:function(){var e=this;this.props.projectionDefs.forEach((function(e){var t=m.a.defs(e.code);x(e.code,e.extent,e.worldExtent,e.axisOrientation||t.axis||"enu",t.units||"m")}));var t=w.a.reproject([this.props.center.x,this.props.center.y],"EPSG:4326",this.props.projection);Object(y.a)(m.a);var n=E()(this.props.interactive?{}:{doubleClickZoom:!1,dragPan:!1,altShiftDragRotate:!1,keyboard:!1,mouseWheelZoom:!1,shiftDragZoom:!1,pinchRotate:!1,pinchZoom:!1},this.props.mapOptions.interactions),l=Object(r.a)(E()({dragPan:!1,mouseWheelZoom:!1},n,{}));void 0!==n&&void 0!==n.dragPan||(this.dragPanInteraction=new o.a({kinetic:!1}),l.extend([this.dragPanInteraction])),void 0!==n&&void 0!==n.mouseWheelZoom||(this.mouseWheelInteraction=new a.a({duration:0}),l.extend([this.mouseWheelInteraction]));var u=Object(i.a)(E()({zoom:this.props.zoomControl,attributionOptions:E()({collapsible:!1},this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container?{target:document.querySelector(this.props.mapOptions.attribution.container)}:{})},this.props.mapOptions.controls)),p=new s.default({layers:[],controls:u,interactions:l,target:"".concat(this.props.id),view:this.createView(t,Math.round(this.props.zoom),this.props.projection,this.props.mapOptions&&this.props.mapOptions.view,this.props.limits)});this.map=p,this.map.disabledListeners={},this.map.disableEventListener=function(t){e.map.disabledListeners[t]=!0},this.map.enableEventListener=function(t){delete e.map.disabledListeners[t]},p.on("moveend",this.updateMapInfoState),p.on("singleclick",(function(t){if(e.props.onClick&&!e.map.disabledListeners.singleclick){var n=e.map.getView(),r=t.coordinate.slice(),o=n.getProjection().getExtent();if("EPSG:4326"===e.props.projection&&(r[0]=w.a.normalizeLng(r[0])),"EPSG:900913"!==e.props.projection&&"EPSG:3857"!==e.props.projection||(r=Object(c.k)(r,e.props.projection),o=w.a.reprojectBbox(o,e.props.projection,"EPSG:4326")),r[0]>=o[0]&&r[0]<=o[2]&&r[1]>=o[1]&&r[1]<=o[3]){var a,i;a="EPSG:900913"!==e.props.projection&&"EPSG:3857"!==e.props.projection?w.a.reproject(r,e.props.projection,"EPSG:4326"):{x:r[0],y:r[1]},e.markerPresent=!1,p.forEachFeatureAtPixel(t.pixel,(function(t,n){if(n&&n.get("handleClickOnLayer")){var r=t.getGeometry();if(!e.markerPresent&&"Point"===r.getType()){e.markerPresent=!0,i=n.get("msId");var o=Object(c.k)(r.getFirstCoordinate(),e.props.projection);a={x:o[0],y:o[1]}}}}));var s=w.a.normalizeLng(a.x),l=e.map.get("elevationLayer")&&e.map.get("elevationLayer").get("getElevation");e.props.onClick({pixel:{x:t.pixel[0],y:t.pixel[1]},latlng:{lat:a.y,lng:s,z:l&&l(r,t.pixel)||void 0},modifiers:{alt:t.originalEvent.altKey,ctrl:t.originalEvent.ctrlKey,shift:t.originalEvent.shiftKey}},i)}}}));var f=Object(j.throttle)(this.mouseMoveEvent,100);p.on("pointermove",f),this.updateMapInfoState(),this.setMousePointer(this.props.mousePointer),this.forceUpdate(),this.props.onResolutionsChange(this.getResolutions()),this.props.registerHooks&&this.registerHooks()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.mousePointer!==this.props.mousePointer&&this.setMousePointer(e.mousePointer),e.zoomControl!==this.props.zoomControl&&(e.zoomControl?this.map.addControl(new u.a):this.map.removeControl(this.map.getControls().getArray().filter((function(e){return e instanceof u.a}))[0])),this.map&&(this.props.mapOptions&&this.props.mapOptions.interactions)!==(e.mapOptions&&e.mapOptions.interactions)){var n=e.mapOptions.interactions||{},r=this.map.getInteractions().getArray();Object.keys(n).forEach((function(e){var o=I.DEFAULT_INTERACTION_OPTIONS[e]||{},a=o.Instance,i=o.options,s=Object(j.find)(r,(function(t){return I.DEFAULT_INTERACTION_OPTIONS[e]&&t instanceof a}));s?s.setActive(n[e]):n[e]&&a&&t.map.addInteraction(new a(i))}))}if(this.map&&this.props.id!==e.mapStateSource&&this._updateMapPositionFromNewProps(e),this.map&&e.resize!==this.props.resize&&setTimeout((function(){t.map.updateSize()}),0),this.map&&(this.props.projection!==e.projection||this.haveResolutionsChanged(e))||this.props.limits!==e.limits){if(this.props.projection!==e.projection||this.props.limits!==e.limits){var o=e.projection,a=w.a.reproject([e.center.x,e.center.y],"EPSG:4326",o);this.map.setView(this.createView(a,e.zoom,e.projection,e.mapOptions&&e.mapOptions.view,e.limits)),this.props.onResolutionsChange(this.getResolutions())}this.map.getLayers().forEach((function(e){var t=e.getSource();t.getTileLoadFunction&&t.setTileLoadFunction(t.getTileLoadFunction())})),this.map.render()}}},{key:"componentWillUnmount",value:function(){var e=this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&document.querySelector(this.props.mapOptions.attribution.container);e&&e.querySelector(".ol-attribution")&&e.removeChild(e.querySelector(".ol-attribution")),this.map&&this.map.setTarget(null)}},{key:"render",value:function(){var e=this,t=this.map,n=t?v.a.Children.map(this.props.children,(function(n){return n?v.a.cloneElement(n,{map:t,mapId:e.props.id,onLayerLoading:e.props.onLayerLoading,onLayerError:e.props.onLayerError,onLayerLoad:e.props.onLayerLoad,projection:e.props.projection,onCreationError:e.props.onCreationError}):null})):null;return v.a.createElement("div",{id:this.props.id,style:this.props.style},n)}}])&&D(n.prototype,d),g&&D(n,g),t}(v.a.Component);F(U,"propTypes",{id:b.a.string,style:b.a.object,center:A.a.PropTypes.center,zoom:b.a.number.isRequired,mapStateSource:A.a.PropTypes.mapStateSource,projection:b.a.string,projectionDefs:b.a.array,onMapViewChanges:b.a.func,onResolutionsChange:b.a.func,onClick:b.a.func,mapOptions:b.a.object,zoomControl:b.a.bool,mousePointer:b.a.string,onMouseMove:b.a.func,onLayerLoading:b.a.func,onLayerLoad:b.a.func,onLayerError:b.a.func,resize:b.a.number,measurement:b.a.object,changeMeasurementState:b.a.func,registerHooks:b.a.bool,hookRegister:b.a.object,interactive:b.a.bool,onCreationError:b.a.func,bbox:b.a.object,wpsBounds:b.a.object,onWarning:b.a.func,maxExtent:b.a.array,limits:b.a.object}),F(U,"defaultProps",{id:"map",onMapViewChanges:function(){},onResolutionsChange:function(){},onCreationError:function(){},onClick:null,onMouseMove:function(){},mapOptions:{},projection:"EPSG:3857",projectionDefs:[],onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},resize:0,registerHooks:!0,hookRegister:C.a,interactive:!0});t.default=U},2577:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(790),s=n(269).SELECT_NODE,l=n(2133).setPermission,c=n(2247),u=c.setEditPermissionStyleEditor,p=c.INIT_STYLE_SERVICE,f=n(813),d=f.layerEditPermissions,m=f.styleEditPermissions,y=f.updateThumb,g=n(408),b=g.getSelectedLayer,h=g.layersSelector,v=n(268).mapSelector,S=n(47),E=n(2578).updateMapLayout,O=n(267),w=O.TOGGLE_CONTROL,T=O.SET_CONTROL_PROPERTY,A=O.SET_CONTROL_PROPERTIES,P=n(40).MAP_CONFIG_LOADED,C=n(2133),_=C.SIZE_CHANGE,x=C.CLOSE_FEATURE_GRID,I=C.OPEN_FEATURE_GRID,j=n(2168),L=j.CLOSE_IDENTIFY,R=j.ERROR_FEATURE_INFO,D=j.TOGGLE_MAPINFO_STATE,N=j.LOAD_FEATURE_INFO,M=j.EXCEPTIONS_FEATURE_INFO,k=j.NO_QUERYABLE_LAYER,G=n(269),F=G.SHOW_SETTINGS,U=G.HIDE_SETTINGS,B=n(2168).PURGE_MAPINFO_RESULTS,H=n(773).isMapInfoOpen,z=n(2183),V=z.isFeatureGridOpen,W=z.getDockSize,Y=n(805),q=Y.head,Z=Y.get,K=n(2902).mapSaveMapResourceEpic,Q=n(763).showCoordinateEditorSelector;e.exports={mapSaveMapResourceEpic:K,_setFeatureEditPermission:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState;return e.ofType(s).filter((function(e){return"layer"===e.nodeType&&!S.getConfigProp("disableCheckEditPermissions")})).switchMap((function(){var e=b(n()||{});return e?d(e).map((function(e){return l(e)})).startWith(l({canEdit:!1})).catch((function(){return i.Observable.empty()})):i.Observable.of(l({canEdit:!1}))}))},_setThumbnail:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState;return e.ofType("GEONODE:CREATE_MAP_THUMBNAIL","GEONODE:CREATE_LAYER_THUMBNAIL").do((function(){try{$("#_thumbnail_processing").modal("show")}catch(e){console.log(e)}})).exhaustMap((function(e){var t=e.type,r=n(),o=h(r),a=v(r),s="GEONODE:CREATE_MAP_THUMBNAIL"===t,l=s?Z(a,"info.id"):o[o.length-1].name,c=s?"maps":"layers",u=a.size,p=u.width,f=u.height,d=a.bbox.bounds,m=d.maxx,g=d.minx,b=d.maxy,S={bbox:[g,m,d.miny,b],srid:a.bbox.crs,center:a.center,zoom:a.zoom,width:p,height:f,layers:o.filter((function(e){return"background"!==e.group&&e.visibility})).map((function(e){return e.name})).join(",")};return y(c,l,S).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.status;try{$("#_thumbnail_feedbacks").find(".modal-title").text(n),$("#_thumbnail_feedbacks").find(".modal-body").text(t),$("#_thumbnail_feedbacks").modal("show")}catch(e){console.log(e)}})).mapTo({type:"THUMBNAIL_UPDATE"}).catch((function(e){var t=e.code,n=e.message;try{"ECONNABORTED"===t?($("#_thumbnail_feedbacks").find(".modal-title").text("Timeout"),$("#_thumbnail_feedbacks").find(".modal-body").text("Failed from timeout: Could not create Thumbnail"),$("#_thumbnail_feedbacks").modal("show")):($("#_thumbnail_feedbacks").find(".modal-title").text("Error: "+n),$("#_thumbnail_feedbacks").find(".modal-body").text("Could not create Thumbnail"),$("#_thumbnail_feedbacks").modal("show"))}catch(e){console.log(e)}finally{return i.Observable.of({type:"THUMBNAIL_UPDATE_ERROR"})}})).do((function(){try{$("#_thumbnail_processing").modal("hide")}catch(e){console.log(e)}}))}))},_setStyleEditorPermission:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState;return e.ofType(p,s).filter((function(e){var t=e.nodeType;return t&&"layer"===t&&!S.getConfigProp("disableCheckEditPermissions")||!t&&!S.getConfigProp("disableCheckEditPermissions")})).switchMap((function(e){var t=b(n()||{});return t?m(t).map((function(e){var t=e.canEdit;return u(t)})).startWith(u(e.canEdit)).catch((function(){return i.Observable.empty()})):i.Observable.of(u(!1))}))},updateMapLayoutEpic:function(e,t){return e.ofType(P,_,k,A,x,I,L,D,N,M,w,T,F,U,R,B).switchMap((function(){var e=t.getState();if(Z(e,"browser.mobile")){var n=o({},H(e)?{bottom:"50%"}:{bottom:void 0});return i.Observable.of(E({boundingMapRect:n}))}var r=S.getConfigProp("mapLayout")||{left:{sm:300,md:500,lg:600},right:{md:658},bottom:{sm:30}};if("embedded"===Z(e,"mode")){var a={height:"calc(100% - "+r.bottom.sm+"px)"},s=o({},H(e)?{bottom:"50%"}:{bottom:void 0});return i.Observable.of(E(o({},a,{boundingMapRect:s})))}var l=Z(e,"controls.drawer.resizedWidth"),c=q([Z(e,"controls.queryPanel.enabled")&&{left:r.left.lg}||null,Z(e,"controls.widgetBuilder.enabled")&&{left:r.left.md}||null,Z(e,"layers.settings.expanded")&&{left:r.left.md}||null,Z(e,"controls.drawer.enabled")&&{left:l||r.left.sm}||null].filter((function(e){return e})))||{left:0},u=q([Z(e,"controls.details.enabled")&&{right:r.right.md}||null,Z(e,"controls.annotations.enabled")&&{right:r.right.md}||null,Z(e,"controls.metadataexplorer.enabled")&&{right:r.right.md}||null,Z(e,"controls.measure.enabled")&&Q(e)&&{right:r.right.md}||null,Z(e,"mapInfo.enabled")&&H(e)&&{right:r.right.md}||null].filter((function(e){return e})))||{right:0},p=100*W(e),f=V(e)&&{bottom:p+"%",dockSize:p}||{bottom:r.bottom.sm},d=V(e)&&{transform:"translate(0, -"+r.bottom.sm+"px)"}||{transform:"none"},m={height:"calc(100% - "+r.bottom.sm+"px)"},y=o({},f,{},c,{},u);return i.Observable.of(E(o({},c,{},u,{},f,{},d,{},m,{boundingMapRect:y})))}))}}},2578:function(e,t){e.exports={UPDATE_MAP_LAYOUT:"MAP_LAYOUT:UPDATE_MAP_LAYOUT",updateMapLayout:function(e){return{type:"MAP_LAYOUT:UPDATE_MAP_LAYOUT",layout:e}}}},2579:function(e,t,n){var r=n(71),o=n(55),a=n(26),i={format:"json",bounded:0,polygon_geojson:1,priority:5},s={geocode:function(e,t){var n=a({q:e},i,t||{}),s=o.format({protocol:"https",host:"nominatim.openstreetmap.org",query:n});return r.get(s)},reverseGeocode:function(e,t){var n=a({lat:e.lat,lon:e.lng},t||{},i),s=o.format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:n});return r.get(s)}};e.exports=s},2580:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(0),m=n(1),y=n(198).connect,g=n(195).createSelector,b=n(2904).loadFont,h=n(26),v=n(2145);n(2929);var S,E=n(2103),O=n(47),w=n(409),T=w.errorLoadingFont,A=w.setMapResolutions,P=n(13).isString,C=function(e){function t(){var e,r;i(this,t);for(var s=arguments.length,p=new Array(s),d=0;d<s;d++)p[d]=arguments[d];return f(u(r=l(this,(e=c(t)).call.apply(e,[this].concat(p)))),"state",{canRender:!0}),f(u(r),"getHighlightLayer",(function(e,t){return m.createElement(S.Layer,{type:"vector",srs:e,position:t,key:"highlight",options:{name:"highlight"}},r.props.features.map((function(t){return m.createElement(S.Feature,{msId:t.id,key:t.id,crs:e,type:t.type,style:t.style||null,geometry:t.geometry})})))})),f(u(r),"getTool",(function(e){return P(e)?{name:e,impl:S.tools[e]}:e[r.props.mapType]||e})),f(u(r),"getMapOptions",(function(){return r.props.mapOptions&&r.props.mapOptions[r.props.mapType]||O.getConfigProp("defaultMapOptions")&&O.getConfigProp("defaultMapOptions")[r.props.mapType]})),f(u(r),"renderLayers",(function(){var e=r.props.map.projection||"EPSG:3857";return[].concat(a(r.props.layers),a(r.props.additionalLayers)).filter(r.filterLayer).map((function(t,n){return m.createElement(S.Layer,{type:t.type,srs:e,position:n,key:t.id||t.name,options:t,securityToken:r.props.securityToken},r.renderLayerContent(t,e))})).concat(r.props.features&&r.props.features.length&&r.getHighlightLayer(e,r.props.layers.length)||[])})),f(u(r),"renderLayerContent",(function(e,t){return e.features&&"vector"===e.type?e.features.map((function(n){var r;return m.createElement(S.Feature,(f(r={key:n.id,msId:n.id,type:n.type,crs:t,geometry:n.geometry,features:n.features},"msId",n.id),f(r,"featuresCrs",e.featuresCrs||"EPSG:4326"),f(r,"layerStyle",e.style),f(r,"style",n.style||e.style||null),f(r,"properties",n.properties),r))})):null})),f(u(r),"renderSupportTools",(function(){return r.props.tools.map((function(e){var t=r.getTool(e),n=r.props.toolsOptions[t.name]&&r.props.toolsOptions[t.name][r.props.mapType]||r.props.toolsOptions[t.name]||{};return m.createElement(t.impl,o({key:t.name},n))}))})),f(u(r),"filterLayer",(function(e){return!e.useForElevation||"cesium"===r.props.mapType||r.props.elevationEnabled})),f(u(r),"updatePlugins",(function(e){S=n(2931)(e.mapType,e.actions)})),r}var r,d,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(d=[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props,n=t.shouldLoadFont,r=t.fonts;n&&r&&(this.setState({canRender:!1}),Promise.all(r.map((function(t){return b(t,{timeoutAfter:5e3}).catch((function(){e.props.onFontError({family:t})}))}))).then((function(){e.setState({canRender:!0})}))),this.updatePlugins(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.mapType===this.props.mapType&&e.actions===this.props.actions||this.updatePlugins(e)}},{key:"render",value:function(){if(this.props.map&&this.state.canRender){var e=this.props.map.mapOptions,t=void 0===e?{}:e;return m.createElement(S.Map,o({id:"map"},this.props.options,{projectionDefs:this.props.projectionDefs},this.props.map,{mapOptions:h({},t,this.getMapOptions()),zoomControl:this.props.zoomControl,onResolutionsChange:this.props.onResolutionsChange}),this.renderLayers(),this.renderSupportTools())}return this.props.loadingError?m.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"mapErrorMessage"},m.createElement(E,{msgId:"map.loadingerror"}),":",this.props.loadingError):m.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"mapLoadingMessage"},this.props.loadingSpinner?m.createElement(v,{spinnerName:"circle",overrideSpinnerClassName:"spinner"}):null,m.createElement(E,{msgId:this.props.mapLoadingMessage}))}}])&&s(r.prototype,d),y&&s(r,y),t}(m.Component);f(C,"propTypes",{mapType:d.string,map:d.object,layers:d.array,additionalLayers:d.array,zoomControl:d.bool,mapLoadingMessage:d.string,loadingSpinner:d.bool,loadingError:d.string,tools:d.array,fonts:d.array,options:d.object,mapOptions:d.object,projectionDefs:d.array,toolsOptions:d.object,onFontError:d.func,onResolutionsChange:d.func,actions:d.object,features:d.array,securityToken:d.string,shouldLoadFont:d.bool,elevationEnabled:d.bool}),f(C,"defaultProps",{mapType:"leaflet",actions:{},zoomControl:!1,mapLoadingMessage:"map.loading",loadingSpinner:!0,tools:["measurement","locate","scalebar","draw","highlight"],options:{},mapOptions:{},fonts:["FontAwesome"],toolsOptions:{measurement:{},locate:{},scalebar:{leaflet:{position:"bottomright"}},overview:{overviewOpt:{position:"bottomright",collapsedWidth:25,collapsedHeight:25,zoomLevelOffset:-5,toggleDisplay:!0},layers:[{type:"osm"}]}},securityToken:"",additionalLayers:[],shouldLoadFont:!1,elevationEnabled:!1,onFontError:function(){},onResolutionsChange:function(){}});var _=n(268),x=_.mapSelector,I=_.projectionDefsSelector,j=n(2144),L=j.mapTypeSelector,R=j.isOpenlayers,D=g([I,x,L,n(408).layerSelectorWithMarkers,n(3174).highlighedFeatures,function(e){return e.mapInitialConfig&&e.mapInitialConfig.loadingError&&e.mapInitialConfig.loadingError.data},n(271).securityTokenSelector,function(e){return e.mousePosition&&e.mousePosition.enabled},R],(function(e,t,n,r,o,a,i,s,l){return{projectionDefs:e,map:t,mapType:n,layers:r,features:o,loadingError:a,securityToken:i,elevationEnabled:s,shouldLoadFont:l}}));e.exports={MapPlugin:y(D,{onFontError:T,onResolutionsChange:A})(C),reducers:{draw:n(3175),highlight:n(3176),maptype:n(3177),additionallayers:n(3179)},epics:n(3180)}},2581:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(2144).isOpenlayers,i=n(763).showCoordinateEditorSelector,s=n(410).set,l=n(2248).validateFeatureCoordinates,c=function(e){var t=e.measurement.feature||{};return t.geometry&&(t=s("geometry.coordinates",l(t.geometry||{}),t)),t};e.exports={measurementSelector:function(e){return e.measurement&&function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.measurement,{feature:c(e)})||{}},getValidFeatureSelector:c,isCoordinateEditorEnabledSelector:function(e){return i(e)&&!e.measurement.isDrawing&&a(e)},showAddAsAnnotationSelector:function(e){return e&&e.measurement&&e.measurement.showAddAsAnnotation}}},2582:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(2170),d=n(0),m=n(15),y=n(1),g=n(33),b=n(47),h=n(2936),v=n(196),S=n(80),E=n(26),O=n(13).throttle,w=function(e){function t(){var e,n;a(this,t);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return p(c(n=s(this,(e=l(t)).call.apply(e,[this].concat(i)))),"state",{}),p(c(n),"onClick",(function(e,t){if(n.props.onClick&&null!==t.position){var r=e.camera.pickEllipsoid(t.position,e.scene.globe.ellipsoid),o=h.getMouseXYZ(e,t)||r&&f.Cartographic.fromCartesian(r);if(o){var a=180*o.latitude/Math.PI,i=180*o.longitude/Math.PI,s=(90-a)/180*n.props.standardHeight*(n.props.zoom+1),l=(180+i)/360*n.props.standardWidth*(n.props.zoom+1);n.props.onClick({pixel:{x:l,y:s},height:n.props.mapOptions&&n.props.mapOptions.terrainProvider?o.height:void 0,cartographic:o,latlng:{lat:a,lng:i},crs:"EPSG:4326"})}}})),p(c(n),"onMouseMove",(function(e){if(n.props.onMouseMove&&e.endPosition){var t=n.map.camera.pickEllipsoid(e.endPosition,n.map.scene.globe.ellipsoid),r=h.getMouseXYZ(n.map,e)||t&&f.Cartographic.fromCartesian(t);if(r){var o=Math.round(r.height);n.props.onMouseMove({y:180*r.latitude/Math.PI,x:180*r.longitude/Math.PI,z:o,crs:"EPSG:4326"})}}})),p(c(n),"getMapOptions",(function(e){var t={};if(e.terrainProvider){var n=e.terrainProvider,r=n.type,a=o(n,["type"]);switch(r){case"cesium":t.terrainProvider=new f.CesiumTerrainProvider(a);break;case"ellipsoid":t.terrainProvider=new f.EllipsoidTerrainProvider}}return E({},e,t)})),p(c(n),"getCenter",(function(){var e=n.map.camera.positionCartographic;return{longitude:180*e.longitude/Math.PI,latitude:180*e.latitude/Math.PI,height:e.height}})),p(c(n),"getZoomFromHeight",(function(e){return Math.log2(n.props.zoomToHeight/e)+1})),p(c(n),"getHeightFromZoom",(function(e){return n.props.zoomToHeight/Math.pow(2,e-1)})),p(c(n),"gestureStartListener",(function(e){e.preventDefault()})),p(c(n),"setMousePointer",(function(e){n.map&&(g.findDOMNode(c(n)).getElementsByClassName("cesium-viewer")[0].style.cursor=e||"auto")})),p(c(n),"_updateMapPositionFromNewProps",(function(e){var t=n.getCenter(),r=n.getZoomFromHeight(t.height),o=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)<=1e-12},a=!o(e.center.x,t.longitude)||!o(e.center.y,t.latitude),i=e.zoom!==r;if(a||i){var s={destination:f.Cartesian3.fromDegrees(e.center.x,e.center.y,n.getHeightFromZoom(e.zoom)),orientation:e.viewerOptions.orientation};n.setView(s)}})),p(c(n),"setView",(function(e){n.props.mapOptions&&n.props.mapOptions.flyTo?n.map.camera.flyTo(e,n.props.mapOptions.defaultFlightOptions):n.map.camera.setView(e)})),p(c(n),"subscribeClickEvent",(function(e){var t={LEFT_UP:f.ScreenSpaceEventType.LEFT_UP,LEFT_DOWN:f.ScreenSpaceEventType.LEFT_DOWN,LEFT_CLICK:f.ScreenSpaceEventType.LEFT_CLICK,PINCH_START:f.ScreenSpaceEventType.PINCH_START,PINCH_END:f.ScreenSpaceEventType.PINCH_END,PINCH_MOVE:f.ScreenSpaceEventType.PINCH_MOVE},r=new m.Subject,o=new m.Subject;Object.keys(t).forEach((function(e){return n.hand.setInputAction((function(n){o.next({type:t[e],movement:n}),r.next({type:t[e],movement:n})}),t[e])})),o.filter((function(e){return e.type===t.PINCH_END})).switchMap((function(){return m.Observable.of(!0).concat(m.Observable.of(!1).delay(500))})).startWith(!1).switchMap((function(e){return e?m.Observable.never():r})).filter((function(e){return e.type===t.LEFT_DOWN})).switchMap((function(e){var n=e.movement;return r.filter((function(e){return e.type===t.LEFT_CLICK})).takeUntil(m.Observable.timer(500).merge(r.filter((function(e){return e.type!==t.LEFT_UP&&e.type!==t.LEFT_CLICK||e.type===t.LEFT_UP&&(r=n&&n.position,o=e.movement&&e.movement.position,!(r&&o&&r.x===o.x&&r.y===o.y));var r,o}))))})).subscribe((function(t){var r=t.movement;return n.onClick(e,r)})),n.clickStream$=r,n.pauserStream$=o})),p(c(n),"registerHooks",(function(){n.props.hookRegister.registerHook(v.ZOOM_TO_EXTENT_HOOK,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.crs,o=t.duration,a=S.reprojectBbox(e,r,"EPSG:4326");if(n.map.camera.flyTo){var i=f.Rectangle.fromDegrees(a[0],a[1],a[2],a[3]);n.map.camera.flyTo({destination:i,duration:o,complete:n.updateMapInfoState})}}))})),p(c(n),"updateMapInfoState",(function(){var e=n.getCenter(),t=n.getZoomFromHeight(e.height),r={height:Math.round(n.props.standardWidth*(t+1)),width:Math.round(n.props.standardHeight*(t+1))};n.props.onMapViewChanges({x:e.longitude,y:e.latitude,crs:"EPSG:4326"},t,{bounds:{minx:-180,miny:-90,maxx:180,maxy:90},crs:"EPSG:4326",rotation:0},r,n.props.id,n.props.projection,{orientation:{heading:n.map.camera.heading,pitch:n.map.camera.pitch,roll:n.map.camera.roll}})})),n}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){document.addEventListener("gesturestart",this.gestureStartListener)}},{key:"componentDidMount",value:function(){var e=new f.Viewer(this.props.id,E({baseLayerPicker:!1,animation:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1},this.getMapOptions(this.props.mapOptions)));e.scene.globe.baseColor=f.Color.WHITE,e.imageryLayers.removeAll(),e.camera.moveEnd.addEventListener(this.updateMapInfoState),this.hand=new f.ScreenSpaceEventHandler(e.scene.canvas),this.subscribeClickEvent(e),this.hand.setInputAction(O(this.onMouseMove.bind(this),500),f.ScreenSpaceEventType.MOUSE_MOVE),e.camera.setView({destination:f.Cartesian3.fromDegrees(this.props.center.x,this.props.center.y,this.getHeightFromZoom(this.props.zoom))}),this.setMousePointer(this.props.mousePointer),this.map=e,this.forceUpdate(),this.props.mapOptions.navigationTools&&(this.cesiumNavigation=window.CesiumNavigation,this.cesiumNavigation&&this.cesiumNavigation.navigationInitialization(this.props.id,e)),this.props.registerHooks&&this.registerHooks()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){return e.mousePointer!==this.props.mousePointer&&this.setMousePointer(e.mousePointer),e.mapStateSource!==this.props.id&&this._updateMapPositionFromNewProps(e),!1}},{key:"componentWillUnmount",value:function(){this.clickStream$.complete(),this.pauserStream$.complete(),this.hand.destroy(),document.removeEventListener("gesturestart",this.gestureStartListener),this.map.destroy()}},{key:"render",value:function(){var e=this,t=this.map,n=this.props.projection,r=t?y.Children.map(this.props.children,(function(r){return r?y.cloneElement(r,{map:t,projection:n,onCreationError:e.props.onCreationError}):null})):null;return y.createElement("div",{id:this.props.id},r)}}])&&i(n.prototype,r),d&&i(n,d),t}(y.Component);p(w,"propTypes",{id:d.string,center:b.PropTypes.center,zoom:d.number.isRequired,mapStateSource:b.PropTypes.mapStateSource,projection:d.string,onMapViewChanges:d.func,onCreationError:d.func,onClick:d.func,onMouseMove:d.func,mapOptions:d.object,standardWidth:d.number,standardHeight:d.number,mousePointer:d.string,zoomToHeight:d.number,registerHooks:d.bool,hookRegister:d.object,viewerOptions:d.object}),p(w,"defaultProps",{id:"map",onMapViewChanges:function(){},onClick:function(){},onCreationError:function(){},projection:"EPSG:3857",mapOptions:{},standardWidth:512,standardHeight:512,zoomToHeight:8e7,registerHooks:!0,hookRegister:v,viewerOptions:{orientation:{heading:0,pitch:-1*Math.PI/2,roll:0}}}),e.exports=w},2583:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(1),m=n(766),y=n(26),g=n(0),b=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return f(u(n=l(this,(e=c(t)).call.apply(e,[this].concat(o)))),"updateZIndex",(function(e){var t=e||n.props.position,r=n.props.map.imageryLayers._layers.reduce((function(e,t,r){return n.provider===t?r:e}),-1),o=n.props.map.imageryLayers._layers.reduce((function(e,n,r){return-1===e&&t<n._position?r:e}),-1);-1===o&&(o=r);var a=o-r;0!==a&&Array.apply(null,{length:Math.abs(a)}).map(Number.call,Number).forEach((function(){n.props.map.imageryLayers[a>0?"raise":"lower"](n.provider)}))})),f(u(n),"setLayerVisibility",(function(e,t){e!==(n.props.options&&!1!==n.props.options.visibility)&&(e?(n.addLayer(t),n.updateZIndex()):n.removeLayer())})),f(u(n),"setLayerOpacity",(function(e){e!==(n.props.options&&void 0!==n.props.options.opacity?n.props.options.opacity:1)&&n.layer&&n.provider&&(n.provider.alpha=e)})),f(u(n),"createLayer",(function(e,t,r,o,a){if(e){var i=y({},t,r?{zIndex:r}:null,{securityToken:a});n.layer=m.createLayer(e,i,o),n.layer&&(n.layer.layerName=t.name,n.layer.layerId=t.id),null===n.layer&&n.props.onCreationError(t)}})),f(u(n),"updateLayer",(function(e,t){var r=m.updateLayer(e.type,n.layer,a({},e.options,{securityToken:e.securityToken}),a({},t.options,{securityToken:t.securityToken}),n.props.map);r&&(n.removeLayer(),n.layer=r,n.addLayer(e))})),f(u(n),"addLayerInternal",(function(e){e.options.useForElevation?n.props.map.terrainProvider=n.layer:(n.provider=n.props.map.imageryLayers.addImageryProvider(n.layer),n.provider._position=n.props.position,void 0!==e.options.opacity&&(n.provider.alpha=e.options.opacity))})),f(u(n),"addLayer",(function(e){if(n.layer&&!n.layer.detached&&(n.addLayerInternal(e),n.props.options.refresh&&n.layer.updateParams)){var t=0;n.refreshTimer=setInterval((function(){var r=n.layer.updateParams(y({},n.props.options.params,{_refreshCounter:t++}));n.removeLayer(),n.layer=r,n.addLayerInternal(e)}),n.props.options.refresh)}})),f(u(n),"removeLayer",(function(e){var t=e||n.provider;t&&n.props.map.imageryLayers.remove(t)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.createLayer(this.props.type,this.props.options,this.props.position,this.props.map,this.props.securityToken),this.props.options&&this.layer&&!1!==this.props.options.visibility&&(this.addLayer(this.props),this.updateZIndex())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=e.options&&!1!==e.options.visibility;this.setLayerVisibility(n,e);var r=e.options&&void 0!==e.options.opacity?e.options.opacity:1;if(this.setLayerOpacity(r),e.position!==this.props.position&&(this.updateZIndex(e.position),this.provider&&(this.provider._position=e.position)),this.props.options&&this.props.options.params&&this.layer.updateParams&&e.options.visibility&&Object.keys(this.props.options.params).reduce((function(n,r){return e.options.params[r]!==t.props.options.params[r]||n}),!1)){var o=this.provider,a=this.layer.updateParams(e.options.params);this.layer=a,this.addLayer(e),setTimeout((function(){t.removeLayer(o)}),1e3)}this.updateLayer(e,this.props)}},{key:"componentWillUnmount",value:function(){this.layer&&this.props.map&&!this.props.map.isDestroyed()&&(this.layer.detached?this.layer.remove():(this.layer.destroy&&this.layer.destroy(),this.props.map.imageryLayers.remove(this.provider)),this.refreshTimer&&clearInterval(this.refreshTimer))}},{key:"render",value:function(){var e=this;if(this.props.children){var t=this.layer,n=t?d.Children.map(this.props.children,(function(n){return n?d.cloneElement(n,{container:t,styleName:e.props.options&&e.props.options.styleName}):null})):null;return d.createElement(d.Fragment,null,n)}return m.renderLayer(this.props.type,this.props.options,this.props.map,this.props.map.id,this.layer)}}])&&s(n.prototype,r),o&&s(n,o),t}(d.Component);f(b,"propTypes",{map:g.object,type:g.string,options:g.object,onCreationError:g.func,position:g.number,securityToken:g.string}),e.exports=b},2584:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(761),s=n(2939),l=n(26),c=n(2249),u=c.isMarkerStyle,p=c.isSymbolStyle,f=function e(t,n,r){for(var o,a=[],i=t.length,s=0;s<i;s++)o=n?e(t[s],n-1,r):(r||this.coordsToLatLng)(t[s]),a.push(o);return a},d=function(e){if("GeometryCollection"===e.geometry.type)return!1;var t=e.style;return t&&(u(t)||p(t)||t.iconUrl||t.iconGlyph)},m={coordsToLatLngF:function(e){return new i.LatLng(e[1],e[0],e[2])},coordsToLatLngs:f,isMarker:d,getPointLayer:function(e,t,n,r){return e?e(t,n):m.pointToLayer(n,t,o({},r.style,{highlight:r.highlight}))},pointToLayer:function(e,t,n){var r=n.Point||n.MultiPoint||n,o=function(e,t){if(e&&e.iconGlyph){var n=e.iconLibrary||"extra";if(s[n])return s[n].getIcon(e)}return e&&e.html&&t?s.html.getIcon(e,t):e&&e.iconUrl||e.symbolUrlCustomized||e.symbolUrl?s.standard.getIcon(e):null}(r,t);return o?i.marker(e,{icon:o,opacity:r&&r.opacity||1}):i.marker(e,{opacity:r&&r.opacity||1})},toValidGeoJSON:function(){},createTextPointMarkerLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pointToLayer,n=e.geojson,r=e.latlng,a=e.options,s=e.style,l=void 0===s?{}:s,c=e.highlight,u=void 0!==c&&c;if(n.properties&&n.properties.isText){var p=i.divIcon({html:'<span style="\n                font:'.concat(l.font,";\n                color:").concat(l.fillColor,";\n                -webkit-text-stroke-width:",1,"px;\n                -webkit-text-stroke-color:").concat(l.color,';">').concat(n.properties.valueText,"</span>"),className:""});return new i.Marker(r,{icon:p})}return m.getPointLayer(t,n,r,o({},a,{style:l,highlight:u}))},createPolygonCircleLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geojson,n=e.style,r=void 0===n?{}:n,a=e.latlngs,s=void 0===a?[]:a,l=e.coordsToLatLng,c=void 0===l?function(){}:l;if(t.properties&&t.properties.isCircle){var u=c(t.properties.center);return i.circle(u,o({},r,{radius:t.properties.radius}))}return new i.Polygon(s,r)},geometryToLayer:function(e,t){var n,r,a,s,c,u="Feature"===e.type?e.geometry:e,p=u?u.coordinates:null,y=[],g=o({style:t.style&&t.style[0]||t.style},e),b=t&&!d(g)?function(e,t){return i.circleMarker(t,g.style&&g.style[0]||{radius:5,color:"red",weight:1,opacity:1,fillOpacity:0})}:null,h=t&&t.coordsToLatLng||m.coordsToLatLngF;if(!p&&!u)return null;var v=g.style||l({},t.style&&t.style[u.type]||t.style,{highlight:t.style&&t.style.highlight});switch(u.type){case"Point":return n=h(p),c=m.createTextPointMarkerLayer({pointToLayer:b,geojson:e,latlng:n,options:t,style:v,highlight:v&&v.highlight});case"MultiPoint":for(a=0,s=p.length;a<s;a++)n=h(p[a]),(c=m.createTextPointMarkerLayer({pointToLayer:b,geojson:e,latlng:n,options:t,style:v,highlight:v&&v.highlight})).msId=e.id,y.push(c);return new i.FeatureGroup(y);case"LineString":return v=m.updateHighlightStyle(v),r=f(p,"LineString"===u.type?0:1,h),(c=new i.Polyline(r,v)).msId=e.id,c;case"MultiLineString":for(v=m.updateHighlightStyle(v),a=0,s=(r=f(p,"LineString"===u.type?0:1,h)).length;a<s;a++)(c=new i.Polyline(r[a],v)).msId=e.id,c&&y.push(c);return new i.FeatureGroup(y);case"Polygon":return v=m.updateHighlightStyle(v),r=f(p,"Polygon"===u.type?1:2,h),(c=m.createPolygonCircleLayer({geojson:e,style:v,latlngs:r,coordsToLatLng:h})).msId=e.id,c;case"MultiPolygon":for(v=m.updateHighlightStyle(v),a=0,s=(r=f(p,"Polygon"===u.type?1:2,h)).length;a<s;a++)(c=m.createPolygonCircleLayer({geojson:e,style:v,latlngs:r,coordsToLatLng:h})).msId=e.id,c&&y.push(c);return new i.FeatureGroup(y);case"GeometryCollection":for(a=0,s=u.geometries.length;a<s;a++)(c=m.geometryToLayer({geometry:u.geometries[a],type:"Feature",properties:e.properties},t))&&y.push(c);return new i.FeatureGroup(y);default:throw new Error("Invalid GeoJSON object.")}},updateHighlightStyle:function(e){var t=e.highlight;return t?l({},e,{dashArray:t?"10":null}):e}};e.exports=m},2593:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(0),m=n(1),y=n(13),g=y.head,b=y.last,h=y.isNil,v=n(761);n(2592),v.Draw.Polygon.prototype._calculateFinishDistance=function(e){if(this._markers.length>0){var t=this._map.latLngToContainerPoint(this._markers[0].getLatLng()),n=this._map.latLngToContainerPoint(this._markers[this._markers.length-1].getLatLng()),r=new v.Marker(e,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),o=this._map.latLngToContainerPoint(r.getLatLng());return Math.min(t.distanceTo(o),n.distanceTo(o))}return 1/0};var S=n(196),E=S.isSimpleGeomType,O=S.getSimpleGeomType,w=n(2968).boundsToOLExtent,T=n(26),A=n(80),P=n(2584).pointToLayer,C=Math.PI/180,_=function(e,t,n){if("EPSG:4326"===n)return{center:t,srs:n,radius:e};var r=e/40075017*360/Math.cos(C*t[1]),o=A.reproject(t,"EPSG:4326",n);if(r){var a=A.reproject([t[0]+r,t[1]],"EPSG:4326",n);return{center:o,srs:n,radius:Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2))}}return{center:o,srs:n,radius:e}},x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326";if("EPSG:4326"===n||void 0===e)return{center:t,projection:n,radius:e};var r=A.reproject({x:t.lng,y:t.lat},n,"EPSG:4326");if(void 0===e)return{center:r,projection:n,radius:e};var o=A.reproject([t.lng+e,t.lat],n,"EPSG:4326"),a=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),i=a*Math.cos(C*r.y)*40075017/360;return{center:r,projection:"EPSG:4326",radius:i}},I=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return f(u(n=l(this,(e=c(t)).call.apply(e,[this].concat(o)))),"onDrawStart",(function(){n.drawing=!0})),f(u(n),"onDrawCreated",(function(e){n.drawing=!1;var t,r=e.layer,o=r.toGeoJSON();"marker"===e.layerType?t=v.latLngBounds(o.geometry.coordinates,o.geometry.coordinates):(r._map||(r._map=n.props.map,r._renderer=n.props.map.getRenderer(r),r._project()),t=r.getBounds());var a=w(t),i=t.getCenter();i=[i.lng,i.lat];var s=o.geometry.coordinates,l="EPSG:4326",c=o.geometry.type,u=r.getRadius?r.getRadius():0;if("circle"===e.layerType){o.projection="EPSG:4326",l="EPSG:3857",a=A.reprojectBbox(a,"EPSG:4326",l);var p=_(r._mRadius,i,l);i=p.center,u=p.radius,s=A.calculateCircleCoordinates(i,u,100),o.radius=r.getRadius?r.getRadius():0,i=[i.x,i.y],c="Polygon"}n.drawLayer.addData(o);var f={type:c,extent:a,center:i,coordinates:s,radius:u,projection:l};n.props.options&&n.props.options.stopAfterDrawing&&n.props.onChangeDrawingStatus("stop",n.props.drawMethod,n.props.drawOwner);var d=n.convertFeaturesToGeoJson(e.layer,n.props);n.props.onEndDrawing(f,n.props.drawOwner),n.props.onGeometryChanged([d],n.props.drawOwner,n.props.options&&n.props.options.stopAfterDrawing?"enterEditMode":"")})),f(u(n),"onUpdateGeom",(function(e,t){var r=n.convertFeaturesToGeoJson(e,t);t.onGeometryChanged([r],t.drawOwner)})),f(u(n),"addLayer",(function(e){n.clean();var t=v.geoJson(null,{pointToLayer:function(e,t){var n=x(e.radius,t,e.projection),r=n.center,o=n.radius;return v.circle(r,o||5)},style:function(t){return e.style&&e.style[t.geometry.type]||{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}}});n.props.map.addLayer(t),e.features&&e.features.length>0&&t.addData(n.convertFeaturesPolygonToPoint(e.features,n.props.drawMethod)),n.drawLayer=t})),f(u(n),"addGeojsonLayer",(function(e){var t=e.features,r=e.projection,o=e.style;n.clean();var a=v.geoJson(t,{style:function(e){return e.style||o},pointToLayer:function(e,t){var n=A.reproject({x:t.lng,y:t.lat},r,"EPSG:4326");return P(v.latLng(n.y,n.x),e,o)}});n.drawLayer=a.addTo(n.props.map)})),f(u(n),"replaceFeatures",(function(e){n.drawLayer?(n.drawLayer.clearLayers(),"Circle"===n.props.drawMethod?(n.drawLayer.options.pointToLayer=function(e,t){var n=x(e.radius,t,e.projection),r=n.center,o=n.radius;return v.circle(r,o||5)},n.drawLayer.options.style={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}):n.drawLayer.options.pointToLayer=function(t,n){var r=A.reproject({x:n.lng,y:n.lat},e.options&&e.options.featureProjection||"EPSG:4326","EPSG:4326");return P(v.latLng(r.y,r.x),t,e.style)},n.drawLayer.addData(n.convertFeaturesPolygonToPoint(e.features,n.props.drawMethod))):n.addGeojsonLayer({features:e.features,projection:e.options&&e.options.featureProjection||"EPSG:4326",style:e.style&&e.style[e.drawMethod]||e.style})})),f(u(n),"endDrawing",(function(e){n.replaceFeatures(e);var t=b(e.features);"Circle"!==n.props.drawMethod||!t||h(t.center)||h(t.radius)?t&&n.props.onEndDrawing(t,n.props.drawOwner):n.props.onEndDrawing(a({},t,{coordinates:A.calculateCircleCoordinates(t.center,t.radius,100)}),n.props.drawOwner)})),f(u(n),"addDrawInteraction",(function(e){n.removeAllInteractions(),"Point"===e.drawMethod||"MultiPoint"===e.drawMethod?n.addGeojsonLayer({features:e.features,projection:e.options&&e.options.featureProjection||"EPSG:4326",style:e.style&&e.style[e.drawMethod]||e.style}):n.addLayer(e),n.props.map.on("draw:created",n.onDrawCreated,u(n)),n.props.map.on("draw:drawstart",n.onDrawStart,u(n)),"LineString"===e.drawMethod||"Bearing"===e.drawMethod||"MultiLineString"===e.drawMethod?n.drawControl=new v.Draw.Polyline(n.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2},showLength:!1,repeatMode:!0,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"Polygon"===e.drawMethod||"MultiPolygon"===e.drawMethod?n.drawControl=new v.Draw.Polygon(n.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5],guidelineDistance:5},allowIntersection:!1,showLength:!1,showArea:!1,repeatMode:!0,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"BBOX"===e.drawMethod?n.drawControl=new v.Draw.Rectangle(n.props.map,{draw:!1,shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5]},repeatMode:!0,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"Circle"===e.drawMethod?n.drawControl=new v.Draw.Circle(n.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5]},showRadius:!1,repeatMode:!0}):"Point"!==e.drawMethod&&"MultiPoint"!==e.drawMethod||(n.drawControl=new v.Draw.Marker(n.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2},repeatMode:!0})),n.props.map.doubleClickZoom&&n.props.map.doubleClickZoom.disable(),n.drawControl.enable()})),f(u(n),"addDrawOrEditInteractions",(function(e){var t,r=g(e.features);r&&r.geometry&&r.geometry.type&&!E(r.geometry.type)&&("GeometryCollection"===r.geometry.type?t=r.geometry.geometries.map((function(e){return e.coordinates.map((function(t,n){return{type:"Feature",properties:a({},r.properties),id:e.type+n,geometry:{coordinates:t,type:O(e.type)}}}))})):(t=r.geometry.coordinates.map((function(e,t){return{type:"Feature",properties:a({},r.properties),id:r.geometry.type+t,geometry:{coordinates:e,type:O(r.geometry.type)}}})),r={type:"FeatureCollection",features:t}));var o=T({},e,{features:[r||{}]});n.drawLayer?(n.drawLayer.clearLayers(),n.drawLayer.addData(n.convertFeaturesPolygonToPoint(o.features,o.drawMethod))):n.addGeojsonLayer({features:e.features&&e.options.featureProjection&&"EPSG:4326"!==e.options.featureProjection?e.features.map((function(t){return A.reprojectGeoJson(t,e.options.featureProjection,"EPSG:4326")})):e.features,projection:e.options&&e.options.featureProjection||"EPSG:4326",style:e.style&&e.style[e.drawMethod]||e.style}),e.options.editEnabled&&n.addEditInteraction(o),e.options.drawEnabled&&n.addDrawInteraction(o)})),f(u(n),"addEditInteraction",(function(e){n.clean(),n.addGeojsonLayer({features:e.features,projection:e.options&&e.options.featureProjection||"EPSG:4326",style:T({},e.style,{poly:{icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}})});var t=n.drawLayer.getLayers();setTimeout((function(){t.forEach((function(t){t.getLayers&&t.getLayers()&&t.getLayers().length?t.getLayers().forEach((function(t){t.on("edit",(function(t){return n.onUpdateGeom(t.target,e)})),t.on("moveend",(function(t){return n.onUpdateGeom(t.target,e)})),t.editing&&t.editing.enable()})):(t.on("edit",(function(t){return n.onUpdateGeom(t.target,e)})),t.on("moveend",(function(t){return n.onUpdateGeom(t.target,e)})),t.editing&&t.editing.enable())}))}),0),n.editControl=new v.Control.Draw({edit:{featureGroup:n.drawLayer,poly:{allowIntersection:!1},edit:!0},draw:{polygon:{allowIntersection:!1,showArea:!0}}}),n.props.map.doubleClickZoom&&n.props.map.doubleClickZoom.disable()})),f(u(n),"removeAllInteractions",(function(){n.removeEditInteraction(),n.removeDrawInteraction()})),f(u(n),"removeDrawInteraction",(function(){null!==n.drawControl&&void 0!==n.drawControl&&(n.props.options&&n.props.options.stopAfterDrawing&&(n.drawControl.setOptions({repeatMode:!1}),n.props.onDrawStopped()),n.drawControl.disable(),n.drawControl=null,n.props.map.off("draw:created",n.onDrawCreated,u(n)),n.props.map.off("draw:drawstart",n.onDrawStart,u(n)),n.props.map.doubleClickZoom&&n.props.map.doubleClickZoom.enable())})),f(u(n),"removeEditInteraction",(function(){n.drawLayer&&(n.drawLayer.getLayers().forEach((function(e){e.getLayers&&e.getLayers()&&e.getLayers().length?e.getLayers().forEach((function(e){e.off("edit"),e.off("moveend"),e.editing&&e.editing.disable()})):(e.off("edit"),e.off("moveend"),e.editing&&e.editing.disable())})),n.editControl=null);n.props.map.doubleClickZoom&&n.props.map.doubleClickZoom.enable()})),f(u(n),"cleanAndStop",(function(){n.removeAllInteractions(),n.drawLayer&&(n.drawLayer.clearLayers(),n.props.map.removeLayer(n.drawLayer),n.drawLayer=null)})),f(u(n),"clean",(function(){n.removeEditInteraction(),n.removeDrawInteraction(),n.drawLayer&&(n.drawLayer.clearLayers(),n.props.map.removeLayer(n.drawLayer),n.drawLayer=null)})),f(u(n),"convertFeaturesPolygonToPoint",(function(e,t){return"Circle"===t?e.map((function(e){var t=void 0!==e.center&&void 0!==e.radius?x(e.radius,{lat:e.center.y,lng:e.center.x},e.projection):e,n=t.center,r=t.projection,o=t.radius;return a({},e,{coordinates:n?[n.x,n.y]:e.coordinates,center:n||e.center,projection:r||e.projection,radius:void 0!==o?o:e.radius,type:"Point"})})):e})),f(u(n),"convertFeaturesToGeoJson",(function(e,t){var r;if(E(t.drawMethod))r=e.toGeoJSON().geometry;else{if("GeometryCollection"===t.drawMethod)return{type:"GeometryCollection",geometries:n.drawLayer.getLayers().map((function(e){return e.toGeoJSON()})).map((function(e){return"FeatureCollection"===e.type?{type:"Multi"+e.features[0].geometry.type,coordinates:e.features.map((function(e){return e.geometry.coordinates}))}:{type:e.geometry.type,coordinates:e.geometry.coordinates}}))};var o=n.drawLayer.getLayers().map((function(e){return e.toGeoJSON()}));r={type:t.drawMethod,coordinates:o.reduce((function(e,t){return e.concat([t.geometry.coordinates])}),[])}}return T({},e.toGeoJSON(),{geometry:r})})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=!(!this.props.messages&&!this.context.messages)&&this.context.messages.drawLocal;if(t&&(v.drawLocal=t),this.props.drawStatus!==e.drawStatus||"replace"===e.drawStatus||this.props.drawMethod!==e.drawMethod||this.props.features!==e.features)switch(e.drawStatus){case"create":this.addGeojsonLayer({features:e.features,projection:e.options&&e.options.featureProjection||"EPSG:4326",style:e.style&&e.style[e.drawMethod]||e.style});break;case"start":this.addDrawInteraction(e);break;case"drawOrEdit":this.addDrawOrEditInteractions(e);break;case"stop":this.removeAllInteractions();break;case"replace":this.replaceFeatures(e);break;case"clean":this.cleanAndStop();break;case"endDrawing":this.endDrawing(e);break;default:return}}},{key:"render",value:function(){return null}}])&&s(n.prototype,r),o&&s(n,o),t}(m.Component);f(I,"displayName","DrawSupport"),f(I,"propTypes",{map:d.object,drawOwner:d.string,drawStatus:d.string,drawMethod:d.string,options:d.object,features:d.array,onChangeDrawingStatus:d.func,onGeometryChanged:d.func,onDrawStopped:d.func,onEndDrawing:d.func,messages:d.object,style:d.object}),f(I,"defaultProps",{map:null,drawOwner:null,drawStatus:null,drawMethod:null,features:null,options:{stopAfterDrawing:!0},onChangeDrawingStatus:function(){},onGeometryChanged:function(){},onDrawStopped:function(){},onEndDrawing:function(){},style:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1,editing:{fill:1}}}),e.exports=I},2619:function(module,exports,__webpack_require__){function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var csstree=__webpack_require__(2987),assign=__webpack_require__(26),css={fontawesome:__webpack_require__(3081)},baseImageUrl=__webpack_require__(3082),shadowImageUrl=__webpack_require__(3083),baseImage=new Image,shadowImage=new Image;baseImage.src=baseImageUrl,shadowImage.src=shadowImageUrl;var getNodeOfType=function e(t,n){return n(t)?t:t.children?t.children.reduce((function(t,r){return e(r,n)||t}),null):null},glyphs={},loadGlyphs=function loadGlyphs(font){var parsedCss=csstree.toPlainObject(csstree.parse(css[font]));return parsedCss.children.reduce((function(previous,rule){if(rule.prelude){var classSelector=getNodeOfType(rule.prelude,(function(e){return"ClassSelector"===e.type})),pseudoClassSelector=getNodeOfType(rule.prelude,(function(e){return"PseudoClassSelector"===e.type}));if(classSelector&&classSelector.name&&0===classSelector.name.indexOf("fa-")&&pseudoClassSelector&&"before"===pseudoClassSelector.name){var text=getNodeOfType(getNodeOfType(rule.block,(function(e){return"Declaration"===e.type&&"content"===e.property})).value,(function(e){return"String"===e.type})).value;return assign(previous,_defineProperty({},classSelector.name.substring(3),eval("'\\u"+text.substring(2,text.length-1)+"'")))}}return previous}),{})},extraMarkers={size:[36,46],colors:["red","orange-dark","orange","yellow","blue-dark","blue","cyan","purple","violet","pink","green-dark","green","green-light","black"],shapes:["circle","square","star","penta"],icons:[baseImageUrl,shadowImageUrl],images:[shadowImage,baseImage]},getOffsets=function(e,t){return[-extraMarkers.colors.indexOf(e)*extraMarkers.size[0]-2,-extraMarkers.shapes.indexOf(t)*extraMarkers.size[1]]},MarkerUtils={extraMarkers:assign({},extraMarkers,{getOffsets:getOffsets,markerToDataUrl:function(e){var t=e.iconColor,n=e.iconShape,r=e.iconGlyph;if(MarkerUtils.extraMarkers.images){var o=document.createElement("canvas"),a=extraMarkers.size;o.width=a[0],o.height=a[1];var i=o.getContext("2d"),s=getOffsets(t,n);i.drawImage(extraMarkers.images[0],4,31,35,16),i.drawImage(extraMarkers.images[1],Math.abs(s[0]),Math.abs(s[1]),a[0],a[1],0,0,a[0],a[1]),i.font="14px FontAwesome",i.fillStyle="rgb(255,255,255)",i.textBaseline="middle",i.textAlign="center",i.fillText(MarkerUtils.getGlyphs("fontawesome")[r]||"",a[0]/2-2,a[1]/2-7);var l=o.toDataURL("image/png");return o=null,l}return null},matches:function(e,t){return e.iconColor===t.color&&e.iconShape===t.shape},getStyle:function(e){return{iconColor:e.color,iconShape:e.shape}},getGrid:function(){return extraMarkers.shapes.map((function(e){return{name:e,markers:extraMarkers.colors.map((function(t){return{name:t,width:extraMarkers.size[0],height:extraMarkers.size[1],offsets:getOffsets(t,e),style:{color:t,shape:e},thumbnailStyle:{backgroundImage:"url("+extraMarkers.icons[0]+")",width:extraMarkers.size[0]+"px",height:extraMarkers.size[1]+"px",backgroundPositionX:getOffsets(t,e)[0],backgroundPositionY:getOffsets(t,e)[1],cursor:"pointer"}}}))}}))}}),getGlyphs:function(e){return glyphs[e]||(glyphs[e]=loadGlyphs(e)),glyphs[e]}};MarkerUtils.markers={extra:MarkerUtils.extraMarkers},module.exports=MarkerUtils},2642:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(34),o=n.n(r),a=n(80),i=n(2104),s=n(2972),l=function(e,t,n,r){if(o()(t)&&o()(t[0])&&o()(t[0][0])){var i=Object(a.reproject)(t[0][0],r,n);return Math.sqrt(Math.pow(e[0]-i.x,2)+Math.pow(e[1]-i.y,2))}return 100},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;if(!e.getGeometry()||"Polygon"!==e.getGeometry().getType()||e.getProperties().center&&0===e.getProperties().center.length)return e;if(e.getProperties()&&e.getProperties().isCircle&&e.getProperties().center&&e.getProperties().center[0]&&e.getProperties().center[1]){var r,o=e.getGeometry().getExtent();r=e.getProperties().center?[(r=Object(a.reproject)(e.getProperties().center,"EPSG:4326",t)).x,r.y]:Object(i.x)(o);var c=e.getProperties().crs===t?e.getProperties().radius:l(r,e.getGeometry().getCoordinates(),t,n);return e.setGeometry(new s.a(r,c)),e}return e}},2648:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return we}));var r=n(1),o=n.n(r),a=n(3121),i=n.n(a),s=n(2295),l=n.n(s),c=n(2294),u=n.n(c),p=n(3122),f=n.n(p),d=n(2616),m=n.n(d),y=n(34),g=n.n(y),b=n(778),h=n.n(b),v=n(2649),S=n.n(v),E=n(2131),O=n.n(E),w=n(2339),T=n.n(w),A=n(0),P=n.n(A),C=n(26),_=n.n(C),x=n(2349),I=n.n(x),j=n(415),L=n.n(j),R=n(196),D=n(80),N=n(2249),M=n(2642),k=n(2350),G=n(2286),F=n(2346),U=n(2229),B=n(2223),H=n(2191),z=n(2299),V=n(2290),W=n(2182),Y=n(2201),q=n(2252),Z=n(2334),K=n(2335),Q=n(2972),X=n(2345),J=n(2297),$=n(2341),ee=n(2452),te=n(2635),ne=n(2208),re=n(2186),oe=n(2147),ae=n(2291),ie=n(2462),se=n(2463),le=n(2351),ce=n(2331),ue=n(2104);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?ve(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe=new F.a,we=function(e){function t(){var e,n;ye(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Ee(ve(n=be(this,(e=he(t)).call.apply(e,[this].concat(o)))),"getNewFeature",(function(e,t,r,o){return new U.a({geometry:n.createOLGeometry({type:e,coordinates:t,radius:r,center:o})})})),Ee(ve(n),"getMapCrs",(function(){return n.props.map.getView().getProjection().getCode()})),Ee(ve(n),"updateFeatureStyles",(function(e){e&&e.length>0&&e.forEach((function(e){if(e.style){var t=n.toOlFeature(e);t&&t.setStyle(e.style?Object(G.d)(e):n.toOlStyle(e.style,e.selected))}}))})),Ee(ve(n),"updateOnlyFeatureStyles",(function(e){n.drawLayer&&n.drawLayer.getSource().getFeatures().forEach((function(t){var n=l()(e.features).features||e.features,r=u()(n,(function(e){return e.properties.id===t.getProperties().id}));if(r){var o=Object(N.createStylesAsync)(T()(r.style));L.a.all(o).then((function(e){t.setStyle((function(){return Object(G.e)(me({},r,{style:e}))}))}))}}))})),Ee(ve(n),"addLayer",(function(e,t){var r,o=n.convertGeometryTypeToStyleType(e.drawMethod);r=function(t){var n=l()(e.features)&&u()(l()(e.features).features,(function(e){return e.properties.id===t.getProperties().id}))||null;if(n){var r=Object(N.createStylesAsync)(T()(n.style));return L.a.all(r).then((function(e){t.setStyle((function(){return Object(G.e)(me({},n,{style:e}))}))})),null}return Object(G.e)({style:G.a[o]})},n.geojson=new F.a,n.drawSource=new B.a,n.drawLayer=new H.a({source:n.drawSource,zIndex:1e8,style:r}),n.props.map.addLayer(n.drawLayer),t&&n.addInteractions(e);var a=l()(e.features);if(a&&a.features&&a.features.length){var i=a.features.filter((function(t){return!t.properties.isCircle||t.properties.isCircle&&!t.properties.canEdit||!e.options.drawEnabled}));return n.addFeatures(_()({},e,{features:[me({},a,{features:i})]}))}return n.addFeatures(e)})),Ee(ve(n),"addFeatures",(function(e){var t,r=e.features,o=e.drawMethod,a=e.options,i=n.getMapCrs();if(r.forEach((function(e){if("FeatureCollection"===e.type){var r=(new F.a).readFeatures(e);r=r.map((function(e){return Object(M.a)(e,i)})),n.drawSource=new B.a({features:r}),n.drawLayer.setSource(n.drawSource)}else{var a=null,s=e;s.geometry&&"GeometryCollection"!==s.geometry.type&&(s=Object(D.reprojectGeoJson)(s,s.featureProjection,i).geometry),"GeometryCollection"!==s.type&&("Circle"===o&&s&&(s.properties&&s.properties.center||s.center)?(a=[(a=s.properties&&s.properties.center?Object(D.reproject)(s.properties.center,"EPSG:4326",i):s.center).x,a.y],t=new U.a({geometry:n.createOLGeometry({type:"Circle",center:a,projection:"EPSG:3857",radius:s.properties&&s.properties.radius||s.radius})})):t=new U.a({geometry:n.createOLGeometry(s.geometry?s.geometry:me({},s,{},s.properties,{center:a}))}),t.setProperties(e.properties),n.drawSource.addFeature(t))}})),0===r.length&&(a.editEnabled||a.drawEnabled))a.transformToFeatureCollection?(n.drawSource=new B.a({features:(new F.a).readFeatures({type:"FeatureCollection",features:[]})}),n.drawLayer.setSource(n.drawSource)):(t=new U.a({geometry:n.createOLGeometry({type:o,coordinates:null})}),n.drawSource.addFeature(t));else{if(r[0]&&"GeometryCollection"===r[0].type){n.drawSource=new B.a({features:(new F.a).readFeatures(r[0])});var s=n.replacePolygonsWithCircles(n.drawSource.getFeatures()[0]);n.drawSource.getFeatures()[0].getGeometry().setGeometries(s),n.drawLayer.setSource(n.drawSource)}r[0]&&r[0].geometry&&"GeometryCollection"===r[0].geometry.type&&(t=Object(D.reprojectGeoJson)(r[0],a.featureProjection,i).geometry,n.drawSource=new B.a({features:(new F.a).readFeatures(t)}),n.drawSource.getFeatures()[0].set("textGeometriesIndexes",r[0].properties&&r[0].properties.textGeometriesIndexes),n.drawSource.getFeatures()[0].set("textValues",r[0].properties&&r[0].properties.textValues),n.drawSource.getFeatures()[0].set("circles",r[0].properties&&r[0].properties.circles),n.drawLayer.setSource(n.drawSource))}return n.updateFeatureStyles(r),t})),Ee(ve(n),"replaceFeatures",(function(e){var t;return n.drawLayer?(n.drawSource.clear(),t=n.addFeatures(e),e.style&&n.drawLayer.setStyle((function(t){var r=u()(l()(e.features).features,(function(e){return e.properties.id===t.getProperties().id}));if(r){var o=Object(N.createStylesAsync)(T()(r.style));return L.a.all(o).then((function(e){t.setStyle((function(){return Object(G.e)(me({},r,{style:e}))}))})),null}var a=n.convertGeometryTypeToStyleType(e.drawMethod);return Object(G.e)({style:G.a[a]})}))):t=n.addLayer(e,e.options&&e.options.drawEnabled||!1),t})),Ee(ve(n),"endDrawing",(function(e){var t=n.replaceFeatures(e);if(t){var r=n.fromOLFeature(t);"Circle"===e.drawMethod&&e&&e.features&&e.features.length&&e.features[0]&&e.features[0].radius>=0&&(r.radius=e.features[0].radius),n.props.onEndDrawing(r,e.drawOwner)}})),Ee(ve(n),"addDrawInteraction",(function(e,t,r,o){n.drawInteraction&&n.removeDrawInteraction(),n.drawInteraction=new z.a(n.drawPropertiesForGeometryType(e,r,n.drawSource,o)),n.props.map.disableEventListener("singleclick"),n.drawInteraction.on("drawstart",(function(){n.selectInteraction&&(n.selectInteraction.getFeatures().clear(),n.selectInteraction.setActive(!1))})),n.drawInteraction.on("drawend",(function(e){var r=e.feature.clone();if(r.set("id",I.a.v1()),"Circle"===n.props.drawMethod&&"Circle"===r.getGeometry().getType()){var o=r.getGeometry().getRadius(),a=r.getGeometry().getCenter();r.setGeometry(n.polygonFromCircle(a,o))}var i=n.fromOLFeature(r,t);n.props.onEndDrawing(i,n.props.drawOwner),n.props.options.stopAfterDrawing&&n.props.onChangeDrawingStatus("stop",n.props.drawMethod,n.props.drawOwner,n.props.features.concat([i])),n.selectInteraction&&(n.addSelectInteraction(),n.selectInteraction.setActive(!0))})),n.props.map.addInteraction(n.drawInteraction),n.setDoubleClickZoomEnabled(!1)})),Ee(ve(n),"toMulti",(function(e){return"Point"===e.getType()?new V.a([e.getCoordinates()]):e})),Ee(ve(n),"handleDrawAndEdit",(function(e,t,r,o){n.drawInteraction&&n.removeDrawInteraction(),n.drawInteraction=new z.a(n.drawPropertiesForGeometryType(Object(R.getSimpleGeomType)(e),r,Object(R.isSimpleGeomType)(e)?n.drawSource:null,o)),n.props.map.disableEventListener("singleclick"),n.drawInteraction.on("drawstart",(function(){n.selectInteraction&&(n.selectInteraction.getFeatures().clear(),n.selectInteraction.setActive(!1))})),n.drawInteraction.on("drawend",(function(r){var a=r.feature.clone(),i=I.a.v1();a.set("id",i);var s,c,p,f=a.getGeometry(),d=n.drawLayer.getSource().getFeatures(),m=n.props.features;if(n.props.options.transformToFeatureCollection){var y;if("Circle"===e){p="Polygon";var g=f.getRadius(),b=f.getCenter(),v=n.polygonCoordsFromCircle(b,g);y=n.getNewFeature(p,v),b=Object(D.reproject)(b,n.getMapCrs(),"EPSG:4326",!1);var S=o&&o.features&&o.features.length&&o.features[0]&&o.features[0].features&&o.features[0].features.length&&o.features[0].features.filter((function(e){return e.properties.isDrawing}))[0].properties.id||i;y.setProperties({isCircle:!0,radius:g,center:[b.x,b.y],id:S,crs:n.getMapCrs()})}else if("Polygon"===e){p=n.props.drawMethod;var E=f.getCoordinates();E[0].push(E[0][0]),y=n.getNewFeature(p,E)}else{p="Text"===e?"Point":n.props.drawMethod;var O=f.getCoordinates();y=n.getNewFeature(p,O),"Text"===e&&y.setProperties({isText:!0,valueText:"."})}var w=d.length>=1?fe(n.replaceCirclesWithPolygonsInFeatureColl(d)):[];y.getProperties().id||y.setProperties({id:I.a.v1()});var T=[].concat(fe(w),[y]),A=Oe.writeFeaturesObject(T),P=new B.a({features:(new F.a).readFeatures(A)});n.drawLayer.setSource(P);var C=Object(D.reprojectGeoJson)(A,n.getMapCrs(),"EPSG:4326");n.props.onGeometryChanged([C],n.props.drawOwner,n.props.options&&n.props.options.stopAfterDrawing?"enterEditMode":"","Text"===e,"Circle"===e),n.props.onEndDrawing(C,n.props.drawOwner),n.props.onDrawingFeatures([h()(C.features)])}else{if("Circle"===e){p="Polygon";var x=f.getRadius(),j=f.getCenter(),L=n.polygonCoordsFromCircle(j,x),N=n.toMulti(n.createOLGeometry({type:p,coordinates:L}));if(1===m.length&&m[0]&&!m[0].geometry)s=[],c=new X.default([N]);else if((s=n.toMulti(l()(d).getGeometry())).getGeometries){var M=n.replaceCirclesWithPolygons(l()(d));c=new X.default([].concat(fe(M),[N]))}else c=new X.default([s,N]);a.setGeometry(c)}else if("Text"===e||"MultiPoint"===e){var k=f.getCoordinates();p="MultiPoint";var G=n.toMulti(n.createOLGeometry({type:p,coordinates:[k]}));if(1!==m.length||m[0].geometry)if((s=n.toMulti(l()(d).getGeometry())).getGeometries){var U=n.replaceCirclesWithPolygons(l()(d));c=new X.default([].concat(fe(U),[G]))}else c=new X.default([s,G]);else s=[],c=new X.default([G]);a.setGeometry(c)}else if(!Object(R.isSimpleGeomType)(e)){var H;c=null,s=1!==m.length||m[0].geometry?n.toMulti(l()(d).getGeometry()):n.toMulti(n.createOLGeometry({type:e,coordinates:null}));var z=d.map((function(e){return"GeometryCollection"===e.getGeometry().getType()?e.getGeometry().getGeometries():e.getGeometry()}));"GeometryCollection"===d[0].getGeometry().getType()&&(z=z[0]);var V=u()(z,(function(t){return t.getType()===e}));if(V?n.appendToMultiGeometry(e,V,f):H=n.toMulti(n.createOLGeometry({type:e,coordinates:f.getCoordinates()})),f.getType()!==Object(R.getSimpleGeomType)(s.getType())){var W=l()(d).getGeometry().getGeometries?n.replaceCirclesWithPolygons(l()(d)):[];if(V){var Y=W.map((function(e){return e.getType()===V.getType()?V:e}));c=new X.default(Y)}else c="GeometryCollection"===s.getType()?new X.default([].concat(fe(W),[H])):"Text"===e?new X.default([H]):new X.default([s,H]);a.setGeometry(c)}else a.setGeometry(V)}var q=n.props.features[0].properties;"Text"===e&&(q=_()({},n.props.features[0].properties,{textValues:(n.props.features[0].properties.textValues||[]).concat(["."]),textGeometriesIndexes:(n.props.features[0].properties.textGeometriesIndexes||[]).concat([a.getGeometry().getGeometries().length-1])})),"Circle"===e&&(q=_()({},q,{circles:(n.props.features[0].properties.circles||[]).concat([a.getGeometry().getGeometries().length-1])}));var Z=n.fromOLFeature(a,t,q),K=new B.a({features:(new F.a).readFeatures(Z)});n.drawLayer.setSource(K);var Q=Object(D.reprojectGeoJson)(Oe.writeFeatureObject(a.clone()),n.getMapCrs(),"EPSG:4326");"Polygon"===Q.geometry.type&&Q.geometry.coordinates[0].push(Q.geometry.coordinates[0][0]),n.props.onGeometryChanged([Q],n.props.drawOwner,n.props.options&&n.props.options.stopAfterDrawing?"enterEditMode":"","Text"===e,"Circle"===e),n.props.onEndDrawing(Z,n.props.drawOwner),Z=Object(D.reprojectGeoJson)(Z,n.getMapCrs(),"EPSG:4326");var J=Object(R.isSimpleGeomType)(n.props.drawMethod)&&"GeometryCollection"!==n.props.features[0].geometry.type?n.props.features.map((function(e){return me({},e,{featureProjection:n.getMapCrs()})})).concat([me({},Z,{type:"Feature",geometry:{type:Z.type,coordinates:Z.coordinates},featureProjection:n.getMapCrs(),properties:q})]):[me({},Z,{properties:q})];n.props.options.stopAfterDrawing?n.props.onChangeDrawingStatus("stop",n.props.drawMethod,n.props.drawOwner,J):n.props.onChangeDrawingStatus("replace",n.props.drawMethod,n.props.drawOwner,J.map((function(e){return Object(D.reprojectGeoJson)(e,"EPSG:4326",n.getMapCrs())})),_()({},n.props.options,{featureProjection:n.getMapCrs()})),n.selectInteraction&&(n.addSelectInteraction(),n.selectInteraction.setActive(!0))}})),n.props.map.addInteraction(n.drawInteraction),n.setDoubleClickZoomEnabled(!1)})),Ee(ve(n),"drawPropertiesForGeometryType",(function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={source:n.drawSource||r,type:e,style:"Marker"===e?Object(G.b)(o.style):new J.default({fill:new $.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ee.default({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new ne.default({radius:5,stroke:new ee.default({color:"rgba(0, 0, 0, 0.7)"}),fill:new $.default({color:"rgba(255, 255, 255, 0.2)"})})}),features:new re.a,condition:oe.c},i={};switch(e){case"BBOX":i.type="LineString",i.maxPoints=2,i.geometryFunction=function(e,t){var n=t;n||(n=new W.b([]));var r=e[0],o=e[1];return n.setCoordinates([[r,[r[0],o[1]],o,[o[0],r[1]],r]]),n};break;case"Circle":i.maxPoints=100,o.options&&o.options.geodesic?i.geometryFunction=function(e,t){var r=t;r||(r=new W.b([])).setProperties({geodesicCenter:fe(e[0])},!0);var o=n.props.map.getView().getProjection().getCode(),a=fe(e).map((function(e){return n.reprojectCoordinatesToWGS84(e,o)})),i=Object(D.calculateDistance)(a,"haversine"),s=Object(W.a)(a[0],i).clone().transform("EPSG:4326",o).getCoordinates();return r.setCoordinates(s),r}:i.type=e;break;case"Marker":case"Point":case"Text":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":"LineString"===e&&(i.maxPoints=t);var s="Text"===e||"Marker"===e?"Point":e;i.type=s,i.geometryFunction=function(e,t){var r=t;return r||(r=n.createOLGeometry({type:s,coordinates:null,options:o.options})),r.setCoordinates(e),r};break;default:return{}}return _()({},a,i)})),Ee(ve(n),"setDoubleClickZoomEnabled",(function(e){for(var t=n.props.map.getInteractions(),r=0;r<t.getLength();r++){var o=t.item(r);if(o instanceof ae.a){o.setActive(e);break}}})),Ee(ve(n),"updateFeatureExtent",(function(e){var t=e.features.getArray(),r=n.props.features.map((function(e){var r=l()(t.filter((function(t){return n.fromOLFeature(t).id===e.id})));return r?_()({},e,{geometry:r.geometry,center:r.center,extent:r.extent,coordinate:r.coordinates,radius:r.radius}):e}));n.props.onChangeDrawingStatus("replace",n.props.drawMethod,n.props.drawOwner,r)})),Ee(ve(n),"addInteractions",(function(e){n.clean(),n.drawLayer||n.addLayer(e),n.addDrawInteraction(e.drawMethod,e.options.startingPoint,e.options.maxPoints,e),e.options&&e.options.editEnabled&&(n.addSelectInteraction(),n.translateInteraction&&n.props.map.removeInteraction(n.translateInteraction),n.translateInteraction=new ie.a({features:n.selectInteraction.getFeatures()}),n.translateInteraction.setActive(!1),n.translateInteraction.on("translateend",n.updateFeatureExtent),n.props.map.addInteraction(n.translateInteraction),n.addTranslateListener(),n.modifyInteraction&&n.props.map.removeInteraction(n.modifyInteraction),n.modifyInteraction=new se.a({features:n.selectInteraction.getFeatures(),condition:function(e){return Object(oe.k)(e)&&!Object(oe.a)(e)}}),n.props.map.addInteraction(n.modifyInteraction)),n.drawSource.clear(),e.features.length>0&&n.addFeatures(e)})),Ee(ve(n),"addSingleClickListener",(function(e,t){return t.map.on("singleclick",e)})),Ee(ve(n),"addDrawOrEditInteractions",(function(e){n.state&&n.state.keySingleClickCallback&&Object(ce.b)(n.state.keySingleClickCallback);n.clean();var t,r=Object(D.reprojectGeoJson)(l()(e.features),e.options.featureProjection,n.getMapCrs())||{};t=r&&r.features&&r.features.length?_()({},e,{features:[r]}):r&&r.properties&&r.properties.isCircle?_()({},e,{features:[]}):_()({},e,{features:r.geometry?[me({},r.geometry,{properties:r.properties})]:[]}),n.drawLayer?(n.drawSource.clear(),n.addFeatures(t)):n.addLayer(t),e.options.editEnabled&&(n.addModifyInteraction(e),!1!==e.options.translateEnabled&&n.addTranslateInteraction(),e.options.addClickCallback&&n.setState({keySingleClickCallback:n.addSingleClickListener((function(t){if(n.drawSource&&e.options){var r,o=n.drawSource.getFeatures(),a=0,i=o&&o.length&&o.filter((function(e,t){return e.getProperties().canEdit&&(a=t),e.getProperties().canEdit}))[0]||null,s=i&&i.getGeometry()&&i.getGeometry().getCoordinates&&i.getGeometry().getCoordinates()||[],l=[],c=e.drawMethod;switch(c){case"Polygon":l=s.length?Object(k.isCompletePolygon)(s)?[(l=(l=f()(s[0],0,s[0].length-1)).concat([t.coordinate])).concat([s[0][0]])]:s[0].length>1?[[].concat(fe(s[0]),[t.coordinate,s[0][0]])]:[[].concat(fe(s[0]),[t.coordinate])]:[[t.coordinate]],(r=n.getNewFeature(c,l)).setProperties(m()(i&&i.getProperties()||{},"geometry"));break;case"LineString":case"MultiPoint":l=s.length?[].concat(fe(s),[t.coordinate]):[t.coordinate],(r=n.getNewFeature(c,l)).setProperties(m()(i&&i.getProperties()||{},"geometry"));break;case"Circle":c="Polygon";var u=i&&i.getProperties()&&i.getProperties().radius||1e4,p=t.coordinate,d=n.polygonCoordsFromCircle(p,u);r=n.getNewFeature(c,d),p=Object(D.reproject)(p,n.getMapCrs(),"EPSG:4326",!1),r.setProperties(m()(i&&i.getProperties()||{},"geometry")),r.setProperties({isCircle:!0,radius:u,center:[p.x,p.y]});break;case"Text":c="Point",(r=n.getNewFeature(c,t.coordinate)).setProperties(m()(i&&i.getProperties()||{},"geometry")),r.setProperties({isText:!0,valueText:i&&i.getProperties()&&i.getProperties().valueText||e.options.defaultTextAnnotation||"New"});break;default:l=t.coordinate,(r=n.getNewFeature(c,l)).setProperties(m()(i&&i.getProperties()||{},"geometry"))}var y={type:"Feature",geometry:{coordinates:fe(Object(D.reprojectGeoJson)(Oe.writeFeaturesObject([r.clone()]),n.getMapCrs(),"EPSG:4326").features[0].geometry.coordinates),type:c},properties:me({},m()(r.getProperties(),"geometry"))};n.props.onDrawingFeatures([y]),r=Object(M.a)(r,n.getMapCrs()),o[a]=r,n.drawSource=new B.a({features:o}),n.drawLayer.setSource(n.drawSource),n.addModifyInteraction(e)}}),e)})),e.options&&e.options.selectEnabled&&n.addSelectInteraction(e.options&&e.options.selected,e),e.options.drawEnabled&&n.handleDrawAndEdit(e.drawMethod,e.options.startingPoint,e.options.maxPoints,e)})),Ee(ve(n),"addSelectInteraction",(function(e,t){var r;if(n.selectInteraction&&n.props.map.removeInteraction(n.selectInteraction),e&&(r=u()(n.drawSource.getFeatures(),(function(t){return t.getProperties().id===e.properties.id})))&&n.selectFeature(r),n.selectInteraction=new le.a({layers:[n.drawLayer],features:new re.a(e&&r?[r]:null)}),r){var o=n.convertGeometryTypeToStyleType(t.drawMethod);r.setStyle(Object(G.d)(me({},t,{style:me({},t.style,{type:o,highlight:!0,useSelectedStyle:t.options.useSelectedStyle})}),!1,t.features[0]&&t.features[0].properties&&t.features[0].properties.valueText&&[t.features[0].properties.valueText]||[]))}n.selectInteraction.on("select",(function(e){var t=n.selectInteraction.getFeatures().getArray(),r=[];return t.length&&(r=n.props.features.map((function(r){var o;if("FeatureCollection"===r.type&&t.length>0){var a=l()(t);if(n.selectFeature(a),a.getGeometry&&"Circle"===a.getGeometry().getType()){var i=a.getGeometry().getRadius(),s=Object(D.reproject)(a.getGeometry().getCenter(),n.getMapCrs(),"EPSG:4326");a.setProperties({center:[s.x,s.y],radius:i}),a=n.replaceCircleWithPolygon(a.clone())}return n.drawSource.getFeatures().forEach((function(e){e.getProperties().id===a.getProperties().id?n.selectFeature(a):n.deselectFeature(e)})),Object(D.reprojectGeoJson)(Oe.writeFeatureObject(a.clone()),n.getMapCrs(),"EPSG:4326")}return o=t.reduce((function(e,t){return t.get("id")===r.id||e}),!1),_()({},r,{selected:o,selectedFeature:e.selected})})),n.props.onSelectFeatures(r)),0===t.length?(n.props.onSelectFeatures([]),n.drawSource.getFeatures().map((function(e){return n.deselectFeature(e)})),null):null})),n.props.map.addInteraction(n.selectInteraction)})),Ee(ve(n),"selectFeature",(function(e){e.setProperties({selected:!0})})),Ee(ve(n),"deselectFeature",(function(e){e.setProperties({selected:!1})})),Ee(ve(n),"removeDrawInteraction",(function(){n.drawInteraction&&(n.props.map.removeInteraction(n.drawInteraction),n.drawInteraction=null,setTimeout((function(){return n.props.map.enableEventListener("singleclick")}),500),setTimeout((function(){return n.setDoubleClickZoomEnabled(!0)}),250))})),Ee(ve(n),"removeInteractions",(function(){n.removeDrawInteraction(),n.selectInteraction&&(n.props.map.enableEventListener("singleclick"),n.props.map.removeInteraction(n.selectInteraction)),n.modifyInteraction&&(n.props.map.removeInteraction(n.modifyInteraction),n.props.map.un("singleclick")),n.translateInteraction&&n.props.map.removeInteraction(n.translateInteraction)})),Ee(ve(n),"clean",(function(e){e||n.removeInteractions(),n.drawLayer&&(n.props.map.removeLayer(n.drawLayer),n.geojson=null,n.drawLayer=null,n.drawSource=null)})),Ee(ve(n),"fromOLFeature",(function(e,t,r){var o=e.getGeometry(),a=n.props.map.getView().getProjection().getCode(),s=o.getType();if(o.getCoordinates){var l,c=o.getExtent(),u=o.getProperties(),p=u&&u.geodesicCenter||Object(ue.x)(c),f=o.getCoordinates();if(t&&(f=i()(t,f),o.setCoordinates(f)),"Circle"===n.props.drawMethod)if(n.props.options.geodesic){var d=[fe(p),fe(f[0][0])].map((function(e){return n.reprojectCoordinatesToWGS84(e,a)}));l=Object(D.calculateDistance)(d,"haversine")}else l=n.calculateRadius(p,f);return _()({},{id:e.get("id"),type:s,extent:c,center:p,coordinates:f,radius:l,style:n.fromOlStyle(e.getStyle()),projection:n.getMapCrs()})}var m=o.getGeometries().map((function(o,s){var l,c=o.getExtent(),u=Object(ue.x)(c),p=o.getCoordinates();if(t&&(p=i()(t,p),o.setCoordinates(p)),r.circles&&-1!==r.circles.indexOf(s))if(n.props.options.geodesic){var f=[fe(u),fe(p[0][0])].map((function(e){return n.reprojectCoordinatesToWGS84(e,a)}));l=Object(D.calculateDistance)(f,"haversine")}else l=n.calculateRadius(u,p);else l=0;return _()({},{id:e.get("id"),type:o.getType(),extent:c,center:u,coordinates:p,radius:l,style:n.fromOlStyle(e.getStyle()),projection:n.getMapCrs()})}));return _()({},{type:"Feature",id:e.get("id"),style:n.fromOlStyle(e.getStyle()),geometry:{type:"GeometryCollection",geometries:m},projection:a})})),Ee(ve(n),"reprojectCoordinatesToWGS84",(function(e,t){var n=Object(D.reproject)(e,t,"EPSG:4326");return[n.x,n.y]})),Ee(ve(n),"toOlFeature",(function(e){return l()(n.drawSource.getFeatures().filter((function(t){return t.get("id")===e.id})))})),Ee(ve(n),"fromOlStyle",(function(e){return e?{fillColor:n.rgbToHex(e.getFill().getColor()),fillTransparency:e.getFill().getColor()[3],strokeColor:e.getStroke().getColor(),strokeWidth:e.getStroke().getWidth(),text:e.getText().getText()}:{}})),Ee(ve(n),"toOlStyle",(function(e,t,r){var o=e&&e.fillColor?e.fillColor:[255,255,255,.2];"string"==typeof o&&(o=n.hexToRgb(o).concat([e.fillOpacity>=0&&e.fillOpacity<=1?e.fillOpacity:1])),e&&e.fillTransparency&&(o[3]=e.fillTransparency);var a=e&&(e.strokeColor||e.color)?e.strokeColor||e.color:"#ffcc33";t&&(a="#4a90e2"),a=n.hexToRgb(a).concat([e&&e.opacity||1]);var i=new J.default({fill:new $.default({color:o}),stroke:new ee.default({color:a,width:e&&(e.strokeWidth||e.weight)?e.strokeWidth||e.weight:2}),text:new te.default({text:e&&e.text?e.text:"",fill:new $.default({color:e&&(e.strokeColor||e.color)?e.strokeColor||e.color:"#000"}),stroke:new ee.default({color:"#fff",width:2}),font:e&&e.fontSize?e.fontSize+"px helvetica":""})});return"GeometryCollection"===r?[].concat(fe(Object(G.c)({style:{iconGlyph:"comment",iconShape:"square",iconColor:"blue"}})),[i]):e&&(e.iconUrl||e.iconGlyph)?Object(G.c)({style:e}):i})),Ee(ve(n),"hexToRgb",(function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})));return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null})),Ee(ve(n),"componentToHex",(function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})),Ee(ve(n),"rgbToHex",(function(e){return"#"+n.componentToHex(e[0])+n.componentToHex(e[1])+n.componentToHex(e[2])})),Ee(ve(n),"addModifyInteraction",(function(e){n.modifyInteraction&&n.props.map.removeInteraction(n.modifyInteraction);var t=e&&e.options&&e.options.editFilter;n.modifyFeatureColl=new re.a(S()(n.drawLayer.getSource().getFeatures(),t)),n.modifyInteraction=new se.a({features:n.modifyFeatureColl,condition:function(e){return Object(oe.k)(e)&&!Object(oe.a)(e)}}),n.modifyInteraction.on("modifyend",(function(e){var t=e.features.getArray().map((function(e){var t=e.clone();if(t.getGeometry&&"GeometryCollection"===t.getGeometry().getType()&&t.getGeometry().setGeometries(n.replaceCirclesWithPolygons(t)),t.getGeometry&&t.getGeometry()&&"Circle"===t.getGeometry().getType()){var r=Object(D.reproject)(t.getGeometry().getCenter(),n.getMapCrs(),"EPSG:4326"),o=t.getGeometry().getRadius();t.setProperties({center:[r.x,r.y],radius:o}),e.setProperties({center:[r.x,r.y],radius:o}),t=n.replaceCircleWithPolygon(t.clone())}return Object(D.reprojectGeoJson)(Oe.writeFeatureObject(t),n.getMapCrs(),"EPSG:4326")}));n.props.options.transformToFeatureCollection?n.props.onDrawingFeatures(t):n.props.onGeometryChanged(t,n.props.drawOwner,!1,"editing","editing")})),n.props.map.addInteraction(n.modifyInteraction)})),Ee(ve(n),"addTranslateInteraction",(function(){n.translateInteraction&&n.props.map.removeInteraction(n.translateInteraction),n.translateInteraction=new ie.a({features:new re.a(n.drawLayer.getSource().getFeatures())}),n.translateInteraction.setActive(!1),n.translateInteraction.on("translateend",(function(e){var t=e.features.getArray().map((function(e){var t=e.clone();if(t.getGeometry&&"GeometryCollection"===t.getGeometry().getType()&&t.getGeometry().setGeometries(n.replaceCirclesWithPolygons(t)),t.getGeometry&&t.getGeometry()&&"Circle"===t.getGeometry().getType()){var r=Object(D.reproject)(t.getGeometry().getCenter(),n.getMapCrs(),"EPSG:4326"),o=t.getGeometry().getRadius();t.setProperties({center:[r.x,r.y],radius:o}),t=n.replaceCircleWithPolygon(t)}return e.getProperties()&&e.getProperties().selected&&n.props.onSelectFeatures([Object(D.reprojectGeoJson)(Oe.writeFeatureObject(t),n.getMapCrs(),"EPSG:4326")]),Object(D.reprojectGeoJson)(Oe.writeFeatureObject(t),n.getMapCrs(),"EPSG:4326")}));n.props.options.transformToFeatureCollection?n.props.onDrawingFeatures(t):n.props.onGeometryChanged(t,n.props.drawOwner,n.props.drawOwner,!1,"Text"===n.props.drawMethod,"Circle"===n.props.drawMethod)})),n.addTranslateListener(),n.props.map.addInteraction(n.translateInteraction)})),Ee(ve(n),"createOLGeometry",(function(e){var t=e.type,r=e.coordinates,o=e.radius,a=e.center,i=e.geometries,s=e.projection,l=e.options,c=void 0===l?{}:l;return"GeometryCollection"===t?i&&i.length?new X.default(i.map((function(e){return n.olGeomFromType({type:e.type})}))):new X.default([]):n.olGeomFromType({type:t,coordinates:r,radius:o,center:a,projection:s,options:c})})),Ee(ve(n),"olGeomFromType",(function(e){var t,r=e.type,o=e.coordinates,a=e.radius,i=e.center,s=e.projection,l=e.options;switch(r){case"Point":case"Marker":case"Text":t=new Y.a(o||[]);break;case"LineString":t=new q.a(o||[]);break;case"MultiPoint":t=new V.a(o||[]);break;case"MultiLineString":t=new Z.a(o||[]);break;case"MultiPolygon":t=new K.a(o||[]);break;default:var c=g()(i)?{x:i[0],y:i[1]}:i,u=s&&!isNaN(parseFloat(a))&&c&&!O()(c.x)&&!O()(c.y)&&!isNaN(parseFloat(c.x))&&!isNaN(parseFloat(c.y));(t=u?l.geodesic?Object(W.a)(n.reprojectCoordinatesToWGS84([c.x,c.y],s),a,100).clone().transform("EPSG:4326",s):Object(W.c)(new Q.a([c.x,c.y],a),100):new W.b(o&&g()(o[0])?o:[]))&&u&&l.geodesic&&t.setProperties({geodesicCenter:[c.x,c.y]},!0)}return t})),Ee(ve(n),"convertGeometryTypeToStyleType",(function(e){switch(e){case"BBOX":return"LineString";default:return e}})),Ee(ve(n),"appendToMultiGeometry",(function(e,t,n){switch(e){case"MultiPoint":t.appendPoint(n);break;case"MultiLineString":t.appendLineString(n);break;case"MultiPolygon":var r=n.getCoordinates();r[0].push(r[0][0]),n.setCoordinates(r),t.appendPolygon(n)}})),Ee(ve(n),"calculateRadius",(function(e,t){return g()(t)&&g()(t[0])&&g()(t[0][0])?Math.sqrt(Math.pow(e[0]-t[0][0][0],2)+Math.pow(e[1]-t[0][0][1],2)):100})),Ee(ve(n),"polygonFromCircle",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return Object(W.c)(new Q.a(e,t),n)})),Ee(ve(n),"polygonCoordsFromCircle",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return n.polygonFromCircle(e,t,r).getCoordinates()})),Ee(ve(n),"replaceCirclesWithPolygonsInFeatureColl",(function(e){return e.map((function(e){return"Circle"!==e.getGeometry().getType()?e:n.replaceCircleWithPolygon(e)}))})),Ee(ve(n),"replaceCircleWithPolygon",(function(e){if(e.getProperties().isCircle&&"Circle"===e.getGeometry().getType()){var t=e.getGeometry().getCenter(),r=e.getGeometry().getRadius();return e.setGeometry(n.polygonFromCircle(t,r)),e}return e})),Ee(ve(n),"replaceCirclesWithPolygons",(function(e){return e.getGeometry&&!e.getGeometry().getGeometries?e:e.getGeometry().getGeometries().map((function(t,r){if("Circle"!==t.getType())return t;if(e.getProperties()&&e.getProperties().circles&&-1!==e.getProperties().circles.indexOf(r)){var o=t.getCenter(),a=t.getRadius();return n.polygonFromCircle(o,a)}return t}))})),Ee(ve(n),"replacePolygonsWithCircles",(function(e){return e.getGeometry().getGeometries().map((function(t,r){if("Polygon"!==t.getType())return t;if(e.getProperties()&&e.getProperties().circles&&-1!==e.getProperties().circles.indexOf(r)){var o=t.getExtent(),a=Object(ue.x)(o),i=n.calculateRadius(a,t.getCoordinates());return new Q.a(a,i)}return t}))})),Ee(ve(n),"addTranslateListener",(function(){document.addEventListener("keydown",(function(e){e.altKey&&"AltLeft"===e.code&&n.translateInteraction.setActive(!0)})),document.addEventListener("keyup",(function(e){"AltLeft"===e.code&&n.translateInteraction.setActive(!1)}))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.drawLayer&&this.updateFeatureStyles(e.features),!e.drawStatus&&this.selectInteraction&&this.selectInteraction.getFeatures().clear(),this.props.drawStatus!==e.drawStatus||this.props.drawMethod!==e.drawMethod||this.props.features!==e.features)switch(e.drawStatus){case"create":this.addLayer(e);break;case"start":this.addInteractions(e);break;case"drawOrEdit":this.addDrawOrEditInteractions(e);break;case"stop":this.removeDrawInteraction();break;case"replace":this.replaceFeatures(e);break;case"updateStyle":this.updateOnlyFeatureStyles(e);break;case"clean":this.clean();break;case"cleanAndContinueDrawing":this.clean(!0);break;case"endDrawing":this.endDrawing(e);break;default:return}}},{key:"render",value:function(){return null}}])&&ge(n.prototype,r),o&&ge(n,o),t}(o.a.Component);Ee(we,"propTypes",{map:P.a.object,drawOwner:P.a.string,drawStatus:P.a.string,drawMethod:P.a.string,options:P.a.object,features:P.a.array,onChangeDrawingStatus:P.a.func,onGeometryChanged:P.a.func,onDrawStopped:P.a.func,onDrawingFeatures:P.a.func,onSelectFeatures:P.a.func,onEndDrawing:P.a.func,style:P.a.object}),Ee(we,"defaultProps",{map:null,drawOwner:null,drawStatus:null,drawMethod:null,features:null,options:{stopAfterDrawing:!0},onChangeDrawingStatus:function(){},onGeometryChanged:function(){},onDrawStopped:function(){},onDrawingFeatures:function(){},onSelectFeatures:function(){},onEndDrawing:function(){}})},2650:function(e,t,n){var r={"./cesium/plugins/index":2464,"./leaflet/plugins/index":2466,"./openlayers/plugins/index":2467};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=2650},2652:function(e,t,n){var r=n(71),o=n(3153),a=n(417).Promise,i=new o(100),s=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-9999,a=r*e+n;try{var i=t.dataView.getInt16(2*a,!1);if(i!==o&&32767!==i&&-32768!==i)return i}catch(e){}return null};e.exports={loadTile:function(e,t,n){return i.has(n)?null:new a((function(o,a){r.get(e,{responseType:"arraybuffer"}).then((function(e){!function(e,t,n){i.set(n,{data:e,dataView:new DataView(e),coords:t,current:!0,status:"success"})}(e.data,t,n),o()})).catch((function(e){!function(e,t,n){i.set(n,{coords:t,current:!0,status:"error: "+e})}(e.message,t,n),a(e)}))}))},getElevation:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-9999,o=i.get(e);return o&&"success"===o.status?{available:!0,value:s(n,o,t.x,t.y,r)}:o&&"loading"===o.status?{available:!1,message:"elevationLoading"}:o&&"error"===o.status?{available:!1,message:"elevationLoadingError"}:{available:!1,message:"elevationNotAvailable"}},reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=new o(e.max||100)}}},2655:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n(2575),o=n(2346),a=n(2656),i=n(2286),s={"application/vnd.mapbox-vector-tile":r.a,"application/json;type=geojson":o.a,"application/json;type=topojson":a.a},l=function(e,t){Object(i.d)({asPromise:!0,style:e}).then((function(e){t.setStyle(e)})).catch((function(){}))}},2658:function(e,t,n){var r=n(53),o=n(197),a=n(413).loadMaps,i=n(47);function s(e,t,n,r){return{type:"LOGIN_SUCCESS",userDetails:e,authHeader:"Basic "+btoa(t+":"+n),username:t,password:n,authProvider:r}}function l(e){return{type:"LOGIN_FAIL",error:e}}function c(e){return{type:"LOGOUT",redirectUrl:e}}function u(e,t){return{type:"SESSION_VALID",userDetails:e,authProvider:t}}e.exports={CHECK_LOGGED_USER:"CHECK_LOGGED_USER",LOGIN_SUBMIT:"LOGIN_SUBMIT",LOGIN_PROMPT_CLOSED:"LOGIN:LOGIN_PROMPT_CLOSED",LOGIN_REQUIRED:"LOGIN:LOGIN_REQUIRED",CHANGE_PASSWORD:"CHANGE_PASSWORD",CHANGE_PASSWORD_SUCCESS:"CHANGE_PASSWORD_SUCCESS",CHANGE_PASSWORD_FAIL:"CHANGE_PASSWORD_FAIL",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAIL:"LOGIN_FAIL",RESET_ERROR:"RESET_ERROR",LOGOUT:"LOGOUT",REFRESH_SUCCESS:"REFRESH_SUCCESS",SESSION_VALID:"SESSION_VALID",checkLoggedUser:function(){return{type:"CHECK_LOGGED_USER"}},login:function(e,t){return function(n,o){return r.login(e,t).then((function(l){n(s(l,e,t,r.authProviderName)),n(a(!1,o().maps&&o().maps.searchText||i.getDefaults().initialMapFilter||"*"))})).catch((function(e){n(l(e))}))}},loginPromptClosed:function(){return{type:"LOGIN:LOGIN_PROMPT_CLOSED"}},loginRequired:function(){return{type:"LOGIN:LOGIN_REQUIRED"}},loginSuccess:s,loginFail:l,logout:c,changePassword:function(e,t){return function(n){r.changePassword(e,t).then((function(){n(function(e,t){return{type:"CHANGE_PASSWORD_SUCCESS",user:e,authHeader:"Basic "+btoa(e.name+":"+t)}}(e,t))})).catch((function(e){n(function(e){return{type:"CHANGE_PASSWORD_FAIL",error:e}}(e))}))}},logoutWithReload:function(){return function(e,t){e(c(null)),e(a(!1,t().maps&&t().maps.searchText||i.getDefaults().initialMapFilter||"*"))}},resetError:function(){return{type:"RESET_ERROR"}},refreshAccessToken:function(){return function(e){var t=o.getToken(),n=o.getRefreshToken();r.refreshToken(t,n).then((function(t){var n,o;e((n=t,o=r.authProviderName,{type:"REFRESH_SUCCESS",userDetails:n,authProvider:o}))})).catch((function(){e(c(null))}))}},verifySession:function(){return function(e){r.verifySession().then((function(t){e(u(t,r.authProviderName))})).catch((function(){e(c(null))}))}},sessionValid:u}},2659:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n(1),s=n(758).Glyphicon,l=n(88).connect,c=n(195),u=c.createSelector,p=c.createStructuredSelector,f=n(26),d=n(268).mapSelector,m=n(408).layersSelector,y=n(2144).mapTypeSelector,g=n(773),b=g.generalInfoFormatSelector,h=g.clickPointSelector,v=g.indexSelector,S=g.responsesSelector,E=g.validResponsesSelector,O=g.showEmptyMessageGFISelector,w=g.isHighlightEnabledSelector,T=g.currentFeatureSelector,A=g.currentFeatureCrsSelector,P=n(2168),C=P.hideMapinfoMarker,_=P.showMapinfoRevGeocode,x=P.hideMapinfoRevGeocode,I=P.clearWarning,j=P.toggleMapInfoState,L=P.changeMapInfoFormat,R=P.updateCenterToMarker,D=P.closeIdentify,N=P.purgeMapInfoResults,M=P.featureInfoClick,k=P.changeFormat,G=P.toggleShowCoordinateEditor,F=P.changePage,U=P.toggleHighlightFeature,B=n(409),H=B.changeMousePointer,z=B.zoomToExtent,V=n(767).currentLocaleSelector,W=n(2140).mapLayoutValuesSelector,Y=n(407),q=Y.compose,Z=Y.defaultProps,K=n(273),Q=n(2161),X=n(3192),J=X.defaultViewerHandlers,$=X.defaultViewerDefaultProps,ee=n(3193).identifyLifecycle,te=n(3194),ne=n(3195),re=n(3196),oe=n(2192);n(3197);var ae=p({enabled:function(e){return e.mapInfo&&e.mapInfo.enabled||e.controls&&e.controls.info&&e.controls.info.enabled||!1},responses:S,validResponses:E,requests:function(e){return e.mapInfo&&e.mapInfo.requests||[]},format:b,map:d,layers:m,point:h,showModalReverse:function(e){return e.mapInfo&&e.mapInfo.showModalReverse},reverseGeocodeData:function(e){return e.mapInfo&&e.mapInfo.reverseGeocodeData},warning:function(e){return e.mapInfo&&e.mapInfo.warning},currentLocale:V,dockStyle:function(e){return W(e,{height:!0})},formatCoord:function(e){return e.mapInfo&&e.mapInfo.formatCoord},showCoordinateEditor:function(e){return e.mapInfo&&e.mapInfo.showCoordinateEditor},showEmptyMessageGFI:function(e){return O(e)}}),ie=q(l(u(v,(function(e){return{index:e}})),{setIndex:F}),Z({index:0})),se=q(ie,$,J,Q((function(e){return 0===e.responses.length})))(n(3199)),le=Z({formatCoord:"decimal",enabled:!1,draggable:!0,collapsible:!1,format:K.getDefaultInfoFormatValue(),requests:[],responses:[],viewerOptions:{},viewer:se,purgeResults:function(){},hideMarker:function(){},clearWarning:function(){},changeMousePointer:function(){},showRevGeocode:function(){},hideRevGeocode:function(){},containerProps:{continuous:!1},enabledCoordEditorButton:!0,showCoordinateEditor:!1,showModalReverse:!1,reverseGeocodeData:{},enableRevGeocode:!0,wrapRevGeocode:!1,style:{},point:{},layer:null,map:{},layers:[],panelClassName:"modal-dialog info-panel modal-content",headerClassName:"modal-header",bodyClassName:"modal-body info-wrap",dock:!0,headerGlyph:"",closeGlyph:"1-close",className:"square-button",currentLocale:"en-US",fullscreen:!1,showTabs:!0,showCoords:!0,showLayerTitle:!0,position:"right",size:660,getToolButtons:ne,getNavigationButtons:re,showFullscreen:!1,validResponses:[],validator:K.getValidator,zIndex:1050}),ce=q(l(ae,{purgeResults:N,closeIdentify:D,onChangeClickPoint:M,onToggleShowCoordinateEditor:G,onChangeFormat:k,changeMousePointer:H,clearWarning:I,hideMarker:C,showRevGeocode:_,hideRevGeocode:x,onEnableCenterToMarker:R.bind(null,"enabled")}),q(l(p({highlight:w,currentFeature:T,currentFeatureCrs:A}),{toggleHighlightFeature:U,zoomToExtent:z}),te),l(u(y,(function(e){return{mapType:e}})),{},(function(e,t,n){var i=e.mapType,s=n.showHighlightFeatureButton;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a(n,["showHighlightFeatureButton"]),{showHighlightFeatureButton:"openlayers"===i&&s})})),le,ie,J,ee)(n(3201)),ue=l((function(e){return{infoFormat:b(e)}}),{onInfoFormatChange:L})(n(3240));e.exports={IdentifyPlugin:f(ce,{Toolbar:{name:"info",position:6,tooltip:"info.tooltip",icon:i.createElement(s,{glyph:"map-marker"}),help:i.createElement(oe,{msgId:"helptexts.infoButton"}),action:j,selector:function(e){return{bsStyle:e.mapInfo&&e.mapInfo.enabled?"success":"primary",active:!(!e.mapInfo||!e.mapInfo.enabled)}}},Settings:{tool:i.createElement(ue,{key:"featureinfoformat",label:i.createElement(oe,{msgId:"infoFormatLbl"})}),position:3}}),reducers:{mapInfo:n(2676)},epics:n(3244)}},2662:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a=n(1),i=n(407).compose,s=n(2103),l=n(13).omit,c=n(758),u=c.Button,p=c.Glyphicon,f=n(2231),d=n(3202),m=n(2663);e.exports=i(d,m)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.glyph,n=e.loading,i=e.text,c=void 0===i?"":i,d=e.textId,m=e.glyphClassName,y=void 0===m?"":m,g=e.loaderProps,b=void 0===g?{}:g,h=e.children,v=o(e,["glyph","loading","text","textId","glyphClassName","loaderProps","children"]);return a.createElement(u,l(v,["pullRight","confirmNo","confirmYes"]),t&&!n?a.createElement(p,{glyph:t,className:y}):null,d?a.createElement(s,{msgId:d}):c,n?a.createElement(f,r({className:"ms-loader".concat(v.bsStyle&&" ms-loader-"+v.bsStyle||"").concat(v.bsSize&&" ms-loader-"+v.bsSize||"")},b)):null,h)}))},2663:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(1),p=n(407),f=p.branch,d=p.toClass,m=n(0),y=n(13).omit,g=n(758).Popover,b=n(2114);e.exports=f((function(e){return e.popover}),(function(e){var t,n;return n=t=function(t){function n(){return o(this,n),i(this,s(n).apply(this,arguments))}var r,c,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,t),r=n,(c=[{key:"renderPopover",value:function(){return u.createElement(g,y(this.props.popover,["trigger","placement","text"]),this.props.popover.text)}},{key:"renderContent",value:function(){var t=d(e);return u.createElement(t,y(this.props,["popover"]))}},{key:"render",value:function(){var e=!0===this.props.popover.trigger?["hover","focus"]:this.props.popover.trigger;return u.createElement("span",null,u.createElement(b,{trigger:e,placement:this.props.popover.placement,overlay:this.renderPopover()},this.renderContent()))}}])&&a(r.prototype,c),p&&a(r,p),n}(u.Component),c(t,"propTypes",{popover:m.object}),c(t,"defaultProps",{popover:{trigger:!0}}),n}))},2672:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(0),d=n(758),m=d.Row,y=d.Col,g=d.Glyphicon,b=d.Button,h=n(2116),v=n(3233),S=n(2673),E=n(2103),O=n(2675),w=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"defaultProps",{showLabels:!1,formatVisible:!1,onMouseEnter:function(){},onMouseLeave:function(){}}),n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.idx,n=p.createElement("div",null,p.createElement(b,{disabled:!this.props.isDraggableEnabled,className:"square-button-md no-border btn btn-default",style:{display:"flex",cursor:this.props.isDraggableEnabled&&"grab"}},p.createElement(g,{glyph:"menu-hamburger",style:{pointerEvents:this.props.isDraggableEnabled?"auto":"none"}})));return p.createElement(m,{className:"coordinateRow ".concat(this.props.format||""," ").concat(this.props.customClassName||""),style:this.props.customClassName?{}:{marginLeft:-5,marginRight:-5},onMouseEnter:function(){e.props.onMouseEnter&&e.props.component.lat&&e.props.component.lon&&e.props.onMouseEnter(e.props.component)},onMouseLeave:function(){e.props.onMouseLeave&&e.props.component.lat&&e.props.component.lon&&e.props.onMouseLeave()}},p.createElement(y,{xs:1},this.props.showDraggable?this.props.isDraggable?this.props.connectDragSource(n):n:null),p.createElement("div",{className:"coordinate lat",style:{width:"100%"}},p.createElement(y,{xs:5},this.props.showLabels&&p.createElement("div",null,p.createElement(E,{msgId:"latitude"})),p.createElement(S,{format:this.props.format,aeronauticalOptions:this.props.aeronauticalOptions,coordinate:"lat",idx:t,value:this.props.component.lat,onChange:function(n){return e.props.onChange(t,"lat",n)},constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}}))),p.createElement("div",{className:"coordinate lon",style:{width:"100%"}},p.createElement(y,{xs:5},this.props.showLabels&&p.createElement("div",null,p.createElement(E,{msgId:"longitude"})),p.createElement(S,{format:this.props.format,aeronauticalOptions:this.props.aeronauticalOptions,coordinate:"lon",idx:t,value:this.props.component.lon,onChange:function(n){return e.props.onChange(t,"lon",n)},constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}}))),p.createElement(y,{xs:1},p.createElement(h,{btnGroupProps:{className:"pull-right"},btnDefaultProps:{className:"square-button-md no-border"},buttons:[{visible:this.props.removeVisible,disabled:!this.props.removeEnabled,glyph:"trash",onClick:function(){e.props.onRemove(t)}},{buttonConfig:{title:p.createElement(g,{glyph:"cog"}),className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===this.props.format,onClick:function(){e.props.onChangeFormat("decimal")},text:p.createElement(E,{msgId:"search.decimal"})},{active:"aeronautical"===this.props.format,onClick:function(){e.props.onChangeFormat("aeronautical")},text:p.createElement(E,{msgId:"search.aeronautical"})}],visible:this.props.formatVisible,Element:O}]})))}}])&&a(n.prototype,r),f&&a(n,f),t}(p.Component);u(w,"propTypes",{idx:f.number,component:f.object,onRemove:f.func,onChange:f.func,onChangeFormat:f.func,onMouseEnter:f.func,format:f.string,type:f.string,onMouseLeave:f.func,connectDragSource:f.func,aeronauticalOptions:f.object,customClassName:f.string,isDraggable:f.bool,isDraggableEnabled:f.bool,showLabels:f.bool,showDraggable:f.bool,removeVisible:f.bool,formatVisible:f.bool,removeEnabled:f.bool}),e.exports=v(w)},2673:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1),d=n(0),m=n(3234),y=n(3235),g=n(13).isNil,b=n(3238),h=function(e){function t(){var e,n;a(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(c(n=s(this,(e=l(t)).call.apply(e,[this].concat(o)))),"defaultProps",{format:"decimal",constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}}),n}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.format;return"decimal"===e||g(e)?f.createElement(m,o({},this.props,{format:this.props.format||"decimal"})):f.createElement(y,this.props)}}])&&i(n.prototype,r),d&&i(n,d),t}(f.Component);p(h,"propTypes",{idx:d.number,value:d.number,constraints:d.object,format:d.string,aeronauticalOptions:d.object,coordinate:d.string,onChange:d.func,onKeyDown:d.func}),e.exports=b(h)},2674:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(407),i=a.compose,s=a.withHandlers,l=a.withProps,c=n(13),u=c.round,p=c.isNaN;e.exports=i(l((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{seconds:{decimals:4}},r=n.seconds,o=e>=0?Math.floor(e):Math.ceil(e),a=Math.abs(60*(e-o)),i=Math.floor(a),s=60*(a-i),l=u(s,r.decimals);if(o=Math.abs(o),60===l&&(i++,l=0),60===i&&(o++,i=0),p(o)||""===e)return{degrees:"",minutes:"",seconds:"",direction:t?"E":"N"};var c={degrees:o,minutes:i,seconds:l,direction:e<0?t?"W":"S":t?"E":"N"};return c}(e.value,"lon"===e.coordinate,e.aeronauticalOptions))})),s({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.degrees,r=t.minutes,o=t.seconds,a=t.direction,i=0,s=0,l=0;void 0===n&&void 0===r&&void 0===o&&e.onChange(void 0),p(n)||(i=n),p(r)||(s=r),p(o)||(l=o);var c=i+s/60+l/3600;(c>0&&("S"===a||"W"===a)||c<0&&("N"===a||"E"===a))&&(c*=-1),e.onChange(c.toPrecision(12))}}}))},2675:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(758),a=o.Glyphicon,i=o.DropdownButton,s=o.MenuItem,l=n(2135),c=n(1),u=n(162),p=l(i),f={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:u()};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuOptions,n=void 0===t?[]:t,o=e.buttonConfig,i=void 0===o?{}:o;return c.createElement(p,r({},f,i),n.length?n.map((function(e,t){var n=e.glyph,r=e.text,o=e.onClick,i=e.active,l=void 0!==i&&i;return c.createElement(s,{active:l,eventKey:t,onClick:o,key:t},n&&c.createElement(a,{glyph:n})," ",r)})):null)}},2676:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=n(2168),l=s.ERROR_FEATURE_INFO,c=s.EXCEPTIONS_FEATURE_INFO,u=s.LOAD_FEATURE_INFO,p=s.CHANGE_MAPINFO_STATE,f=s.NEW_MAPINFO_REQUEST,d=s.PURGE_MAPINFO_RESULTS,m=s.CHANGE_MAPINFO_FORMAT,y=s.SHOW_MAPINFO_MARKER,g=s.HIDE_MAPINFO_MARKER,b=s.SHOW_REVERSE_GEOCODE,h=s.HIDE_REVERSE_GEOCODE,v=s.GET_VECTOR_INFO,S=s.NO_QUERYABLE_LAYERS,E=s.CLEAR_WARNING,O=s.FEATURE_INFO_CLICK,w=s.TOGGLE_HIGHLIGHT_FEATURE,T=s.CHANGE_PAGE,A=s.TOGGLE_MAPINFO_STATE,P=s.UPDATE_CENTER_TO_MARKER,C=s.TOGGLE_EMPTY_MESSAGE_GFI,_=s.CHANGE_FORMAT,x=s.TOGGLE_SHOW_COORD_EDITOR,I=n(40).MAP_CONFIG_LOADED,j=n(267).RESET_CONTROLS,L=n(26),R=n(13).head;function D(e,t,n){if(R((e.requests||[]).filter((function(e){return e.reqId===t.reqId})))){var r=e.responses||[];return L({},e,{responses:[].concat(i(r),[{response:t[n],queryParams:t.requestParams,layerMetadata:t.layerMetadata}])})}return e}var N={enabled:!0,configuration:{}};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return L({},e,{warning:"NO_QUERYABLE_LAYERS"});case E:return L({},e,{warning:null});case p:return L({},e,{enabled:t.enabled});case A:return L({},e,{enabled:!e.enabled});case T:return L({},e,{index:t.index});case w:return L({},e,{highlight:t.enabled});case f:var r=t.reqId,a=t.request,s=e.requests||[];return L({},e,{requests:[].concat(i(s),[{request:a,reqId:r}])});case d:return L({},e,{responses:[],requests:[]});case u:return D(e,t,"data");case c:return D(e,t,"exceptions");case l:return D(e,t,"error");case O:return L({},e,{clickPoint:t.point,clickLayer:t.layer||null,itemId:t.itemId||null,overrideParams:t.overrideParams||null,filterNameList:t.filterNameList||null});case m:return o({},e,{configuration:o({},e.configuration,{infoFormat:t.infoFormat})});case y:return L({},e,{showMarker:!0});case g:return L({},e,{showMarker:!1});case b:return L({},e,{showModalReverse:!0,reverseGeocodeData:t.reverseGeocodeData});case h:return L({},e,{showModalReverse:!1,reverseGeocodeData:void 0});case j:return L({},e,{showMarker:!1,responses:[],requests:[]});case v:var R=n(3241),M=n(3243),k={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t.request.lng,t.request.lat]}},G=t.metadata&&t.metadata.units;switch(G){case"m":G="meters";break;case"deg":G="degrees";break;case"mi":G="miles";break;default:G="meters"}var F=t.metadata&&t.metadata.resolution||1,U=R(k,(t.metadata.buffer||1)*F,G),B=(t.layer.features||[]).filter((function(e){try{return"FeatureCollection"===e.type&&e.features&&e.features.length?e.features.reduce((function(e,n){var r=n.properties.useGeodesicLines&&n.properties.geometryGeodesic?o({},n,{geometry:n.properties.geometryGeodesic}):n;return e||M(U,F&&t.metadata.buffer&&G?R(r,1,"meters"):r)}),!1):M(U,F&&t.metadata.buffer&&G?R(e,1,"meters"):e)}catch(e){return!1}})),H=e.responses||[];return L({},e,{requests:[].concat(i(e.requests),[{}]),responses:[].concat(i(H),[{response:{crs:null,features:B,totalFeatures:"unknown",type:"FeatureCollection"},queryParams:t.request,layerMetadata:t.metadata,format:"JSON"}])});case P:return L({},e,{centerToMarker:t.status});case C:return o({},e,{configuration:o({},e.configuration,{showEmptyMessageGFI:!e.configuration.showEmptyMessageGFI})});case I:return o({},e,{configuration:t.config.mapInfoConfiguration||e.configuration||{}});case _:return o({},e,{formatCoord:t.format});case x:return o({},e,{showCoordinateEditor:!t.showCoordinateEditor});default:return e}}},2677:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=n(1),g=n(0),b=n(88).connect;n(3245);var h=n(2678).CSSTransitionGroup,v=n(2183).isFeatureGridOpen,S=n(2140).mapLayoutValuesSelector,E=n(195).createSelector,O=n(26),w=n(2302),T=function(e){function t(){return s(this,t),u(this,f(t).apply(this,arguments))}return d(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=i(e,["children"]);return y.createElement(h,a({},n,{transitionName:"toolbarexpand",transitionEnterTimeout:500,transitionLeaveTimeout:300}),t)}}]),t}(y.Component),A=function(e){function t(){var e,n;s(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r(p(n=u(this,(e=f(t)).call.apply(e,[this].concat(a)))),"getPanel",(function(e){return!0===e.panel?e.plugin:e.panel})),r(p(n),"getPanels",(function(){return n.getTools().filter((function(e){return e.panel})).map((function(e){return{name:e.name,title:e.title,cfg:e.cfg,panel:n.getPanel(e),items:e.items,wrap:e.wrap||!1}}))})),r(p(n),"getTools",(function(){return n.props.items.filter((function(e){return e.alwaysVisible||n.props.allVisible})).map((function(e,t){return O({},e,{position:e.position||t})})).sort((function(e,t){return e.position-t.position}))})),n}return d(t,e),c(t,[{key:"render",value:function(){return y.createElement(w,{id:this.props.id,className:"mapToolbar btn-group-"+this.props.layout,toolCfg:this.props.btnConfig,container:T,mapType:this.props.mapType,toolStyle:this.props.buttonStyle,activeStyle:this.props.pressedButtonStyle,toolSize:this.props.buttonSize,stateSelector:this.props.stateSelector,tools:this.getTools(),panels:this.getPanels(),activePanel:this.props.active,style:this.props.style,panelStyle:this.props.panelStyle,panelClassName:this.props.panelClassName})}}]),t}(y.Component);r(A,"propTypes",{id:g.string,tools:g.array,mapType:g.string,style:g.object,panelStyle:g.object,panelClassName:g.string,active:g.string,items:g.array,allVisible:g.bool,layout:g.string,stateSelector:g.string,buttonStyle:g.string,buttonSize:g.string,pressedButtonStyle:g.string,btnConfig:g.object}),r(A,"contextTypes",{messages:g.object,router:g.object}),r(A,"defaultProps",{id:"mapstore-toolbar",style:{},panelStyle:{minWidth:"300px",right:"52px",zIndex:100,position:"absolute",overflow:"auto",left:"450px"},panelClassName:"toolbar-panel",items:[],allVisible:!0,layout:"vertical",stateSelector:"toolbar",buttonStyle:"primary",buttonSize:null,pressedButtonStyle:"success",btnConfig:{className:"square-button"}});var P=function(e){return E([function(t){return t.controls&&t.controls[e]&&t.controls[e].active},function(t){return t.controls&&t.controls[e]&&t.controls[e].expanded},v,function(e){return S(e,{right:!0,bottom:!0})}],(function(t,n,r,o){return{active:t,allVisible:n,stateSelector:e,layout:r?"horizontal":"vertical",style:o}}))};e.exports={ToolbarPlugin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"toolbar";return b(P(e))(A)},reducers:{controls:n(800)}}},2682:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(758).Badge,m=n(13).isString,y=n(136),g=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"onMouseOver",(function(){var e=m(n.props.helpText)?n.props.helpText:y.getMessageById(n.context.messages,n.props.helpText.props.msgId);n.props.changeHelpText(e),n.props.changeHelpwinVisibility(!0)})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return f.createElement(d,{id:this.props.id,onMouseOver:this.onMouseOver,className:(this.props.isVisible?"":"hidden ")+(this.props.className?this.props.className:"")},"?")}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(g,"propTypes",{id:p.string,helpText:p.oneOfType([p.string,p.element]),isVisible:p.bool,changeHelpText:p.func,changeHelpwinVisibility:p.func,className:p.string}),u(g,"contextTypes",{messages:p.object}),u(g,"defaultProps",{helpText:"",isVisible:!1}),e.exports=g},2683:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(1),p=n(88).connect,f=n(195).createSelector,d=n(268).mapSelector,m=n(758).Glyphicon,y=p(f([d,function(e){return e.mapInitialConfig}],(function(e,t){return{mapConfig:e,mapInitialConfig:t}})),{changeMapView:n(409).changeMapView})(n(3249)),g=n(2103);n(3250);var b=function(e){function t(){return a(this,t),s(this,l(t).apply(this,arguments))}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return u.createElement(y,o({key:"zoomToMaxExtent"},this.props,{useInitialExtent:!0}))}}])&&i(n.prototype,r),p&&i(n,p),t}(u.Component),h=n(26);e.exports={ZoomAllPlugin:h(b,{Toolbar:{name:"ZoomAll",position:7,tooltip:"zoombuttons.zoomAllTooltip",icon:u.createElement(m,{glyph:"resize-full"}),help:u.createElement(g,{msgId:"helptexts.zoomToMaxExtentButton"}),tool:!0,priority:1}}),reducers:{}}},2684:function(e,t,n){var r=n(88).connect,o=n(195).createSelector,a=n(408).layersSelector,i=n(26),s=o([a],(function(e){return{loading:e&&e.some((function(e){return e.loading}))}}));n(3252);var l=r(s)(n(3254));e.exports={MapLoadingPlugin:i(l,{Toolbar:{name:"maploading",position:1,tool:!0,priority:1}}),reducers:{}}},2685:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1);n(3257);var d=n(26),m=n(2302),y=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"getPanels",(function(){return n.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,n){return{name:t.name+n,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[n]:{}}})))}),[])})),u(l(n),"getTools",(function(){return n.props.items.sort((function(e,t){return e.position-t.position}))})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return f.createElement(m,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:function(e){return f.createElement("div",e,e.children)},toolStyle:"primary",activeStyle:"default",stateSelector:"omnibar",tool:function(e){return f.createElement("div",null,e.children)},tools:this.getTools(),panels:this.getPanels()})}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(y,"propTypes",{className:p.string,style:p.object,items:p.array,id:p.string,mapType:p.string}),u(y,"defaultProps",{items:[],className:"navbar-dx shadow",style:{},id:"mapstore-navbar",mapType:"leaflet"}),e.exports={OmniBarPlugin:d(y,{disablePluginIf:"{state('featuregridmode') === 'EDIT'}"}),reducers:{}}},2686:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(88).connect,s=n(267),l=s.toggleControl,c=s.setControlProperty,u=n(269),p=u.changeLayerProperties,f=u.updateNode,d=n(2303),m=d.addBackground,y=d.addBackgroundProperties,g=d.confirmDeleteBackgroundModal,b=d.updateThumbnail,h=d.removeBackground,v=d.clearModalParameters,S=d.backgroundEdited,E=d.setCurrentBackgroundLayer,O=n(195).createSelector,w=n(408),T=w.backgroundControlsSelector,A=w.currentBackgroundSelector,P=w.tempBackgroundSelector,C=n(268),_=C.mapSelector,x=C.mapInfoSelector,I=n(2304),j=I.modalParamsSelector,L=I.isDeletedIdSelector,R=I.backgroundListSelector,D=I.backgroundLayersSelector,N=I.confirmDeleteBackgroundModalSelector,M=I.allowBackgroundsDeletionSelector,k=n(2140).mapLayoutValuesSelector,G=n(408).allBackgroundLayerSelector,F=n(268).projectionSelector,U=n(269).removeNode,B=n(2687),H=i(O([F,j,R,L,G,_,x,D,T,A,P,function(e){return k(e,{left:!0,bottom:!0})},function(e){return e.controls&&e.controls.metadataexplorer&&e.controls.metadataexplorer.enabled},function(e){return e.browser&&e.browser.mobile?"mobile":"desktop"},N,M],(function(e,t,n,r,o,a,i,s,l,c,u,p,f,d,m,y){return{mode:d,modalParams:t,backgroundList:n,deletedId:r,backgrounds:o,size:a&&a.size||{width:0,height:0},mapIsEditable:i&&i.canEdit,layers:s,tempLayer:u,currentLayer:c,start:l.start||0,enabled:l.enabled,style:p,enabledCatalog:f,confirmDeleteBackgroundModal:m,allowDeletion:y,projection:e}})),{onPropertiesChange:p,onToggle:l.bind(null,"backgroundSelector",null),onLayerChange:c.bind(null,"backgroundSelector"),onStartChange:c.bind(null,"backgroundSelector","start"),onAdd:m,onRemove:U,onBackgroundEdit:S,updateNode:f,onUpdateThumbnail:b,removeBackground:h,clearModal:v,addBackgroundProperties:y,onRemoveBackground:g,setCurrentBackgroundLayer:E},(function(e,t,n){return o({},e,{},t,{},n,{thumbs:o({},B,{},n.thumbs)})}))(n(3272));e.exports={BackgroundSelectorPlugin:H,reducers:{controls:n(800),backgroundSelector:n(3293)},epics:n(3294)}},2687:function(e,t,n){var r=n(3259),o=n(3260),a=n(3261),i=n(3262),s=n(3263),l=n(3264),c=n(3265),u=n(3266),p=n(3267),f=n(3268),d=n(3269),m={google:{HYBRID:n(3270),ROADMAP:r,TERRAIN:o,SATELLITE:a},bing:{Aerial:i,AerialWithLabels:f},osm:{mapnik:s},mapquest:{osm:n(3271)},ol:{undefined:c},nasagibs:{Night2012:p},OpenTopoMap:{OpenTopoMap:d},unknown:u,s2cloudless:{"s2cloudless:s2cloudless":l}};e.exports=m},2688:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return D}));var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(2162),l=n.n(s),c=n(26),u=n.n(c),p=n(162),f=n.n(p),d=n(13),m=n(2103),y=n.n(m),g=n(2173),b=n.n(g),h=n(758),v=n(3291),S=n.n(v),E=n(136),O=n.n(E),w=n(2135);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=n.n(w)()(h.Button),D=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=x(t).call(this,e),n=!o||"object"!==T(o)&&"function"!=typeof o?I(r):o,L(I(n),"state",{title:"",format:"image/png",thumbnail:{},additionalParameters:[]}),L(I(n),"assignParameters",(function(e){return Object(d.keys)(e).map((function(t,n){var r=e[t],o=Object(d.isNumber)(r)?"number":Object(d.isBoolean)(r)?"boolean":"string";return{id:n,param:t,type:o,val:"string"===o?r.toString():r}}))})),L(I(n),"addAdditionalParameter",(function(e,t,r,o){n.setState({additionalParameters:n.state.additionalParameters.map((function(n){if(n.id===r){var a,i;if("val"===t)switch(o){case"number":(i=Number(e))&&!isNaN(i)||(i=0);break;case"boolean":i=!Object(d.isBoolean)(e)||e;break;default:i=e?e.toString():""}else i=e;return u()({},n,(L(a={},t,i),L(a,"type",o),a))}return n}))})})),L(I(n),"resetParameters",(function(){return n.setState({additionalParameters:[]})}));var a=Object(d.pick)(n.props,"title","format","style","thumbnail"),i=u()({},a,{additionalParameters:n.assignParameters(n.props.additionalParameters)});return n.state=i,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e),n=t,(r=[{key:"renderStyleSelector",value:function(){var e=this;return this.props.capabilities?o.a.createElement(h.FormGroup,null,o.a.createElement(h.ControlLabel,null,o.a.createElement(y.a,{msgId:"layerProperties.style"})),o.a.createElement(l.a,{onChange:function(t){return e.setState({style:t?t.value:void 0})},clearable:!0,value:this.state.style,options:(this.props.capabilities.availableStyles||[]).map((function(e){var t=e.name;return{label:t,value:t}}))})):null}},{key:"renderThumbnailErrors",value:function(){var e={FORMAT:o.a.createElement(y.a,{msgId:"map.errorFormat"}),SIZE:o.a.createElement(y.a,{msgId:"map.errorSize"})};return this.state.thumbnailErrors&&this.state.thumbnailErrors.length>0?o.a.createElement("div",{className:"dropzone-errorBox alert-danger"},o.a.createElement("p",null,o.a.createElement(y.a,{msgId:"map.error"})),this.state.thumbnailErrors.map((function(t){return o.a.createElement("div",{id:"error"+t,key:"error"+t,className:"error"+t},e[t])}))):null}},{key:"render",value:function(){var e=this;return o.a.createElement(b.a,{fitContent:!0,title:o.a.createElement(y.a,{msgId:this.props.editing?"backgroundDialog.editTitle":"backgroundDialog.addTitle"}),show:!0,fade:!0,clickOutEnabled:!1,bodyClassName:"ms-flex modal-properties-container background-dialog",loading:this.props.loading,onClose:function(){e.props.onClose(),e.resetParameters()},buttons:this.props.loading?[]:[{text:o.a.createElement(y.a,{msgId:this.props.editing?"save":"backgroundDialog.add"}),bsStyle:"primary",onClick:function(){var t=e.props.editing?e.props.layer.id:f()(),n=e.props.layer.thumbURL||"",r=e.state.format||e.props.defaultFormat;e.props.updateThumbnail(e.state.thumbnail.data,t),e.props.onSave(u()({},e.props.layer,Object(d.omit)(e.state,"thumbnail"),e.props.editing?{}:{id:t},{params:Object(d.omit)(e.state.additionalParameters.reduce((function(e,t){return u()(e,L({},t.param,t.val))}),{}),["source","title"]),format:r,group:"background"},n||e.state.thumbnail.data?{thumbURL:e.state.thumbnail.url}:{})),e.resetParameters()}}]},o.a.createElement(h.Form,{style:{width:"100%"}},this.renderThumbnailErrors(),o.a.createElement(S.a,{onUpdate:function(t,n){return e.setState({thumbnail:{data:t,url:n}})},onError:function(t){return e.setState({thumbnailErrors:t})},message:o.a.createElement(y.a,{msgId:"backgroundDialog.thumbnailMessage"}),suggestion:"",map:{newThumbnail:Object(d.get)(this.state.thumbnail,"url")||"NODATA"}}),o.a.createElement(h.FormGroup,null,o.a.createElement(h.ControlLabel,null,o.a.createElement(y.a,{msgId:"layerProperties.title"})),o.a.createElement(h.FormControl,{value:this.state.title,placeholder:O.a.getMessageById(this.context.messages,"backgroundDialog.titlePlaceholder"),onChange:function(t){return e.setState({title:t.target.value})}})),o.a.createElement(h.FormGroup,{controlId:"formControlsSelect"},o.a.createElement(h.ControlLabel,null,o.a.createElement(y.a,{msgId:"layerProperties.format"})),o.a.createElement(l.a,{onChange:function(t){return e.setState({format:t&&t.value})},value:this.state.format||this.props.defaultFormat,clearable:!0,options:this.props.formatOptions})),this.renderStyleSelector(),o.a.createElement(h.FormGroup,null,o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(h.ControlLabel,{style:{flex:1}},o.a.createElement(y.a,{msgId:"backgroundDialog.additionalParameters"})),o.a.createElement(R,{className:"square-button-md",tooltipId:"backgroundDialog.addAdditionalParameterTooltip",style:{borderColor:"transparent"},onClick:function(){var t=Math.max.apply(Math,C(e.state.additionalParameters.length>0?e.state.additionalParameters.map((function(e){return e.id})):[-1]))+1;e.setState({additionalParameters:[].concat(C(e.state.additionalParameters),[{id:t,type:"string",param:"",val:""}])})}},o.a.createElement(h.Glyphicon,{glyph:"plus"}))),this.state.additionalParameters.map((function(t){return o.a.createElement("div",{key:"val:"+t.id,style:{display:"flex",marginTop:8}},o.a.createElement("div",{style:{display:"flex",flex:1,marginRight:8}},o.a.createElement(h.FormControl,{style:{width:"50%",marginRight:8,minWidth:0},placeholder:O.a.getMessageById(e.context.messages,"backgroundDialog.parameter"),value:t.param,onChange:function(n){return e.addAdditionalParameter(n.target.value,"param",t.id,t.type)}}),"boolean"===t.type?o.a.createElement("div",{style:{width:"50%"}},o.a.createElement(l.a,{onChange:function(n){return e.addAdditionalParameter(n.value,"val",t.id,t.type)},clearable:!1,value:t.val,options:e.props.booleanOptions})):o.a.createElement(h.FormControl,{style:{width:"50%",minWidth:0},placeholder:O.a.getMessageById(e.context.messages,"backgroundDialog.value"),value:t.val.toString(),onChange:function(n){return e.addAdditionalParameter(n.target.value,"val",t.id,t.type)}})),o.a.createElement(l.a,{style:{flex:1,width:90},onChange:function(n){return e.addAdditionalParameter(t.val,"val",t.id,n.value)},clearable:!1,value:t.type,options:e.props.parameterTypeOptions.map((function(t){var n=t.label;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},P(t,["label"]),{label:O.a.getMessageById(e.context.messages,n)})}))}),o.a.createElement(R,{onClick:function(){return e.setState({additionalParameters:e.state.additionalParameters.filter((function(e){return t.id!==e.id}))})},tooltipId:"backgroundDialog.removeAdditionalParameterTooltip",className:"square-button-md",style:{borderColor:"transparent"}},o.a.createElement(h.Glyphicon,{glyph:"trash"})))})))))}}])&&_(n.prototype,r),a&&_(n,a),t}(o.a.Component);L(D,"propTypes",{loading:i.a.bool,editing:i.a.bool,layer:i.a.object,capabilities:i.a.object,onAdd:i.a.func,onClose:i.a.func,source:i.a.string,onSave:i.a.func,addParameters:i.a.func,updateThumbnail:i.a.func,thumbURL:i.a.string,title:i.a.string,format:i.a.string,style:i.a.string,thumbnail:i.a.object,additionalParameters:i.a.object,addParameter:i.a.func,defaultFormat:i.a.string,formatOptions:i.a.array,parameterTypeOptions:i.a.array,booleanOptions:i.a.array}),L(D,"contextTypes",{messages:i.a.object}),L(D,"defaultProps",{updateThumbnail:function(){},onClose:function(){},onSave:function(){},addParameters:function(){},addParameter:function(){},loading:!1,editing:!1,layer:{},capabilities:{},title:"",thumbnail:{},additionalParameters:{},formatOptions:[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/gif",value:"image/gif"}],parameterTypeOptions:[{label:"backgroundDialog.string",value:"string"},{label:"backgroundDialog.number",value:"number"},{label:"backgroundDialog.boolean",value:"boolean"}],booleanOptions:[{label:"True",value:!0},{label:"False",value:!1}]})},2694:function(e,t,n){var r=n(88).connect,o=n(2695).toggleFullscreen,a=n(3295).toggleFullscreenEpic,i=n(26),s=n(3297),l=r((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.controls,n=void 0===t?{}:t;return{active:n.fullscreen&&n.fullscreen.enabled}}),{onClick:function(e,t){return o(e,t.querySelector)}})(s);e.exports={FullScreenPlugin:i(l,{disablePluginIf:"{state('browser') && state('browser').safari}",Toolbar:{name:"fullscreen",position:5,alwaysVisible:!0,tool:!0,priority:1}}),reducers:{},epics:{toggleFullscreenEpic:a}}},2695:function(e,t){e.exports={toggleFullscreen:function(e,t){return{type:"TOGGLE_FULLSCREEN",enable:e,elementSelector:t}},TOGGLE_FULLSCREEN:"TOGGLE_FULLSCREEN"}},2696:function(e,t,n){var r=n(1),o=n(88).connect,a=(0,n(195).createSelector)([n(268).mapSelector],(function(e){return{currentZoom:e&&e.zoom,id:"zoomin-btn",step:1,glyphicon:"plus"}})),i=n(409).changeZoomLevel,s=n(2103),l=o(a,{onZoom:i})(n(2697));n(2698);var c=n(26);e.exports={ZoomInPlugin:c(l,{disablePluginIf:"{state('mapType') === 'cesium'}",Toolbar:{name:"ZoomIn",position:3,tooltip:"zoombuttons.zoomInTooltip",help:r.createElement(s,{msgId:"helptexts.zoomIn"}),tool:!0,priority:1}}),reducers:{}}},2697:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(758),m=d.Button,y=d.Glyphicon,g=d.Tooltip,b=n(2114),h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"addTooltip",(function(e){if(!n.props.tooltip)return e;var t=f.createElement(g,{id:"locate-tooltip"},n.props.tooltip);return f.createElement(b,{placement:n.props.tooltipPlace,key:"overlay-trigger."+n.props.id,overlay:t},e)})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return this.addTooltip(f.createElement(m,{id:this.props.id,style:this.props.style,onClick:function(){return e.props.onZoom(e.props.currentZoom+e.props.step)},className:this.props.className,disabled:this.props.currentZoom+this.props.step>this.props.maxZoom||this.props.currentZoom+this.props.step<this.props.minZoom,bsStyle:this.props.bsStyle},this.props.glyphicon?f.createElement(y,{glyph:this.props.glyphicon}):null,this.props.glyphicon&&this.props.text?" ":null,this.props.text,this.props.help))}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(h,"propTypes",{id:p.string,style:p.object,glyphicon:p.string,text:p.string,btnSize:p.oneOf(["large","small","xsmall"]),className:p.string,help:p.oneOfType([p.string,p.element]),step:p.number,currentZoom:p.number,minZoom:p.number,maxZoom:p.number,onZoom:p.func,tooltip:p.element,tooltipPlace:p.string,bsStyle:p.string}),u(h,"defaultProps",{id:"mapstore-zoom",className:"square-button",glyphicon:"plus",btnSize:"xsmall",tooltipPlace:"left",step:1,currentZoom:3,minZoom:0,maxZoom:28,onZoom:function(){},bsStyle:"default",style:{}}),e.exports=h},2698:function(e,t,n){var r=n(3299);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},2699:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(1),i=n(88).connect,s=n(195).createSelector,l=n(268),c=s([l.mapSelector,l.minZoomSelector],(function(e,t){return{currentZoom:e&&e.zoom,id:"zoomout-btn",step:-1,glyphicon:"minus",minZoom:t}})),u=n(409).changeZoomLevel,p=n(2103),f=i(c,{onZoom:u},(function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t,{},n)}))(n(2697));n(2698);var d=n(26);e.exports={ZoomOutPlugin:d(f,{disablePluginIf:"{state('mapType') === 'cesium'}",Toolbar:{name:"ZoomOut",position:4,tooltip:"zoombuttons.zoomOutTooltip",help:a.createElement(p,{msgId:"helptexts.zoomOut"}),tool:!0,priority:1}}),reducers:{}}},2700:function(e,t,n){var r=n(1),o=n(758).Glyphicon,a=n(26),i=n(2103),s=n(2479);e.exports={ExpanderPlugin:a(s,{Toolbar:{name:"expand",position:1e4,alwaysVisible:!0,tooltip:"expandtoolbar.tooltip",icon:r.createElement(o,{glyph:"option-horizontal"}),help:r.createElement(i,{msgId:"helptexts.expandToolbar"}),toggle:!0,toggleControl:"toolbar",toggleProperty:"expanded",priority:1}}),reducers:{}}},2701:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1),d=n(0),m=n(88).connect,y=n(26),g=n(758),b=g.DropdownButton,h=g.Glyphicon,v=g.MenuItem,S=m((function(){return{noCaret:!0,pullRight:!0,bsStyle:"primary",title:f.createElement(h,{glyph:"menu-hamburger"})}}))(b),E=n(2302),O=n(2192),w=n(198).createPlugin;n(3300);var T=function(e){function t(){var e,n;a(this,t);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return p(c(n=s(this,(e=l(t)).call.apply(e,[this].concat(i)))),"getPanels",(function(){return n.props.items.filter((function(e){return e.panel})).map((function(e){return y({},e,{panel:!0===e.panel?e.plugin:e.panel})})).concat(n.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,n){return{name:t.name+n,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[n]:{}}})))}),[]))})),p(c(n),"getTools",(function(){return[{element:f.createElement("span",{key:"burger-menu-title"},n.props.title)}].concat(o(n.props.items.sort((function(e,t){return e.position-t.position}))))})),n}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return f.createElement(E,{id:this.props.id,className:"square-button",container:S,mapType:this.props.mapType,toolStyle:"primary",activeStyle:"default",stateSelector:"burgermenu",eventSelector:"onSelect",tool:v,tools:this.getTools(),panels:this.getPanels(),panelStyle:this.props.panelStyle,panelClassName:this.props.panelClassName})}}])&&i(n.prototype,r),d&&i(n,d),t}(f.Component);p(T,"propTypes",{id:d.string,dispatch:d.func,items:d.array,title:d.node,onItemClick:d.func,controls:d.object,mapType:d.string,panelStyle:d.object,panelClassName:d.string}),p(T,"contextTypes",{messages:d.object,router:d.object}),p(T,"defaultProps",{id:"mapstore-burger-menu",items:[],onItemClick:function(){},title:f.createElement(v,{header:!0},f.createElement(O,{msgId:"options"})),controls:[],mapType:"leaflet",panelStyle:{minWidth:"300px",right:"52px",zIndex:100,position:"absolute",overflow:"auto"},panelClassName:"toolbar-panel"}),e.exports=w("BurgerMenu",{component:m((function(e){return{controls:e.controls}}))(T),containers:{OmniBar:{name:"burgermenu",position:2,tool:!0,priority:1}}})},2702:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(1),p=n(198).connect,f=n(195).createSelector,d=n(268),m=d.mapSelector,y=d.minZoomSelector,g=n(409).changeZoomLevel,b=n(2703),h=n(2192),v=n(2704),S=n(196),E=n(26),O=f([m,y],(function(e,t){return{minZoom:t,currentZoomLvl:e&&e.zoom,scales:S.getScales(e&&e.projection||"EPSG:3857",e&&e.mapOptions&&e.mapOptions.view&&e.mapOptions.view.DPI||null)}}));n(3305);var w=function(e){function t(){return a(this,t),s(this,l(t).apply(this,arguments))}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return u.createElement(b,{id:"mapstore-scalebox-container",key:"scalebox-help",helpText:u.createElement(h,{msgId:"helptexts.scaleBox"})},u.createElement(v,o({key:"scaleBox",label:u.createElement(h,{msgId:"mapScale"})},this.props)))}}])&&i(n.prototype,r),p&&i(n,p),t}(u.Component),T=p(O,{onChange:g})(w);e.exports={ScaleBoxPlugin:E(T,{disablePluginIf:"{state('mapType') === 'cesium'}"},{MapFooter:{name:"scale",position:1,tool:!0,priority:1}}),reducers:{}}},2703:function(e,t,n){var r=n(88).connect,o=n(801),a=o.changeHelpwinVisibility,i=o.changeHelpText;e.exports=r((function(e){return{helpEnabled:e.controls&&e.controls.help&&e.controls.help.enabled}}),{changeHelpText:i,changeHelpwinVisibility:a})(n(3302))},2704:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(758),m=d.Form,y=d.FormControl,g=d.FormGroup,b=d.ControlLabel,h=n(196),v=n(13).isEqual,S=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"onComboChange",(function(e){var t=parseInt(e.nativeEvent.target.value,10);n.props.onChange(t,n.props.scales[t])})),u(l(n),"getOptions",(function(){return n.props.scales.map((function(e,t){return f.createElement("option",{value:t,key:t},n.props.template(e,t))})).filter((function(e,t){return t>=n.props.minZoom}))})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){return!v(e,this.props)}},{key:"render",value:function(){var e=null;return e=this.props.readOnly?f.createElement("label",null,this.props.template(this.props.scales[this.props.currentZoomLvl],this.props.currentZoomLvl)):this.props.useRawInput?f.createElement("select",{label:this.props.label,onChange:this.onComboChange,bsSize:"small",value:this.props.currentZoomLvl||""},this.getOptions()):f.createElement(m,{inline:!0},f.createElement(g,{bsSize:"small"},f.createElement(b,null,this.props.label),f.createElement(y,{componentClass:"select",onChange:this.onComboChange,value:this.props.currentZoomLvl||""},this.getOptions()))),f.createElement("div",{id:this.props.id,style:this.props.style},e)}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(S,"propTypes",{id:p.string,style:p.object,scales:p.array,currentZoomLvl:p.number,minZoom:p.number,onChange:p.func,readOnly:p.bool,label:p.oneOfType([p.func,p.string,p.object]),template:p.func,useRawInput:p.bool}),u(S,"defaultProps",{id:"mapstore-scalebox",scales:h.getGoogleMercatorScales(0,28),currentZoomLvl:0,minZoom:0,onChange:function(){},readOnly:!1,template:function(e){return e<1?Math.round(1/e)+" : 1":"1 : "+Math.round(e)},useRawInput:!1}),e.exports=S},2705:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(0),d=n(2302),m=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"getPanels",(function(){return n.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,n){return{name:t.name+n,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[n]:{}}})))}),[])})),u(l(n),"getTools",(function(){return n.props.items.sort((function(e,t){return t.position-e.position}))})),n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return p.createElement(d,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:function(e){return p.createElement("div",e,e.children)},toolStyle:"primary",activeStyle:"default",stateSelector:"mapFooter",tool:function(e){return p.createElement("div",null,e.children)},tools:this.getTools(),panels:this.getPanels()})}}])&&a(n.prototype,r),f&&a(n,f),t}(p.Component);u(m,"propTypes",{className:f.string,style:f.object,items:f.array,id:f.string,mapType:f.string}),u(m,"defaultProps",{items:[],className:"mapstore-map-footer",style:{},id:"mapstore-map-footer",mapType:"leaflet"}),e.exports={MapFooterPlugin:m,reducers:{}}},2706:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n(1),g=n(0),b=n(88).connect,h=n(136),v=n(80),S=n(196),E=n(2261),O=n(758),w=O.Grid,T=O.Row,A=O.Col,P=O.Panel,C=O.Accordion,_=O.Glyphicon,x=n(267),I=x.toggleControl,j=x.setControlProperty,L=n(783),R=L.printSubmit,D=L.printSubmitting,N=L.configurePrintMap,M=n(268).mapSelector,k=n(408).layersSelector,G=n(195).createSelector,F=n(26),U=n(13).head,B=n(268).scalesSelector,H=n(767).currentLocaleSelector,z=n(2144).mapTypeSelector,V=n(2103);n(3307),e.exports={PrintPlugin:F({loadPlugin:function(e){Promise.all([n.e(14),n.e(15)]).then(function(){var t=n(2884),r=t.Name,o=t.Description,O=t.Resolution,x=t.DefaultBackgroundOption,L=t.Sheet,W=t.LegendOption,Y=t.MultiPageOption,q=t.LandscapeOption,Z=t.ForceLabelsOption,K=t.AntiAliasingOption,Q=t.IconSizeOption,X=t.LegendDpiOption,J=t.Font,$=t.MapPreview,ee=t.PrintSubmit,te=t.PrintPreview,ne=n(2885),re=function(e){function t(){var e,n;l(this,t);for(var c=arguments.length,d=new Array(c),g=0;g<c;g++)d[g]=arguments[g];return m(f(n=u(this,(e=p(t)).call.apply(e,[this].concat(d)))),"getMapSize",(function(e){var t=e||n.getLayout();return{width:n.props.mapWidth,height:t&&t.map.height/t.map.width*n.props.mapWidth||270}})),m(f(n),"getLayout",(function(){var e=n.props.getLayoutName(n.props.printSpec);return U(n.props.capabilities.layouts.filter((function(t){return t.name===e})))})),m(f(n),"renderLayoutsAlternatives",(function(){return n.props.alternatives.map((function(e){return y.createElement(e.component,{key:"printoption_"+e.name,label:h.getMessageById(n.context.messages,"print.alternatives."+e.name),enableRegex:e.regex})}))})),m(f(n),"renderPreviewPanel",(function(){return y.createElement(te,s({},n.props.previewOptions,{role:"body",prevPage:n.prevPage,nextPage:n.nextPage}))})),m(f(n),"renderError",(function(){return n.props.error?y.createElement(T,null,y.createElement(A,{xs:12},y.createElement("div",{className:"print-error"},y.createElement("span",null,n.props.error)))):null})),m(f(n),"renderWarning",(function(e){return e?null:y.createElement(T,null,y.createElement(A,{xs:12},y.createElement("div",{className:"print-warning"},y.createElement("span",null,y.createElement(V,{msgId:"print.layoutWarning"})))))})),m(f(n),"renderPrintPanel",(function(){var e=n.getLayout(),t=n.props.getLayoutName(n.props.printSpec),a=n.getMapSize(e);return y.createElement(w,{fluid:!0,role:"body"},n.renderError(),n.renderWarning(e),y.createElement(T,null,y.createElement(A,{xs:12,md:6},y.createElement(r,{label:h.getMessageById(n.context.messages,"print.title"),placeholder:h.getMessageById(n.context.messages,"print.titleplaceholder")}),y.createElement(o,{label:h.getMessageById(n.context.messages,"print.description"),placeholder:h.getMessageById(n.context.messages,"print.descriptionplaceholder")}),y.createElement(C,{defaultActiveKey:"1"},y.createElement(P,{className:"print-layout",header:h.getMessageById(n.context.messages,"print.layout"),eventKey:"1",collapsible:!0},y.createElement(L,{key:"sheetsize",layouts:n.props.capabilities.layouts,label:h.getMessageById(n.context.messages,"print.sheetsize")}),n.renderLayoutsAlternatives()),y.createElement(P,{className:"print-legend-options",header:h.getMessageById(n.context.messages,"print.legendoptions"),eventKey:"2",collapsible:!0},y.createElement(J,{label:h.getMessageById(n.context.messages,"print.legend.font")}),y.createElement(Z,{label:h.getMessageById(n.context.messages,"print.legend.forceLabels")}),y.createElement(K,{label:h.getMessageById(n.context.messages,"print.legend.antiAliasing")}),y.createElement(Q,{label:h.getMessageById(n.context.messages,"print.legend.iconsSize")}),y.createElement(X,{label:h.getMessageById(n.context.messages,"print.legend.dpi")})))),y.createElement(A,{xs:12,md:6,style:{textAlign:"center"}},y.createElement(O,{label:h.getMessageById(n.context.messages,"print.resolution")}),y.createElement($,s({width:a.width,height:a.height,mapType:n.props.mapType,onMapRefresh:function(){return n.configurePrintMap()},layout:t,layoutSize:e&&e.map||{width:10,height:10},resolutions:S.getResolutions(),useFixedScales:n.props.useFixedScales},n.props.mapPreviewOptions)),n.isBackgroundIgnored()?y.createElement(x,{label:h.getMessageById(n.context.messages,"print.defaultBackground")}):null,y.createElement(ee,s({},n.props.submitConfig,{disabled:!e,onPrint:n.print})),n.renderDownload())))})),m(f(n),"renderDownload",(function(){return n.props.pdfUrl&&!n.props.usePreview?y.createElement("iframe",{src:n.props.pdfUrl,style:{visibility:"hidden",display:"none"}}):null})),m(f(n),"renderBody",(function(){return n.props.pdfUrl&&n.props.usePreview?n.renderPreviewPanel():n.renderPrintPanel()})),m(f(n),"isAllowed",(function(e){return-1===n.props.ignoreLayers.indexOf(e.type)})),m(f(n),"isBackgroundIgnored",(function(){return n.props.layers.filter((function(e){return e.visibility&&!n.isAllowed(e)})).length>0})),m(f(n),"filterLayers",(function(e){var t=n.props.layers.filter((function(e){return e.visibility&&n.isAllowed(e)}));if(n.isBackgroundIgnored()&&n.props.defaultBackground&&e.defaultBackground){var r=n.props.layers.filter((function(e){return e.type===n.props.defaultBackground}))[0];return[F({},r,{visibility:!0})].concat(i(t))}return t})),m(f(n),"configurePrintMap",(function(e,t){var r=e||n.props.map,o=t||n.props.printSpec;if(r&&r.bbox&&n.props.capabilities){var a=v.reprojectBbox([r.bbox.bounds.minx,r.bbox.bounds.miny,r.bbox.bounds.maxx,r.bbox.bounds.maxy],r.bbox.crs,r.projection),i=n.getMapSize();if(n.props.useFixedScales){var s=n.props.getZoomForExtent(a,i,n.props.minZoom,n.props.maxZoom),l=ne.getPrintScales(n.props.capabilities),c=ne.getNearestZoom(r.zoom,l);n.props.configurePrintMap(r.center,s,c,l[c],n.filterLayers(o),r.projection,n.props.currentLocale)}else n.props.configurePrintMap(r.center,r.zoom,r.zoom,n.props.scales[r.zoom],n.filterLayers(o),r.projection,n.props.currentLocale)}})),m(f(n),"print",(function(){var e=n.props.getPrintSpecification(n.props.printSpec);n.props.setPage(0),n.props.onBeforePrint(),n.props.onPrint(n.props.capabilities.createURL,a({},e,{},n.props.overrideOptions))})),n}var n,g,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(g=[{key:"UNSAFE_componentWillMount",value:function(){if(this.props.usePreview&&!window.PDFJS){var e=document.createElement("script");e.type="text/javascript",e.src="https://unpkg.com/pdfjs-dist@1.4.79/build/pdf.combined.js",document.head.appendChild(e)}this.configurePrintMap()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.open&&!this.props.open,n=this.props.open&&this.props.syncMapPreview&&S.mapUpdated(this.props.map,e.map),r=e.printSpec.defaultBackground!==this.props.printSpec.defaultBackground;(t||n||r)&&this.configurePrintMap(e.map,e.printSpec)}},{key:"render",value:function(){return(this.props.capabilities||this.props.error)&&this.props.open?this.props.withContainer?this.props.withPanelAsContainer?y.createElement(P,{className:"mapstore-print-panel",header:y.createElement("span",null,y.createElement("span",{className:"print-panel-title"},y.createElement(V,{msgId:"print.paneltitle"})),y.createElement("span",{className:"print-panel-close panel-close",onClick:this.props.toggleControl})),style:this.props.style},this.renderBody()):y.createElement(E,{id:"mapstore-print-panel",style:a({left:"17%",top:"50px",zIndex:1990},this.props.style)},y.createElement("span",{role:"header"},y.createElement("span",{className:"print-panel-title"},y.createElement(V,{msgId:"print.paneltitle"})),y.createElement("button",{onClick:this.props.toggleControl,className:"print-panel-close close"},this.props.closeGlyph?y.createElement(_,{glyph:this.props.closeGlyph}):y.createElement("span",null,"×"))),this.renderBody()):this.renderBody():null}}])&&c(n.prototype,g),b&&c(n,b),t}(y.Component);m(re,"propTypes",{map:g.object,layers:g.array,capabilities:g.object,printSpec:g.object,printSpecTemplate:g.object,withContainer:g.bool,withPanelAsContainer:g.bool,open:g.bool,pdfUrl:g.string,title:g.string,style:g.object,mapWidth:g.number,mapType:g.string,alternatives:g.array,toggleControl:g.func,onBeforePrint:g.func,setPage:g.func,onPrint:g.func,configurePrintMap:g.func,getPrintSpecification:g.func,getLayoutName:g.func,error:g.string,getZoomForExtent:g.func,minZoom:g.number,maxZoom:g.number,usePreview:g.bool,mapPreviewOptions:g.object,syncMapPreview:g.bool,useFixedScales:g.bool,scales:g.array,ignoreLayers:g.array,defaultBackground:g.string,closeGlyph:g.string,submitConfig:g.object,previewOptions:g.object,currentLocale:g.string,overrideOptions:g.object}),m(re,"contextTypes",{messages:g.object}),m(re,"defaultProps",{withContainer:!0,withPanelAsContainer:!1,title:"print.paneltitle",toggleControl:function(){},onBeforePrint:function(){},setPage:function(){},onPrint:function(){},configurePrintMap:function(){},printSpecTemplate:{},getPrintSpecification:ne.getMapfishPrintSpecification,getLayoutName:ne.getLayoutName,getZoomForExtent:S.defaultGetZoomForExtent,pdfUrl:null,mapWidth:370,mapType:"leaflet",minZoom:1,maxZoom:23,alternatives:[{name:"legend",component:W,regex:/legend/},{name:"2pages",component:Y,regex:/2_pages/},{name:"landscape",component:q,regex:/landscape/}],usePreview:!0,mapPreviewOptions:{enableScalebox:!1,enableRefresh:!1},syncMapPreview:!0,useFixedScales:!1,scales:[],ignoreLayers:["google","bing"],defaultBackground:"osm",closeGlyph:"1-close",submitConfig:{buttonConfig:{bsSize:"small",bsStyle:"primary"},glyph:""},previewOptions:{buttonStyle:"primary"},style:{},currentLocale:"en-US",overrideOptions:{}});var oe=G([function(e){return e.controls.print&&e.controls.print.enabled||e.controls.toolbar&&"print"===e.controls.toolbar.active},function(e){return e.print&&e.print.capabilities},function(e){return e.print&&e.print.spec&&F({},e.print.spec,e.print.map||{})},function(e){return e.print&&e.print.pdfUrl},function(e){return e.print&&e.print.error},M,k,B,function(e){return e.browser&&(!e.browser.ie||e.browser.ie11)},H,z],(function(e,t,n,r,o,a,i,s,l,c,u){return{open:e,capabilities:t,printSpec:n,pdfUrl:r,error:o,map:a,layers:i.filter((function(e){return!e.loadingError})),scales:s,usePreview:l,currentLocale:c,mapType:u}})),ae=b(oe,{toggleControl:I.bind(null,"print",null),onPrint:R,onBeforePrint:D,setPage:j.bind(null,"print","currentPage"),configurePrintMap:N})(re);e(ae)}.bind(null,n)).catch(n.oe)},enabler:function(e){return e.print&&e.print.enabled||e.toolbar&&"print"===e.toolbar.active}},{disablePluginIf:"{state('mapType') === 'cesium'}",Toolbar:{name:"print",position:7,help:y.createElement(V,{msgId:"helptexts.print"}),tooltip:"printbutton",icon:y.createElement(_,{glyph:"print"}),exclusive:!0,panel:!0,priority:1},BurgerMenu:{name:"print",position:2,text:y.createElement(V,{msgId:"printbutton"}),icon:y.createElement(_,{glyph:"print"}),action:I.bind(null,"print",null),priority:2,doNotHide:!0}}),reducers:{print:n(3309)}}},2707:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(1),l=n(88).connect,c=n(195).createSelector,u=n(3310),p=n(2708),f=n(2116),d=n(768),m=d.offsetEnabledSelector,y=d.currentTimeSelector,g=n(2211),b=g.currentTimeRangeSelector,h=g.isVisible,v=g.rangeSelector,S=g.timelineLayersSelector,E=g.isMapSync,O=n(2140).mapLayoutValuesSelector,w=n(407),T=w.withState,A=w.compose,P=w.branch,C=w.renderNothing,_=w.withStateHandlers,x=w.withProps,I=w.defaultProps,j=n(2481),L=n(2194),R=L.selectTime,D=L.enableOffset,N=L.onRangeChanged,M=L.setMapSync,k=n(775).setCurrentOffset,G=n(2103),F=n(2232).selectPlaybackRange,U=n(2264),B=U.playbackRangeSelector,H=U.statusSelector,z=n(758),V=z.Button,W=z.Glyphicon,Y=n(2135)(V),q=n(13),Z=q.head,K=q.isString,Q=n(12),X=function(e){return K(e)&&-1!==e.indexOf("%")},J=function(e){return parseInt(e,10)/100},$=function(e,t){return Q(t).diff(e)>0},ee=A(l(c(h,S,y,b,m,B,H,v,(function(e,t,n,r,o,a,i,s){return{visible:e,layers:t,currentTime:n,currentTimeRange:r,offsetEnabled:o,playbackRange:a,status:i,viewRange:s}})),{setCurrentTime:R,onOffsetEnabled:D,setOffset:k,setPlaybackRange:F,moveRangeTo:N}),P((function(e){var t=e.visible,n=void 0===t||t,r=e.layers,o=void 0===r?[]:r;return!n||0===Object.keys(o).length}),C),T("options","setOptions",{collapsed:!0}),l(c(E,(function(e){return{mapSync:e}})),{toggleMapSync:M}),A(A(_((function(){return{}}),{onResize:function(){return function(e){return{containerWidth:e.width}}}}),j({querySelector:".ms2",closest:!0,debounceTime:100})),I({style:{marginBottom:35,marginLeft:100,marginRight:80}}),l(c((function(e){return O(e,{right:!0,bottom:!0,left:!0})}),(function(e){return{mapLayoutStyle:e}}))),x((function(e){var t=e.containerWidth,n=e.style,r=e.mapLayoutStyle,o=n||{},i=o.marginLeft,s=o.marginRight,l=r.left,c=void 0===l?0:l,u=r.right,p=void 0===u?0:u;p=X(p)&&J(p)*t||p,c=X(c)&&J(c)*t||c;if(t){var f=t-p-c-i-s;return{hide:f<410,compactToolbar:f<880,style:a({},n,{},r,{minWidth:410})}}return{style:a({},n,{},r,{minWidth:410})}})),P((function(e){return e.hide}),C)))((function(e){var t=e.items,n=e.options,o=e.setOptions,i=e.mapSync,l=e.toggleMapSync,c=void 0===l?function(){}:l,d=e.currentTime,m=e.setCurrentTime,y=e.offsetEnabled,g=e.onOffsetEnabled,b=e.currentTimeRange,h=e.setOffset,v=e.style,S=e.status,E=e.viewRange,O=e.moveRangeTo,w=e.compactToolbar,T=n.hideLayersName,A=n.collapsed,P=Z(t&&t.filter((function(e){return"playback"===e.name}))),C=P&&P.plugin,_=function(e,t,n,r){var o=Q(n.end).diff(n.start)/2;if("time-current"===t&&n&&n.start.toString()!==Q(e).add(-1*o).toString()&&n.end.toString()!==Q(e).add(o).toString()&&O({start:Q(e).add(-1*o),end:Q(e).add(o)}),"range-start"===t||"range-end"===t){var a=Q(r.end).diff(r.start),i=Q(r.start).add(a/2);O(a/2<=o?{start:Q(i).add(-1*o),end:Q(i).add(o)}:{start:Q(i).add(-1*a*5/2),end:Q(i).add(5*a/2)})}};return s.createElement("div",{style:a({position:"absolute",marginBottom:35,marginLeft:100,background:"transparent"},v,{right:A?"auto":v.right||0}),className:"timeline-plugin".concat(T?" hide-layers-name":"").concat(y?" with-time-offset":"")},y&&s.createElement(p,{clickable:!A,glyph:"range-start",onIconClick:function(e,t){return"PLAY"!==S&&_(e,t,E,b)},tooltip:s.createElement(G,{msgId:"timeline.rangeStart"}),showButtons:!0,date:d||b&&b.start,onUpdate:function(e){return(b&&$(e,b.end)||!b)&&"PLAY"!==S&&m(e)},className:"shadow-soft",style:{position:"absolute",top:-5,left:2,transform:"translateY(-100%)"}}),s.createElement("div",{className:"timeline-plugin-toolbar".concat(w?" ms-collapsed":"")},y&&b?s.createElement(p,{clickable:!A,glyph:"range-end",onIconClick:function(e,t){return"PLAY"!==S&&_(e,t,E,b)},tooltip:s.createElement(G,{msgId:"timeline.rangeEnd"}),date:b.end,showButtons:!0,onUpdate:function(e){return"PLAY"!==S&&$(d,e)&&h(e)}}):s.createElement(p,{clickable:!A,glyph:"time-current",showButtons:!0,onIconClick:function(e,t){return"PLAY"!==S&&_(e,t,E)},tooltip:s.createElement(G,{msgId:"timeline.currentTime"}),date:d||b&&b.start,onUpdate:function(e){return(b&&$(e,b.end)||!b)&&"PLAY"!==S&&m(e)}}),s.createElement("div",{className:"timeline-plugin-btn-group"},s.createElement(f,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"list",tooltip:s.createElement(G,{msgId:T?"timeline.showLayerName":"timeline.hideLayerName"}),bsStyle:T?"primary":"success",visible:!A,active:!T,onClick:function(){return o(a({},n,{hideLayersName:!T}))}},{glyph:"time-offset",bsStyle:y?"success":"primary",active:y,disabled:"PLAY"===S,tooltip:s.createElement(G,{msgId:y?"timeline.disableRange":"timeline.enableRange"}),onClick:function(){"PLAY"!==S&&g(!y)}},{glyph:"map-synch",tooltip:s.createElement(G,{msgId:i?"timeline.mapSyncOn":"timeline.mapSyncOff"}),bsStyle:i?"success":"primary",active:i,onClick:function(){return c(!i)}}]}),s.createElement(C,r({},P,{settingsStyle:{right:A||w?40:"unset"}}))),s.createElement(Y,{onClick:function(){return o(a({},n,{collapsed:!A}))},className:"square-button-sm ms-timeline-expand",bsStyle:"primary",tooltip:s.createElement(G,{msgId:A?"timeline.expand":"timeline.collapse"})},s.createElement(W,{glyph:A?"chevron-up":"chevron-down"}))),!A&&s.createElement(u,{offsetEnabled:y,playbackEnabled:!0,hideLayersName:T}))})),te=n(26),ne=n(3318);e.exports={TimelinePlugin:te(ee,{disablePluginIf:"{state('mapType') === 'cesium'}",WidgetsTray:{tool:s.createElement(ne,null),position:0}}),reducers:{dimension:n(2711),timeline:n(3319)},epics:n(3320)}},2708:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(0),d=n(758),m=d.Form,y=d.FormGroup,g=d.FormControl,b=d.Glyphicon,h=d.Button,v=n(2135)(b),S=n(13),E=S.padStart,O=S.isNil,w=n(12),T=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"onUpdate",(function(e,t){var r=w(n.props.date).utc(),o=t?w(r).add(1,e):w(r).subtract(1,e);o.isValid()&&!isNaN(o.toDate().getTime())&&n.props.onUpdate(o.toISOString())})),u(l(n),"onChange",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if(""!==t){var o=w(n.props.date).utc(),a=o["day"===e?"date":e]&&w(o)["day"===e?"date":e](r(t));a.isValid()&&!isNaN(a.toDate().getTime())&&n.props.onUpdate(a.toISOString())}})),u(l(n),"getForm",(function(){var e=n.props.date&&w(n.props.date).utc();return[{name:"icon",value:"calendar",type:"icon"},{name:"day",placeholder:"DD",value:e&&e.date()},{name:"month",placeholder:"MM",readOnly:!0,value:e&&e.month(),format:function(e){return!O(e)&&""!==e&&w.monthsShort(e)},parseValue:function(e){return e-1}},{name:"year",placeholder:"YYYY",value:e&&e.year()},{name:"icon",value:"time",type:"icon"},{name:"hours",placeholder:"hh",value:e&&e.hours()},{name:"separator",value:":",type:"separator"},{name:"minutes",placeholder:"mm",value:e&&e.minutes()},{name:"separator",value:":",type:"separator"},{name:"seconds",placeholder:"ss",value:e&&e.seconds()},{name:"separator",value:e&&e.utcOffset(),type:"separator",format:function(e){return"UTC "+(e>=0?"+":"-")+E(e/60,2,0)}}]})),n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.getForm();return p.createElement(m,{className:"ms-inline-datetime ".concat(this.props.className),style:this.props.style},p.createElement(y,{controlId:"inlineDateTime"},this.props.glyph&&p.createElement("div",{style:this.props.clickable?{cursor:"pointer"}:{},onClick:function(){return e.props.clickable&&e.props.onIconClick(e.props.date,e.props.glyph)}},p.createElement(v,{tooltip:this.props.clickable?this.props.tooltip:void 0,tooltipId:this.props.clickable?this.props.tooltipId:void 0,className:"ms-inline-datetime-icon",glyph:this.props.glyph})),t.map((function(t){return"icon"===t.type&&p.createElement("div",{className:"ms-inline-datetime-input ms-dt-".concat(t.name)},p.createElement(v,{glyph:t.value}))||"separator"===t.type&&p.createElement("div",{className:"ms-inline-datetime-input ms-dt-".concat(t.name)},t.format&&t.format(t.value)||t.value)||p.createElement("div",{className:"ms-inline-datetime-input ms-dt-".concat(t.name)},e.props.showButtons&&p.createElement(h,{bsSize:"xs",disabled:!e.props.date,onClick:function(){return e.onUpdate(t.name,!0)}},p.createElement(v,{glyph:"chevron-up"})),p.createElement(g,{type:"text",readOnly:t.readOnly,placeholder:t.placeholder||t.name,disabled:!e.props.date,value:t.format&&t.format(t.value)||t.value,onChange:function(n){return e.onChange(t.name,n.target.value,t.parseValue)}}),e.props.showButtons&&p.createElement(h,{bsSize:"xs",disabled:!e.props.date,onClick:function(){return e.onUpdate(t.name)}},p.createElement(v,{glyph:"chevron-down"})))}))))}}])&&a(n.prototype,r),f&&a(n,f),t}(p.Component);u(T,"propTypes",{date:f.string,clickable:f.bool,onUpdate:f.func,onIconClick:f.func,glyph:f.string,style:f.object,className:f.string,tooltip:f.string,tooltipId:f.string,showButtons:f.bool}),u(T,"defaultProps",{date:"",onIconClick:function(){},clickable:!1,onUpdate:function(){},glyph:"time",style:{},className:"",tooltip:""}),e.exports=T},2709:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=n(1),f=n(2710),d=n(758).Popover,m=n(13).omit,y=n(33);e.exports=function(e){return function(t){function n(){return i(this,n),l(this,c(n).apply(this,arguments))}var r,g,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,t),r=n,(g=[{key:"render",value:function(){var t=null,n=this.props,r=n.popoverOptions,i=n.keyProp,s=a(n,["popoverOptions","keyProp"]);return p.createElement("span",{className:"mapstore-info-popover"},p.createElement(e,o({},m(s,["renderPopover","tooltipId"]),{key:i,ref:function(e){t=e}})),p.createElement(f,{placement:r.placement,shouldUpdatePosition:!0,show:!0,target:function(){return y.findDOMNode(t)}},p.createElement(d,r.props,r.content)))}}])&&s(r.prototype,g),b&&s(r,b),n}(p.Component)}},2710:function(e,t,n){var r=n(2354);e.exports=r(n(758).Overlay)},2711:function(e,t,n){var r=n(775),o=r.UPDATE_LAYER_DIMENSION_DATA,a=r.SET_CURRENT_TIME,i=r.SET_OFFSET_TIME,s=r.MOVE_TIME,l=n(269).REMOVE_NODE,c=n(267).RESET_CONTROLS,u=n(410).set,p=n(12),f=n(13),d=f.mapValues,m=f.pickBy;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return u("data[".concat(t.dimension,"][").concat(t.layerId,"]"),t.data,e);case a:return u("currentTime",t.time,e);case i:return u("offsetTime",t.offsetTime,e);case s:if(e.offsetTime&&e.currentTime){var n=p(e.offsetTime).diff(e.currentTime),r=p(t.time).add(n);return u("currentTime",t.time,u("offsetTime",r.toISOString(),e))}return u("currentTime",t.time,e);case l:var f=d(e.data,(function(e){return m(e,(function(e,n){return n!==t.node}))}));return u("data",f,e);case c:return u("data",void 0,u("currentTime",void 0,u("offsetTime",void 0,e)));default:return e}}},2712:function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=n(15),a=n(13).castArray,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.startWith.apply(e,r(t))};e.exports={wrapStartStop:function(e,t,n){return function(r){return(n?i(r,a(e)).catch(n):i(r,a(e))).concat(o.Observable.from(a(t)))}}}},2713:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=n(1),u=n(26),p=n(407),f=p.defaultProps,d=p.compose,m=n(195).createSelector,y=n(2232),g=y.play,b=y.pause,h=y.stop,v=y.STATUS,S=n(768).currentTimeSelector,E=n(2264),O=E.statusSelector,w=E.loadingSelector,T=n(88).connect,A=d(f({statusMap:v}),T(m(O,S,w,(function(e,t,n){return{loading:n,currentTime:t,status:e}})),{play:g,pause:b,stop:h}))(n(3321)),P=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return c.createElement("div",{className:"playback-plugin"},c.createElement(A,this.props))}}])&&a(n.prototype,r),u&&a(n,u),t}(c.Component);e.exports={PlaybackPlugin:u(P,{disablePluginIf:"{state('featuregridmode') === 'EDIT'}",Timeline:{name:"playback",position:1,priority:1}}),epics:n(3325),reducers:{playback:n(3327),dimension:n(2711)}}},2714:function(e,t,n){var r=n(2658),o=r.LOGIN_SUCCESS,a=r.LOGIN_FAIL,i=r.LOGOUT,s=r.CHANGE_PASSWORD_SUCCESS,l=r.CHANGE_PASSWORD_FAIL,c=r.RESET_ERROR,u=r.REFRESH_SUCCESS,p=r.SESSION_VALID,f=n(267).SET_CONTROL_PROPERTY,d=n(3328).USERMANAGER_UPDATE_USER,m=n(197),y=n(26),g=n(13),b=g.cloneDeep,h=g.head;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:null,errorCause:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return e.user&&t.user&&e.user.id===t.user.id?y({},e,{user:b(t.user)}):e;case f:return"ResetPassword"===t.control&&"enabled"===t.property?y({},e,{passwordChanged:!1,passwordError:null}):e;case o:var n=m.getUserAttributes(t.userDetails.User),r=h(n.filter((function(e){return"uuid"===e.name.toLowerCase()}))),g=new Date/1e3|0;return y({},e,{user:t.userDetails.User,token:t.userDetails&&t.userDetails.access_token||r&&r.value,refresh_token:t.userDetails&&t.userDetails.refresh_token,expires:t.userDetails&&t.userDetails.expires?g+t.userDetails.expires:g+172800,authHeader:t.authHeader,loginError:null});case u:var v=new Date/1e3|0;return y({},e,{token:t.userDetails&&t.userDetails.access_token,refresh_token:t.userDetails&&t.userDetails.refresh_token,expires:t.userDetails&&t.userDetails.expires?v+t.userDetails.expires:v+172800});case a:return y({},e,{loginError:t.error});case c:return y({},e,{loginError:null});case i:return y({},e,{user:null,token:null,refresh_token:null,expires:null,authHeader:null,loginError:null});case s:return y({},e,{user:y({},e.user,y({},t.user,{date:(new Date).getTime()})),authHeader:t.authHeader,passwordChanged:!0,passwordError:null});case l:return y({},e,{passwordError:t.error,passwordChanged:!1});case p:return y({},e,{user:t.userDetails.User,loginError:null});default:return e}}},2715:function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(413),i=a.MAPS_LIST_LOADED,s=a.MAPS_LIST_LOADING,l=a.MAPS_LIST_LOAD_ERROR,c=a.MAP_CREATED,u=a.MAP_ERROR,p=a.MAP_UPDATING,f=a.MAP_METADATA_UPDATED,d=a.MAP_DELETING,m=a.ATTRIBUTE_UPDATED,y=a.PERMISSIONS_LIST_LOADING,g=a.PERMISSIONS_LIST_LOADED,b=a.SAVE_MAP,h=a.PERMISSIONS_UPDATED,v=a.THUMBNAIL_ERROR,S=a.RESET_UPDATING,E=a.MAPS_SEARCH_TEXT_CHANGED,O=a.METADATA_CHANGED,w=a.SHOW_DETAILS,T=n(418),A=T.EDIT_MAP,P=T.RESET_CURRENT_MAP,C=n(26),_=n(13),x=_.isArray,I=_.isNil;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!1,showMapDetails:!0,errors:[],searchText:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return C({},e,{searchText:t.text});case O:return C({},e,{metadata:C({},e.metadata,o({},t.prop,t.value))});case w:return C({},e,{showMapDetails:t.showMapDetails});case A:return C({},e,{metadata:{name:t.map&&t.map.name||e&&e.metadata&&e.metadata.name||"",description:t.map&&t.map.description||e&&e.metadata&&e.metadata.description||""}});case P:return C({},e,{metadata:{name:"",description:""}});case s:return C({},e,{loading:!0,start:t.params&&t.params.start,limit:t.params&&t.params.limit,searchText:t.searchText});case i:if(t.maps&&t.maps.results&&Array.isArray(t.maps.results))return C({},e,t.maps,{loading:!1,start:t.params&&t.params.start,limit:t.params&&t.params.limit,searchText:t.searchText});var n=""!==t.maps.results?[t.maps.results]:[];return C({},e,t.maps,{results:n,loading:!1});case l:return{loadingError:t.error};case p:for(var a=""===e.results||I(e.results)?[]:r(e.results),T=0;T<a.length;T++)a[T].id&&a[T].id===t.resourceId&&(a[T]=C({},a[T],{updating:!0}));return C({},e,{results:a});case f:for(var _=""===e.results?[]:r(e.results),j=0;j<_.length;j++)_[j].id&&_[j].id===t.resourceId&&(_[j]=C({},_[j],{description:t.newDescription,name:t.newName,updating:!1}));return C({},e,{results:_});case m:for(var L=""===e.results?[]:r(e.results),R=0;R<L.length;R++){var D;if(L[R].id&&L[R].id===t.resourceId)L[R]=C({},L[R],(o(D={},t.name,decodeURIComponent(t.value)),o(D,"updating",!1),o(D,"loadingError",t.error?t.error:null),D))}return C({},e,{results:L});case h:for(var N=""===e.results?[]:r(e.results),M=0;M<N.length;M++)N[M].id&&N[M].id===t.resourceId&&(N[M]=C({},N[M],{loadingError:t.error?t.error:null}));return C({},e,{results:N});case d:for(var k=""===e.results?[]:r(e.results),G=0;G<k.length;G++)k[G].id&&k[G].id===t.resourceId&&(k[G]=C({},k[G],{deleting:!0}));return C({},e,{results:k});case c:var F=""===e.results?[]:r(e.results),U={results:[].concat(r(F),[t.metadata]),totalCount:e.totalCount+1};return C({},e,U);case b:for(var B=""===e.results?[]:r(e.results),H=0;H<B.length;H++)B[H].id&&B[H].id===t.resourceId&&(B[H]=C({},B[H],{files:t.map&&t.map.files,errors:t.map&&t.map.errors,newThumbnail:t.map&&t.map.newThumbnail,thumbnailError:t.map&&t.map.thumbnailError,thumbnail:t.map&&t.map.thumbnail}));return C({},e,{results:B});case v:case u:case S:for(var z=""===e.results?[]:r(e.results),V=0;V<z.length;V++)z[V].id&&z[V].id===t.resourceId&&(z[V]=C({},z[V],{updating:!1}));return C({},e,{results:z});case y:var W=""===e.results?[]:r(e.results),Y=C({},e,{results:W.map((function(e){return e.id===t.mapId?C({},e,{permissionLoading:!0}):e}))});return Y;case g:var q=""===e.results?[]:r(e.results||[]),Z=C({},e,{results:q.map((function(e){if(e.id===t.mapId){var n=[];return t.permissions&&t.permissions.SecurityRuleList&&t.permissions.SecurityRuleList.SecurityRule&&(x(t.permissions.SecurityRuleList.SecurityRule)?n=t.permissions.SecurityRuleList.SecurityRule:n.push(t.permissions.SecurityRuleList.SecurityRule)),C({},e,{permissionLoading:!1,permissions:{SecurityRuleList:{SecurityRule:n}}})}return e}))});return Z;default:return e}}},2716:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(418),a=o.EDIT_MAP,i=o.UPDATE_CURRENT_MAP,s=o.ERROR_CURRENT_MAP,l=o.UPDATE_CURRENT_MAP_PERMISSIONS,c=o.UPDATE_CURRENT_MAP_GROUPS,u=o.RESET_CURRENT_MAP,p=o.ADD_CURRENT_MAP_PERMISSION,f=n(413),d=f.THUMBNAIL_ERROR,m=f.MAP_UPDATING,y=f.SAVE_MAP,g=f.DISPLAY_METADATA_EDIT,b=f.RESET_UPDATING,h=f.MAP_ERROR,v=f.MAP_CREATED,S=f.PERMISSIONS_LIST_LOADING,E=f.PERMISSIONS_LIST_LOADED,O=f.TOGGLE_DETAILS_SHEET,w=f.UPDATE_DETAILS,T=f.SAVE_DETAILS,A=f.DELETE_DETAILS,P=f.BACK_DETAILS,C=f.UNDO_DETAILS,_=f.TOGGLE_GROUP_PROPERTIES,x=f.TOGGLE_UNSAVED_CHANGES,I=f.SET_DETAILS_CHANGED,j=f.SET_UNSAVED_CHANGES,L=f.METADATA_CHANGED,R=f.DETAILS_SAVING,D=f.TOGGLE_DETAILS_EDITABILITY,N=n(26),M=n(13).isArray;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return N({},e,t.map,{newThumbnail:t.map&&t.map.thumbnail?t.map.thumbnail:null,displayMetadataEdit:t.openModalProperties,thumbnailError:null,errors:[],metadata:{name:t.map.name,description:t.map.description},hideGroupProperties:!1,detailsSheetReadOnly:!0});case D:return N({},e,{editDetailsDisabled:!e.editDetailsDisabled});case i:return N({},e,{newThumbnail:t.thumbnail,thumbnailData:t.thumbnailData,unsavedChanges:!0});case m:return N({},e,{updating:!0});case l:var n=[];return t.permissions&&t.permissions.SecurityRuleList&&t.permissions.SecurityRuleList.SecurityRule&&(M(t.permissions.SecurityRuleList.SecurityRule)?n=t.permissions.SecurityRuleList.SecurityRule:n.push(t.permissions.SecurityRuleList.SecurityRule)),N({},e,{permissions:{SecurityRuleList:{SecurityRule:n}}});case c:return N({},e,{availableGroups:t.groups});case p:var o={SecurityRuleList:{SecurityRule:e.permissions&&e.permissions.SecurityRuleList&&e.permissions.SecurityRuleList.SecurityRule?e.permissions.SecurityRuleList.SecurityRule.slice():[]}};return t.rule&&o.SecurityRuleList.SecurityRule.push(t.rule),N({},e,{permissions:o});case s:return N({},e,{thumbnailError:null,mapError:null,errors:t.errors});case d:return N({},e,{thumbnailError:t.error,errors:[],updating:!1});case h:return N({},e,{mapError:t.error,errors:[],updating:!1});case y:return N({},e,{thumbnailError:null});case g:return N({},e,{displayMetadataEdit:t.displayMetadataEditValue});case b:return N({},e,{updating:!1});case v:return N({},e,{mapId:t.resourceId});case S:return N({},e,{permissionLoading:!0});case E:return N({},e,{permissionLoading:!1});case u:return{};case O:return N({},e,{showDetailEditor:!e.showDetailEditor,detailsBackup:e.showDetailEditor||e.detailsDeleted?e.detailsBackup:"",detailsSheetReadOnly:t.detailsSheetReadOnly});case L:var f=t.prop;return N({},e,{metadata:N({},e.metadata,r({},t.prop,t.value)),unsavedChanges:("name"===f?t.value:e.metadata.name)!==e.name||("description"===f?t.value:e.metadata.description)!==e.description});case w:return N({},e,{detailsText:t.detailsText,originalDetails:t.originalDetails||e.originalDetails,detailsBackup:t.doBackup?e.detailsText:e.detailsBackup});case P:return N({},e,{detailsText:e.detailsDeleted?"":t.backupDetails,detailsBackup:e.detailsDeleted?e.detailsBackup:"",showDetailEditor:!1});case C:return N({},e,{detailsText:e.detailsBackup,detailsBackup:"",detailsDeleted:!1});case T:return t.detailsText.length<=5e5?N({},e,{detailsText:t.detailsText,detailsBackup:"",detailsDeleted:!1}):e;case R:return N({},e,{saving:t.saving});case A:return N({},e,{detailsText:"",detailsBackup:e.detailsText,detailsChanged:!0,unsavedChanges:!0,detailsDeleted:!0});case j:return N({},e,{unsavedChanges:t.value});case _:return N({},e,{hideGroupProperties:!e.hideGroupProperties});case x:return N({},e,{showUnsavedChanges:!e.showUnsavedChanges});case I:return N({},e,{unsavedChanges:t.detailsChanged?t.detailsChanged:e.unsavedChanges,detailsChanged:t.detailsChanged});default:return e}}},2717:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n(2578).UPDATE_MAP_LAYOUT,l=n(26);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{layout:{},boundingMapRect:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var n=t.layout,r=n.boundingMapRect,a=void 0===r?{}:r,c=i(n,["boundingMapRect"]);return l({},e,{layout:l({},c,c),boundingMapRect:o({},a)});default:return e}}},2734:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(758),m=d.Glyphicon,y=d.Button,g=d.ButtonGroup,b=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"renderLeftButton",(function(){return n.props.useButtons?f.createElement(y,{ref:"left",disabled:0===n.props.index,className:n.props.btnClassName||"square-button-md",bsStyle:"primary",onClick:function(){n.props.onPrevious()}},f.createElement(m,{glyph:"arrow-left"})):f.createElement("a",{ref:"left",disabled:0===n.props.index,className:n.props.btnClassName||"square-button-md",onClick:function(){n.props.onPrevious()}},f.createElement(m,{glyph:"chevron-left"}))})),u(l(n),"renderRightButton",(function(){return n.props.useButtons?f.createElement(y,{ref:"right",disabled:n.props.index===n.props.size-1,className:n.props.btnClassName||"square-button-md",bsStyle:"primary",onClick:function(){n.props.onNext()}},f.createElement(m,{glyph:"arrow-right"})):f.createElement("a",{ref:"right",disabled:n.props.index===n.props.size-1,className:n.props.btnClassName||"square-button-md",onClick:function(){n.props.onNext()}},f.createElement(m,{glyph:"chevron-right"}))})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){return f.createElement("span",null,f.createElement("span",null,this.props.title),f.createElement(g,{className:"pull-right"},this.renderLeftButton(),this.renderRightButton()))}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(b,"propTypes",{title:p.string,index:p.number,size:p.number,container:p.oneOfType([p.object,p.func]),useButtons:p.bool,onPrevious:p.func,onNext:p.func,btnClassName:p.string}),u(b,"defaultProps",{useButtons:!0}),e.exports=b},2902:function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=n(15),u=n(162),p=n(26),f=n(771).push,d=n(835),m=d.basicError,y=d.basicSuccess,g=n(53),b=n(40),h=b.MAP_INFO_LOADED,v=b.MAP_SAVED,S=b.mapSaveError,E=b.mapSaved,O=b.loadMapInfo,w=n(13),T=w.isNil,A=w.find,P=n(413),C=P.SAVE_DETAILS,_=P.SAVE_RESOURCE_DETAILS,x=P.MAPS_GET_MAP_RESOURCES_BY_CATEGORY,I=P.DELETE_MAP,j=P.OPEN_DETAILS_PANEL,L=P.MAPS_LOAD_MAP,R=P.CLOSE_DETAILS_PANEL,D=P.NO_DETAILS_AVAILABLE,N=P.SAVE_MAP_RESOURCE,M=P.MAP_DELETED,k=P.setDetailsChanged,G=P.updateDetails,F=P.mapsLoading,U=P.mapsLoaded,B=P.mapDeleting,H=P.toggleDetailsEditability,z=P.mapDeleted,V=P.loadError,W=P.doNothing,Y=P.detailsLoaded,q=P.detailsSaving,Z=P.onDisplayMetadataEdit,K=P.RESET_UPDATING,Q=P.resetUpdating,X=P.toggleDetailsSheet,J=P.getMapResourcesByCategory,$=P.mapUpdating,ee=P.savingMap,te=P.mapCreated,ne=P.loadMaps,re=n(418),oe=re.resetCurrentMap,ae=re.EDIT_MAP,ie=n(2133).closeFeatureGrid,se=n(267).toggleControl,le=n(2903),ce=le.mapPermissionsFromIdSelector,ue=le.mapThumbnailsUriFromIdSelector,pe=le.mapDetailsUriFromIdSelector,fe=le.searchTextSelector,de=le.searchParamsSelector,me=le.totalCountSelector,ye=n(268),ge=ye.mapIdSelector,be=ye.mapInfoDetailsUriFromIdSelector,he=n(2144).mapTypeSelector,ve=n(828),Se=ve.currentMapDetailsTextSelector,Ee=ve.currentMapIdSelector,Oe=ve.currentMapDetailsUriSelector,we=ve.currentMapSelector,Te=ve.currentMapDetailsChangedSelector,Ae=ve.currentMapOriginalDetailsTextSelector,Pe=n(271).userParamsSelector,Ce=n(776),_e=Ce.deleteResourceById,xe=Ce.createAssociatedResource,Ie=Ce.deleteAssociatedResource,je=Ce.updateAssociatedResource,Le=n(196).getIdFromUri,Re=n(136).getErrorMessage,De=n(273).EMPTY_RESOURCE_VALUE,Ne=n(280),Me=Ne.createResource,ke=Ne.updateResource;e.exports={loadMapsEpic:function(e){return e.ofType(L).switchMap((function(e){var t=e.params,n=e.searchText,r=e.geoStoreUrl,o=n.replace(/[/?:;@=&\\]+/g,""),a=p({},{params:t},r?{baseURL:r}:{});return c.Observable.of(F(o,t),J("MAP",o,a))}))},resetCurrentMapEpic:function(e){return e.ofType(K).switchMap((function(){return c.Observable.from([Z(!1),oe()])}))},storeDetailsInfoEpic:function(e,t){return e.ofType(h).switchMap((function(){var e=ge(t.getState());return e?c.Observable.fromPromise(g.getResourceAttributes(e)).switchMap((function(t){var n=A(t,{name:"details"});return n&&n.value!==De?c.Observable.of(Y(e,n.value)):c.Observable.empty()})):c.Observable.empty()}))},closeDetailsPanelEpic:function(e){return e.ofType(R).switchMap((function(){return c.Observable.from([se("details","enabled"),oe()])}))},fetchDataForDetailsPanel:function(e,t){return e.ofType(j).switchMap((function(){var e=t.getState(),n=be(e),r=Le(n);return c.Observable.fromPromise(g.getData(r).then((function(e){return e}))).switchMap((function(e){return c.Observable.from([ie(),G(e,!0,e)])})).startWith(se("details","enabled")).catch((function(){return c.Observable.of(m({message:"maps.feedback.errorFetchingDetailsOfMap"}),G(D,!0,D))}))}))},deleteMapAndAssociatedResourcesEpic:function(e,t){return e.ofType(I).switchMap((function(e){var n=t.getState(),r=e.resourceId,a=e.options,i=pe(n,r),s=ue(n,r),l=Le(i),u=Le(s);return c.Observable.forkJoin(_e(u,a),_e(l,a),_e(r,a)).concatMap((function(e){var t=o(e,3),n=t[0],a=t[1],i=t[2],s=[];return"error"===n.resType&&s.push(m({message:"maps.feedback.errorDeletingDetailsOfMap"})),"error"===a.resType&&s.push(m({message:"maps.feedback.errorDeletingThumbnailOfMap"})),"error"===i.resType&&(s.push(m({message:"maps.feedback.errorDeletingMap"})),s.push(z(r,"failure",i.error))),"success"===i.resType&&s.push(z(r,"success")),"success"===i.resType&&"success"===n.resType&&"success"===a.resType&&s.push(y({message:"maps.feedback.allResDeleted"})),c.Observable.from(s)})).startWith(B(r))}))},getMapsResourcesByCategoryEpic:function(e){return e.ofType(x).switchMap((function(e){var t=e.map,n=e.searchText,r=e.opts;return c.Observable.fromPromise(g.getResourcesByCategory(t,n,r).then((function(e){return e}))).switchMap((function(e){return c.Observable.of(U(e,r.params,n))})).catch((function(e){return V(e)}))}))},setDetailsChangedEpic:function(e,t){return e.ofType(C).switchMap((function(e){var n=[],r=t.getState(),o=Oe(r);if(e.detailsText.length<=5e5?n.push(X(!0)):n.push(m({message:"maps.feedback.errorSizeExceeded"})),!o)return n.push(k("<p><br></p>"!==e.detailsText)),c.Observable.from(n);var a=Ae(r),i=Se(r);return n.push(k(a!==i)),c.Observable.from(n)}))},fetchDetailsFromResourceEpic:function(e,t){return e.ofType(ae).switchMap((function(){var e=t.getState(),n=Ee(e),r=Oe(e);if(!r||r===De)return c.Observable.of(G("",!0,""));var o=Le(r);return c.Observable.fromPromise(g.getData(o).then((function(e){return e}))).switchMap((function(e){return c.Observable.of(G(e,!0,e))})).catch((function(){return c.Observable.of(m({message:"maps.feedback.errorFetchingDetailsOfMap"}),G(D,!0,D),H(n))}))}))},saveResourceDetailsEpic:function(e,t){return e.ofType(_).switchMap((function(){var e=t.getState(),n=Ee(e),r=Se(e,n),o=Te(e),a={attribute:"details",map:we(e),resource:null,type:"STRING"};return o?(""!==r&&o?a.resource={category:"DETAILS",userParams:Pe(e),metadata:{name:u()},value:r,permissions:ce(e,n),optionsAttr:{},optionsRes:{}}:a.optionsDel={},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{}:t,r=e.attribute,o=void 0===r?"":r,a=e.resource,s=void 0===a?null:a,l=e.type,c=void 0===l?"STRING":l,u=e.optionsDel,p=void 0===u?{}:u,f=e.messages,d=void 0===f?{}:f,m=n[o],y=n.id;return!T(m)&&m!==De||T(s)?T(s)?Ie({mapId:y,attribute:o,type:c,resourceId:Le(m),options:p,messages:d}):je({permissions:s.permissions,resourceId:Le(m),value:s.value,attribute:o,options:s.optionsAttr,messages:d}):xe(i({},s,{attribute:o,mapId:y,type:c,messages:d}))}(i({},a)).concat([q(!1),Q(n)]).startWith(q(!0))):c.Observable.of(W())}))},mapSaveMapResourceEpic:function(e,t){return e.ofType(N).exhaustMap((function(e){var n=e.resource;return(n.id?ke(n):Me(n)).switchMap((function(e){return c.Observable.from([].concat(r(n.id?[O(e)]:[]),[n.id?se("mapSave"):se("mapSaveAs"),E()],r(n.id?[]:[te(e,p({id:e,canDelete:!0,canEdit:!0,canCopy:!0},n.metadata),n.data),f("/viewer/".concat(he(t.getState()),"/").concat(e))]))).merge(c.Observable.of(y({title:"map.savedMapTitle",message:"map.savedMapMessage",autoDismiss:6,position:"tc"})))})).catch((function(e){var t=e.status,n=e.statusText,r=e.data,o=e.message,a=l(e,["status","statusText","data","message"]);return c.Observable.of(S(t?{status:t,statusText:n,data:r}:o||a),m(i({},Re(e,"geostore","mapsError"),{autoDismiss:6,position:"tc"})))})).startWith(n.id?$(n.metadata):ee(n.metadata))}))},reloadMapsEpic:function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(M,v).delay(1e3).switchMap((function(){return c.Observable.of(ne(!1,fe(r()),(e=r(),t=me(e),n=de(e)||{},o=n.start,a=n.limit,s=l(n,["start","limit"]),o===t-1?{start:Math.max(0,o-a),limit:a}:i({start:o,limit:a},s))));var e,t,n,o,a,s}))}}},2903:function(e,t,n){var r=n(13),o=r.find,a=r.get,i=function(e){return a(e,"maps.results",[])},s=function(e,t){return o(i(e),(function(e){return e.id===t}))};e.exports={mapNameSelector:function(e,t){return s(e,t)&&s(e,t).name||""},mapFromIdSelector:s,showMapDetailsSelector:function(e){return a(e,"maps.showMapDetails")},mapsResultsSelector:i,totalCountSelector:function(e){return a(e,"maps.totalCount")},mapMetadataSelector:function(e){return a(e,"maps.metadata",{})},isMapsLastPageSelector:function(e){return e&&e.maps&&e.maps.totalCount===e.maps.start},mapDescriptionSelector:function(e,t){return s(e,t)&&s(e,t).description||""},mapDetailsUriFromIdSelector:function(e,t){return s(e,t)&&s(e,t).details||""},mapPermissionsFromIdSelector:function(e,t){return s(e,t)&&s(e,t).permissions||""},mapThumbnailsUriFromIdSelector:function(e,t){return s(e,t)&&s(e,t).thumbnail||""},searchTextSelector:function(e){return e&&e.maps&&e.maps.searchText},searchParamsSelector:function(e){return{start:a(e,"maps.start"),limit:a(e,"maps.limit")}}}},2904:function(e,t){var n={getWindowSize:function(){return{maxWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,maxHeight:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},onfontready:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=e,i=r,s=o,l=a;if(Object({NODE_ENV:"production"}).isTest){var c={},u=function(e){return c[e]=c[e]||{rootCount:0,iframesCreated:!1,timedOut:!1,fontLoaded:!1,requiredExtraTimeout:!1},c[e]};window.reporter=window.reporter||{modifyRootCount:function(e,t){u(e).rootCount+=t},iframesCreated:function(e){u(e).iframesCreated=!0},timedOut:function(e){u(e).timedOut=!0},fontLoaded:function(e){u(e).fontLoaded=!0},requiredExtraTimeout:function(e){u(e).requiredExtraTimeout=!0},getTests:function(){return c}}}n.timeoutAfter&&setTimeout((function(){i&&(Object({NODE_ENV:"production"}).isTest&&window.reporter.modifyRootCount(l,-1),document.body.removeChild(i),i=0,n.onTimeout&&(Object({NODE_ENV:"production"}).isTest&&window.reporter.timedOut(l),n.onTimeout()))}),n.timeoutAfter),s=function(){i&&i.firstChild.clientWidth===i.lastChild.clientWidth&&(Object({NODE_ENV:"production"}).isTest&&window.reporter.modifyRootCount(l,-1),document.body.removeChild(i),i=0,Object({NODE_ENV:"production"}).isTest&&window.reporter.fontLoaded(l),t())},Object({NODE_ENV:"production"}).isTest&&window.reporter.modifyRootCount(l,1),Object({NODE_ENV:"production"}).isLegacy||s(document.body.appendChild(i=document.createElement("div")).innerHTML='<div style="position:fixed;white-space:pre;bottom:999%;right:999%;font:999px '+(n.generic?"":"'")+a+(n.generic?"":"'")+',serif">'+(n.sampleText||" ")+'</div><div style="position:fixed;white-space:pre;bottom:999%;right:999%;font:999px '+(n.generic?"":"'")+a+(n.generic?"":"'")+',monospace">'+(n.sampleText||" ")+"</div>"),Object({NODE_ENV:"production"}).isLegacy&&s(document.body.appendChild(i=document.createElement("div")).innerHTML='<table style=position:absolute;bottom:999%;right:999%;width:auto><tr><td style=position:relative><tr><td style="font:999px monospace;white-space:pre">.<span style="font:999px '+(n.generic?"":"'")+a+(n.generic?"":"'")+',serif">'+(n.sampleText||" ")+'</span>.</table><table style=position:absolute;bottom:999%;right:999%;width:auto><tr><td style=position:relative><tr><td style="font:999px monospace;white-space:pre">.<span style="font:999px '+(n.generic?"":"'")+a+(n.generic?"":"'")+',monospace">'+(n.sampleText||" ")+"</span>.</table>"),i&&(Object({NODE_ENV:"production"}).isTest&&window.reporter.iframesCreated(l),Object({NODE_ENV:"production"}).isLegacy||(i.firstChild.appendChild(a=document.createElement("iframe")).style.width="999%",a.contentWindow.onresize=s,i.lastChild.appendChild(a=document.createElement("iframe")).style.width="999%",a.contentWindow.onresize=s),Object({NODE_ENV:"production"}).isLegacy&&(i.firstChild.firstChild.firstChild.firstChild.appendChild(a=document.createElement("iframe")).style.cssText="position:absolute;bottom:999%;right:999%;width:999%",a.attachEvent?a.contentWindow.attachEvent("onresize",s):a.contentWindow.onresize=s,i.lastChild.firstChild.firstChild.firstChild.appendChild(a=document.createElement("iframe")).style.cssText="position:absolute;bottom:999%;right:999%;width:999%",a.attachEvent?a.contentWindow.attachEvent("onresize",s):a.contentWindow.onresize=s),Object({NODE_ENV:"production"}).isTest||(a=setTimeout(s)),Object({NODE_ENV:"production"}).isTest&&(a=setTimeout((function(){i&&(window.reporter.requiredExtraTimeout(l),s())}))))},loadFont:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,o){n.onfontready(e,r,{timeoutAfter:t.timeoutAfter,onTimeout:o,sampleText:t.sampleText,generic:t.generic})}))}};e.exports=n},2929:function(e,t,n){var r=n(2930);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},2930:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi .mapErrorMessage {\n    font-size: 16px;\n    color: red;\n}\n",""])},2931:function(e,t,n){var r=n(1),o=n(409),a=o.creationError,i=o.changeMapView,s=o.clickOnMap,l=n(269),c=l.layerLoading,u=l.layerLoad,p=l.layerError,f=n(2402).changeMousePosition,d=n(2328),m=d.changeMeasurementState,y=d.changeGeometry,g=d.resetGeometry,b=d.updateMeasures,h=n(2581).measurementSelector,v=n(2932).changeSelectionState,S=n(2933),E=S.changeLocateState,O=S.onLocateError,w=n(2169),T=w.changeDrawingStatus,A=w.endDrawing,P=w.setCurrentStyle,C=w.geometryChanged,_=w.drawStopped,x=w.selectFeatures,I=w.drawingFeatures,j=n(2403).updateHighlighted,L=n(161).warning,R=n(88).connect,D=n(26),N=n(268).projectionDefsSelector,M=function(){return r.createElement("span",null)};e.exports=function(e,t){var r=n(2934)("./"+e+"/index"),o=R((function(e){return{projectionDefs:N(e),mousePosition:e.mousePosition||{enabled:!1}}}),D({},{onCreationError:a,onMapViewChanges:i,onClick:s,onMouseMove:f,onLayerLoading:c,onLayerLoad:u,onLayerError:p,onWarning:L},t),(function(e,t,n){return D({},n,e,D({},t,{onMouseMove:e.mousePosition.enabled?t.onMouseMove:function(){}}))}))(r.LMap),l=R((function(e){return{enabled:e.controls&&e.controls.measure&&e.controls.measure.enabled||!1,measurement:h(e),useTreshold:e.measurement&&e.measurement.useTreshold||null,uom:e.measurement&&e.measurement.uom||{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}}}}),{changeMeasurementState:m,updateMeasures:b,resetGeometry:g,changeGeometry:y})(r.MeasurementSupport||M),d=R((function(e){return{status:e.locate&&e.locate.state,messages:e.locale&&e.locale.messages?e.locale.messages.locate:void 0}}),{changeLocateState:E,onLocateError:O})(r.Locate||M),S=R((function(e){return e.draw||{}}),{onChangeDrawingStatus:T,onEndDrawing:A,onGeometryChanged:C,onSelectFeatures:x,onDrawingFeatures:I,onDrawStopped:_,setCurrentStyle:P})(r.DrawSupport||M),w=R((function(e){return e.highlight||{}}),{updateHighlighted:j})(r.HighlightFeatureSupport||M),k=R((function(e){return{selection:e.selection||{}}}),{changeSelectionState:v})(r.SelectionSupport||M);return n(2650)("./"+e+"/plugins/index"),{Map:o,Layer:R(null,{onWarning:L})(r.Layer||M),Feature:r.Feature||M,tools:{measurement:l,locate:d,overview:r.Overview||M,scalebar:r.ScaleBar||M,draw:S,highlight:w,selection:k}}}},2932:function(e,t){e.exports={CHANGE_SELECTION_STATE:"CHANGE_SELECTION_STATE",changeSelectionState:function(e){return{type:"CHANGE_SELECTION_STATE",geomType:e.geomType,point:e.point,line:e.line,polygon:e.polygon}}}},2933:function(e,t){e.exports={CHANGE_LOCATE_STATE:"CHANGE_LOCATE_STATE",LOCATE_ERROR:"LOCATE_ERROR",changeLocateState:function(e){return{type:"CHANGE_LOCATE_STATE",state:e}},onLocateError:function(e){return{type:"LOCATE_ERROR",error:e}}}},2934:function(e,t,n){var r={"./cesium/index":2935,"./leaflet/index":2937,"./openlayers/index":2970};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=2934},2935:function(e,t,n){e.exports={LMap:n(2582),Layer:n(2583)}},2936:function(e,t,n){var r=n(2170);e.exports={getMouseXYZ:function(e,t){var n=e.scene,o=t.position||t.endPosition;if(!o)return null;var a=e.camera.getPickRay(o),i=e.scene.globe.pick(a,e.scene),s=n._globe.ellipsoid;if(r.defined(i)){var l=s.cartesianToCartographic(i),c=function(e,t){if(null!==t.position){var n=e.scene,r=n._globe.ellipsoid;return n._camera.pickEllipsoid(t.position||t.endPosition,r)}return null}(e,t);return c&&(l.height=n._globe.getHeight(l),l.cartesian=c,l.position=i),l}return null},getMouseTile:function(e,t){var n=e.scene;if(!t.position)return null;var r=e.camera.getPickRay(t.position);return e.scene.globe.pickTile(r,n)}}},2937:function(e,t,n){e.exports={LMap:n(2404),Layer:n(2405),Feature:n(2406),Locate:n(2424),MeasurementSupport:n(2425),Overview:n(2426),ScaleBar:n(2427),DrawSupport:n(2593),HighlightFeatureSupport:n(2969)}},2938:function(e,t,n){var r=n(761);r.Evented.addInitHook((function(){this._singleClickTimeout=null,this.on("click",this._scheduleSingleClick,this),this.on("dblclick dragstart zoomstart",this._cancelSingleClick,this)})),r.Evented.include({_cancelSingleClick:function(){setTimeout(this._clearSingleClickTimeout.bind(this),0)},_scheduleSingleClick:function(e){this._clearSingleClickTimeout(),this._singleClickTimeout=setTimeout(this._fireSingleClick.bind(this,e),this.options.singleClickTimeout||500)},_fireSingleClick:function(e){e.originalEvent._stopped||this.fire("singleclick",r.Util.extend(e,{type:"singleclick"}))},_clearSingleClickTimeout:function(){null!==this._singleClickTimeout&&(clearTimeout(this._singleClickTimeout),this._singleClickTimeout=null)}})},2939:function(e,t,n){var r=n(761),o=n(13).isFunction;n(2940),n(2941),e.exports={extra:{getIcon:function(e){var t=e.iconPrefix||"fa";return r.ExtraMarkers.icon({icon:t+"-"+e.iconGlyph,markerColor:e.iconColor||"blue",shape:e.iconShape||"square",prefix:t,extraClasses:e.highlight?"marker-selected":""})}},standard:{getIcon:function(e){return r.icon({iconUrl:e.iconUrl||e.symbolUrlCustomized||e.symbolUrl,shadowUrl:e.shadowUrl,iconSize:e.iconSize,shadowSize:e.shadowSize,iconAnchor:e.iconAnchor,shadowAnchor:e.shadowAnchor,popupAnchor:e.popupAnchor})}},html:{getIcon:function(e,t){return r.divIcon(o(e.html)?e.html(t):e.html)}}}},2964:function(e,t,n){var r=n(2965);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},2965:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi .leaflet-control-minimap {\n    border:solid rgba(255, 255, 255, 1.0) 4px;\n    box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n    border-radius: 3px;\n    background: #f8f8f9;\n    transition: all .2s;\n}\n.msgapi .leafletbottom.leafletright, .msgapi .leaflet-control-minimap{\n    position:relative;\n    bottom:5px;\n}\n.msgapi .leaflet-control-minimap a {\n    background-color: rgba(255, 255, 255, 1.0);\n    background-repeat: no-repeat;\n    z-index: 99999;\n    transition: all .2s;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-bottomright {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n    border-radius: 0px;\n    bottom: -3px;\n    right: -3px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-topleft {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-bottomleft {\n    -webkit-transform: rotate(270deg);\n    transform: rotate(270deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-topright {\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap-toggle-display{\n    background-image: url("+n(2966)+");\n    background-size: cover;\n    position: absolute;\n    border-radius: 3px 0px 0px 0px;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap-toggle-display{\n    background-image: url("+n(2967)+");\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-bottomright {\n    bottom: 0;\n    right: 0;\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-topleft{\n    top: 0;\n    left: 0;\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-bottomleft{\n    bottom: 0;\n    left: 0;\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-topright{\n    top: 0;\n    right: 0;\n    -webkit-transform: rotate(270deg);\n    transform: rotate(270deg);\n}\n\n/* Old IE */\n.msgapi .leaflet-oldie .leaflet-control-minimap {\n    border: 1px solid #999;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap a {\n    background-color: #fff;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap a.minimized {\n    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);\n}\n",""])},2966:function(e,t,n){e.exports=n.p+"toggle.svg"},2967:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAH1JREFUOI3t0DEKAjEQheFP8ERWqfUCeg9rL+adbKxkYRFEY7ERhkUhCZb7wyuGYX5ewkIvK6z/ITpjxOHHPtWKrsh4fJEl3GpF29LoI9sHSS6pZjeTnTD0iOayjFevCI7hOKaJZHpObNIsih/b3WiDSzgaS+5lfrY0Wph4A4kFM89VzdVFAAAAAElFTkSuQmCC"},2968:function(e,t,n){"use strict";n.r(t),n.d(t,"boundsToOLExtent",(function(){return r})),n.d(t,"fromLeafletFeatureToQueryform",(function(){return o}));var r=function(e){return[e.getWest(),e.getSouth(),e.getEast(),e.getNorth()]},o=function(e){var t=e.toGeoJSON(),n=e.getBounds(),o=r(n),a=n.getCenter(),i=e.getRadius?e.getRadius():0,s=t.features[0].geometry.coordinates;return{type:t.features[0].geometry.type,extent:o,center:a,coordinates:s,radius:i,projection:"EPSG:4326"}}},2969:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(13).findIndex,m=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"setLayer",(function(){var e;n._layer&&n.cleanSupport(),n.props.map.eachLayer((function(t){t.layerId===n.props.layer&&(e=t)}),l(n)),void 0!==e&&e.on("click",n.featureClicked,l(n)),n._layer=e,n.highlightFeatures(n.props.features)})),u(l(n),"featureClicked",(function(e){var t=e.layer;if((e.originalEvent.ctrlKey||e.originalEvent.metaKey)&&t){var r=d(n._selectedFeatures,(function(e){return e===t}));-1!==r?(n._layer.resetStyle(t),n._selectedFeatures=n._selectedFeatures.filter((function(e,t){return t!==r})),t=null):n._selectedFeatures.push(t)}else n._selectedFeatures.map((function(e){n._layer.resetStyle(e)})),n._selectedFeatures=t?[t]:[];t&&(t.bringToFront(),t.setStyle(n.props.selectedStyle)),n.props.updateHighlighted(n._selectedFeatures.map((function(e){return e.msId})),"")})),u(l(n),"cleanSupport",(function(){n._layer&&(n._selectedFeatures.map((function(e){n._layer.resetStyle(e)})),n._layer.off("click",n.featureClicked,l(n))),n._selectedFeatures=[],n._layer=null,n.props.updateHighlighted([],"")})),u(l(n),"highlightFeatures",(function(e){n._layer||n.setLayer(),n._selectedFeatures.map((function(e){n._layer.resetStyle(e)})),n._selectedFeatures=[],n._layer.eachLayer((function(t){-1!==e.indexOf(t.msId)&&(n._selectedFeatures.push(t),t.bringToFront(),t.setStyle(n.props.selectedStyle))}),l(n))})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._selectedFeatures=[],this._layer=null,"enabled"===this.props.status&&this.setLayer()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props;return e.status!==t.status||e.layer!==t.layer||"update"===e.status&&e.features.toString()!==t.features.toString()}},{key:"UNSAFE_componentWillUpdate",value:function(e){switch(e.status){case"enabled":this.setLayer();break;case"disabled":this.cleanSupport();break;case"update":this.highlightFeatures(e.features);break;default:return}}},{key:"componentWillUnmount",value:function(){this.cleanSupport()}},{key:"render",value:function(){return null}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(m,"propTypes",{map:p.object,layer:p.string,status:p.oneOf(["disabled","enabled","update"]),updateHighlighted:p.func,selectedStyle:p.object,features:p.array}),u(m,"contextTypes",{messages:p.object}),u(m,"defaultProps",{status:"disabled",updateHighlighted:function(){},selectedStyle:{radius:12,weight:4,opacity:1,fillOpacity:1,color:"yellow",fillColor:"red"},features:[]}),e.exports=m},2970:function(e,t,n){var r=n(2971)(["formatNumber"]);e.exports={LMap:n(2571).default,Layer:n(2448).default,Feature:n(2449).default,Locate:n(2568).default,MeasurementSupport:r(n(2459).default),Overview:n(2460).default,ScaleBar:n(2461).default,DrawSupport:n(2648).default,HighlightFeatureSupport:n(3125).default,SelectionSupport:n(3126).default}},2971:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(412).injectIntl,s=n(0),l=n(13).omit,c=n(407),u=c.compose,p=c.branch,f=c.getContext,d=c.withProps,m=c.withPropsOnChange,y=c.mapProps,g=function(e){return y((function(t){return l(t,e)}))},b={locale:navigator&&navigator.language,formats:{},messages:{},defaultLocale:"en",defaultFormats:{},formatDate:function(e){return e},formatTime:function(e){return e},formatRelative:function(e){return e},formatNumber:function(e){return e},formatPlural:function(e){return e},formatMessage:function(e){return e},formatHTMLMessage:function(e){return e},now:function(){return new Date}};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u(f({intl:s.object}),p((function(e){return!!e.intl}),i,d({intl:b})),m(["intl"],(function(t){var n=t.intl,r=void 0===n?{}:n;return e.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return o({},e,a({},t,r[t]))}),{})})),g(["intl"]))}},2975:function(e,t,n){var r=n(2976);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},2976:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi .ol-control button:hover, .msgapi .ol-control button:focus {\n    background-color: #f4f4f4;\n}\n.msgapi .ol-zoom .ol-zoom-out, .msgapi .ol-zoom .ol-zoom-in{\n    width: 26px;\n    height: 26px;\n    line-height: 26px;\n    display: block;\n\n    color: black;\n    background-color: #fff;\n    border-width: 0;\n    margin:0;\n}\n.msgapi .ol-zoom.ol-unselectable.ol-control .ol-zoom-in, .msgapi .ol-zoom.ol-unselectable.ol-control .ol-zoom-out {\n    font-family: 'Lucida Console', Monaco, monospace;\n    text-align: center;\n    text-decoration: none;\n    font-weight: bold;\n}\n\n.msgapi .ol-zoom .ol-zoom-out{\n    font-size: 18px;\n    border-radius: 0 0 4px 4px;\n}\n.msgapi .ol-zoom .ol-zoom-in{\n    border-bottom: 1px solid #ccc;\n    border-radius: 4px 4px 0 0;\n    font-size: 20px;\n}\n.msgapi .ol-zoom.ol-unselectable.ol-control{\n    top:10px;\n    left:10px;\n    padding:0;\n    box-shadow: rgba(0, 0, 0, 0.65098) 0px 1px 5px 0px;\n    border-radius: 4px;\n}\n\n.msgapi .ol-scale-line.ol-unselectable{\n    background-color: rgba(255, 255, 255, 0.8);\n}\n",""])},3081:function(e,t){e.exports='.fa-glass:before {\n  content: "\\f000";\n}\n.fa-music:before {\n  content: "\\f001";\n}\n.fa-search:before {\n  content: "\\f002";\n}\n.fa-envelope-o:before {\n  content: "\\f003";\n}\n.fa-heart:before {\n  content: "\\f004";\n}\n.fa-star:before {\n  content: "\\f005";\n}\n.fa-star-o:before {\n  content: "\\f006";\n}\n.fa-user:before {\n  content: "\\f007";\n}\n.fa-film:before {\n  content: "\\f008";\n}\n.fa-th-large:before {\n  content: "\\f009";\n}\n.fa-th:before {\n  content: "\\f00a";\n}\n.fa-th-list:before {\n  content: "\\f00b";\n}\n.fa-check:before {\n  content: "\\f00c";\n}\n.fa-remove:before,\n.fa-close:before,\n.fa-times:before {\n  content: "\\f00d";\n}\n.fa-search-plus:before {\n  content: "\\f00e";\n}\n.fa-search-minus:before {\n  content: "\\f010";\n}\n.fa-power-off:before {\n  content: "\\f011";\n}\n.fa-signal:before {\n  content: "\\f012";\n}\n.fa-gear:before,\n.fa-cog:before {\n  content: "\\f013";\n}\n.fa-trash-o:before {\n  content: "\\f014";\n}\n.fa-home:before {\n  content: "\\f015";\n}\n.fa-file-o:before {\n  content: "\\f016";\n}\n.fa-clock-o:before {\n  content: "\\f017";\n}\n.fa-road:before {\n  content: "\\f018";\n}\n.fa-download:before {\n  content: "\\f019";\n}\n.fa-arrow-circle-o-down:before {\n  content: "\\f01a";\n}\n.fa-arrow-circle-o-up:before {\n  content: "\\f01b";\n}\n.fa-inbox:before {\n  content: "\\f01c";\n}\n.fa-play-circle-o:before {\n  content: "\\f01d";\n}\n.fa-rotate-right:before,\n.fa-repeat:before {\n  content: "\\f01e";\n}\n.fa-refresh:before {\n  content: "\\f021";\n}\n.fa-list-alt:before {\n  content: "\\f022";\n}\n.fa-lock:before {\n  content: "\\f023";\n}\n.fa-flag:before {\n  content: "\\f024";\n}\n.fa-headphones:before {\n  content: "\\f025";\n}\n.fa-volume-off:before {\n  content: "\\f026";\n}\n.fa-volume-down:before {\n  content: "\\f027";\n}\n.fa-volume-up:before {\n  content: "\\f028";\n}\n.fa-qrcode:before {\n  content: "\\f029";\n}\n.fa-barcode:before {\n  content: "\\f02a";\n}\n.fa-tag:before {\n  content: "\\f02b";\n}\n.fa-tags:before {\n  content: "\\f02c";\n}\n.fa-book:before {\n  content: "\\f02d";\n}\n.fa-bookmark:before {\n  content: "\\f02e";\n}\n.fa-print:before {\n  content: "\\f02f";\n}\n.fa-camera:before {\n  content: "\\f030";\n}\n.fa-font:before {\n  content: "\\f031";\n}\n.fa-bold:before {\n  content: "\\f032";\n}\n.fa-italic:before {\n  content: "\\f033";\n}\n.fa-text-height:before {\n  content: "\\f034";\n}\n.fa-text-width:before {\n  content: "\\f035";\n}\n.fa-align-left:before {\n  content: "\\f036";\n}\n.fa-align-center:before {\n  content: "\\f037";\n}\n.fa-align-right:before {\n  content: "\\f038";\n}\n.fa-align-justify:before {\n  content: "\\f039";\n}\n.fa-list:before {\n  content: "\\f03a";\n}\n.fa-dedent:before,\n.fa-outdent:before {\n  content: "\\f03b";\n}\n.fa-indent:before {\n  content: "\\f03c";\n}\n.fa-video-camera:before {\n  content: "\\f03d";\n}\n.fa-photo:before,\n.fa-image:before,\n.fa-picture-o:before {\n  content: "\\f03e";\n}\n.fa-pencil:before {\n  content: "\\f040";\n}\n.fa-map-marker:before {\n  content: "\\f041";\n}\n.fa-adjust:before {\n  content: "\\f042";\n}\n.fa-tint:before {\n  content: "\\f043";\n}\n.fa-edit:before,\n.fa-pencil-square-o:before {\n  content: "\\f044";\n}\n.fa-share-square-o:before {\n  content: "\\f045";\n}\n.fa-check-square-o:before {\n  content: "\\f046";\n}\n.fa-arrows:before {\n  content: "\\f047";\n}\n.fa-step-backward:before {\n  content: "\\f048";\n}\n.fa-fast-backward:before {\n  content: "\\f049";\n}\n.fa-backward:before {\n  content: "\\f04a";\n}\n.fa-play:before {\n  content: "\\f04b";\n}\n.fa-pause:before {\n  content: "\\f04c";\n}\n.fa-stop:before {\n  content: "\\f04d";\n}\n.fa-forward:before {\n  content: "\\f04e";\n}\n.fa-fast-forward:before {\n  content: "\\f050";\n}\n.fa-step-forward:before {\n  content: "\\f051";\n}\n.fa-eject:before {\n  content: "\\f052";\n}\n.fa-chevron-left:before {\n  content: "\\f053";\n}\n.fa-chevron-right:before {\n  content: "\\f054";\n}\n.fa-plus-circle:before {\n  content: "\\f055";\n}\n.fa-minus-circle:before {\n  content: "\\f056";\n}\n.fa-times-circle:before {\n  content: "\\f057";\n}\n.fa-check-circle:before {\n  content: "\\f058";\n}\n.fa-question-circle:before {\n  content: "\\f059";\n}\n.fa-info-circle:before {\n  content: "\\f05a";\n}\n.fa-crosshairs:before {\n  content: "\\f05b";\n}\n.fa-times-circle-o:before {\n  content: "\\f05c";\n}\n.fa-check-circle-o:before {\n  content: "\\f05d";\n}\n.fa-ban:before {\n  content: "\\f05e";\n}\n.fa-arrow-left:before {\n  content: "\\f060";\n}\n.fa-arrow-right:before {\n  content: "\\f061";\n}\n.fa-arrow-up:before {\n  content: "\\f062";\n}\n.fa-arrow-down:before {\n  content: "\\f063";\n}\n.fa-mail-forward:before,\n.fa-share:before {\n  content: "\\f064";\n}\n.fa-expand:before {\n  content: "\\f065";\n}\n.fa-compress:before {\n  content: "\\f066";\n}\n.fa-plus:before {\n  content: "\\f067";\n}\n.fa-minus:before {\n  content: "\\f068";\n}\n.fa-asterisk:before {\n  content: "\\f069";\n}\n.fa-exclamation-circle:before {\n  content: "\\f06a";\n}\n.fa-gift:before {\n  content: "\\f06b";\n}\n.fa-leaf:before {\n  content: "\\f06c";\n}\n.fa-fire:before {\n  content: "\\f06d";\n}\n.fa-eye:before {\n  content: "\\f06e";\n}\n.fa-eye-slash:before {\n  content: "\\f070";\n}\n.fa-warning:before,\n.fa-exclamation-triangle:before {\n  content: "\\f071";\n}\n.fa-plane:before {\n  content: "\\f072";\n}\n.fa-calendar:before {\n  content: "\\f073";\n}\n.fa-random:before {\n  content: "\\f074";\n}\n.fa-comment:before {\n  content: "\\f075";\n}\n.fa-magnet:before {\n  content: "\\f076";\n}\n.fa-chevron-up:before {\n  content: "\\f077";\n}\n.fa-chevron-down:before {\n  content: "\\f078";\n}\n.fa-retweet:before {\n  content: "\\f079";\n}\n.fa-shopping-cart:before {\n  content: "\\f07a";\n}\n.fa-folder:before {\n  content: "\\f07b";\n}\n.fa-folder-open:before {\n  content: "\\f07c";\n}\n.fa-arrows-v:before {\n  content: "\\f07d";\n}\n.fa-arrows-h:before {\n  content: "\\f07e";\n}\n.fa-bar-chart-o:before,\n.fa-bar-chart:before {\n  content: "\\f080";\n}\n.fa-twitter-square:before {\n  content: "\\f081";\n}\n.fa-facebook-square:before {\n  content: "\\f082";\n}\n.fa-camera-retro:before {\n  content: "\\f083";\n}\n.fa-key:before {\n  content: "\\f084";\n}\n.fa-gears:before,\n.fa-cogs:before {\n  content: "\\f085";\n}\n.fa-comments:before {\n  content: "\\f086";\n}\n.fa-thumbs-o-up:before {\n  content: "\\f087";\n}\n.fa-thumbs-o-down:before {\n  content: "\\f088";\n}\n.fa-star-half:before {\n  content: "\\f089";\n}\n.fa-heart-o:before {\n  content: "\\f08a";\n}\n.fa-sign-out:before {\n  content: "\\f08b";\n}\n.fa-linkedin-square:before {\n  content: "\\f08c";\n}\n.fa-thumb-tack:before {\n  content: "\\f08d";\n}\n.fa-external-link:before {\n  content: "\\f08e";\n}\n.fa-sign-in:before {\n  content: "\\f090";\n}\n.fa-trophy:before {\n  content: "\\f091";\n}\n.fa-github-square:before {\n  content: "\\f092";\n}\n.fa-upload:before {\n  content: "\\f093";\n}\n.fa-lemon-o:before {\n  content: "\\f094";\n}\n.fa-phone:before {\n  content: "\\f095";\n}\n.fa-square-o:before {\n  content: "\\f096";\n}\n.fa-bookmark-o:before {\n  content: "\\f097";\n}\n.fa-phone-square:before {\n  content: "\\f098";\n}\n.fa-twitter:before {\n  content: "\\f099";\n}\n.fa-facebook-f:before,\n.fa-facebook:before {\n  content: "\\f09a";\n}\n.fa-github:before {\n  content: "\\f09b";\n}\n.fa-unlock:before {\n  content: "\\f09c";\n}\n.fa-credit-card:before {\n  content: "\\f09d";\n}\n.fa-feed:before,\n.fa-rss:before {\n  content: "\\f09e";\n}\n.fa-hdd-o:before {\n  content: "\\f0a0";\n}\n.fa-bullhorn:before {\n  content: "\\f0a1";\n}\n.fa-bell:before {\n  content: "\\f0f3";\n}\n.fa-certificate:before {\n  content: "\\f0a3";\n}\n.fa-hand-o-right:before {\n  content: "\\f0a4";\n}\n.fa-hand-o-left:before {\n  content: "\\f0a5";\n}\n.fa-hand-o-up:before {\n  content: "\\f0a6";\n}\n.fa-hand-o-down:before {\n  content: "\\f0a7";\n}\n.fa-arrow-circle-left:before {\n  content: "\\f0a8";\n}\n.fa-arrow-circle-right:before {\n  content: "\\f0a9";\n}\n.fa-arrow-circle-up:before {\n  content: "\\f0aa";\n}\n.fa-arrow-circle-down:before {\n  content: "\\f0ab";\n}\n.fa-globe:before {\n  content: "\\f0ac";\n}\n.fa-wrench:before {\n  content: "\\f0ad";\n}\n.fa-tasks:before {\n  content: "\\f0ae";\n}\n.fa-filter:before {\n  content: "\\f0b0";\n}\n.fa-briefcase:before {\n  content: "\\f0b1";\n}\n.fa-arrows-alt:before {\n  content: "\\f0b2";\n}\n.fa-group:before,\n.fa-users:before {\n  content: "\\f0c0";\n}\n.fa-chain:before,\n.fa-link:before {\n  content: "\\f0c1";\n}\n.fa-cloud:before {\n  content: "\\f0c2";\n}\n.fa-flask:before {\n  content: "\\f0c3";\n}\n.fa-cut:before,\n.fa-scissors:before {\n  content: "\\f0c4";\n}\n.fa-copy:before,\n.fa-files-o:before {\n  content: "\\f0c5";\n}\n.fa-paperclip:before {\n  content: "\\f0c6";\n}\n.fa-save:before,\n.fa-floppy-o:before {\n  content: "\\f0c7";\n}\n.fa-square:before {\n  content: "\\f0c8";\n}\n.fa-navicon:before,\n.fa-reorder:before,\n.fa-bars:before {\n  content: "\\f0c9";\n}\n.fa-list-ul:before {\n  content: "\\f0ca";\n}\n.fa-list-ol:before {\n  content: "\\f0cb";\n}\n.fa-strikethrough:before {\n  content: "\\f0cc";\n}\n.fa-underline:before {\n  content: "\\f0cd";\n}\n.fa-table:before {\n  content: "\\f0ce";\n}\n.fa-magic:before {\n  content: "\\f0d0";\n}\n.fa-truck:before {\n  content: "\\f0d1";\n}\n.fa-pinterest:before {\n  content: "\\f0d2";\n}\n.fa-pinterest-square:before {\n  content: "\\f0d3";\n}\n.fa-google-plus-square:before {\n  content: "\\f0d4";\n}\n.fa-google-plus:before {\n  content: "\\f0d5";\n}\n.fa-money:before {\n  content: "\\f0d6";\n}\n.fa-caret-down:before {\n  content: "\\f0d7";\n}\n.fa-caret-up:before {\n  content: "\\f0d8";\n}\n.fa-caret-left:before {\n  content: "\\f0d9";\n}\n.fa-caret-right:before {\n  content: "\\f0da";\n}\n.fa-columns:before {\n  content: "\\f0db";\n}\n.fa-unsorted:before,\n.fa-sort:before {\n  content: "\\f0dc";\n}\n.fa-sort-down:before,\n.fa-sort-desc:before {\n  content: "\\f0dd";\n}\n.fa-sort-up:before,\n.fa-sort-asc:before {\n  content: "\\f0de";\n}\n.fa-envelope:before {\n  content: "\\f0e0";\n}\n.fa-linkedin:before {\n  content: "\\f0e1";\n}\n.fa-rotate-left:before,\n.fa-undo:before {\n  content: "\\f0e2";\n}\n.fa-legal:before,\n.fa-gavel:before {\n  content: "\\f0e3";\n}\n.fa-dashboard:before,\n.fa-tachometer:before {\n  content: "\\f0e4";\n}\n.fa-comment-o:before {\n  content: "\\f0e5";\n}\n.fa-comments-o:before {\n  content: "\\f0e6";\n}\n.fa-flash:before,\n.fa-bolt:before {\n  content: "\\f0e7";\n}\n.fa-sitemap:before {\n  content: "\\f0e8";\n}\n.fa-umbrella:before {\n  content: "\\f0e9";\n}\n.fa-paste:before,\n.fa-clipboard:before {\n  content: "\\f0ea";\n}\n.fa-lightbulb-o:before {\n  content: "\\f0eb";\n}\n.fa-exchange:before {\n  content: "\\f0ec";\n}\n.fa-cloud-download:before {\n  content: "\\f0ed";\n}\n.fa-cloud-upload:before {\n  content: "\\f0ee";\n}\n.fa-user-md:before {\n  content: "\\f0f0";\n}\n.fa-stethoscope:before {\n  content: "\\f0f1";\n}\n.fa-suitcase:before {\n  content: "\\f0f2";\n}\n.fa-bell-o:before {\n  content: "\\f0a2";\n}\n.fa-coffee:before {\n  content: "\\f0f4";\n}\n.fa-cutlery:before {\n  content: "\\f0f5";\n}\n.fa-file-text-o:before {\n  content: "\\f0f6";\n}\n.fa-building-o:before {\n  content: "\\f0f7";\n}\n.fa-hospital-o:before {\n  content: "\\f0f8";\n}\n.fa-ambulance:before {\n  content: "\\f0f9";\n}\n.fa-medkit:before {\n  content: "\\f0fa";\n}\n.fa-fighter-jet:before {\n  content: "\\f0fb";\n}\n.fa-beer:before {\n  content: "\\f0fc";\n}\n.fa-h-square:before {\n  content: "\\f0fd";\n}\n.fa-plus-square:before {\n  content: "\\f0fe";\n}\n.fa-angle-double-left:before {\n  content: "\\f100";\n}\n.fa-angle-double-right:before {\n  content: "\\f101";\n}\n.fa-angle-double-up:before {\n  content: "\\f102";\n}\n.fa-angle-double-down:before {\n  content: "\\f103";\n}\n.fa-angle-left:before {\n  content: "\\f104";\n}\n.fa-angle-right:before {\n  content: "\\f105";\n}\n.fa-angle-up:before {\n  content: "\\f106";\n}\n.fa-angle-down:before {\n  content: "\\f107";\n}\n.fa-desktop:before {\n  content: "\\f108";\n}\n.fa-laptop:before {\n  content: "\\f109";\n}\n.fa-tablet:before {\n  content: "\\f10a";\n}\n.fa-mobile-phone:before,\n.fa-mobile:before {\n  content: "\\f10b";\n}\n.fa-circle-o:before {\n  content: "\\f10c";\n}\n.fa-quote-left:before {\n  content: "\\f10d";\n}\n.fa-quote-right:before {\n  content: "\\f10e";\n}\n.fa-spinner:before {\n  content: "\\f110";\n}\n.fa-circle:before {\n  content: "\\f111";\n}\n.fa-mail-reply:before,\n.fa-reply:before {\n  content: "\\f112";\n}\n.fa-github-alt:before {\n  content: "\\f113";\n}\n.fa-folder-o:before {\n  content: "\\f114";\n}\n.fa-folder-open-o:before {\n  content: "\\f115";\n}\n.fa-smile-o:before {\n  content: "\\f118";\n}\n.fa-frown-o:before {\n  content: "\\f119";\n}\n.fa-meh-o:before {\n  content: "\\f11a";\n}\n.fa-gamepad:before {\n  content: "\\f11b";\n}\n.fa-keyboard-o:before {\n  content: "\\f11c";\n}\n.fa-flag-o:before {\n  content: "\\f11d";\n}\n.fa-flag-checkered:before {\n  content: "\\f11e";\n}\n.fa-terminal:before {\n  content: "\\f120";\n}\n.fa-code:before {\n  content: "\\f121";\n}\n.fa-mail-reply-all:before,\n.fa-reply-all:before {\n  content: "\\f122";\n}\n.fa-star-half-empty:before,\n.fa-star-half-full:before,\n.fa-star-half-o:before {\n  content: "\\f123";\n}\n.fa-location-arrow:before {\n  content: "\\f124";\n}\n.fa-crop:before {\n  content: "\\f125";\n}\n.fa-code-fork:before {\n  content: "\\f126";\n}\n.fa-unlink:before,\n.fa-chain-broken:before {\n  content: "\\f127";\n}\n.fa-question:before {\n  content: "\\f128";\n}\n.fa-info:before {\n  content: "\\f129";\n}\n.fa-exclamation:before {\n  content: "\\f12a";\n}\n.fa-superscript:before {\n  content: "\\f12b";\n}\n.fa-subscript:before {\n  content: "\\f12c";\n}\n.fa-eraser:before {\n  content: "\\f12d";\n}\n.fa-puzzle-piece:before {\n  content: "\\f12e";\n}\n.fa-microphone:before {\n  content: "\\f130";\n}\n.fa-microphone-slash:before {\n  content: "\\f131";\n}\n.fa-shield:before {\n  content: "\\f132";\n}\n.fa-calendar-o:before {\n  content: "\\f133";\n}\n.fa-fire-extinguisher:before {\n  content: "\\f134";\n}\n.fa-rocket:before {\n  content: "\\f135";\n}\n.fa-maxcdn:before {\n  content: "\\f136";\n}\n.fa-chevron-circle-left:before {\n  content: "\\f137";\n}\n.fa-chevron-circle-right:before {\n  content: "\\f138";\n}\n.fa-chevron-circle-up:before {\n  content: "\\f139";\n}\n.fa-chevron-circle-down:before {\n  content: "\\f13a";\n}\n.fa-html5:before {\n  content: "\\f13b";\n}\n.fa-css3:before {\n  content: "\\f13c";\n}\n.fa-anchor:before {\n  content: "\\f13d";\n}\n.fa-unlock-alt:before {\n  content: "\\f13e";\n}\n.fa-bullseye:before {\n  content: "\\f140";\n}\n.fa-ellipsis-h:before {\n  content: "\\f141";\n}\n.fa-ellipsis-v:before {\n  content: "\\f142";\n}\n.fa-rss-square:before {\n  content: "\\f143";\n}\n.fa-play-circle:before {\n  content: "\\f144";\n}\n.fa-ticket:before {\n  content: "\\f145";\n}\n.fa-minus-square:before {\n  content: "\\f146";\n}\n.fa-minus-square-o:before {\n  content: "\\f147";\n}\n.fa-level-up:before {\n  content: "\\f148";\n}\n.fa-level-down:before {\n  content: "\\f149";\n}\n.fa-check-square:before {\n  content: "\\f14a";\n}\n.fa-pencil-square:before {\n  content: "\\f14b";\n}\n.fa-external-link-square:before {\n  content: "\\f14c";\n}\n.fa-share-square:before {\n  content: "\\f14d";\n}\n.fa-compass:before {\n  content: "\\f14e";\n}\n.fa-toggle-down:before,\n.fa-caret-square-o-down:before {\n  content: "\\f150";\n}\n.fa-toggle-up:before,\n.fa-caret-square-o-up:before {\n  content: "\\f151";\n}\n.fa-toggle-right:before,\n.fa-caret-square-o-right:before {\n  content: "\\f152";\n}\n.fa-euro:before,\n.fa-eur:before {\n  content: "\\f153";\n}\n.fa-gbp:before {\n  content: "\\f154";\n}\n.fa-dollar:before,\n.fa-usd:before {\n  content: "\\f155";\n}\n.fa-rupee:before,\n.fa-inr:before {\n  content: "\\f156";\n}\n.fa-cny:before,\n.fa-rmb:before,\n.fa-yen:before,\n.fa-jpy:before {\n  content: "\\f157";\n}\n.fa-ruble:before,\n.fa-rouble:before,\n.fa-rub:before {\n  content: "\\f158";\n}\n.fa-won:before,\n.fa-krw:before {\n  content: "\\f159";\n}\n.fa-bitcoin:before,\n.fa-btc:before {\n  content: "\\f15a";\n}\n.fa-file:before {\n  content: "\\f15b";\n}\n.fa-file-text:before {\n  content: "\\f15c";\n}\n.fa-sort-alpha-asc:before {\n  content: "\\f15d";\n}\n.fa-sort-alpha-desc:before {\n  content: "\\f15e";\n}\n.fa-sort-amount-asc:before {\n  content: "\\f160";\n}\n.fa-sort-amount-desc:before {\n  content: "\\f161";\n}\n.fa-sort-numeric-asc:before {\n  content: "\\f162";\n}\n.fa-sort-numeric-desc:before {\n  content: "\\f163";\n}\n.fa-thumbs-up:before {\n  content: "\\f164";\n}\n.fa-thumbs-down:before {\n  content: "\\f165";\n}\n.fa-youtube-square:before {\n  content: "\\f166";\n}\n.fa-youtube:before {\n  content: "\\f167";\n}\n.fa-xing:before {\n  content: "\\f168";\n}\n.fa-xing-square:before {\n  content: "\\f169";\n}\n.fa-youtube-play:before {\n  content: "\\f16a";\n}\n.fa-dropbox:before {\n  content: "\\f16b";\n}\n.fa-stack-overflow:before {\n  content: "\\f16c";\n}\n.fa-instagram:before {\n  content: "\\f16d";\n}\n.fa-flickr:before {\n  content: "\\f16e";\n}\n.fa-adn:before {\n  content: "\\f170";\n}\n.fa-bitbucket:before {\n  content: "\\f171";\n}\n.fa-bitbucket-square:before {\n  content: "\\f172";\n}\n.fa-tumblr:before {\n  content: "\\f173";\n}\n.fa-tumblr-square:before {\n  content: "\\f174";\n}\n.fa-long-arrow-down:before {\n  content: "\\f175";\n}\n.fa-long-arrow-up:before {\n  content: "\\f176";\n}\n.fa-long-arrow-left:before {\n  content: "\\f177";\n}\n.fa-long-arrow-right:before {\n  content: "\\f178";\n}\n.fa-apple:before {\n  content: "\\f179";\n}\n.fa-windows:before {\n  content: "\\f17a";\n}\n.fa-android:before {\n  content: "\\f17b";\n}\n.fa-linux:before {\n  content: "\\f17c";\n}\n.fa-dribbble:before {\n  content: "\\f17d";\n}\n.fa-skype:before {\n  content: "\\f17e";\n}\n.fa-foursquare:before {\n  content: "\\f180";\n}\n.fa-trello:before {\n  content: "\\f181";\n}\n.fa-female:before {\n  content: "\\f182";\n}\n.fa-male:before {\n  content: "\\f183";\n}\n.fa-gittip:before,\n.fa-gratipay:before {\n  content: "\\f184";\n}\n.fa-sun-o:before {\n  content: "\\f185";\n}\n.fa-moon-o:before {\n  content: "\\f186";\n}\n.fa-archive:before {\n  content: "\\f187";\n}\n.fa-bug:before {\n  content: "\\f188";\n}\n.fa-vk:before {\n  content: "\\f189";\n}\n.fa-weibo:before {\n  content: "\\f18a";\n}\n.fa-renren:before {\n  content: "\\f18b";\n}\n.fa-pagelines:before {\n  content: "\\f18c";\n}\n.fa-stack-exchange:before {\n  content: "\\f18d";\n}\n.fa-arrow-circle-o-right:before {\n  content: "\\f18e";\n}\n.fa-arrow-circle-o-left:before {\n  content: "\\f190";\n}\n.fa-toggle-left:before,\n.fa-caret-square-o-left:before {\n  content: "\\f191";\n}\n.fa-dot-circle-o:before {\n  content: "\\f192";\n}\n.fa-wheelchair:before {\n  content: "\\f193";\n}\n.fa-vimeo-square:before {\n  content: "\\f194";\n}\n.fa-turkish-lira:before,\n.fa-try:before {\n  content: "\\f195";\n}\n.fa-plus-square-o:before {\n  content: "\\f196";\n}\n.fa-space-shuttle:before {\n  content: "\\f197";\n}\n.fa-slack:before {\n  content: "\\f198";\n}\n.fa-envelope-square:before {\n  content: "\\f199";\n}\n.fa-wordpress:before {\n  content: "\\f19a";\n}\n.fa-openid:before {\n  content: "\\f19b";\n}\n.fa-institution:before,\n.fa-bank:before,\n.fa-university:before {\n  content: "\\f19c";\n}\n.fa-mortar-board:before,\n.fa-graduation-cap:before {\n  content: "\\f19d";\n}\n.fa-yahoo:before {\n  content: "\\f19e";\n}\n.fa-google:before {\n  content: "\\f1a0";\n}\n.fa-reddit:before {\n  content: "\\f1a1";\n}\n.fa-reddit-square:before {\n  content: "\\f1a2";\n}\n.fa-stumbleupon-circle:before {\n  content: "\\f1a3";\n}\n.fa-stumbleupon:before {\n  content: "\\f1a4";\n}\n.fa-delicious:before {\n  content: "\\f1a5";\n}\n.fa-digg:before {\n  content: "\\f1a6";\n}\n.fa-pied-piper-pp:before {\n  content: "\\f1a7";\n}\n.fa-pied-piper-alt:before {\n  content: "\\f1a8";\n}\n.fa-drupal:before {\n  content: "\\f1a9";\n}\n.fa-joomla:before {\n  content: "\\f1aa";\n}\n.fa-language:before {\n  content: "\\f1ab";\n}\n.fa-fax:before {\n  content: "\\f1ac";\n}\n.fa-building:before {\n  content: "\\f1ad";\n}\n.fa-child:before {\n  content: "\\f1ae";\n}\n.fa-paw:before {\n  content: "\\f1b0";\n}\n.fa-spoon:before {\n  content: "\\f1b1";\n}\n.fa-cube:before {\n  content: "\\f1b2";\n}\n.fa-cubes:before {\n  content: "\\f1b3";\n}\n.fa-behance:before {\n  content: "\\f1b4";\n}\n.fa-behance-square:before {\n  content: "\\f1b5";\n}\n.fa-steam:before {\n  content: "\\f1b6";\n}\n.fa-steam-square:before {\n  content: "\\f1b7";\n}\n.fa-recycle:before {\n  content: "\\f1b8";\n}\n.fa-automobile:before,\n.fa-car:before {\n  content: "\\f1b9";\n}\n.fa-cab:before,\n.fa-taxi:before {\n  content: "\\f1ba";\n}\n.fa-tree:before {\n  content: "\\f1bb";\n}\n.fa-spotify:before {\n  content: "\\f1bc";\n}\n.fa-deviantart:before {\n  content: "\\f1bd";\n}\n.fa-soundcloud:before {\n  content: "\\f1be";\n}\n.fa-database:before {\n  content: "\\f1c0";\n}\n.fa-file-pdf-o:before {\n  content: "\\f1c1";\n}\n.fa-file-word-o:before {\n  content: "\\f1c2";\n}\n.fa-file-excel-o:before {\n  content: "\\f1c3";\n}\n.fa-file-powerpoint-o:before {\n  content: "\\f1c4";\n}\n.fa-file-photo-o:before,\n.fa-file-picture-o:before,\n.fa-file-image-o:before {\n  content: "\\f1c5";\n}\n.fa-file-zip-o:before,\n.fa-file-archive-o:before {\n  content: "\\f1c6";\n}\n.fa-file-sound-o:before,\n.fa-file-audio-o:before {\n  content: "\\f1c7";\n}\n.fa-file-movie-o:before,\n.fa-file-video-o:before {\n  content: "\\f1c8";\n}\n.fa-file-code-o:before {\n  content: "\\f1c9";\n}\n.fa-vine:before {\n  content: "\\f1ca";\n}\n.fa-codepen:before {\n  content: "\\f1cb";\n}\n.fa-jsfiddle:before {\n  content: "\\f1cc";\n}\n.fa-life-bouy:before,\n.fa-life-buoy:before,\n.fa-life-saver:before,\n.fa-support:before,\n.fa-life-ring:before {\n  content: "\\f1cd";\n}\n.fa-circle-o-notch:before {\n  content: "\\f1ce";\n}\n.fa-ra:before,\n.fa-resistance:before,\n.fa-rebel:before {\n  content: "\\f1d0";\n}\n.fa-ge:before,\n.fa-empire:before {\n  content: "\\f1d1";\n}\n.fa-git-square:before {\n  content: "\\f1d2";\n}\n.fa-git:before {\n  content: "\\f1d3";\n}\n.fa-y-combinator-square:before,\n.fa-yc-square:before,\n.fa-hacker-news:before {\n  content: "\\f1d4";\n}\n.fa-tencent-weibo:before {\n  content: "\\f1d5";\n}\n.fa-qq:before {\n  content: "\\f1d6";\n}\n.fa-wechat:before,\n.fa-weixin:before {\n  content: "\\f1d7";\n}\n.fa-send:before,\n.fa-paper-plane:before {\n  content: "\\f1d8";\n}\n.fa-send-o:before,\n.fa-paper-plane-o:before {\n  content: "\\f1d9";\n}\n.fa-history:before {\n  content: "\\f1da";\n}\n.fa-circle-thin:before {\n  content: "\\f1db";\n}\n.fa-header:before {\n  content: "\\f1dc";\n}\n.fa-paragraph:before {\n  content: "\\f1dd";\n}\n.fa-sliders:before {\n  content: "\\f1de";\n}\n.fa-share-alt:before {\n  content: "\\f1e0";\n}\n.fa-share-alt-square:before {\n  content: "\\f1e1";\n}\n.fa-bomb:before {\n  content: "\\f1e2";\n}\n.fa-soccer-ball-o:before,\n.fa-futbol-o:before {\n  content: "\\f1e3";\n}\n.fa-tty:before {\n  content: "\\f1e4";\n}\n.fa-binoculars:before {\n  content: "\\f1e5";\n}\n.fa-plug:before {\n  content: "\\f1e6";\n}\n.fa-slideshare:before {\n  content: "\\f1e7";\n}\n.fa-twitch:before {\n  content: "\\f1e8";\n}\n.fa-yelp:before {\n  content: "\\f1e9";\n}\n.fa-newspaper-o:before {\n  content: "\\f1ea";\n}\n.fa-wifi:before {\n  content: "\\f1eb";\n}\n.fa-calculator:before {\n  content: "\\f1ec";\n}\n.fa-paypal:before {\n  content: "\\f1ed";\n}\n.fa-google-wallet:before {\n  content: "\\f1ee";\n}\n.fa-cc-visa:before {\n  content: "\\f1f0";\n}\n.fa-cc-mastercard:before {\n  content: "\\f1f1";\n}\n.fa-cc-discover:before {\n  content: "\\f1f2";\n}\n.fa-cc-amex:before {\n  content: "\\f1f3";\n}\n.fa-cc-paypal:before {\n  content: "\\f1f4";\n}\n.fa-cc-stripe:before {\n  content: "\\f1f5";\n}\n.fa-bell-slash:before {\n  content: "\\f1f6";\n}\n.fa-bell-slash-o:before {\n  content: "\\f1f7";\n}\n.fa-trash:before {\n  content: "\\f1f8";\n}\n.fa-copyright:before {\n  content: "\\f1f9";\n}\n.fa-at:before {\n  content: "\\f1fa";\n}\n.fa-eyedropper:before {\n  content: "\\f1fb";\n}\n.fa-paint-brush:before {\n  content: "\\f1fc";\n}\n.fa-birthday-cake:before {\n  content: "\\f1fd";\n}\n.fa-area-chart:before {\n  content: "\\f1fe";\n}\n.fa-pie-chart:before {\n  content: "\\f200";\n}\n.fa-line-chart:before {\n  content: "\\f201";\n}\n.fa-lastfm:before {\n  content: "\\f202";\n}\n.fa-lastfm-square:before {\n  content: "\\f203";\n}\n.fa-toggle-off:before {\n  content: "\\f204";\n}\n.fa-toggle-on:before {\n  content: "\\f205";\n}\n.fa-bicycle:before {\n  content: "\\f206";\n}\n.fa-bus:before {\n  content: "\\f207";\n}\n.fa-ioxhost:before {\n  content: "\\f208";\n}\n.fa-angellist:before {\n  content: "\\f209";\n}\n.fa-cc:before {\n  content: "\\f20a";\n}\n.fa-shekel:before,\n.fa-sheqel:before,\n.fa-ils:before {\n  content: "\\f20b";\n}\n.fa-meanpath:before {\n  content: "\\f20c";\n}\n.fa-buysellads:before {\n  content: "\\f20d";\n}\n.fa-connectdevelop:before {\n  content: "\\f20e";\n}\n.fa-dashcube:before {\n  content: "\\f210";\n}\n.fa-forumbee:before {\n  content: "\\f211";\n}\n.fa-leanpub:before {\n  content: "\\f212";\n}\n.fa-sellsy:before {\n  content: "\\f213";\n}\n.fa-shirtsinbulk:before {\n  content: "\\f214";\n}\n.fa-simplybuilt:before {\n  content: "\\f215";\n}\n.fa-skyatlas:before {\n  content: "\\f216";\n}\n.fa-cart-plus:before {\n  content: "\\f217";\n}\n.fa-cart-arrow-down:before {\n  content: "\\f218";\n}\n.fa-diamond:before {\n  content: "\\f219";\n}\n.fa-ship:before {\n  content: "\\f21a";\n}\n.fa-user-secret:before {\n  content: "\\f21b";\n}\n.fa-motorcycle:before {\n  content: "\\f21c";\n}\n.fa-street-view:before {\n  content: "\\f21d";\n}\n.fa-heartbeat:before {\n  content: "\\f21e";\n}\n.fa-venus:before {\n  content: "\\f221";\n}\n.fa-mars:before {\n  content: "\\f222";\n}\n.fa-mercury:before {\n  content: "\\f223";\n}\n.fa-intersex:before,\n.fa-transgender:before {\n  content: "\\f224";\n}\n.fa-transgender-alt:before {\n  content: "\\f225";\n}\n.fa-venus-double:before {\n  content: "\\f226";\n}\n.fa-mars-double:before {\n  content: "\\f227";\n}\n.fa-venus-mars:before {\n  content: "\\f228";\n}\n.fa-mars-stroke:before {\n  content: "\\f229";\n}\n.fa-mars-stroke-v:before {\n  content: "\\f22a";\n}\n.fa-mars-stroke-h:before {\n  content: "\\f22b";\n}\n.fa-neuter:before {\n  content: "\\f22c";\n}\n.fa-genderless:before {\n  content: "\\f22d";\n}\n.fa-facebook-official:before {\n  content: "\\f230";\n}\n.fa-pinterest-p:before {\n  content: "\\f231";\n}\n.fa-whatsapp:before {\n  content: "\\f232";\n}\n.fa-server:before {\n  content: "\\f233";\n}\n.fa-user-plus:before {\n  content: "\\f234";\n}\n.fa-user-times:before {\n  content: "\\f235";\n}\n.fa-hotel:before,\n.fa-bed:before {\n  content: "\\f236";\n}\n.fa-viacoin:before {\n  content: "\\f237";\n}\n.fa-train:before {\n  content: "\\f238";\n}\n.fa-subway:before {\n  content: "\\f239";\n}\n.fa-medium:before {\n  content: "\\f23a";\n}\n.fa-yc:before,\n.fa-y-combinator:before {\n  content: "\\f23b";\n}\n.fa-optin-monster:before {\n  content: "\\f23c";\n}\n.fa-opencart:before {\n  content: "\\f23d";\n}\n.fa-expeditedssl:before {\n  content: "\\f23e";\n}\n.fa-battery-4:before,\n.fa-battery:before,\n.fa-battery-full:before {\n  content: "\\f240";\n}\n.fa-battery-3:before,\n.fa-battery-three-quarters:before {\n  content: "\\f241";\n}\n.fa-battery-2:before,\n.fa-battery-half:before {\n  content: "\\f242";\n}\n.fa-battery-1:before,\n.fa-battery-quarter:before {\n  content: "\\f243";\n}\n.fa-battery-0:before,\n.fa-battery-empty:before {\n  content: "\\f244";\n}\n.fa-mouse-pointer:before {\n  content: "\\f245";\n}\n.fa-i-cursor:before {\n  content: "\\f246";\n}\n.fa-object-group:before {\n  content: "\\f247";\n}\n.fa-object-ungroup:before {\n  content: "\\f248";\n}\n.fa-sticky-note:before {\n  content: "\\f249";\n}\n.fa-sticky-note-o:before {\n  content: "\\f24a";\n}\n.fa-cc-jcb:before {\n  content: "\\f24b";\n}\n.fa-cc-diners-club:before {\n  content: "\\f24c";\n}\n.fa-clone:before {\n  content: "\\f24d";\n}\n.fa-balance-scale:before {\n  content: "\\f24e";\n}\n.fa-hourglass-o:before {\n  content: "\\f250";\n}\n.fa-hourglass-1:before,\n.fa-hourglass-start:before {\n  content: "\\f251";\n}\n.fa-hourglass-2:before,\n.fa-hourglass-half:before {\n  content: "\\f252";\n}\n.fa-hourglass-3:before,\n.fa-hourglass-end:before {\n  content: "\\f253";\n}\n.fa-hourglass:before {\n  content: "\\f254";\n}\n.fa-hand-grab-o:before,\n.fa-hand-rock-o:before {\n  content: "\\f255";\n}\n.fa-hand-stop-o:before,\n.fa-hand-paper-o:before {\n  content: "\\f256";\n}\n.fa-hand-scissors-o:before {\n  content: "\\f257";\n}\n.fa-hand-lizard-o:before {\n  content: "\\f258";\n}\n.fa-hand-spock-o:before {\n  content: "\\f259";\n}\n.fa-hand-pointer-o:before {\n  content: "\\f25a";\n}\n.fa-hand-peace-o:before {\n  content: "\\f25b";\n}\n.fa-trademark:before {\n  content: "\\f25c";\n}\n.fa-registered:before {\n  content: "\\f25d";\n}\n.fa-creative-commons:before {\n  content: "\\f25e";\n}\n.fa-gg:before {\n  content: "\\f260";\n}\n.fa-gg-circle:before {\n  content: "\\f261";\n}\n.fa-tripadvisor:before {\n  content: "\\f262";\n}\n.fa-odnoklassniki:before {\n  content: "\\f263";\n}\n.fa-odnoklassniki-square:before {\n  content: "\\f264";\n}\n.fa-get-pocket:before {\n  content: "\\f265";\n}\n.fa-wikipedia-w:before {\n  content: "\\f266";\n}\n.fa-safari:before {\n  content: "\\f267";\n}\n.fa-chrome:before {\n  content: "\\f268";\n}\n.fa-firefox:before {\n  content: "\\f269";\n}\n.fa-opera:before {\n  content: "\\f26a";\n}\n.fa-internet-explorer:before {\n  content: "\\f26b";\n}\n.fa-tv:before,\n.fa-television:before {\n  content: "\\f26c";\n}\n.fa-contao:before {\n  content: "\\f26d";\n}\n.fa-500px:before {\n  content: "\\f26e";\n}\n.fa-amazon:before {\n  content: "\\f270";\n}\n.fa-calendar-plus-o:before {\n  content: "\\f271";\n}\n.fa-calendar-minus-o:before {\n  content: "\\f272";\n}\n.fa-calendar-times-o:before {\n  content: "\\f273";\n}\n.fa-calendar-check-o:before {\n  content: "\\f274";\n}\n.fa-industry:before {\n  content: "\\f275";\n}\n.fa-map-pin:before {\n  content: "\\f276";\n}\n.fa-map-signs:before {\n  content: "\\f277";\n}\n.fa-map-o:before {\n  content: "\\f278";\n}\n.fa-map:before {\n  content: "\\f279";\n}\n.fa-commenting:before {\n  content: "\\f27a";\n}\n.fa-commenting-o:before {\n  content: "\\f27b";\n}\n.fa-houzz:before {\n  content: "\\f27c";\n}\n.fa-vimeo:before {\n  content: "\\f27d";\n}\n.fa-black-tie:before {\n  content: "\\f27e";\n}\n.fa-fonticons:before {\n  content: "\\f280";\n}\n.fa-reddit-alien:before {\n  content: "\\f281";\n}\n.fa-edge:before {\n  content: "\\f282";\n}\n.fa-credit-card-alt:before {\n  content: "\\f283";\n}\n.fa-codiepie:before {\n  content: "\\f284";\n}\n.fa-modx:before {\n  content: "\\f285";\n}\n.fa-fort-awesome:before {\n  content: "\\f286";\n}\n.fa-usb:before {\n  content: "\\f287";\n}\n.fa-product-hunt:before {\n  content: "\\f288";\n}\n.fa-mixcloud:before {\n  content: "\\f289";\n}\n.fa-scribd:before {\n  content: "\\f28a";\n}\n.fa-pause-circle:before {\n  content: "\\f28b";\n}\n.fa-pause-circle-o:before {\n  content: "\\f28c";\n}\n.fa-stop-circle:before {\n  content: "\\f28d";\n}\n.fa-stop-circle-o:before {\n  content: "\\f28e";\n}\n.fa-shopping-bag:before {\n  content: "\\f290";\n}\n.fa-shopping-basket:before {\n  content: "\\f291";\n}\n.fa-hashtag:before {\n  content: "\\f292";\n}\n.fa-bluetooth:before {\n  content: "\\f293";\n}\n.fa-bluetooth-b:before {\n  content: "\\f294";\n}\n.fa-percent:before {\n  content: "\\f295";\n}\n.fa-gitlab:before {\n  content: "\\f296";\n}\n.fa-wpbeginner:before {\n  content: "\\f297";\n}\n.fa-wpforms:before {\n  content: "\\f298";\n}\n.fa-envira:before {\n  content: "\\f299";\n}\n.fa-universal-access:before {\n  content: "\\f29a";\n}\n.fa-wheelchair-alt:before {\n  content: "\\f29b";\n}\n.fa-question-circle-o:before {\n  content: "\\f29c";\n}\n.fa-blind:before {\n  content: "\\f29d";\n}\n.fa-audio-description:before {\n  content: "\\f29e";\n}\n.fa-volume-control-phone:before {\n  content: "\\f2a0";\n}\n.fa-braille:before {\n  content: "\\f2a1";\n}\n.fa-assistive-listening-systems:before {\n  content: "\\f2a2";\n}\n.fa-asl-interpreting:before,\n.fa-american-sign-language-interpreting:before {\n  content: "\\f2a3";\n}\n.fa-deafness:before,\n.fa-hard-of-hearing:before,\n.fa-deaf:before {\n  content: "\\f2a4";\n}\n.fa-glide:before {\n  content: "\\f2a5";\n}\n.fa-glide-g:before {\n  content: "\\f2a6";\n}\n.fa-signing:before,\n.fa-sign-language:before {\n  content: "\\f2a7";\n}\n.fa-low-vision:before {\n  content: "\\f2a8";\n}\n.fa-viadeo:before {\n  content: "\\f2a9";\n}\n.fa-viadeo-square:before {\n  content: "\\f2aa";\n}\n.fa-snapchat:before {\n  content: "\\f2ab";\n}\n.fa-snapchat-ghost:before {\n  content: "\\f2ac";\n}\n.fa-snapchat-square:before {\n  content: "\\f2ad";\n}\n.fa-pied-piper:before {\n  content: "\\f2ae";\n}\n.fa-first-order:before {\n  content: "\\f2b0";\n}\n.fa-yoast:before {\n  content: "\\f2b1";\n}\n.fa-themeisle:before {\n  content: "\\f2b2";\n}\n.fa-google-plus-circle:before,\n.fa-google-plus-official:before {\n  content: "\\f2b3";\n}\n.fa-fa:before,\n.fa-font-awesome:before {\n  content: "\\f2b4";\n}\n.fa-handshake-o:before {\n  content: "\\f2b5";\n}\n.fa-envelope-open:before {\n  content: "\\f2b6";\n}\n.fa-envelope-open-o:before {\n  content: "\\f2b7";\n}\n.fa-linode:before {\n  content: "\\f2b8";\n}\n.fa-address-book:before {\n  content: "\\f2b9";\n}\n.fa-address-book-o:before {\n  content: "\\f2ba";\n}\n.fa-vcard:before,\n.fa-address-card:before {\n  content: "\\f2bb";\n}\n.fa-vcard-o:before,\n.fa-address-card-o:before {\n  content: "\\f2bc";\n}\n.fa-user-circle:before {\n  content: "\\f2bd";\n}\n.fa-user-circle-o:before {\n  content: "\\f2be";\n}\n.fa-user-o:before {\n  content: "\\f2c0";\n}\n.fa-id-badge:before {\n  content: "\\f2c1";\n}\n.fa-drivers-license:before,\n.fa-id-card:before {\n  content: "\\f2c2";\n}\n.fa-drivers-license-o:before,\n.fa-id-card-o:before {\n  content: "\\f2c3";\n}\n.fa-quora:before {\n  content: "\\f2c4";\n}\n.fa-free-code-camp:before {\n  content: "\\f2c5";\n}\n.fa-telegram:before {\n  content: "\\f2c6";\n}\n.fa-thermometer-4:before,\n.fa-thermometer:before,\n.fa-thermometer-full:before {\n  content: "\\f2c7";\n}\n.fa-thermometer-3:before,\n.fa-thermometer-three-quarters:before {\n  content: "\\f2c8";\n}\n.fa-thermometer-2:before,\n.fa-thermometer-half:before {\n  content: "\\f2c9";\n}\n.fa-thermometer-1:before,\n.fa-thermometer-quarter:before {\n  content: "\\f2ca";\n}\n.fa-thermometer-0:before,\n.fa-thermometer-empty:before {\n  content: "\\f2cb";\n}\n.fa-shower:before {\n  content: "\\f2cc";\n}\n.fa-bathtub:before,\n.fa-s15:before,\n.fa-bath:before {\n  content: "\\f2cd";\n}\n.fa-podcast:before {\n  content: "\\f2ce";\n}\n.fa-window-maximize:before {\n  content: "\\f2d0";\n}\n.fa-window-minimize:before {\n  content: "\\f2d1";\n}\n.fa-window-restore:before {\n  content: "\\f2d2";\n}\n.fa-times-rectangle:before,\n.fa-window-close:before {\n  content: "\\f2d3";\n}\n.fa-times-rectangle-o:before,\n.fa-window-close-o:before {\n  content: "\\f2d4";\n}\n.fa-bandcamp:before {\n  content: "\\f2d5";\n}\n.fa-grav:before {\n  content: "\\f2d6";\n}\n.fa-etsy:before {\n  content: "\\f2d7";\n}\n.fa-imdb:before {\n  content: "\\f2d8";\n}\n.fa-ravelry:before {\n  content: "\\f2d9";\n}\n.fa-eercast:before {\n  content: "\\f2da";\n}\n.fa-microchip:before {\n  content: "\\f2db";\n}\n.fa-snowflake-o:before {\n  content: "\\f2dc";\n}\n.fa-superpowers:before {\n  content: "\\f2dd";\n}\n.fa-wpexplorer:before {\n  content: "\\f2de";\n}\n.fa-meetup:before {\n  content: "\\f2e0";\n}\n'},3082:function(e,t,n){e.exports=n.p+"MapStore2/web/client/components/mapcontrols/annotations/img/markers_default.png"},3083:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAQCAYAAACcN8ZaAAAB3klEQVR42s3U4UdDURzG8czMXJnJ1Vwzc6VJZjaZJdlMlpQsKdmUFNOUspRSSqUolfQfr+fF98Vx5mwv9qbDx7LdznnO7/7Omej3+/+Ga0QMUYkhbvBgmhzCQxwxibIGrGEF8CQhU+LLtKQkQNqScUgjxRxTBIxbgfgD/BgnhM8kM5KTeclLQYqGkkMRBckzR8ic/mAgd5BAZplsUaqyIg2sDtHg2brUZJk5SmwopErJUWE8SpmTMhNvya60Zd/SNrR4bkeaskG4uiwRZk6yrJEYFibGAxn+scECHTmTnuVCzvmty3PHciB7bGKN6lQkzysPqIrHmpFhYbKUtckC1/Ioz4ZHuZdbuSLYiRxRpSZVWXZVxAzC0R4Ik5SQsu6w8yd5l2/5kg95I9SdXMoZQfYIUjeqEUrgOkXGPeN4TYRhxy8E+ZUf+eS7B7miIoeybVSjKDnm8u3+gH3pDTYwu1igATvs/pXqvBKiR4i2bNJfi1ZfUAnjgrOG8wY2quNzBKuU/ZS+uSFEl5O0xRGuUIlZCcw7xG5QPkeHYUSNV5WXGou2sC3rBC0LjenqCXGO0WEiTJa0Lr4KixdHBrDGuGGiRqCUpFk8pGIpQtCU7p4YPwxYxEMCk1aAMQZh8Ac8PfbIzYPJOwAAAABJRU5ErkJggg=="},3084:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACv0lEQVRYw7WXy0vUURTHP3cgM3UUghrHF7bpRe56UNsWQr4giaht/Q0FEpXLoJLAiHb+DbVr0cJFiZmVYI30MghtJCh7aA/t2+Y3cLw4v9+dcbxw4cc97/s795zvcZS4hJqBvUAW2BEdLwBzwCuH+0Sll1Cz0KDQjJAS9pTQRaHtlTBcLzQk9CvAsL+/CQ0IbYmz4WKMdwD3gHaP9AcYA2ajq18FGoFW4BhQ7fFPAL0ON19K5N1RBDaip0Knhepj5GqFTgqNebKzQgdCjXcJrRjhz0JnhFwJATihU0ILRs+XRCeE9gl9NUIzQns2kEMtQpNG30ehlmLMaaF3hvlF3HWXmMhTRu8Toar1GG8apnmhtgo+43ahvNE/4DM0eU+tdxNqSb/Rv7imTghdNcTRQIV1QkeEDgvVBibmI2PngiXmDOFEgOE73o0tCw0nOSLUZ2Se2zJbOPwutDXhnY/HVL/xOCeEaoSWIt5/QhmEjhsF9xMiuBVQgocTdDwwvJ0pIGPoH2IEq4HzAelxLuFXWBu7UlFbLay4VrobqAlwoDpq18WWtdGQAhT4klwJr87F/gXT2FJA3hxkYgRfA8sBxn8DuRh6o/nOp7wraSseklsCRgIcGHG4HzH0tjW/I2oYtkJVxSRi2msu/p4USsfIbxP6afizBYKFWp0JzygtdHedQnRbqC4AZxRkpi1h0BAeBpbiWqFDQgeFagJlRo2dyz7otBF1b0Iz6vVuLOszDBmGuQq349aoxRf0Xy8GHN5vAiCpE3pm9L4tmqhC+z1IltsgJGsWmvCgekeSUI/QqgdKz5YBSvs9FLQi1BWqoCcGljcEwPLHnuxiMZxRzmDy1wwmeeCfGUyOrjOYvAH6HO5luYj2Rpmj2ZLQtRC4FuJIk9AVoenA4fSSUKbSLbbgTDbq903Azqi9FsbzXKnj+X/nN6jncxNcZgAAAABJRU5ErkJggg=="},3106:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII="},3107:function(e,t,n){var r=n(3108);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3108:function(e,t,n){(e.exports=n(759)()).push([e.i,'.msgapi .ol-popup {\n    position: absolute;\n    text-align: center;\n    font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n    -ms-transform: translate(-50%,-100%); /* IE 9 */\n    -webkit-transform: translate(-50%,-100%); /* Safari */\n    transform: translate(-50%,-100%);\n}\n.msgapi a.ol-popup-close-btn {\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 4px 4px 0 0;\n  text-align: center;\n  width: 18px;\n  height: 14px;\n  font: 16px/14px Tahoma, Verdana, sans-serif;\n  color: #c3c3c3;\n  text-decoration: none;\n  font-weight: bold;\n  background: transparent;\n}\n.msgapi .ol-popup-cnt-wrapper {\n  padding: 1px;\n  text-align: left;\n  border-radius: 12px;\n}\n.msgapi .ol-popup-cnt-wrapper, .msgapi .ol-popup-tip {\n  background: white;\n  box-shadow: 0 3px 14px rgba(0,0,0,0.4);\n}\n.msgapi .ol-popup-cnt {\n  margin: 13px 19px;\n  line-height: 1.4;\n   white-space: nowrap;\n\n}\n.msgapi .ol-popup-tip-wrapper {\n  margin: 0 auto;\n  width: 40px;\n  height: 20px;\n  position: relative;\n  overflow: hidden;\n\n}\n.msgapi .ol-popup-tip {\n  width: 17px;\n  height: 17px;\n  padding: 1px;\n  margin: -10px auto 0;\n  -webkit-transform: rotate(45deg);\n  -moz-transform: rotate(45deg);\n  -ms-transform: rotate(45deg);\n  -o-transform: rotate(45deg);\n  transform: rotate(45deg);\n}\n',""])},3117:function(e,t,n){var r=n(3118);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3118:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi .ol-custom-overviewmap,\n       .msgapi .ol-custom-overviewmap.ol-uncollapsible {\n          bottom: 20px;\n          left: auto;\n          right: 10px;\n          top: auto;\n\n      }\n      .msgapi .ol-custom-overviewmap:not(.ol-collapsed)  {\n\n           box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n           border-radius: 1px;\n           transition: all .2s;\n      }\n      .msgapi .ol-custom-overviewmap .ol-overviewmap-map {\n          border: none;\n          width: 300px;\n          height: 150px;\n\n      }\n\n      .msgapi .ol-custom-overviewmap .ol-overviewmap-box {\n          border: 1px solid black;\n          cursor: pointer;\n          border-radius: 5px;\n      }\n\n      .msgapi .ol-custom-overviewmap:not(.ol-collapsed) button{\n          bottom: auto;\n          left: auto;\n          right: 2px;\n          bottom: 2px;\n      }\n\n      .msgapi .ol-rotate {\n          top: 170px;\n          right: 0;\n      }\n      .msgapi .ol-overview-dargbox{\n           border: 1px solid black;\n           background-color: rgba(125,125,0,.5);\n           border-radius: 5px;\n      }\n",""])},3125:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(2351),l=n(2147),c=n(2452),u=n(2341),p=n(2297),f=n(2208);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?S(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(){var e,n;g(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return O(S(n=h(this,(e=v(t)).call.apply(e,[this].concat(o)))),"getLayer",(function(){var e;return n.props.map.getLayers().forEach((function(t){n.layersFilter(t)&&(e=t)}),S(n)),e})),O(S(n),"setSelectInteraction",(function(){n._selectInteraction.getActive()||n._selectInteraction.setActive(!0)})),O(S(n),"createSelectInteraction",(function(){n.createStyle(),n._selectInteraction=new s.a({layers:n.layersFilter,style:n._style,toggleCondition:l.i}),n._selectInteraction.on("select",n.selectionChange,S(n)),n.props.map.addInteraction(n._selectInteraction)})),O(S(n),"selectionChange",(function(){var e=[];n._selectInteraction.getFeatures().forEach((function(t){e.push(t.getId())})),n.props.updateHighlighted(e,"")})),O(S(n),"cleanSupport",(function(){n._selectInteraction&&n._selectInteraction.getActive()&&(n._selectInteraction.getFeatures().clear(),n.props.updateHighlighted([],""),n._selectInteraction.setActive(!1))})),O(S(n),"layersFilter",(function(e){return n.props.layer&&e.get("msId")===n.props.layer})),O(S(n),"createStyle",(function(){var e=n.props.selectedStyle,t={stroke:new c.default(e.stroke?e.stroke:{color:"blue",width:1}),fill:new u.default(e.fill?e.fill:{color:"blue"})};"Point"===e.type&&(t={image:new f.default(y({},t,{radius:e.radius||5}))}),n._style=new p.default(t)})),O(S(n),"highlightFeatures",(function(e){var t=n.getLayer(),r=n._selectInteraction.getFeatures();(r.clear(),t)&&t.getSource().getFeatures().map((function(t){-1!==e.indexOf(t.getId())&&r.push(t)}),S(n))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.createSelectInteraction(),"enabled"===this.props.status?this._selectInteraction.setActive(!0):this._selectInteraction.setActive(!1),this.props.features&&this.highlightFeatures(this.props.features)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props;return e.status!==t.status||e.layer!==t.layer||"update"===e.status&&e.features.toString()!==t.features.toString()}},{key:"UNSAFE_componentWillUpdate",value:function(e){switch(e.status){case"enabled":this.setSelectInteraction(e);break;case"disabled":this.cleanSupport();break;case"update":this.highlightFeatures(e.features);break;default:return}}},{key:"componentWillUnmount",value:function(){this._selectInteraction&&(this.cleanSupport(),this._selectInteraction.un("select",this.selectionChange,this),this.props.map.removeInteraction(this._selectInteraction),this._selectInteraction=null,this._style=null)}},{key:"render",value:function(){return null}}])&&b(n.prototype,r),o&&b(n,o),t}(i.a.Component);O(w,"propTypes",{map:o.a.object,layer:o.a.string.isRequired,status:o.a.oneOf(["disabled","enabled","update"]),updateHighlighted:o.a.func,selectedStyle:o.a.object,features:o.a.array}),O(w,"contextTypes",{messages:o.a.object}),O(w,"defaultProps",{status:"disabled",updateHighlighted:function(){},selectedStyle:{type:"Point",radius:12,stroke:{width:4,color:"yellow"},fill:{color:"red"}}})},3126:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(2223),l=n(2191),c=n(2297),u=n(2341),p=n(2452),f=n(2208),d=n(2299),m=n(2291);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?S(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(){var e,n;g(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return O(S(n=h(this,(e=v(t)).call.apply(e,[this].concat(o)))),"addDrawInteraction",(function(e){n.drawInteraction&&n.removeDrawInteraction();var t=new s.a,r=new l.a({source:t,zIndex:1e6,style:new c.default({fill:new u.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new p.default({color:"#ffcc33",width:2}),image:new f.default({radius:7,fill:new u.default({color:"#ffcc33"})})})});n.props.map.addLayer(r);var o=new d.a({source:t,type:e.selection.geomType,style:new c.default({fill:new u.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new p.default({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new f.default({radius:5,stroke:new p.default({color:"rgba(0, 0, 0, 0.7)"}),fill:new u.default({color:"rgba(255, 255, 255, 0.2)"})})})});o.on("drawstart",(function(e){n.sketchFeature=e.feature,t.clear()})),o.on("drawend",(function(){n.updateSelectionState()})),n.props.map.addInteraction(o),n.drawInteraction=o,n.selectionLayer=r,n.setDoubleClickZoomEnabled(!1)})),O(S(n),"removeDrawInteraction",(function(){null!==n.drawInteraction&&(n.props.map.removeInteraction(n.drawInteraction),n.drawInteraction=null,n.props.map.removeLayer(n.selectionLayer),n.sketchFeature=null,setTimeout((function(){return n.setDoubleClickZoomEnabled(!0)}),251))})),O(S(n),"updateSelectionState",(function(){if(n.sketchFeature){var e=n.sketchFeature.getGeometry().getCoordinates(),t={geomType:n.props.selection.geomType,point:"Point"===n.props.selection.geomType?[e[0],e[1]]:null,line:"LineString"===n.props.selection.geomType?e.map((function(e){return[e[0],e[1]]})):null,polygon:"Polygon"===n.props.selection.geomType?n.sketchFeature.getGeometry().getLinearRing(0).getCoordinates().map((function(e){return[e[0],e[1]]})):null};n.props.changeSelectionState(t)}})),O(S(n),"setDoubleClickZoomEnabled",(function(e){for(var t=n.props.map.getInteractions(),r=0;r<t.getLength();r++){var o=t.item(r);if(o instanceof m.a){o.setActive(e);break}}})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.selection.geomType&&e.selection.geomType!==this.props.selection.geomType&&this.addDrawInteraction(e),e.selection.geomType||this.removeDrawInteraction()}},{key:"render",value:function(){return null}}])&&b(n.prototype,r),o&&b(n,o),t}(i.a.Component);O(w,"propTypes",{map:o.a.object,projection:o.a.string,selection:o.a.object,changeSelectionState:o.a.func}),O(w,"defaultProps",{selection:{}})},3127:function(e,t,n){var r=n(766),o=n(2170);r.registerType("bing",(function(e){var t=e.apiKey;return new o.BingMapsImageryProvider({url:"//dev.virtualearth.net",key:t,mapStyle:o.BingMapsStyle[e.name.toUpperCase()]})}))},3128:function(e,t,n){var r=n(766),o=n(2170);r.registerType("osm",(function(){return o.createOpenStreetMapImageryProvider({url:"//a.tile.openstreetmap.org/"})}))},3129:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=n(766),a=n(2170),i=n(2465),s=n(47),l=n(2352);function c(e){this.proxy=e}function u(){}c.prototype.getURL=function(e){var t=function(e){var t=e,n="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),n=e.substring(e.indexOf("?")+1)),{url:t,queryString:n}}(e),n=t.url,r=t.queryString;return 0===n.indexOf("//")&&(n=location.protocol+n),l.getProxyUrl()+encodeURIComponent(n+r)},u.prototype.getURL=function(e){return e},o.registerType("tileprovider",(function(e){var t,n=r(i.getLayerConfig(e.provider,e),2),o=n[0],p=n[1],f=s.getProxyUrl({});f&&(t=p.noCors||l.needProxy(o));var d,m,y=p.credits,g=y?new a.Credit(y.text,y.imageUrl,y.link):p.attribution;return new a.UrlTemplateImageryProvider({url:(d=o,m=p,d.replace(/(?!(\{?[zyxs]?\}))\{*([\w_]+)*\}/g,(function(){var e=arguments[0],t=arguments[1]?arguments[1]:arguments[2],n=m[t];if(void 0===n)throw new Error("No value provided for variable "+e);return"function"==typeof n&&(n=n(m)),n}))),enablePickFeatures:!1,subdomains:p.subdomains,maximumLevel:p.maxZoom,minimumLevel:p.minZoom,credit:g,proxy:t?new c(f):new u})}))},3130:function(e,t){e.exports={OpenStreetMap:{url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,credits:{text:"© OpenStreetMap, Open Street Map and contributors, CC-BY-SA",link:"http://www.openstreetmap.org/copyright"},attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",options:{maxZoom:18,maxNativeZoom:18}},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18,maxNativeZoom:18}},France:{url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}}}},OpenSeaMap:{url:"http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors',credits:{text:"Map data: © OpenSeaMap contributors",link:"http://www.openseamap.org"}}},OpenTopoMap:{url:"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{noCors:!0,maxZoom:16,maxNativeZoom:16,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',credits:{text:"Map data: OpenStreetMap contributors CC-BY-SA",link:"https://opentopomap.org"}}},Thunderforest:{url:"//{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, {attribution.OpenStreetMap}',credits:{text:"Map data: OpenCycleMap contributors",link:"http://www.opencyclemap.org"},variant:"cycle"},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport",maxZoom:19,maxNativeZoom:19}},TransportDark:{options:{variant:"transport-dark",maxZoom:19,maxNativeZoom:19}},Landscape:"landscape",Outdoors:"outdoors"}},OpenMapSurfer:{url:"http://openmapsurfer.uni-hd.de/tiles/{variant}/x={x}&y={y}&z={z}",options:{maxZoom:20,maxNativeZoom:20,variant:"roads",credits:{text:"MapQuest, Open Street Map and contributors, CC-BY-SA"},attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Roads:"roads",AdminBounds:{options:{variant:"adminb",maxZoom:19,maxNativeZoom:19}},Grayscale:{options:{variant:"roadsg",maxZoom:19,maxNativeZoom:19}}}},Hydda:{url:"http://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{maxNativeZoom:18,variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}",options:{maxNativeZoom:18,type:"map",ext:"jpg",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:["1","2","3","4"]},variants:{OSM:{},Aerial:{options:{type:"sat",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}},HybridOverlay:{options:{type:"hyb",ext:"png",opacity:.9}}}},MapBox:{url:"//api.tiles.mapbox.com/v4/{source}/{z}/{x}/{y}.png?access_token={accessToken}",options:{maxNativeZoom:18,attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:["a","b","c","d"]}},MapBoxStyle:{url:"https://api.mapbox.com/styles/v1/mapbox/{source}/tiles/{z}/{x}/{y}?access_token={accessToken}",options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a>',subdomains:["a","b","c","d"]}},Stamen:{url:"//stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',credits:{text:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under CC BY SA"},subdomains:["a","b","c","d"],minZoom:0,maxZoom:20,maxNativeZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{options:{variant:"watercolor",minZoom:1,maxZoom:16,maxNativeZoom:16}},Terrain:{options:{variant:"terrain",minZoom:4,maxZoom:18,maxNativeZoom:18,bounds:[[22,-132],[70,-56]]}},TerrainBackground:{options:{variant:"terrain-background",minZoom:4,maxZoom:18,maxNativeZoom:18,bounds:[[22,-132],[70,-56]]}},TopOSMRelief:{options:{variant:"toposm-color-relief",ext:"jpg",bounds:[[22,-132],[51,-56]]}},TopOSMFeatures:{options:{variant:"toposm-features",bounds:[[22,-132],[51,-56]],opacity:.9}}}},Esri:{url:"//server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{maxNativeZoom:18,variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,maxNativeZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,maxNativeZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,maxNativeZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,maxNativeZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"//{s}.{base}.maps.cit.api.here.com/maptile/2.1/maptile/{mapID}/{variant}/{z}/{x}/{y}/256/png8?app_id={app_id}&app_code={app_code}",options:{attribution:'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',subdomains:["1","2","3","4"],mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,maxNativeZoom:20},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},Acetate:{url:"http://a{s}.acetate.geoiq.com/tiles/{variant}/{z}/{x}/{y}.png",options:{attribution:"&copy;2012 Esri & Stamen, Data from OSM and Natural Earth",subdomains:["0","1","2","3"],minZoom:2,maxZoom:18,maxNativeZoom:18,variant:"acetate-base"},variants:{basemap:"acetate-base",terrain:"terrain",all:"acetate-hillshading",foreground:"acetate-fg",roads:"acetate-roads",labels:"acetate-labels",hillshading:"hillshading"}},FreeMapSK:{url:"http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,maxNativeZoom:16,subdomains:["1","2","3","4"],bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"//{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:["a","b","c","d"],maxZoom:19,maxNativeZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels"}},HikeBike:{url:"http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,maxNativeZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"//maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,maxNativeZoom:19,attribution:'Datenquelle: <a href="https://www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:"geolandbasemap",grau:"bmapgrau",overlay:"bmapoverlay",highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{variant:"bmaporthofoto30cm",format:"jpeg"}}}},NASAGIBS:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}9/{z}/{y}/{x}.{format}",options:{attribution:'<span>Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.</span>',credits:{text:"Black Marble imagery courtesy NASA Earth Observatory"},bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,maxNativeZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}8/{z}/{y}/{x}.{format}",options:{variant:"VIIRS_CityLights_2012",maxZoom:8,maxNativeZoom:8}},ModisTerraLSTDay:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}7/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,maxNativeZoom:7,opacity:.75}},ModisTerraSnowCover:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}8/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,maxNativeZoom:8,opacity:.75}},ModisTerraAOD:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}6/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,maxNativeZoom:6,opacity:.75}},ModisTerraChlorophyll:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}7/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,maxNativeZoom:7,opacity:.75}}}},NLS:{url:"//nls-{s}.tileserver.com/{variant}/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,maxNativeZoom:18,subdomains:["0","1","2","3"]},variants:{OS_1900:"NLS_API",OS_1920:"nls",OS_opendata:{url:"http://geo.nls.uk/maps/opendata/{z}/{x}/{y}.png",options:{maxZoom:16,maxNativeZoom:16}},OS_6inch_1st:{url:"http://geo.nls.uk/maps/os/six_inch/{z}/{x}/{y}.png",options:{tms:!0,minZoom:6,maxZoom:16,maxNativeZoom:16,bounds:[[49.86261,-8.66444],[60.89421,1.7785]]}},OS_6inch:"os_6_inch_gb",OS_25k:"25k",OS_npe:{url:"http://geo.nls.uk/maps/os/newpopular/{z}/{x}/{y}.png",options:{tms:!0,minZoom:3,maxZoom:15,maxNativeZoom:15}},OS_7th:"os7gb",OS_London:{options:{variant:"London_1056",minZoom:9,maxNativeZoom:9,bounds:[[51.177621,-.708618],[51.618016,.355682]]}},GSGS_Ireland:{url:"http://geo.nls.uk/maps/ireland/gsgs4136/{z}/{x}/{y}.png",options:{tms:!0,minZoom:5,maxZoom:15,maxNativeZoom:15,bounds:[[51.37178,-10.810546],[55.422779,-5.262451]]}}}},LINZ:{url:"http://tiles-{s}.data-cdn.linz.govt.nz/services;key={linzAPIkey}/tiles/v4/{variant}/{tilematrixset}/{z}/{x}/{y}.png",options:{attribution:'<a href="https://www.linz.govt.nz/data/licensing-and-using-data/attributing-elevation-or-aerial-imagery-data">Sourced from LINZ. CC-BY 4.0</a>',subdomains:["a","b","c","d"],linzAPIkey:"<insert your LINZ API Key here>",variant:"set=4702",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22},variants:{nz_aerial_imagery:{options:{attribution:'<a href="https://www.linz.govt.nz/data/licensing-and-using-data/attributing-elevation-or-aerial-imagery-data">Sourced from LINZ. CC-BY 4.0</a>',variant:"set=4702",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo50_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=50767",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo50_gridless_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=52343",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo250_gridless_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=52324",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo250_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=50798",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_parcel_boundaries_wireframe:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"set=4769",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}}}},PDOK:{url:"https://geodata.nationaalgeoregister.nl/tiles/service/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{attribution:'<a href="https://www.pdok.nl/introductie?articleid=1949876">BRT Achtergrondkaart</a> by <a href="https://www.kadaster.nl/">Kadaster</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>',format:"png",bounds:[[48.0405018704,-1.65729160235],[56.1105896442,12.4317272654]],minZoom:6,maxZoom:19,maxNativeZoom:19},variants:{brtachtergrondkaart:"brtachtergrondkaart",brtachtergrondkaartgrijs:"brtachtergrondkaartgrijs",brtachtergrondkaartpastel:"brtachtergrondkaartpastel",brtachtergrondkaartwater:"brtachtergrondkaartwater",luchtfotoRGB:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{variant:"Actueel_ortho25",attribution:'<a href="https://www.pdok.nl/introductie?articleid=1954278">Luchtfoto Actueel Ortho 25cm RGB</a> by <a href="http://www.beeldmateriaal.nl">Beeldmateriaal.nl</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>'}},luchtfotoIR:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{variant:"Actueel_ortho25IR",attribution:'<a href="https://www.pdok.nl/introductie?articleid=1954278">Luchtfoto Actueel Ortho 25cm Infrarood</a> by <a href="http://www.beeldmateriaal.nl">Beeldmateriaal.nl</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>'}}}}}},3131:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(766),s=n(2170),l=n(3132)(s),c=n(47),u=n(2352),p=n(26),f=n(13).isArray,d=n(3133),m=n(137),y=m.getAuthenticationParam,g=m.getURLs,b=n(414).optionsToVendorParams,h=n(197),v=n(2230).isVectorFormat;function S(e){var t=e,n="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),n=e.substring(e.indexOf("?")+1)),{url:t,queryString:n}}function E(e){this.proxy=e}function O(){}function w(e){return Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&")}E.prototype.getURL=function(e){var t=S(e),n=t.url,r=t.queryString;return u.getProxyUrl()+encodeURIComponent(n+r)},O.prototype.getURL=function(e){var t=S(e);return t.url+t.queryString};var T=function e(t){var n;return t.useForElevation?new l(function(e){var t,n=c.getProxyUrl({}),r=e.url;return n&&(t=u.needProxy(e.url)&&n)&&(r=t+encodeURIComponent(r)),p({url:r,layerName:e.name})}(t)):((n=t.singleTile?new s.SingleTileImageryProvider(function(e){var t=void 0!==e.opacity?e.opacity:1,n=b(e),r=p({styles:e.style||"",format:(v(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,opacity:t,tiled:void 0===e.tiled||e.tiled,layers:e.name,width:e.size||2e3,height:e.size||2e3,bbox:"-180.0,-90,180.0,90",srs:"EPSG:4326"},n||{},y(e));return{url:(f(e.url)?e.url[Math.round(Math.random()*(e.url.length-1))]:e.url)+"?service=WMS&version=1.1.0&request=GetMap&"+w(h.addAuthenticationToSLD(r,e))}}(t)):new s.WebMapServiceImageryProvider(function(e){var t,n=void 0!==e.opacity?e.opacity:1,r=b(e),o=c.getProxyUrl({});o&&(t=u.needProxy(e.url)&&o);var a=e.credits,i=a?new s.Credit(a.text||a.title,a.imageUrl,a.link):e.attribution;return p({url:"{s}",credit:i,subdomains:g(f(e.url)?e.url:[e.url]),proxy:t&&new E(t)||new O,layers:e.name,enablePickFeatures:!1,parameters:p({styles:e.style||"",format:(v(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,opacity:n,tiled:void 0===e.tiled||e.tiled},p({},e._v_?{_v_:e._v_}:{},r||{},y(e)))})}(t))).updateParams=function(n){var r=p({},t,{params:p({},t.params||{},n)});return e(r)},n)};i.registerType("wms",{create:T,update:function(e,t,n){var r=t&&t.params,a=n&&n.params,i=o({},r,{},a);return Object.keys(o({},t,{},n,{},i)).filter((function(e){return d.PARAM_OPTIONS.indexOf(e.toLowerCase())>=0})).filter((function(e){return(void 0===n[e]?a&&a[e]:n[e])!==(void 0===t[e]?r&&r[e]:t[e])})).length>0||t.securityToken!==n.securityToken?T(t):null}})},3132:function(e,t){e.exports=function(e){var t={};t.CRS=[{name:"CRS:84",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:e.GeographicTilingScheme,supportedCRS:"urn:ogc:def:crs:OGC:2:84"},{name:"EPSG:4326",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!0,tilingScheme:e.GeographicTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::4326"},{name:"EPSG:3857",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:e.WebMercatorTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"},{name:"OSGEO:41001",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:e.WebMercatorTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"}],t.FormatImage=[{format:"image/png",extension:"png"},{format:"image/jpeg",extension:"jpg"},{format:"image/jpeg",extension:"jpeg"},{format:"image/gif",extension:"gif"},{format:"image/png; mode=8bit",extension:"png"}],t.FormatArray=[{format:"image/bil",postProcessArray:function(e,t,n,r,o){var a,i=new DataView(e),s=new ArrayBuffer(t.height*t.width*2),l=new DataView(s);if(s.byteLength===e.byteLength){for(var c,u=0;u<s.byteLength;u+=2)(c=i.getInt16(u,!1)-o)>r&&c<n?(l.setInt16(u,c,!0),c):l.setInt16(u,0,!0);a=new Int16Array(s)}return a}}],t.WMSParser={},t.TMSParser={},t.WMTSParser={},t.parser=function(n){var r;switch((n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT)).service){case"TMS":r=t.TMSParser.generate(n);break;case"WMTS":r=t.WMTSParser.generate(n);break;default:r=t.WMSParser.generate(n)}return r},t.WMSParser.generate=function(n){var r;if(n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT),e.defined(n.url)){var o=n.url,a=o.lastIndexOf("?");a>-1&&(o=o.substring(0,a));var i=o+"?SERVICE=WMS&REQUEST=GetCapabilities&tiled=true";e.defined(n.proxy)&&(i=n.proxy.getURL(i)),r=e.when(e.loadXML(i),(function(e){return t.WMSParser.getMetaDatafromXML(e,n)}))}else{if(!e.defined(n.xml))throw new e.DeveloperError("either description.url or description.xml are required.");r=t.WMSParser.getMetaDatafromXML(n.xml,n)}return r},t.WMSParser.getMetaDatafromXML=function(n,r){if(!(n instanceof XMLDocument))throw new e.DeveloperError("xml must be a XMLDocument");if(!e.defined(r.layerName))throw new e.DeveloperError("description.layerName is required.");var o={},a=r.layerName,i=(e.defaultValue(r.maxLevel,11),void 0);o.heightMapWidth=e.defaultValue(r.heightMapWidth,65),o.heightMapHeight=e.defaultValue(r.heightMapHeight,o.heightMapWidth);var s={width:65,height:65},l=void 0;o.formatImage=r.formatImage,o.formatArray=r.formatArray,o.tilingScheme=void 0;var c=void 0,u=void 0;o.ready=!1,o.levelZeroMaximumGeometricError=void 0,o.waterMask=e.defaultValue(r.waterMask,!1),"boolean"!=typeof o.waterMask&&(o.waterMask=!1),o.offset=e.defaultValue(r.offset,0),o.highest=e.defaultValue(r.highest,12e3),o.lowest=e.defaultValue(r.lowest,-500);var p=r.styleName;o.hasStyledImage=e.defaultValue(r.hasStyledImage,"string"==typeof r.styleName);var f=n.querySelector("[version]");null!==f&&(i=f.getAttribute("version"),u=/^1\.[3-9]\./.test(i));var d=n.querySelector("Request>GetMap OnlineResource").getAttribute("xlink:href"),m=d.indexOf("?");m>-1&&(d=d.substring(0,m)),e.defined(r.proxy)&&(d=r.proxy.getURL(d));var y=n.querySelectorAll("Request>GetMap>Format");if(!e.defined(o.formatImage))for(var g=0;g<y.length&&!e.defined(o.formatArray);g++){(b=t.FormatArray.filter((function(e){return e.format===y[g].textContent}))).length>0&&(o.formatArray=b[0])}e.defined(o.formatArray)&&"string"==typeof o.formatArray.format&&"function"==typeof o.formatArray.postProcessArray?o.formatArray.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}:o.formatArray=void 0;for(g=0;g<y.length&&!e.defined(o.formatImage);g++){var b;(b=t.FormatImage.filter((function(e){return e.format===y[g].textContent}))).length>0&&(o.formatImage=b[0])}e.defined(o.formatImage)&&"string"==typeof o.formatImage.format?o.formatImage.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:2,stride:4,elementMultiplier:256,isBigEndian:!0}:o.formatImage=void 0;for(var h,v=n.querySelectorAll("Layer[queryable='1'],Layer[queryable='true']"),S=0;S<v.length&&!e.defined(h);S++)if(v[S].querySelector("Name").textContent===a){var E=(h=v[S]).getAttribute("fixedHeight"),O=h.getAttribute("fixedWidth");e.defined(E)&&(E=parseInt(E),o.heightMapHeight=E>0&&E<o.heightMapHeight?E:o.heightMapHeight,s.height=E>0?E:s.height),e.defined(O)&&(O=parseInt(O),o.heightMapWidth=O>0&&O<o.heightMapWidth?O:o.heightMapWidth,s.width=O>0?O:s.width)}if(e.defined(h)&&e.defined(i)){for(var w=!1,T=0;T<t.CRS.length&&!w;T++){var A=t.CRS[T],P=A.name,C=h.querySelector("BoundingBox[SRS='"+P+"'],BoundingBox[CRS='"+P+"']");if(null!==C){var _,x,I,j;l=P,c=A.firstAxeIsLatitude,o.tilingScheme=new A.tilingScheme({ellipsoid:A.ellipsoid}),c&&u?(_=parseFloat(C.getAttribute("miny")),x=parseFloat(C.getAttribute("maxy")),I=parseFloat(C.getAttribute("minx")),j=parseFloat(C.getAttribute("maxx"))):(_=parseFloat(C.getAttribute("minx")),x=parseFloat(C.getAttribute("maxx")),I=parseFloat(C.getAttribute("miny")),j=parseFloat(C.getAttribute("maxy")));new e.Rectangle(_,I,x,j);o.getTileDataAvailable=function(e,t,n){return!0},w=!0}}if(e.defined(p)){for(var L=h.querySelectorAll("Style>Name"),R=!1,D=0;D<L.length&&!R;D++)p===L[D].textContent&&(R=!0);R||(p=void 0)}for(var N=n.querySelectorAll("VendorSpecificCapabilities>TileSet"),M=!1,k=0;k<N.length&&!M;k++){var G=null!==N[k].querySelector("BoundingBox[SRS='"+l+"'],BoundingBox[CRS='"+l+"']");N[k].querySelector("Layers").textContent===a&&G&&(s.width=parseInt(N[k].querySelector("Width").textContent),s.height=parseInt(N[k].querySelector("Height").textContent),M=!0)}o.ready=w&&(e.defined(o.formatImage)||e.defined(o.formatArray))&&e.defined(i)}if(o.ready){var F=d+"?SERVICE=WMS&REQUEST=GetMap&layers="+a+"&version="+i+"&bbox=";if(F+=u&&c?"{south},{west},{north},{east}":"{west},{south},{east},{north}",F+="&crs="+l+"&srs="+l,o.formatImage){var U=F+"&format="+o.formatImage.format+"&width="+s.width+"&height="+s.height;e.defined(p)&&(U+="&styles="+p+"&style="+p),o.URLtemplateImage=function(){return U},o.imageSize=s}if(o.formatArray){var B=F+"&format="+o.formatArray.format+"&width="+o.heightMapWidth+"&height="+o.heightMapHeight;o.URLtemplateArray=function(){return B}}}return o},t.TMSParser.generate=function(n){var r;if(n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT),e.defined(n.url))r=e.loadXML(n.url).then((function(e){return t.TMSParser.parseXML(e,n)}));else{if(!e.defined(n.xml))throw new e.DeveloperError("either description.url or description.xml are required.");r=t.TMSParser.parseXML(n.xml,n)}return r},t.TMSParser.parseXML=function(n,r){if(!(n instanceof XMLDocument))throw new e.DeveloperError("xml must be a XMLDocument");var o;if(null!=n.querySelector("TileMapService")){if(!e.defined(r.layerName))throw new e.DeveloperError("layerName is required.");var a=[].slice.apply(n.querySelectorAll("TileMap[title='"+r.layerName+"']")).map((function(n){var o=n.getAttribute("href");return e.defined(r.proxy)&&(o=r.proxy.getURL(o)),e.when(e.loadXML(o),(function(e){return t.TMSParser.getMetaDatafromXML(e,r)}))}));o=e.when.all(a).then((function(t){for(var n,r=0;r<t.length&&!e.defined(n);r++)e.defined(t[r])&&(n=t[r]);return n})).then((function(e){return e}))}else o=t.TMSParser.getMetaDatafromXML(n,r);return o},t.TMSParser.getMetaDatafromXML=function(n,r){var o={ready:!1};o.heightMapWidth=e.defaultValue(r.heightMapWidth,65),o.heightMapHeight=e.defaultValue(r.heightMapHeight,o.heightMapWidth);var a=e.defaultValue(r.maxLevel,11),i=r.proxy;o.hasStyledImage=e.defaultValue(r.hasStyledImage,"string"==typeof r.styleName),o.waterMask=e.defaultValue(r.waterMask,!1),"boolean"!=typeof o.waterMask&&(o.waterMask=!1),o.offset=e.defaultValue(r.offset,0),o.highest=e.defaultValue(r.highest,12e3),o.lowest=e.defaultValue(r.lowest,-500);var s=n.querySelector("SRS").textContent,l=t.CRS.filter((function(e){return e.name===s}));l.length>0&&(o.tilingScheme=new l[0].tilingScheme({ellipsoid:l[0].ellipsoid}));var c=n.querySelector("TileFormat"),u=t.FormatImage.filter((function(e){return e.extension==c.getAttribute("extension")}));u.length>0&&(o.formatImage=u[0],o.imageSize={},o.imageSize.width=parseInt(c.getAttribute("width")),o.imageSize.height=parseInt(c.getAttribute("height")));var p=[].slice.call(n.querySelectorAll("TileSets>TileSet")),f=[];if(e.defined(o.formatImage)&&((f=p.map((function(t){var n=t.getAttribute("href")+"/{x}/{tmsY}."+o.formatImage.extension;return e.defined(i)&&(n=i.getURL(n)),{url:n,level:parseInt(t.getAttribute("order"))}}))).sort((function(e,t){return e.level-t.level})),f.length>0&&(o.tileSets=f)),e.defined(o.tileSets)&&e.defined(o.formatImage)&&e.defined(o.tilingScheme)){o.URLtemplateImage=function(e,t,n){var r="";return n<f.length&&(r=f[n].url),r};var d=n.querySelector("BoundingBox"),m=parseFloat(d.getAttribute("miny")),y=parseFloat(d.getAttribute("maxy")),g=parseFloat(d.getAttribute("minx")),b=parseFloat(d.getAttribute("maxx")),h=new e.Rectangle(g,m,b,y);o.getTileDataAvailable=function(t,n,r){var i,s,l,c,u,p,d=o.tilingScheme.tileXYToNativeRectangle(t,n,r),m=(i=h,s=d,l=Math.max(i.west,s.west),c=Math.min(i.east,s.east),u=Math.max(i.south,s.south),p=Math.min(i.north,s.north),c<=l||u>=p?void 0:new e.Rectangle(l,u,c,p));return e.defined(m)&&r<a&&r<f.length},o.ready=!0}else o=void 0;return o},t.WMTSParser.generate=function(n){var r;if(n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT),e.defined(n.url)){var o=n.url,a=o.lastIndexOf("?");a>-1&&(o=o.substring(0,a));var i=o+"?REQUEST=GetCapabilities";e.defined(n.proxy)&&(i=n.proxy.getURL(i)),r=e.loadXML(i).then((function(e){return t.WMTSParser.getMetaDatafromXML(e,n)}))}else{if(!e.defined(n.xml))throw new e.DeveloperError("either description.url or description.xml are required.");r=t.WMTSParser.getMetaDatafromXML(n.xml,n)}return r},t.WMTSParser.getMetaDatafromXML=function(n,r){if(!(n instanceof XMLDocument))throw new e.DeveloperError("xml must be a XMLDocument");var o={},a=r.layerName;o.ready=!1,o.heightMapWidth=e.defaultValue(r.heightMapWidth,65),o.heightMapHeight=e.defaultValue(r.heightMapHeight,o.heightMapWidth);var i,s=e.defaultValue(r.maxLevel,12),l=r.proxy,c=r.styleName;o.hasStyledImage=e.defaultValue(r.hasStyledImage,"string"==typeof r.styleName),o.waterMask=e.defaultValue(r.waterMask,!1),"boolean"!=typeof o.waterMask&&(o.waterMask=!1),o.offset=e.defaultValue(r.offset,0),o.highest=e.defaultValue(r.highest,12e3),o.lowest=e.defaultValue(r.lowest,-500);for(var u,p,f,d=[],m=[].slice.call(n.querySelectorAll('Operation[name="GetTile"] HTTP Get')).map((function(e){var t,n=e.querySelector("Value").textContent;return"KVP"===n&&(t={node:e,type:"KVP"}),"RESTful"===n&&(t={node:e,type:"RESTful"}),t})).filter((function(t){return e.defined(t)})),y=0;y<m.length;y++){var g=m[y];"RESTful"!==g.type||e.defined(p)||(p=g.node.getAttribute("xlink:href"),e.defined(l)&&(p=l.getURL(p))),"KVP"!==g.type||e.defined(u)||(u=g.node.getAttribute("xlink:href"),e.defined(l)&&(u=l.getURL(u)))}var b,h=n.querySelectorAll("Contents>Layer>Identifier");for(y=0;y<h.length&&!e.defined(b);y++)a===h[y].textContent&&(b=h[y].parentNode);if(e.defined(b)){var v,S,E=b.querySelectorAll("Style");for(y=0;y<E.length;y++){var O=E[y].querySelector("Identifier").textContent;null!=E[y].getAttribute("isDefault")&&(v=O),O===c&&(S=O)}e.defined(c)&&c==S||(c=e.defaultValue(v,""));for(var w=[].slice.call(b.querySelectorAll("Format")),T=0;T<t.FormatImage.length&&!e.defined(f);T++){w.filter((function(e){return e.textContent===t.FormatImage[T].format})).length>0&&(f=t.FormatImage[T])}d=b.querySelectorAll("TileMatrixSetLink")}for(var A=[].slice.call(n.querySelectorAll("TileMatrixSet>Identifier")),P=0;P<d.length&&!o.ready;P++){var C,_,x=d[P],I=x.querySelector("TileMatrixSet").textContent;for(y=0;y<A.length&&!e.defined(C);y++)A[y].textContent===I&&(C=A[y].parentNode);for(var j=C.querySelector("SupportedCRS").textContent,L=0;L<t.CRS.length&&!e.defined(_);L++)t.CRS[L].SupportedCRS===j&&(_=t.CRS[L]);if(e.defined(_)){var R,D=[].slice.call(C.querySelectorAll("TileMatrix"));(R=D.map((function(e){var t=e.querySelector("Identifier").textContent,n=parseInt(e.querySelector("MatrixWidth").textContent),r=parseInt(e.querySelector("MatrixHeight").textContent),o=parseInt(e.querySelector("TileWidth").textContent),a=parseInt(e.querySelector("TileHeight").textContent);return{id:t,maxWidth:n,maxHeight:r,scaleDenominator:parseFloat(e.querySelector("ScaleDenominator").textContent),complete:!1,tileWidth:o,tileHeight:a}}))).sort((function(e,t){return t.scaleDenominator-e.scaleDenominator})),listTileMatrixLimits=x.querySelectorAll("TileMatrixSetLimits>TileMatrixLimits");for(var N=0;N<R.length;N++)for(var M=R[N],k=0;k<listTileMatrixLimits.length;k++){var G=listTileMatrixLimits[k];M.id===G.querySelector("TileMatrix").textContent&&(M.minTileRow=parseInt(G.querySelector("MinTileRow").textContent),M.maxTileRow=parseInt(G.querySelector("MaxTileRow").textContent),M.minTileCol=parseInt(G.querySelector("MinTileCol").textContent),M.maxTileCol=parseInt(G.querySelector("MaxTileCol").textContent),M.complete=!0,R[N]=M)}if(R.length>0){o.tilingScheme=new _.tilingScheme({ellipsoid:_.ellipsoid,numberOfLevelZeroTilesX:R[0].maxWidth,numberOfLevelZeroTilesY:R[0].maxHeight});var F=b.querySelector("ResourceURL[format='"+f.format+"']");if(null!=F?i=F.getAttribute("template").replace("{TileRow}","{y}").replace("{TileCol}","{x}").replace("{Style}",c).replace("{TileMatrixSet}",I).replace("{layer}",a).replace("{infoFormatExtension}",f.extension):e.defined(u)&&(i=u+"service=WMTS&request=GetTile&version=1.0.0&layer="+a+"&style=&"+c+"format="+f.format+"&TileMatrixSet="+I+"&TileMatrix={TileMatrix}&TileRow={y}&TileCol={x}"),e.defined(i)){o.getTileDataAvailable=function(e,t,n){var r=!1;if(n<s&&n<R.length){var o=R[n];r=o.complete?t<=o.maxTileRow&&t>=o.minTileRow&&e<=o.maxTileCol&&e>=o.minTileCol:e<o.maxWidth&&t<o.maxHeight}return r},o.URLtemplateImage=function(e,t,n){var r="";if(o.getTileDataAvailable(e,t,n)){var a=R[n];r=i.replace("{TileMatrix}",a.id)}return r};var U={width:R[0].tileWidth,height:R[0].tileHeight};0==R.filter((function(e){return e.tileWidth!=U.width||e.tileHeight!=U.height})).length&&(o.imageSize=U),o.ready=!0}}}}return o};var n=function(n){if(!e.defined(n))throw new e.DeveloperError("description is required.");var o=new e.Event,a=n.credit;"string"==typeof a&&(a=new e.Credit(a)),this.ready=!1,e.defineProperties(this,{errorEvent:{get:function(){return o}},credit:{get:function(){return a}},hasVertexNormals:{get:function(){return!1}}}),r(t.parser(n),this)};function r(t,r){e.when(t,(function(t){e.defined(t)&&t.ready&&(t.levelZeroMaximumGeometricError=e.TerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap(t.tilingScheme.ellipsoid,t.heightMapWidth,t.tilingScheme.getNumberOfXTilesAtLevel(0)),e.defined(t.URLtemplateImage)&&(t.getHeightmapTerrainDataImage=function(i,s,l){var c;if(!isNaN(i+s+l)){var u=o(t.URLtemplateImage(i,s,l),i,s,l,r),p={highest:t.highest,lowest:t.lowest,offset:t.offset},f=a(i,s,l,r),d=e.throttleRequestByServer(u,e.loadImage);e.defined(d)&&(c=e.when(d,(function(e){return n.imageToHeightmapTerrainData(e,p,{width:t.heightMapWidth,height:t.heightMapHeight},t.waterMask,f,t.hasStyledImage)})).otherwise((function(){return new e.HeightmapTerrainData({buffer:new Uint16Array(t.heightMapWidth*t.heightMapHeight),width:t.heightMapWidth,height:t.heightMapHeight,childTileMask:f,waterMask:new Uint8Array(t.heightMapWidth*t.heightMapHeight),structure:t.formatImage.terrainDataStructure})})))}return c}),e.defined(t.URLtemplateArray)&&(t.getHeightmapTerrainDataArray=function(i,s,l){var c;if(!isNaN(i+s+l)){var u=o(t.URLtemplateArray(i,s,l),i,s,l,r),p={highest:t.highest,lowest:t.lowest,offset:t.offset},f=a(i,s,l,r),d=e.throttleRequestByServer(u,e.loadArrayBuffer);e.defined(d)&&(c=e.when(d,(function(e){return n.arrayToHeightmapTerrainData(e,p,{width:t.heightMapWidth,height:t.heightMapHeight},t.formatArray,t.waterMask,f)})).otherwise((function(){return e.defined(t.getHeightmapTerrainDataImage)?t.getHeightmapTerrainDataImage(i,s,l):new e.HeightmapTerrainData({buffer:new Uint16Array(t.heightMapWidth*t.heightMapHeight),width:t.heightMapWidth,height:t.heightMapHeight,childTileMask:f,waterMask:new Uint8Array(t.heightMapWidth*t.heightMapHeight),structure:t.formatImage.terrainDataStructure})})))}return c}),r.getLevelMaximumGeometricError=function(e){return t.levelZeroMaximumGeometricError/(1<<e)},r.requestTileGeometry=function(n,r,o){var a;return e.defined(t.getHeightmapTerrainDataArray)?a=t.getHeightmapTerrainDataArray(n,r,o):e.defined(t.getHeightmapTerrainDataImage)&&(a=t.getHeightmapTerrainDataImage(n,r,o)),a},e.defineProperties(r,{tilingScheme:{get:function(){return t.tilingScheme}},ready:{get:function(){return t.ready}},hasWaterMask:{get:function(){return t.waterMask}},heightMapHeight:{get:function(){return t.heightMapHeight}},heightMapWidth:{get:function(){return t.heightMapWidth}},getTileDataAvailable:{get:function(){return t.getTileDataAvailable}}}))}))}function o(e,t,n,r,o){var a=o.tilingScheme.tileXYToNativeRectangle(t,n,r),i=(a.east-a.west)/(o.heightMapWidth-1),s=(a.north-a.south)/(o.heightMapHeight-1);a.west-=.5*i,a.east+=.5*i,a.south-=.5*s,a.north+=.5*s;var l=o.tilingScheme.getNumberOfYTilesAtLevel(r)-n-1;return e.replace("{south}",a.south).replace("{north}",a.north).replace("{west}",a.west).replace("{east}",a.east).replace("{x}",t).replace("{y}",n).replace("{tmsY}",l)}function a(e,t,n,r){var o=0,a=n+1;return o|=r.getTileDataAvailable(2*e,2*t,a)?1:0,o|=r.getTileDataAvailable(2*e+1,2*t,a)?2:0,o|=r.getTileDataAvailable(2*e,2*t+1,a)?4:0,o|=r.getTileDataAvailable(2*e+1,2*t+1,a)?8:0}return n.arrayToHeightmapTerrainData=function(t,n,r,o,a,i){"number"==typeof r&&(r={width:r,height:r});var s=o.postProcessArray(t,r,n.highest,n.lowest,n.offset);if(!e.defined(s))throw new e.DeveloperError("no good size");var l={buffer:s,width:r.width,height:r.height,childTileMask:i,structure:o.terrainDataStructure};if(a){for(var c=new Uint8Array(s.length),u=0;u<s.length;u++)s[u]<=0&&(c[u]=255);l.waterMask=c}return new e.HeightmapTerrainData(l)},n.imageToHeightmapTerrainData=function(t,n,r,o,a,i){"number"==typeof r&&(r={width:r,height:r});for(var s=e.getImagePixels(t,r.width,r.height),l=new Uint8Array(s.length/4),c=new Int16Array(s.length/4),u=0,p=0,f=0;f<s.length;f+=4){var d=s[f],m=s[f+1],y=s[f+2]>128,g=(d<<8|m)-n.offset-32768;g>n.lowest&&g<n.highest&&(y||i)?(c[f/4]=g,p+=g,u++):c[f/4]=0==u?0:p/u}var b={buffer:c,width:r.width,height:r.height,childTileMask:a,structure:{heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}};if(o){for(l=new Uint8Array(heightBuffer.length),f=0;f<heightBuffer.length;f++)heightBuffer[f]<=0&&(l[f]=255);b.waterMask=l}return new e.HeightmapTerrainData(b)},n}},3133:function(e,t){e.exports={PARAM_OPTIONS:["layers","styles","style","format","transparent","version","tiled","opacity","zindex","srs","singletile","_v_","filterobj"]}},3134:function(e,t,n){"use strict";n.r(t);var r=n(766),o=n.n(r),a=n(47),i=n.n(a),s=n(2352),l=n.n(s),c=n(774),u=n.n(c),p=n(2170),f=n.n(p),d=n(137),m=n(26),y=n.n(m),g=n(13),b=n(55),h=n.n(b),v=n(2230);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=e,n="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),n=e.substring(e.indexOf("?")+1)),{url:t,queryString:n}}function T(e){this.proxy=e}function A(){}T.prototype.getURL=function(e){var t=w(e),n=t.url,r=t.queryString;return l.a.getProxyUrl()+encodeURIComponent(n+r)},A.prototype.getURL=function(e){var t=w(e);return t.url+t.queryString};var P=function(e){return e.indexOf("EPSG:4326")>=0?new f.a.GeographicTilingScheme:e.indexOf("EPSG:3857")>=0?new f.a.WebMercatorTilingScheme:null},C=function(e,t){var n=u.a.getTileMatrixSet(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds);return{tileMatrixSet:n,matrixIds:function(e,t){return e.length>t?Object(g.slice)(e,0,t):e.length<t?e.concat(new Array(t-e.length)):e}(e.matrixIds&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return(Object(g.isObject)(e)&&e[t]||Object(g.isArray)(e)&&e||[]).map((function(e){return e.identifier}))}(e.matrixIds,n)||function(e){for(var t=new Array(30),n=0;n<30;++n)t[n]=e.tileMatrixPrefix+n;return t}(e))}};function _(e){var t="EPSG:4326",n=C(e,t),r=n.tileMatrixSet,o=n.matrixIds;if(0===o.length){var a=C(e,t="EPSG:3857");r=a.tileMatrixSet,o=a.matrixIds}var s,c=i.a.getProxyUrl({});c&&(s=l.a.needProxy(e.url)&&c);var u,p=(u=e.matrixIds&&e.matrixIds[r],function(e,t,n){return u&&u[n]&&!u[n].ranges||e<=parseInt(Object(g.get)(u[n],"ranges.cols.max"),10)&&e>=parseInt(Object(g.get)(u[n],"ranges.cols.min"),10)&&t<=parseInt(Object(g.get)(u[n],"ranges.rows.max"),10)&&t>=parseInt(Object(g.get)(u[n],"ranges.rows.min"),10)}),f=h.a.format({query:E({},Object(d.getAuthenticationParam)(e))});return y()({url:Object(g.head)(Object(d.getURLs)(Object(g.isArray)(e.url)?e.url:[e.url],f)),format:(Object(v.isVectorFormat)(e.format)?"image/png":e.format)||"image/png",isValid:p,layer:e.name,style:e.style||"",tileMatrixLabels:o,tilingScheme:P(t,e.matrixIds[r]),proxy:s&&new T(s)||new A,enablePickFeatures:!1,tileWidth:e.tileWidth||e.tileSize||256,tileHeight:e.tileHeight||e.tileSize||256,tileMatrixSetID:r,maximumLevel:30,parameters:E({},Object(d.getAuthenticationParam)(e))})}var x=function e(t){var n,r=_(t),o=(n=new f.a.WebMapTileServiceImageryProvider(r)).requestImage;return n.requestImage=function(e,t,a){return r.isValid(e,t,a)?o.bind(n)(e,t,a):new Promise((function(){}))},n.updateParams=function(n){var r=y()({},t,{params:y()({},t.params||{},n)});return e(r)},n};o.a.registerType("wmts",{create:x,update:function(e,t,n){return t.securityToken!==n.securityToken||n.format!==t.format?x(t):null}})},3135:function(e,t,n){var r=n(766),o=n(2170),a=n(26),i=function(){var e=[o.Math.toRadians(.05),o.Math.toRadians(.1),o.Math.toRadians(.2),o.Math.toRadians(.5),o.Math.toRadians(1),o.Math.toRadians(2),o.Math.toRadians(5),o.Math.toRadians(10)];function t(e,t){var n=e||{};this._tilingScheme=n.tilingScheme||new o.GeographicTilingScheme,this._color=n.color&&new o.Color(n.color[0],n.color[1],n.color[2],n.color[3])||new o.Color(1,1,1,.4),this._tileWidth=n.tileWidth||256,this._tileHeight=n.tileHeight||256,this._ready=!0,this._sexagesimal=n.sexagesimal||!1,this._numLines=n.numLines||50,this._scene=t,this._labels=new o.LabelCollection,t.primitives.add(this._labels),this._polylines=new o.PolylineCollection,t.primitives.add(this._polylines),this._ellipsoid=t.globe.ellipsoid;var r=document.createElement("canvas");r.width=256,r.height=256,this._canvas=r}var n=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){return!1}}(),r=Object.defineProperties;function a(e){return e<.01?3:e<.1?2:e<1?1:0}return n&&r||(r=function(e){return e}),r(t.prototype,{url:{get:function(){}},proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),t.prototype.makeLabel=function(e,t,n,r){this._labels.add({position:this._ellipsoid.cartographicToCartesian(new o.Cartographic(e,t,10)),text:n,font:"normal",fillColor:this._color,outlineColor:this._color,style:o.LabelStyle.FILL,pixelOffset:new o.Cartesian2(5,r?5:-5),eyeOffset:o.Cartesian3.ZERO,horizontalOrigin:o.HorizontalOrigin.LEFT,verticalOrigin:r?o.VerticalOrigin.BOTTOM:o.VerticalOrigin.TOP,scale:1})},t.prototype._drawGrid=function(t){if(!this._currentExtent||!this._currentExtent.equals(t)){this._currentExtent=t,this._polylines.removeAll(),this._labels.removeAll();for(var n=0,r=0,i=0;i<e.length&&n<(t.north-t.south)/10;i++)n=e[i];for(var s=0;s<e.length&&r<(t.east-t.west)/10;s++)r=e[s];var l=(t.west<0?Math.ceil(t.west/r):Math.floor(t.west/r))*r,c=(t.south<0?Math.ceil(t.south/n):Math.floor(t.south/n))*n,u=(t.east<0?Math.ceil(t.east/n):Math.floor(t.east/n))*n,p=(t.north<0?Math.ceil(t.north/r):Math.floor(t.north/r))*r;l=Math.max(l-2*r,-Math.PI),u=Math.min(u+2*r,Math.PI),c=Math.max(c-2*n,-Math.PI/2),p=Math.min(p+2*r,Math.PI/2);for(var f=this._ellipsoid,d=o.Math.toRadians(1),m=c+Math.floor((p-c)/n/2)*n,y=l;y<u;y+=r){for(var g=[],b=c;b<p;b+=d)g.push(new o.Cartographic(y,b));g.push(new o.Cartographic(y,p)),this._polylines.add({positions:f.cartographicArrayToCartesianArray(g),width:.75,material:new o.Material({fabric:{type:"Color",uniforms:{color:this._color}}})});var h=o.Math.toDegrees(y);this.makeLabel(y,m,this._sexagesimal?this._decToSex(h):h.toFixed(a(r)),!1)}for(var v=l+Math.floor((u-l)/r/2)*r,S=c;S<p;S+=n){for(var E=[],O=l;O<u;O+=d)E.push(new o.Cartographic(O,S));E.push(new o.Cartographic(u,S)),this._polylines.add({positions:f.cartographicArrayToCartesianArray(E),width:1,material:new o.Material({fabric:{type:"Color",uniforms:{color:this._color}}})});var w=o.Math.toDegrees(S);this.makeLabel(v,S,this._sexagesimal?this._decToSex(w):w.toFixed(a(n)),!0)}}},t.prototype.requestImage=function(){return this._show&&this._drawGrid(this._getExtentView()),this._canvas},t.prototype.setVisible=function(e){this._show=e,e?(this._currentExtent=null,this._drawGrid(this._getExtentView())):(this._polylines.removeAll(),this._labels.removeAll())},t.prototype.isVisible=function(){return this._show},t.prototype._decToSex=function(t){var n=Math.floor(t),r=(60*(Math.abs(t)-n)).toFixed(2);return"60.00"===r&&(n+=1,e="0.00"),[n,":",r].join("")},t.prototype._getExtentView=function(){for(var e=this._scene.camera,t=this._scene.canvas,n=[e.pickEllipsoid(new o.Cartesian2(0,0),this._ellipsoid),e.pickEllipsoid(new o.Cartesian2(t.width,0),this._ellipsoid),e.pickEllipsoid(new o.Cartesian2(0,t.height),this._ellipsoid),e.pickEllipsoid(new o.Cartesian2(t.width,t.height),this._ellipsoid)],r=0;r<4;r++)if(void 0===n[r])return o.Rectangle.MAX_VALUE;return o.Rectangle.fromCartographicArray(this._ellipsoid.cartesianArrayToCartographicArray(n))},t.prototype.destroy=function(){this._show=!1,this._polylines&&this._scene.primitives.remove(this._polylines),this._labels&&this._scene.primitives.remove(this._labels)},t}();r.registerType("graticule",{create:function(e,t){var n=t.scene,r=new i(a({tileWidth:512,tileHeight:512,numLines:10},e||{}),n);return e.visibility&&r.setVisible(!0),r}})},3136:function(e,t,n){var r=n(766),o=n(2170),a=n(13).isEqual,i=n(26);r.registerType("marker",{create:function(e,t){var n=i({},{point:{pixelSize:5,color:o.Color.RED,outlineColor:o.Color.WHITE,outlineWidth:2}},e.style),r=t.entities.add(i({position:o.Cartesian3.fromDegrees(e.point.lng,e.point.lat)},n));return{detached:!0,point:r,remove:function(){t.entities.remove(r)}}},update:function(e,t,n,r){return a(t.point,n.point)?null:(e.remove(),this.create(t,r))}})},3137:function(e,t,n){var r=n(766),o=n(2170),a=n(2651),i=function(){function e(e){this._scene=e.scene;var t=document.createElement("div");t.className="infoWindow",this._div=t;var n=document.createElement("div");n.className="frame",this._div.appendChild(n);var r=document.createElement("div");r.className="content",n.appendChild(r),e.container.appendChild(t),this._content=r,this.setVisible(!0)}return e.prototype.setVisible=function(e){this._visible=e,this._div.style.display=e?"block":"none"},e.prototype.setContent=function(e){if("string"==typeof e)this._content.innerHTML=e;else{for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._content.appendChild(e)}},e.prototype.setPosition=function(e,t){this._position=this._scene.globe.ellipsoid.cartographicToCartesian(o.Cartographic.fromDegrees(t,e,0))},e.prototype.showAt=function(e,t,n){this.setPosition(e,t),this.setContent(n),this.setVisible(!0)},e.prototype.hide=function(){this.setVisible(!1)},e.prototype.computeVisible=function(){var e=6356752.314245179,t=this._scene.camera.position,n=t.x/6378137,r=t.y/6378137,o=t.z/e,a=n*n+r*r+o*o-1,i=this._position,s=i.x/6378137-n,l=i.y/6378137-r,c=i.z/e-o,u=-(s*n+l*r+c*o);u>a&&u*u/(s*s+l*l+c*c)>a?this.setVisible(!1):this.setVisible(!0)},e.prototype.update=function(){if(this.computeVisible(),this._visible&&this._position){var e=o.SceneTransforms.wgs84ToWindowCoordinates(this._scene,this._position);if(e){var t=Math.floor(e.x)-this._div.clientWidth/2+"px",n=Math.floor(e.y)-this._div.clientHeight+"px";this._div.tabIndex=5,this._div.style.left=t,this._div.style.top=n}}},e.prototype.destroy=function(){this._div.parentNode.removeChild(this._div)},e}();r.registerType("overlay",{create:function(e,t){var n=function(e,t){var n=e.cloneNode(!0);n.id=t.id+"-overlay",n.className=(t.className||e.className)+"-overlay",n.removeAttribute("data-reactid"),function e(t){if(0!==t.length)for(var n=0;n<t.length;n++){var r=t.item(n);r.removeAttribute("data-reactid"),e(r.children||[])}}(n.children||[]);var r=t.closeClass||"close";if(t.onClose&&1===n.getElementsByClassName(r).length){var o=n.getElementsByClassName(r)[0];a.add(o,"click",(function(e){t.onClose(e.target.getAttribute("data-overlayid"))}))}return n}(document.getElementById(e.id),e),r=new i(t);r.showAt(e.position.y,e.position.x,n),r.setVisible(!0);var o=t.scene.primitives.add(r);return{detached:!0,info:o,remove:function(){t.scene.primitives.remove(o)}}}})},3138:function(e,t,n){var r=n(761),o=n(411);n(3139);var a=n(26);r.BingLayer.prototype.loadMetadata=function(){if(!this.metaRequested){this.metaRequested=!0;var e=this,t="_bing_metadata_"+r.Util.stamp(this);window[t]=function(n){e.meta=n,window[t]=void 0;var r=document.getElementById(t);return r.parentNode.removeChild(r),n.errorDetails?(e.fire("load",{layer:e}),e.onError(n)):(e.initMetadata(n),null)};var n="file:"===document.location.protocol?"https":document.location.protocol.slice(0,-1),o=n+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+t+"&key="+this._key+"&UriScheme="+n,a=document.createElement("script");a.type="text/javascript",a.src=o,a.id=t,document.getElementsByTagName("head")[0].appendChild(a)}},r.BingLayer.prototype.onError=function(e){return this.options.onError?this.options.onError(e):null},o.registerType("bing",{create:function(e){var t=e.apiKey,n={subdomains:[0,1,2,3],type:e.name,attribution:"Bing",culture:"",onError:e.onError,maxNativeZoom:e.maxNativeZoom||19,maxZoom:e.maxZoom||23};return e.zoomOffset&&(n=a({},n,{zoomOffset:e.zoomOffset})),new r.BingLayer(t,n)},isValid:function(e){return!e.meta||!e.meta.statusCode||200===e.meta.statusCode}})},3140:function(e,t,n){var r=n(761);e.exports=r.TileLayer.extend({initialize:function(e){r.TileLayer.prototype.initialize.call(this,this.url,e)}})},3141:function(e,t,n){var r=n(411),o=n(3142),a=n(26);n(3143),r.registerType("graticule",{create:function(e){var t=a({interval:20,showOriginLabel:!0,redraw:"move"},e);return o?new o(t):null},isValid:function(){return!!o}})},3145:function(e,t,n){var r=n(411),o=n(761);n(3146),r.registerType("google",(function(e){return o.gridLayer.googleMutant({type:e.name.toLowerCase(),maxNativeZoom:e.maxNativeZoom||18,maxZoom:e.maxZoom||20})}))},3147:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(411),i=n(3148);a.registerType("mapquest",{create:function(e){return i?i.mapLayer(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({maxZoom:23},e)):(e&&e.onError&&e.onError(),!1)},isValid:function(){return!!i}})},3148:function(e,t){e.exports=window.MQ},3149:function(e,t,n){var r=n(411),o=n(761);r.registerType("osm",(function(e){return o.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoomOffset:e.zoomOffset||0,maxNativeZoom:e.maxNativeZoom||19,maxZoom:e.maxZoom||23})}))},3150:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=n(411),s=n(761),l=n(2465);i.registerType("tileprovider",(function(e){var t=a(l.getLayerConfig(e.provider,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({maxZoom:23},e)),2),n=t[0],i=t[1];return s.tileLayer(n,i)}))},3151:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(1),a=n(2103),i=n(411),s=n(80),l=n(414).optionsToVendorParams,c=n(3152),u=n(761),p=n(26),f=n(13),d=f.isArray,m=f.isNil,y=n(197),g=n(2652),b=n(137).creditsToAttribution,h=n(2230).isVectorFormat;n(3154),u.NonTiledLayer.WMSCustom=u.NonTiledLayer.WMS.extend({initialize:function(e,t){this._wmsUrl=e;var n=u.extend({},this.defaultWmsParams);for(var r in t)this.options.hasOwnProperty(r)||"CRS"===r.toUpperCase()||"maxNativeZoom"===r||(n[r]=t[r]);this.wmsParams=n,u.setOptions(this,t)},removeParams:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return t.forEach((function(t){return delete e.wmsParams[t]})),n||this.redraw(),this}}),u.nonTiledLayer.wmsCustom=function(e,t){return new u.NonTiledLayer.WMSCustom(e,t)},u.TileLayer.MultipleUrlWMS=u.TileLayer.WMS.extend({initialize:function(e,t){this._url=e[0],this._urls=e,this._urlsIndex=0;var n=u.extend({},this.defaultWmsParams),r=t.tileSize||this.options.tileSize;for(var o in t.detectRetina&&u.Browser.retina?n.width=n.height=2*r:n.width=n.height=r,t)this.options.hasOwnProperty(o)||"CRS"===o.toUpperCase()||"maxNativeZoom"===o||(n[o]=t[o]);this.wmsParams=n,u.setOptions(this,t)},getTileUrl:function(e){var t=this._map,n=this.options.tileSize,r=e.multiplyBy(n),o=r.add([n,n]),a=this._crs.project(t.unproject(r,e.z)),i=this._crs.project(t.unproject(o,e.z)),s=this._wmsVersion>=1.3&&this._crs===u.CRS.EPSG4326?[i.y,a.x,a.y,i.x].join(","):[a.x,i.y,i.x,a.y].join(",");this._urlsIndex++,this._urlsIndex===this._urls.length&&(this._urlsIndex=0);var l=u.Util.template(this._urls[this._urlsIndex],{s:this._getSubdomain(e)});return l+u.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+s},removeParams:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return t.forEach((function(t){return delete e.wmsParams[t]})),n||this.redraw(),this}}),u.tileLayer.multipleUrlWMS=function(e,t){return new u.TileLayer.MultipleUrlWMS(e,t)},u.TileLayer.ElevationWMS=u.TileLayer.MultipleUrlWMS.extend({initialize:function(e,t,n){this._tiles={},this._nodata=n,u.TileLayer.MultipleUrlWMS.prototype.initialize.apply(this,arguments)},_addTile:function(e){var t=this.getTileUrl(e);g.loadTile(t,e,this._tileCoordsToKey(e))},getElevation:function(e,t){try{var n=this._getTileFromCoords(e),r=g.getElevation(this._tileCoordsToKey(n),this._getTileRelativePixel(n,t),this.getTileSize().x,this._nodata);return r.available?r.value:o.createElement(a,{msgId:r.message})}catch(e){return o.createElement(a,{msgId:"elevationLoadingError"})}},_getTileFromCoords:function(e){var t=this._map.project(e).divideBy(256).floor();return p(t,{z:this._tileZoom})},_getTileRelativePixel:function(e,t){var n=Math.floor(t.x-this._getTilePos(e).x-this._map._getMapPanePos().x),r=Math.min(this.getTileSize().x-1,Math.floor(t.y-this._getTilePos(e).y-this._map._getMapPanePos().y));return new u.Point(n,r)},_removeTile:function(){},_abortLoading:function(){}}),u.tileLayer.elevationWMS=function(e,t,n){return new u.TileLayer.ElevationWMS(e,t,n)};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){return m(e[n])?t:p(t,r({},n,e[n]))}),{})};function S(e){var t=void 0!==e.opacity?e.opacity:1,n=l(e),r=p({},e.baseParams,{attribution:e.credits&&b(e.credits),layers:e.name,styles:e.style||"",format:(h(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,tiled:void 0===e.tiled||e.tiled,opacity:t,zIndex:e.zIndex,version:e.version||"1.3.0",SRS:s.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),CRS:s.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),tileSize:e.tileSize||256,maxZoom:e.maxZoom||23,maxNativeZoom:e.maxNativeZoom||18},p(e._v_?{_v_:e._v_}:{},n||{}));return y.addAuthenticationToSLD(r,e)}function E(e){return e.map((function(e){return e.split("?")[0]}))}i.registerType("wms",{create:function(e){var t=E(d(e.url)?e.url:[e.url]),n=v(S(e)||{});return t.forEach((function(t){return y.addAuthenticationParameter(t,n,e.securityToken)})),e.useForElevation?u.tileLayer.elevationWMS(t,n,e.nodata||-9999):e.singleTile?u.nonTiledLayer.wmsCustom(t[0],n):u.tileLayer.multipleUrlWMS(t,n)},update:function(e,t,n){if(n.singleTile!==t.singleTile||n.securityToken!==t.securityToken&&t.visibility){var o=E(d(t.url)?t.url:[t.url]),a=S(t)||{};return o.forEach((function(e){return y.addAuthenticationParameter(e,a,t.securityToken)})),t.singleTile?u.nonTiledLayer.wmsCustom(o[0],a):u.tileLayer.multipleUrlWMS(o,a)}var i=p({},c.filterWMSParamOptions(S(n)),y.addAuthenticationToSLD(n.params||{},n)),s=p({},c.filterWMSParamOptions(S(t)),y.addAuthenticationToSLD(t.params||{},t)),l=Object.keys(s).filter((function(e){return s[e]!==i[e]})),f=Object.keys(i).filter((function(e){return i[e]!==s[e]})),m={};return f.length>0&&e.removeParams(f,l.length>0),l.length>0&&(m=l.reduce((function(e,t){return p({},e,r({},t,s[t]))}),m),e.setParams(v(p(m,m.params,y.addAuthenticationToSLD(t.params||{},t))))),null}})},3152:function(e,t,n){var r=n(26),o={PARAM_OPTIONS:["layers","styles","format","transparent","version","tiled","zindex","_v_","cql_filter","sld"],wmsToLeafletOptions:function(e){var t=void 0!==e.opacity?e.opacity:1;return r({layers:e.name,styles:e.style||"",format:e.format||"image/png",transparent:void 0===e.transparent||e.transparent,tiled:void 0===e.tiled||e.tiled,opacity:t},e.params||{})},getWMSURL:function(e){return e.split("?")[0]},filterWMSParamOptions:function(e){var t={};return Object.keys(e).forEach((function(n){n&&n.toLowerCase&&o.PARAM_OPTIONS.indexOf(n.toLowerCase())>=0&&(t[n]=e[n])})),t}};e.exports=o},3155:function(e,t,n){"use strict";n.r(t);var r=n(411),o=n.n(r),a=n(80),i=n.n(a),s=n(761),l=n.n(s),c=n(26),u=n.n(c),p=n(197),f=n.n(p),d=n(774),m=n.n(d),y=n(3156),g=n.n(y),b=n(13),h=n(2230);function v(e,t){return Object(b.isObject)(e)&&e[t]||e}l.a.tileLayer.wmts=function(e,t,n){return new g.a(e,t,n)};var S=function(e){var t=function(e){return e.map((function(e){return e.split("?")[0]}))}(Object(b.isArray)(e.url)?e.url:[e.url]),n=function(e){var t=i.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),n=m.a.getTileMatrixSet(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds);return u()({requestEncoding:e.requestEncoding,layer:e.name,style:e.style||"",format:(Object(h.isVectorFormat)(e.format)?"image/png":e.format)||"image/png",tileMatrixSet:n,version:e.version||"1.0.0",tileSize:e.tileSize||256,CRS:i.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),maxZoom:e.maxZoom||23,maxNativeZoom:e.maxNativeZoom||18},e.params||{})}(e)||{};t.forEach((function(t){return f.a.addAuthenticationParameter(t,n,e.securityToken)}));var r=i.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS);return l.a.tileLayer.wmts(t,n,{tileMatrixPrefix:e.tileMatrixPrefix||n.tileMatrixSet+":"||r+":",originY:e.originY||20037508.3428,originX:e.originX||-20037508.3428,ignoreErrors:e.ignoreErrors||!1,matrixIds:e.matrixIds&&v(e.matrixIds,n.tileMatrixSet||r)||null,matrixSet:Object(b.head)(e.tileMatrixSet.filter((function(e){return e["ows:Identifier"]===n.tileMatrixSet})))||null})};o.a.registerType("wmts",{create:S,update:function(e,t,n){return n.securityToken!==t.securityToken||n.format!==t.format?S(t):null}})},3156:function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=n(761),a=n(196),i=n(80),s=n(13),l=s.head,c=s.isNumber,u=o.TileLayer.extend({defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.3.0",layer:"",style:"",tileMatrixSet:"",format:"image/jpeg"},initialize:function(e,t,n){this._url=e[0],this._urls=e,this._urlsIndex=0;var r=o.extend({},this.defaultWmtsParams),a=t.tileSize||this.options.tileSize;for(var i in t.detectRetina&&o.Browser.retina?r.width=r.height=2*a:r.width=r.height=a,t)this.options.hasOwnProperty(i)||"crs"===i||(r[i]=t[i]);this.wmtsParams=r,this.matrixIds=n.matrixIds&&this.getMatrix(n.matrixIds,n)||this.getDefaultMatrix(n),this.matrixSet=n.matrixSet&&n.matrixSet.TileMatrix||[],this.ignoreErrors=n.ignoreErrors||!1,o.setOptions(this,t)},getWMTSParams:function(e,t,n,r,o){var s=a.getScales()[n],u=l(e.map((function(t,n){if(n===e.length-1)return null;var r=parseFloat(t.ScaleDenominator),o=parseFloat(e[n+1].ScaleDenominator);return r>=s&&o<s?s-o>(r-o)/2?{id:n,data:t}:{id:n+1,data:e[n+1]}:null})).filter((function(e){return e}))),p=u&&c(u.id)&&u.id+""||0===e.length&&n||null;if(!t[p])return null;var f=t[p].identifier,d=u.data&&u.data.TopLeftCorner&&i.parseString(u.data.TopLeftCorner)||t[p].topLeftCorner,m=d.lng||d.x,y=d.lat||d.y,g=Math.round((r.x-m)/o),b=-Math.round((r.y-y)/o),h=u.data&&u.data.MatrixWidth&&u.data.MatrixHeight&&{cols:{min:0,max:u.data.MatrixWidth-1},rows:{min:0,max:u.data.MatrixHeight-1}},v=t[p].ranges||h;return v&&!function(e,t,n){return!(e<n.cols.min||e>n.cols.max)&&!(t<n.rows.min||t>n.rows.max)}(g,b,v)?null:{ident:f,tilecol:g,tilerow:b}},getTileUrl:function(e){var t=this._map,n=t.options.crs,a=this.options.tileSize,i=e.multiplyBy(a);i.x+=1,i.y-=1;var s=i.add([a,a]),l=n.project(t.unproject(i,e.z)),c=n.project(t.unproject(s,e.z)).x-l.x,u=this.getWMTSParams(r(this.matrixSet),r(this.matrixIds),e.z,l,c);if(!u)return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";this._urlsIndex++,this._urlsIndex===this._urls.length&&(this._urlsIndex=0);var p=o.Util.template(this._urls[this._urlsIndex],{s:this._getSubdomain(e),TileRow:u.tilerow,TileCol:u.tilecol,TileMatrixSet:this.options.tileMatrixSet,TileMatrix:u.ident,Style:this.options.style});return"RESTful"===this.options.requestEncoding?p:p+o.Util.getParamString(this.wmtsParams,p,!0)+"&tilematrix="+u.ident+"&tilerow="+u.tilerow+"&tilecol="+u.tilecol},getMatrix:function(e,t){return e.map((function(e){return{identifier:e.identifier,topLeftCorner:new o.LatLng(t.originY,t.originX),ranges:e.ranges||null}}))},getDefaultMatrix:function(e){for(var t=new Array(22),n=0;n<22;n++)t[n]={identifier:e.tileMatrixPrefix+n,topLeftCorner:new o.LatLng(e.originY,e.originX)};return t},onError:function(){return!this.ignoreErrors}});e.exports=u},3157:function(e,t,n){var r=n(411),o=n(13).isNil,a=n(761),i={radius:5,color:"red",weight:1,opacity:1,fillOpacity:0},s=n(26);r.registerType("vector",{create:function(e){var t=function(e){var t=e.hideLoading,n=a.geoJson([],{pointToLayer:"marker"!==e.styleName?function(t,n){return a.circleMarker(n,e.style||i)}:null,hideLoading:t,style:e.nativeStyle||e.style||i});return n.setOpacity=function(e){var t=s({},n.options.style||i,{opacity:e,fillOpacity:e});n.setStyle(t),function e(t,n){t.eachLayer&&t.eachLayer((function(t){t.setOpacity&&t.setOpacity(n),e(t,n)}))}(n,e)},n.on("layeradd",(function(){n.setOpacity(o(n.opacity)?e.opacity:n.opacity)})),n}(e);return t.opacity=o(e.opacity)?1:e.opacity,t},update:function(e,t,n){t.opacity!==n.opacity&&(e.opacity=t.opacity)},render:function(){return null}})},3158:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(2300),a=n(4290),i=function e(t,n){t.getSource&&"error"===t.getSource().getState()&&n.onError&&n.onError(t),t.getSource&&"loading"===t.getSource().getState()&&setTimeout(e.bind(null,t,n),1e3)};r.default.registerType("bing",{create:function(e){var t=e.apiKey,n=e.maxNativeZoom||19,r=new o.a({preload:1/0,opacity:void 0!==e.opacity?e.opacity:1,zIndex:e.zIndex,visible:e.visibility,source:new a.a({key:t,imagerySet:e.name,maxZoom:n})});return setTimeout(i.bind(null,r,e),1e3),r},isValid:function(e){return!e.getSource||"error"!==e.getSource().getState()}})},3159:function(e,t,n){"use strict";n.r(t);var r,o,a=n(270),i=n(1),s=n.n(i),l=n(2112),c={},u="ontouchstart"in window,p=u?"touchstart":"mousedown",f=u?"touchmove":"mousemove",d=u?"touchend":"mouseup";a.default.registerType("google",{create:function(e,t,n){if(document.getElementById(n+"gmaps")){var o=window.google;r||(r={HYBRID:o.maps.MapTypeId.HYBRID,SATELLITE:o.maps.MapTypeId.SATELLITE,ROADMAP:o.maps.MapTypeId.ROADMAP,TERRAIN:o.maps.MapTypeId.TERRAIN}),c[n]||(c[n]=new o.maps.Map(document.getElementById(n+"gmaps"),{disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1})),c[n].setMapTypeId(r[e.name]);var a=document.getElementById(n+"gmaps"),i=function(){if(c[n]&&"hidden"!==a.style.visibility){var e=Object(l.l)(t.getView().getCenter(),"EPSG:3857","EPSG:4326");c[n].setCenter(new o.maps.LatLng(e[1],e[0]))}},s=function(){c[n]&&"hidden"!==a.style.visibility&&c[n].setZoom(t.getView().getZoom())},u=function(e,t){var n=t[0],r=t[1],o=[[n/2,r/2],[-n/2,r/2],[-n/2,-r/2],[n/2,-r/2]].map((function(t){return n=t,r=e*Math.PI/180,o=n[0],a=n[1],[o*Math.cos(r)-a*Math.sin(r),o*Math.sin(r)+a*Math.cos(r)];var n,r,o,a})),a=o.map((function(e){return e[0]})),i=o.map((function(e){return e[1]})),s=Math.max.apply(null,a),l=Math.min.apply(null,a),c=Math.max.apply(null,i),u=Math.min.apply(null,i),p=Math.abs(c)+Math.abs(u);return{width:Math.abs(s)+Math.abs(l),height:p}},m=function(){if("hidden"!==a.style.visibility){var e=180*t.getView().getRotation()/Math.PI;a.style.transform="rotate("+e+"deg)",o.maps.event.trigger(c[n],"resize")}},y=function(){var e=t.getView();e.on("change:center",i),e.on("change:resolution",s),e.on("change:rotation",m)};t.on("change:view",y),y(),i(),s();var g=t.getViewport(),b=document.getElementById(n+"gmaps").style.transform,h=!1,v=!1;g.addEventListener(p,(function(){h=!0})),g.addEventListener(d,(function(){v&&h&&function(){var e=document.getElementById(n+"gmaps").style.transform;if(c[n]&&e!==b&&-1!==e.indexOf("rotate")){var r=parseFloat(e.match(/[\+\-]?\d+\.?\d*/i)[0]),s=u(-r,t.getSize());a.style.width=s.width+"px",a.style.height=s.height+"px",a.style.left=Math.round((t.getSize()[0]-s.width)/2)+"px",a.style.top=Math.round((t.getSize()[1]-s.height)/2)+"px",o.maps.event.trigger(c[n],"resize"),i()}}(),b=document.getElementById(n+"gmaps").style.transform,h=!1})),g.addEventListener(f,(function(){v=h}))}return null},render:function(e,t,n){o||(o=e.name);var a={zIndex:0};if(!0===e.visibility){var i=document.getElementById(n+"gmaps");i&&(i.style.visibility="visible"),c[n]&&r&&(c[n].setMapTypeId(r[e.name]),c[n].setTilt(0))}else a.visibility="hidden";if(o===e.name){var l=document.getElementById(n+"gmaps");return l&&(l.style.visibility=e.visibility?"visible":"hidden"),s.a.createElement("div",{id:n+"gmaps",className:"fill",style:a})}return null},update:function(e,t,n,r,o){if(c[o]){var a=window.google;if(!n.visibility&&t.visibility){var i=r.getView(),s=Object(l.l)(i.getCenter(),"EPSG:3857","EPSG:4326");c[o].setCenter(new a.maps.LatLng(s[1],s[0])),c[o].setZoom(i.getZoom())}}},remove:function(e,t,n){o===e.name&&(o=void 0,delete c[n])}})},3160:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(4291),a=n(2452);r.default.registerType("graticule",{create:function(e,t){var n=new o.a({strokeStyle:e.style||new a.default({color:"rgba(255,120,0,0.9)",width:2,lineDash:[.5,4]})});return n.setMap(t),{detached:!0,remove:function(){n.setMap(null)}}}})},3161:function(e,t,n){"use strict";n.r(t),n(270).default.registerType("mapquest",{create:function(e){return e.onError(),!1},isValid:function(){return!1}})},3162:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(3163),a=n(2300);r.default.registerType("osm",{create:function(e){return new a.a({opacity:void 0!==e.opacity?e.opacity:1,visible:e.visibility,zIndex:e.zIndex,source:new o.a})}})},3164:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(2651),a=n.n(o),i=n(2348);r.default.registerType("overlay",{create:function(e,t){var n=function(e,t){var n=e.cloneNode(!0);n.id=t.id+"-overlay",n.className=(t.className||e.className)+"-overlay",n.removeAttribute("data-reactid"),function e(t){if(0!==t.length)for(var n=0;n<t.length;n++){var r=t.item(n);r.removeAttribute("data-reactid"),e(r.children||[])}}(n.children||[]);var r=t.closeClass||"close";if(t.onClose&&1===n.getElementsByClassName(r).length){var o=n.getElementsByClassName(r)[0];a.a.add(o,"click",(function(e){t.onClose(e.target.getAttribute("data-overlayid"))}))}if(t.onLink)for(var i=n.getElementsByTagName("a"),s=0;s<i.length;s++)a.a.add(i[s],"click",t.onLink);return n}(document.getElementById(e.id),e);document.body.appendChild(n);var r=new i.a({id:e.id,element:n,autoPan:e.autoPan||!1,positioning:e.positioning||"top-left",offset:e.offset||[0,0],autoPanAnimation:{duration:e.autoPanAnimation||250},position:[e.position.x,e.position.y]});return t.addOverlay(r),{detached:!0,remove:function(){t.removeOverlay(r)}}}})},3165:function(e,t,n){"use strict";n.r(t);var r=n(26),o=n.n(r),a=n(270),i=n(2465),s=n.n(i),l=n(80),c=n.n(l),u=n(3166),p=n(2654),f=n(2300);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}a.default.registerType("tileprovider",{create:function(e){var t=d(s.a.getLayerConfig(e.provider,e),2),n=t[0],r=t[1];return r.url=n,new f.a(function(e){var t,n,r,a,i,s,l,f,m,y=e.url.match(/(\{s\})/)?Object(u.getUrls)(e):[Object(u.template)(e.url,e)],g=o()({},{urls:y,attributions:e.attribution?[e.attribution]:[],maxZoom:e.maxZoom?e.maxZoom:18,minZoom:e.minZoom?e.minZoom:0}),b=new p.a(g);return o()({},{opacity:void 0!==e.opacity?e.opacity:1,visible:!1!==e.visibility,zIndex:e.zIndex,source:b},e.bounds?{extent:(t=e.bounds,n=e.srs?e.srs:"EPSG:3857",r=d(t,2),a=d(r[0],2),i=a[0],s=a[1],l=d(r[1],2),f=l[0],m=l[1],c.a.reprojectBbox([s,i,m,f],"EPSG:4326",c.a.normalizeSRS(n)))}:{})}(r))}})},3166:function(e,t,n){var r=n(13).isArray;function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.replace(/(?!(\{?[zyx]?\}))\{*([\w_]+)*\}/g,(function(){var e=arguments[0],n=arguments[1]?arguments[1]:arguments[2],r=t[n];if(void 0===r)throw new Error("No value provided for variable "+e);return"function"==typeof r&&(r=r(t)),r}))}e.exports={getUrls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url||"",n=e.subdomains||"";return n&&("string"==typeof n&&(n=n.split("")),r(n))?n.map((function(n){return o(t.replace("{s}",n),e)})):["a","b","c"].map((function(n){return o(t.replace("{s}",n),e)}))},template:o}},3167:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(2286),a=n(2189),i=n.n(a),s=n(2223),l=n(2191);r.default.registerType("vector",{create:function(e){var t=new s.a({features:[]}),n=Object(o.d)(e);return new l.a({msId:e.id,source:t,visible:!1!==e.visibility,zIndex:e.zIndex,style:n,opacity:e.opacity})},update:function(e,t,n){var r=n.crs||n.srs||"EPSG:3857",a=t.crs||t.srs||"EPSG:3857";a!==r&&e.getSource().forEachFeature((function(e){e.getGeometry().transform(r,a)})),i()(n.style,t.style)||e.setStyle(Object(o.d)(t))},render:function(){return null}})},3168:function(e,t,n){"use strict";n.r(t);var r=n(2295),o=n.n(r),a=n(55),i=n.n(a),s=n(80),l=n.n(s),c=n(196),u=n.n(c),p=n(270),f=n(197),d=n.n(f),m=n(2112),y=n(2104),g=n(2344),b=n(2468),h=n(2569),v=n(2575),S=n(2230),E=n(2655);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var C=function(e){var t=l.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),n=Object(m.f)(t),r=n.getMetersPerUnit(),a=o()(e.tilingSchemes&&e.tilingSchemes.schemes&&e.tilingSchemes.schemes.filter((function(e){return e.supportedCRS===t})))||{},s=a.identifier,c=a.tileMatrix,p=a.boundingBox,f=c&&c.map((function(e){return e.scaleDenominator})),O=u.a.getResolutions(),T=e.resolutions||f&&f.map((function(e){return 28e-5*e/r}))||O,C="ne"===n.getAxisOrientation().substr(0,2),_=c&&c.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topLeftCorner;return t})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=P(e,2),n=t[0],r=t[1];return C?[r,n]:[n,r]})),x=c&&c.map((function(e){return[e.tileWidth,e.tileHeight]})),I=e.bbox,j=I?Object(y.a)([parseFloat(I.bounds.minx),parseFloat(I.bounds.miny),parseFloat(I.bounds.maxx),parseFloat(I.bounds.maxy)],Object(m.h)(I.crs,e.srs)):null,L=p&&p.lowerCorner&&p.upperCorner?[].concat(A(p.lowerCorner),A(p.upperCorner)):null,R=new g.a({extent:L,minZoom:0,origins:_,origin:_?void 0:[20037508.3428,-20037508.3428],resolutions:T,tileSizes:x,tileSize:x?void 0:[256,256]}),D=(e.url||"").replace(/\{tilingSchemeId\}/,s).replace(/\{level\}/,"{z}").replace(/\{row\}/,"{y}").replace(/\{col\}/,"{x}"),N={};d.a.addAuthenticationParameter(D,N,e.securityToken);var M=decodeURI(D),k=i.a.format({query:w({},N)}),G=Object(S.isVectorFormat)(e.format)&&E.a[e.format]||v.a,F=new h.a({format:new G({dataProjection:t,layerName:"_layer_"}),tileGrid:R,url:M+k}),U=new b.a({extent:j,msId:e.id,source:F,visible:!1!==e.visibility,zIndex:e.zIndex});return Object(E.b)(e.vectorStyle,U),U};p.default.registerType("wfs3",{create:C,update:function(e,t,n){return n.securityToken!==t.securityToken||n.srs!==t.srs?C(t):null},render:function(){return null}})},3171:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(2103),i=n.n(a),s=n(270),l=n(2131),c=n.n(l),u=n(2189),p=n.n(u),f=n(430),d=n.n(f),m=n(34),y=n.n(m),g=n(26),b=n.n(g),h=n(80),v=n.n(h),S=n(2352),E=n.n(S),O=n(414),w=n(197),T=n.n(w),A=n(137),P=n(196),C=n.n(P),_=n(2652),x=n.n(_),I=n(3172),j=n(2893),L=n(2112),R=n(2344),D=n(2300),N=n(2636),M=n(2569),k=n(2468),G=n(2230),F=n(2655);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){var t=Object(O.optionsToVendorParams)(e),n=b()({},e.baseParams,{LAYERS:e.name,STYLES:e.style||"",FORMAT:e.format||"image/png",TRANSPARENT:void 0===e.transparent||e.transparent,SRS:v.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),CRS:v.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),TILED:!!c()(e.tiled)||e.tiled,VERSION:e.version||"1.3.0"},b()({},e._v_?{_v_:e._v_}:{},t||{}));return T.a.addAuthenticationToSLD(n,e)}function V(e,t){var n=t;E.a.needProxy(t)&&(n=E.a.getProxyUrl()+encodeURIComponent(t));e.getImage().src=n}function W(e){return e.join(":")}function Y(e,t,n){var r=n;e&&E.a.needProxy(n)&&(r=E.a.getProxyUrl()+encodeURIComponent(n));var o=t.getTileCoord();t.getImage().src="",x.a.loadTile(r,o,W(o))}function q(e){try{var t=function(e,t){var n=e.get("map");return e.getSource().getTileGrid().getTileCoordForCoordAndZ(t,n.getView().getZoom())}(this,e),n=this.getSource().getTileGrid().getTileSize(),r=x.a.getElevation(W(t),function(e,t,n){var r=e.getSource().getTileGrid(),o=r.getTileCoordExtent(n),a=r.getTileSize()/(o[2]-o[0]);return{x:Math.floor((t[0]-o[0])*a),y:Math.floor((o[3]-t[1])*a)}}(this,e,t),n,this.get("nodata"));return r.available?r.value:o.a.createElement(i.a,{msgId:r.message})}catch(e){return o.a.createElement(i.a,{msgId:"elevationLoadingError"})}}var Z=function(e){return e&&Object(A.creditsToAttribution)(e)||void 0},K=function(e,t){var n=function(e){return e.map((function(e){return e.split("?")[0]}))}(y()(e.url)?e.url:[e.url]),r=z(e)||{};n.forEach((function(t){return T.a.addAuthenticationParameter(t,r,e.securityToken)}));var o=Object(G.isVectorFormat)(e.format);if(e.singleTile&&!o)return new I.a({opacity:void 0!==e.opacity?e.opacity:1,visible:!1!==e.visibility,zIndex:e.zIndex,source:new j.default({url:n[0],crossOrigin:e.crossOrigin,attributions:Z(e.credits),params:r,ratio:e.ratio||1})});var a,i=t&&t.getView()&&t.getView().getProjection()&&t.getView().getProjection().getCode()||"EPSG:3857",s=Object(L.f)(v.a.normalizeSRS(e.srs||i,e.allowedSRS)).getExtent(),l=function(e,t){return t.useForElevation?b()({},e,{tileLoadFunction:Y.bind(null,[t.forceProxy])}):t.forceProxy?b()({},e,{tileLoadFunction:V}):e}({attributions:Z(e.credits),urls:n,crossOrigin:e.crossOrigin,params:r,tileGrid:new R.a({extent:s,resolutions:C.a.getResolutions(),tileSize:e.tileSize?e.tileSize:256,origin:e.origin?e.origin:[s[0],s[1]]})},e),c=new N.default(B({},l)),u={opacity:void 0!==e.opacity?e.opacity:1,visible:!1!==e.visibility,zIndex:e.zIndex};return(a=o?new k.a(B({},u,{source:new M.a(B({},l,{format:new F.a[e.format]({layerName:"_layer_"}),tileUrlFunction:function(e,t,n){return c.tileUrlFunction(e,t,n)}}))})):new D.a(B({},u,{source:c}))).set("map",t),o&&(a.set("wmsSource",c),e.vectorStyle&&Object(F.b)(e.vectorStyle,a)),e.useForElevation&&(a.set("nodata",e.nodata),a.set("getElevation",q.bind(a))),a};s.default.registerType("wms",{create:K,update:function(e,t,n,r){var o=Object(G.isVectorFormat)(t.format);if(function(e,t){return e.singleTile!==t.singleTile||e.securityToken!==t.securityToken||e.ratio!==t.ratio||e.credits!==t.credits&&!t.credits||Object(G.isVectorFormat)(e.format)!==Object(G.isVectorFormat)(t.format)||Object(G.isVectorFormat)(e.format)&&Object(G.isVectorFormat)(t.format)&&e.format!==t.format}(n,t))return K(t,r);var a=!1;o&&t.vectorStyle&&!p()(t.vectorStyle,n.vectorStyle||{})&&(Object(F.b)(t.vectorStyle,e),a=!0);var i=e.get("wmsSource")||e.getSource(),s=o?e.getSource():null;if(n.srs!==t.srs){var l=Object(L.f)(v.a.normalizeSRS(t.srs,t.allowedSRS)).getExtent();if(t.singleTile&&!o)e.setExtent(l);else{var c=new R.a({extent:l,resolutions:C.a.getResolutions(),tileSize:t.tileSize?t.tileSize:256,origin:t.origin?t.origin:[l[0],l[1]]});i.tileGrid=c,s&&(s.tileGrid=c)}a=!0}n.credits!==t.credits&&t.credits&&(i.setAttributions(Z(t.credits)),a=!0);var u,f,m=!1;if(n&&i&&i.updateParams&&(n.params&&t.params?m=d()(Object.keys(n.params),Object.keys(t.params)).reduce((function(e,r){return t.params[r]!==n.params[r]||e}),!1):(!n.params&&t.params||n.params&&!t.params)&&(m=!0),u=z(n),f=z(t),m=m||["LAYERS","STYLES","FORMAT","TRANSPARENT","TILED","VERSION","_v_","CQL_FILTER","SLD","VIEWPARAMS"].reduce((function(e,t){return u[t]!==f[t]||e}),!1),a=a||m),a&&(i.refresh&&i.refresh(),s&&(s.clear(),s.refresh()),m)){var y=b()(f,T.a.addAuthenticationToSLD(Object(O.optionsToVendorParams)(t)||{},t));i.updateParams(b()(y,Object.keys(u||{}).reduce((function(e,t){return y[t]?e:b()(e,H({},t,void 0))}),{})))}return null}})},3173:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(2339),a=n.n(o),i=n(2295),s=n.n(i),l=n(778),c=n.n(l),u=n(197),p=n.n(u),f=n(774),d=n.n(f),m=n(80),y=n.n(m),g=n(196),b=n.n(g),h=n(2230),v=n(55),S=n.n(v),E=n(2112),O=n(2104),w=n(2300),T=n(2468),A=n(4292),P=n(2569),C=n(2657),_=n(2575),x=n(2346),I=n(2656),j=n(2286);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N={"application/vnd.mapbox-vector-tile":_.a,"application/json;type=geojson":x.a,"application/json;type=topojson":I.a};var M=function(e,t){var n=d.a.getTileMatrixSet(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds),r=s()(e.tileMatrixSet.filter((function(e){return e["ows:Identifier"]===n})));return{tileMatrixSetName:n,tileMatrixSet:r}},k=function(e){var t="RESTful"===e.requestEncoding?"REST":e.requestEncoding,n=function(e,t){return e.map((function(e){return"REST"===t?e:e.split("?")[0]}))}(a()(e.url),t),r=y.a.normalizeSRS(e.srs||"EPSG:3857",e.allowedSRS),o=Object(E.f)(r),i=o.getMetersPerUnit(),s=M(e,r),l=s.tileMatrixSetName,u=s.tileMatrixSet,f=u&&u.TileMatrix.map((function(e){return Number(e.ScaleDenominator)})),m=b.a.getResolutions(),g=e.resolutions||f&&f.map((function(e){return 28e-5*e/i}))||m,v=d.a.limitMatrix(e.matrixIds&&d.a.getMatrixIds(e.matrixIds,l||r)||d.a.getDefaultMatrixId(e),g.length),_="ne"===o.getAxisOrientation().substr(0,2),x=u&&u.TileMatrix&&u.TileMatrix.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.TopLeftCorner;return t&&y.a.parseString(t)})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=e.y;return _?[n,t]:[t,n]})),I=e.bbox,L=I?Object(O.a)([parseFloat(I.bounds.minx),parseFloat(I.bounds.miny),parseFloat(I.bounds.maxx),parseFloat(I.bounds.maxy)],Object(E.h)(I.crs,e.srs)):null,D={};n.forEach((function(t){return p.a.addAuthenticationParameter(t,D,e.securityToken)}));var k=S.a.format({query:R({},D)}),G=e.maxResolution||c()(m.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return g[0]/e*256<.5}))),F=-1!==(e.availableFormats||[]).indexOf(e.format)&&e.format||!e.availableFormats&&e.format||"image/png",U=Object(h.isVectorFormat)(F),B={requestEncoding:t,urls:n.map((function(e){return e+k})),layer:e.name,version:e.version||"1.0.0",matrixSet:l,format:F,style:e.style,tileGrid:new C.b({origins:x,origin:x?void 0:[20037508.3428,-20037508.3428],resolutions:g,matrixIds:v,tileSize:e.tileSize||[256,256]}),wrapX:!0},H=new A.a(B),z=new(U?T.a:w.a)({opacity:void 0!==e.opacity?e.opacity:1,zIndex:e.zIndex,extent:L,maxResolution:G,visible:!1!==e.visibility,source:U?new P.a(R({},B,{format:new N[e.format]({dataProjection:r}),tileUrlFunction:function(){return H.tileUrlFunction.apply(H,arguments)}})):H});return U&&z.setStyle(Object(j.d)(e)),z};r.default.registerType("wmts",{create:k,update:function(e,t,n){return n.securityToken!==t.securityToken||n.srs!==t.srs||n.format!==t.format||n.style!==t.style?k(t):null},isCompatible:function(e){return!!s()(y.a.getEquivalentSRS(e.srs||"EPSG:3857").filter((function(t){return function(e,t){var n=M(t,e),r=n.tileMatrixSetName,o=n.tileMatrixSet;return o?y.a.getEPSGCode(o["ows:SupportedCRS"])===e:r===e}(t,e)})))}})},3174:function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=n(13).get,a=n(195).createSelector,i=n(80).reprojectGeoJson,s=function(e){return o(e,e&&e.highlight&&e.highlight.featuresPath||"highlight.emptyFeatures")||[]},l=function(e){return o(e,e&&e.featuregrid&&e.featuregrid.open&&e.featuregrid.showFilteredObject?"query.filterObj.spatialField":"emptyObject")},c=function(e){return l(e)&&l(e).geometry},u=function(e){return c(e)&&c(e).type||"Polygon"},p=function(e){return c(e)&&c(e).coordinates||[]},f=function(e){return c(e)&&c(e).projection||"EPSG:3857"},d=function(e){return c(e)&&c(e).id||"spatial_object"},m=a([p,u,d,f],(function(e,t,n,r){var o={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:t,coordinates:e},style:{fillColor:"#FFFFFF",fillOpacity:"0.2",color:"#ffcc33"},id:n}]};return e.length>0&&t?i(o,r,"EPSG:4326").features:[]})),y=a([m,s],(function(e,t){return[].concat(r(t),r(e))}));e.exports={selectedFeatures:s,filteredFeatures:m,filteredSpatialObjectId:d,filteredSpatialObjectCrs:f,filteredspatialObjectCoord:p,filteredspatialObjectType:u,filteredGeometry:c,filteredspatialObject:l,highlighedFeatures:y}},3175:function(e,t,n){var r=n(2169),o=r.CHANGE_DRAWING_STATUS,a=r.SET_CURRENT_STYLE,i=r.GEOMETRY_CHANGED,s=r.DRAW_SUPPORT_STOPPED,l=n(26),c={drawStatus:null,drawOwner:null,drawMethod:null,options:{},features:[],tempFeatures:[]};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return l({},e,{drawStatus:t.status,drawOwner:t.owner,drawMethod:t.method,options:t.options,features:t.features,style:t.style});case a:return l({},e,{currentStyle:t.currentStyle});case i:return l({},e,{tempFeatures:t.features});case s:return l({},e,{tempFeatures:[]});default:return e}}},3176:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(2403),s=i.HIGHLIGHT_STATUS,l=i.UPDATE_HIGHLIGHTED,c=i.SET_HIGHLIGHT_FEATURES_PATH,u=n(26),p={status:"disabled",layer:"featureselector",features:[],highlighted:0,featuresPath:"highlight.emptyFeatures",emptyFeatures:[]};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return u({},e,{featuresPath:t.featuresPath||"highlight.emptyFeatures"});case s:return o({},e,{status:t.status});case l:return o({},e,{highlighted:t.features.length,features:t.features,status:t.status||e.status});default:return e}}},3177:function(e,t,n){var r=n(3178).MAP_TYPE_CHANGED;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mapType:"leaflet"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r:return{mapType:t.mapType};default:return e}}},3178:function(e,t){e.exports={MAP_TYPE_CHANGED:"MAP_TYPE_CHANGED",changeMapType:function(e){return{type:"MAP_TYPE_CHANGED",mapType:e}}}},3179:function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(2259),l=s.UPDATE_ADDITIONAL_LAYER,c=s.REMOVE_ADDITIONAL_LAYER,u=s.UPDATE_OPTIONS_BY_OWNER,p=s.REMOVE_ALL_ADDITIONAL_LAYERS,f=n(13),d=f.head,m=f.pickBy,y=f.identity,g=f.isObject,b=f.isArray;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:var n=m({id:t.id,owner:t.owner,actionType:t.actionType,options:t.options},y),o=d(e.filter((function(e){return e.id===n.id})));return o?e.map((function(e){return e.id===n.id?a({},o,{},n):a({},e)})):[].concat(r(e),[n]);case u:var i=t.options,s=t.owner;return e.map((function(e,t){return e.owner===s?a({},e,{options:g(i)&&i[e.id]||b(i)&&i[t]||{}}):a({},e)}));case c:var f=t.id,h=t.owner;return h?e.filter((function(e){return e.owner!==h})):e.filter((function(e){return e.id!==f}));case p:return[];default:return e}}},3180:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(15),s=n(269).changeLayerProperties,l=n(409),c=l.CREATION_ERROR_LAYER,u=l.INIT_MAP,p=l.ZOOM_TO_EXTENT,f=l.CHANGE_MAP_CRS,d=l.changeMapView,m=l.changeMapLimits,y=n(268),g=y.configuredExtentCrsSelector,b=y.configuredRestrictedExtentSelector,h=y.configuredMinZoomSelector,v=y.mapSelector,S=y.mapIdSelector,E=n(40).loadMapInfo,O=n(2658).LOGIN_SUCCESS,w=n(408),T=w.currentBackgroundLayerSelector,A=w.allBackgroundLayerSelector,P=w.getLayerFromId,C=n(2144).mapTypeSelector,_=n(2140).mapPaddingSelector,x=n(267).setControlProperty,I=n(40).MAP_CONFIG_LOADED,j=n(137).isSupportedLayer,L=n(196),R=n(80),D=n(161).warning,N=n(267).resetControls,M=n(269).clearLayers,k=n(2259).removeAllAdditionalLayers,G=n(13),F=G.head,U=G.isArray,B=G.isObject,H=G.mapValues;e.exports={checkMapPermissions:function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O).filter((function(){return S(r())})).map((function(){var e=S(r());return E(e)}))},handleCreationLayerError:function(e,t){return e.ofType(c).delay(500).switchMap((function(e){var n=C(t.getState()),r=P(t.getState(),e.options.id);return r&&j(r,n)?i.Observable.from([s(e.options.id,{invalid:!0})]):i.Observable.empty()}))},handleCreationBackgroundError:function(e,t){return e.ofType(c).delay(500).filter((function(e){var n=T(t.getState());return n&&e.options.id===n.id&&"background"===e.options.group})).switchMap((function(e){var n=C(t.getState()),r=F(A(t.getState()).filter((function(t){return j(t,n)&&t.id!==e.options.id})));return r?i.Observable.from([s(r.id,{visibility:!0}),x("backgroundSelector","currentLayer",r),x("backgroundSelector","tempLayer",r),D({title:"warning",message:"notification.backgroundLayerNotSupported",action:{label:"close"},position:"tc"})]):i.Observable.of(D({title:"warning",message:"notification.noBackgroundLayerSupported",action:{label:"close"},position:"tc"}))}))},resetMapOnInit:function(e){return e.ofType(u).switchMap((function(){return i.Observable.of(k(),N(),M())}))},resetLimitsOnInit:function(e,t){return e.ofType(I,f).switchMap((function(){var e=g(t.getState()),n=b(t.getState()),r=h(t.getState());return i.Observable.of(m({restrictedExtent:n,crs:e,minZoom:r}))}))},zoomToExtentEpic:function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(p).switchMap((function(e){var t=function(e){if(U(e))return e.map((function(e){return"string"==typeof e||e instanceof String?Number(e):e}));if(B(e)){var t=H(e,(function(e){return"string"==typeof e||e instanceof String?Number(e):e}));return[t.minx,t.miny,t.maxx,t.maxy]}return null}(e.extent);if(!t)return i.Observable.empty();var n=L.getHook(L.ZOOM_TO_EXTENT_HOOK),a=_(r());return n?(n(t,{crs:e.crs,padding:a,maxZoom:e.maxZoom}),i.Observable.empty()):function(e,t){var n=0,r=e.extent,a=void 0===r?[]:r,s=R.reprojectBbox(a,e.crs,t.bbox&&t.bbox.crs||"EPSG:4326");if(s){var l=R.reproject(L.getCenterForExtent(a,e.crs),e.crs,"EPSG:4326");if("EPSG:4326"===e.crs&&a&&a[0]<=-180&&a[1]<=-90&&a[2]>=180&&a[3]>=90)n=1;else{var c=R.reprojectBbox(a,e.crs,t.projection||"EPSG:4326");n=L.getZoomForExtent(c,t.size,0,21,null)}e.maxZoom&&n>e.maxZoom&&(n=e.maxZoom);var u={minx:s[0],miny:s[1],maxx:s[2],maxy:s[3]},p=o({},t.bbox,{bounds:u});return i.Observable.of(d(l,n,p,t.size,e.mapStateSource,t.projection,t.viewerOptions))}return i.Observable.empty()}(o({},e,{extent:t}),v(r()))}))}}},3192:function(e,t,n){var r=n(407),o=r.withHandlers,a=r.defaultProps,i=n(273),s=o({onNext:function(e){var t=e.index,n=void 0===t?0:t,r=e.setIndex,o=void 0===r?function(){}:r,a=e.validResponses,i=void 0===a?[]:a;return function(){o(Math.min(i.length-1,n+1))}},onPrevious:function(e){var t=e.index,n=e.setIndex,r=void 0===n?function(){}:n;return function(){r(Math.max(0,t-1))}}}),l=a({format:i.getDefaultInfoFormatValue(),validator:i.getValidator});e.exports={defaultViewerHandlers:s,defaultViewerDefaultProps:l}},3193:function(e,t,n){var r=n(407),o=r.lifecycle,a=r.withHandlers,i=r.compose,s=n(410).set,l=n(13),c=l.isEqual,u=l.isNil,p=i(a({needsRefresh:function(){return function(e,t){if(t.enabled&&t.point&&t.point.pixel){if(!e.point||!e.point.pixel||e.point.pixel.x!==t.point.pixel.x||e.point.latlng!==t.point.latlng||e.point.pixel.y!==t.point.pixel.y)return!0;if(!e.point||!e.point.pixel||t.point.pixel&&e.format!==t.format)return!0}return!1}},onClose:function(e){var t=e.hideMarker,n=void 0===t?function(){}:t,r=e.purgeResults,o=void 0===r?function(){}:r,a=e.closeIdentify,i=void 0===a?function(){}:a;return function(){n(),o(),i()}},onChangeClickPoint:function(e){var t=e.onChangeClickPoint,n=void 0===t?function(){}:t,r=e.point;return function(e,t){var o=s("latlng.".concat("lat"===e?"lat":"lng"),u(t)?0:parseFloat(t),r);n(o)}},onChangeFormat:function(e){var t=e.onChangeFormat,n=void 0===t?function(){}:t;return function(e){n(e)}}}),o({componentDidMount:function(){var e=this.props,t=e.enabled,n=e.changeMousePointer,r=void 0===n?function(){}:n,o=e.disableCenterToMarker,a=e.onEnableCenterToMarker,i=void 0===a?function(){}:a;t&&r("pointer"),o||i()},componentWillReceiveProps:function(e){var t=this.props,n=t.hideMarker,r=void 0===n?function(){}:n,o=t.purgeResults,a=void 0===o?function(){}:o,i=t.changeMousePointer,s=void 0===i?function(){}:i,l=t.setIndex,u=t.enabled,p=t.responses;e.enabled&&!u?s("pointer"):!e.enabled&&u&&(s("auto"),r(),a()),l&&!c(e.responses,p)&&l(0)}}));e.exports={identifyLifecycle:p}},3194:function(e,t,n){var r=n(2353),o=n(407).withHandlers;e.exports=o({zoomToFeature:function(e){var t=e.zoomToExtent,n=void 0===t?function(){}:t,o=e.currentFeature,a=void 0===o?[]:o,i=e.currentFeatureCrs;return function(){var e=a.filter((function(e){return!!e.geometry}));if(e.length>0){var t=r({type:"FeatureCollection",features:e});t&&n(t,i)}}}})},3195:function(e,t){function n(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}e.exports=function(e){var t=e.showHighlightFeatureButton,r=e.currentFeature,o=e.highlight,a=e.toggleHighlightFeature,i=void 0===a?function(){}:a,s=e.zoomToFeature,l=void 0===s?function(){}:s,c=n(e,["showHighlightFeatureButton","currentFeature","highlight","toggleHighlightFeature","zoomToFeature"]);return[{glyph:"info-sign",tooltipId:"identifyRevGeocodeSubmitText",visible:c.latlng&&c.enableRevGeocode&&c.lngCorrected,onClick:function(){c.showRevGeocode({lat:c.latlng.lat,lng:c.lngCorrected})}},{glyph:"search-coords",tooltipId:c.showCoordinateEditor?"identifyHideCoordinateEditor":"identifyShowCoordinateEditor",visible:c.enabledCoordEditorButton,bsStyle:c.showCoordinateEditor?"success":"primary",onClick:function(){c.onToggleShowCoordinateEditor(c.showCoordinateEditor)}},{glyph:"map-filter",visible:t,tooltipId:o?"identifyStopHighlightingFeatures":"identifyHighlightFeatures",bsStyle:o?"success":"primary",onClick:function(){return i(!o)}},{glyph:"zoom-to",visible:o&&!!r&&r.length>0&&r.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.geometry;return e||!!n}),!1),tooltipId:"identifyZoomToFeature",onClick:l}].filter((function(e){return e&&e.visible}))}},3196:function(e,t){var n=function(e){return!e.viewerOptions.header&&e.validResponses.length>1},r=function(e){return e.index>=e.validResponses.length-1},o=function(e){return e.index<=0};e.exports=function(e){return[{keyProp:"back",glyph:"arrow-left",tooltipId:o(e)?void 0:"wizard.prev",disabled:o(e),visible:n(e),onClick:function(){e.onPrevious()}},{keyProp:"forward",glyph:"arrow-right",tooltipId:r(e)?void 0:"wizard.next",disabled:r(e),visible:n(e),onClick:function(){e.onNext()}}].filter((function(e){return e&&e.visible}))}},3197:function(e,t,n){var r=n(3198);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3198:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi .swipe-header-left-button {\n    float: left;\n}\n\n.msgapi .swipe-header-right-button {\n    float: right;\n}\n",""])},3199:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1),d=n(0),m=n(273),y=n(829),g=n(2260),b=n(2103),h=n(758),v=h.Alert,S=h.Panel,E=h.Accordion,O=n(3200),w=n(13).isEqual,T=function(e){function t(){var e,n;a(this,t);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return p(c(n=s(this,(e=l(t)).call.apply(e,[this].concat(i)))),"renderEmptyLayers",(function(e){var t=e.getValidResponses(n.props.responses).length,r=e.getNoValidResponses(n.props.responses);if(0===n.props.missingResponses&&0===t)return null;if(0!==r.length){var o=r.map((function(e){return e.layerMetadata.title}));return n.props.showEmptyMessageGFI?f.createElement(v,{bsStyle:"info"},f.createElement(b,{msgId:"noInfoForLayers"}),f.createElement("b",null,o.join(", "))):null}return null})),p(c(n),"renderPage",(function(e){var t=n.props.viewers[n.props.format];return t?f.createElement(t,{response:e}):null})),p(c(n),"renderPages",(function(e){return 0===n.props.missingResponses&&0===e.length?f.createElement(v,{bsStyle:"danger"},f.createElement("h4",null,f.createElement(g,{msgId:"noFeatureInfo"}))):e.map((function(t,r){var a,i=t.response,s=t.layerMetadata,l=t.format,c=t.queryParams;c&&c.hasOwnProperty("info_format")&&(a=c.info_format);var u,p=n.props.header;return s.viewer&&s.viewer.type&&(u=m.getViewer(s.viewer.type)),f.createElement(S,{eventKey:r,key:r,collapsible:n.props.collapsible,header:p?f.createElement("span",null,f.createElement(p,o({size:e.length},n.props.headerOptions,s,{index:n.props.index,onNext:function(){return n.props.onNext()},onPrevious:function(){return n.props.onPrevious()}}))):null,style:n.props.style},f.createElement(O,{response:i,format:a||l&&y.INFO_FORMATS[l]||n.props.format,viewers:u||n.props.viewers,layer:s}))}))})),p(c(n),"renderAdditionalInfo",(function(){var e=n.props.validator(n.props.format);return e?n.renderEmptyLayers(e):null})),n}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){w(e.responses,this.props.responses)||this.props.setIndex(0)}},{key:"shouldComponentUpdate",value:function(e){return e.responses!==this.props.responses||e.missingResponses!==this.props.missingResponses||e.index!==this.props.index}},{key:"render",value:function(){var e=this,t=this.props.container,n=this.props.validator(this.props.format).getValidResponses(this.props.responses);return f.createElement("div",{className:"mapstore-identify-viewer"},f.createElement(t,o({},this.props.containerProps,{onChangeIndex:function(t){e.props.setIndex(t)},ref:"container",index:this.props.index||0,key:"swiper",className:"swipeable-view"}),this.renderPages(n)),this.renderAdditionalInfo())}}])&&i(n.prototype,r),d&&i(n,d),t}(f.Component);p(T,"propTypes",{format:d.string,collapsible:d.bool,requests:d.array,responses:d.array,missingResponses:d.number,container:d.oneOfType([d.object,d.func]),header:d.oneOfType([d.object,d.func]),headerOptions:d.object,validator:d.func,viewers:d.object,style:d.object,containerProps:d.object,index:d.number,onNext:d.func,onPrevious:d.func,onUpdateIndex:d.func,setIndex:d.func,showEmptyMessageGFI:d.bool}),p(T,"defaultProps",{format:m.getDefaultInfoFormatValue(),responses:[],missingResponses:0,collapsible:!1,headerOptions:{},container:E,validator:m.getValidator,viewers:m.getViewers(),style:{position:"relative",marginBottom:0},containerProps:{},index:0,showEmptyMessageGFI:!0,onNext:function(){},onPrevious:function(){},setIndex:function(){}}),e.exports=T},3200:function(e,t,n){var r,o;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(0),m=n(1);e.exports=(o=r=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return f(u(n=l(this,(e=c(t)).call.apply(e,[this].concat(o)))),"onTouchStart",(function(e){var t=e.touches[0];n.startX=t.pageX,n.startY=t.pageY,n.setState({scrolling:!1})})),f(u(n),"onTouchMove",(function(e){var t=e.touches[0],r=e.currentTarget;if(n.state.scrolling)e.stopPropagation();else if(Math.abs(n.startY-t.pageY)>Math.abs(n.startX-t.pageX))e.stopPropagation();else{var o=n.startX<t.pageX?"left":"right";(r&&"left"===o&&r.clientWidth<r.scrollWidth&&0!==r.scrollLeft||r&&"right"===o&&r.clientWidth+r.scrollLeft!==r.scrollWidth)&&(n.setState({scrolling:!0}),e.stopPropagation())}})),f(u(n),"onTouchEnd",(function(){n.setState({scrolling:!1})})),f(u(n),"renderPage",(function(){var e="function"==typeof n.props.viewers?n.props.viewers:n.props.viewers[n.props.format];return e?m.createElement(e,{response:n.props.response,layer:n.props.layer}):null})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return m.createElement("div",{style:{width:"100%",height:"100%",overflow:"auto"},onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},this.renderPage())}}])&&s(n.prototype,r),o&&s(n,o),t}(m.Component),f(r,"propTypes",{format:d.string,viewers:d.oneOfType([d.func,d.object]),response:d.oneOfType([d.string,d.object,d.node]),layer:d.object}),o)},3201:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(758),l=s.Row,c=s.Col,u=n(2116),p=n(2103),f=n(2472),d=n(3209),m=n(2173),y=n(2149),g=n(3231);e.exports=function(e){var t=e.enabled,n=e.requests,s=void 0===n?[]:n,b=e.onClose,h=e.responses,v=void 0===h?[]:h,S=e.index,E=e.viewerOptions,O=void 0===E?{}:E,w=e.format,T=e.dock,A=void 0===T||T,P=e.position,C=e.size,_=e.fluid,x=e.validResponses,I=void 0===x?[]:x,j=e.viewer,L=void 0===j?function(){return null}:j,R=e.getToolButtons,D=void 0===R?function(){return[]}:R,N=e.getNavigationButtons,M=void 0===N?function(){return[]}:N,k=e.showFullscreen,G=e.reverseGeocodeData,F=void 0===G?{}:G,U=e.point,B=e.dockStyle,H=void 0===B?{}:B,z=e.draggable,V=e.setIndex,W=e.warning,Y=e.clearWarning,q=e.zIndex,Z=e.showEmptyMessageGFI,K=e.enabledCoordEditorButton,Q=e.showCoordinateEditor,X=e.onChangeClickPoint,J=e.onChangeFormat,$=e.formatCoord,ee=U&&U.latlng||null,te=null;ee&&(te=ee&&Math.round(1e17*ee.lng)/1e17,te-=360*Math.floor(te/360+.5));var ne=L,re=D(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{lngCorrected:te,validResponses:I,latlng:ee})),oe=s.length-v.length,ae=F.error?i.createElement(p,{msgId:"identifyRevGeocodeError"}):F.display_name;return i.createElement("div",{id:"identify-container",className:t&&0!==s.length?"identify-active":""},i.createElement(f,{bsStyle:"primary",glyph:"map-marker",title:O.header?i.createElement(p,{msgId:"identifyTitle"}):I[S]&&I[S].layerMetadata&&I[S].layerMetadata.title||"",open:t&&0!==s.length,size:C,fluid:_,position:P,draggable:z,onClose:b,dock:A,style:H,showFullscreen:k,zIndex:q,header:[i.createElement(g,{key:"coordinate-editor",formatCoord:$,enabledCoordEditorButton:K,onChange:X,onChangeFormat:J,edit:Q,coordinate:{lat:ee&&ee.lat,lon:te}}),i.createElement(d,r({latlng:ee,revGeocodeDisplayName:ae},e)),i.createElement(l,{key:"button-row",className:"text-center",style:{position:"relative"}},i.createElement(c,{key:"tools",xs:12},i.createElement(u,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:re,transitionProps:null})),i.createElement("div",{key:"navigation",style:{zIndex:1,position:"absolute",right:0,top:0,margin:"0 10px"}},i.createElement(u,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:M(e),transitionProps:null})))].filter((function(e){return e})),noResize:!0},i.createElement(ne,r({index:S,setIndex:V,format:w,missingResponses:oe,responses:v,showEmptyMessageGFI:Z},O))),i.createElement(y,null,i.createElement(m,{fade:!0,title:i.createElement(p,{msgId:"warning"}),size:"xs",show:W,onClose:Y,buttons:[{text:i.createElement(p,{msgId:"close"}),onClick:Y,bsStyle:"primary"}]},i.createElement("div",{className:"ms-alert",style:{padding:15}},i.createElement("div",{className:"ms-alert-center text-center"},i.createElement(p,{msgId:"identifyNoQueryableLayers"}))))))}},3202:function(e,t,n){var r=n(1),o=n(407).branch,a=n(13).omit,i=n(2135);e.exports=o((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,n=e.noTooltipWhenDisabled,r=void 0!==n&&n;return!(r&&t)}),i,(function(e){return function(t){return r.createElement(e,a(t,["tooltipId","tooltip","noTooltipWhenDisabled"]),t.children)}}))},3207:function(e,t,n){var r=n(1),o=n(758),a=o.Button,i=o.Glyphicon,s=o.Grid,l=o.Row,c=o.Col,u={bottom:{true:"chevron-down",false:"chevron-up"},top:{true:"chevron-up",false:"chevron-down"},right:{true:"chevron-right",false:"chevron-left"},left:{true:"chevron-left",false:"chevron-right"}};e.exports=function(e){var t=e.position,n=void 0===t?"right":t,o=e.onClose,p=e.bsStyle,f=void 0===p?"default":p,d=e.title,m=void 0===d?"":d,y=e.fullscreen,g=void 0!==y&&y,b=e.showFullscreen,h=void 0!==b&&b,v=e.glyph,S=void 0===v?"info-sign":v,E=e.additionalRows,O=e.onFullscreen,w=void 0===O?function(){}:O,T=o?r.createElement(a,{key:"ms-header-close",className:"square-button ms-close",onClick:o,bsStyle:f},r.createElement(i,{glyph:"1-close"})):null,A=h?r.createElement(a,{key:"ms-header-glyph",className:"square-button",bsStyle:f,onClick:function(){return w(!g)}},r.createElement(i,{glyph:u[n]&&u[n][g]||"resize-full"})):r.createElement("div",{key:"ms-header-glyph",className:"square-button ".concat("bg-"+f),style:{display:"flex"}},r.createElement(i,{glyph:S,className:"".concat("default"===f?"text-primary":"")})),P="left"===n?[T,A]:[A,T];return r.createElement(s,{fluid:!0,style:{width:"100%"},className:"ms-header ms-"+f},r.createElement(l,null,r.createElement(c,{xs:2},P[0]),r.createElement(c,{xs:8},r.createElement("h4",null,m)),r.createElement(c,{xs:2},P[1])),E)}},3209:function(e,t,n){var r=n(1),o=n(2173),a=n(2149),i=n(2103),s=n(758).Glyphicon;e.exports=function(e){var t=e.latlng,n=e.enableRevGeocode,l=e.hideRevGeocode,c=void 0===l?function(){}:l,u=e.showModalReverse,p=e.revGeocodeDisplayName;return n&&t?r.createElement(a,null,r.createElement(o,{fade:!0,title:r.createElement("span",null,r.createElement(s,{glyph:"map-marker"})," ",r.createElement(i,{msgId:"identifyRevGeocodeModalTitle"})),size:"xs",show:u,onClose:c,buttons:[{text:r.createElement(i,{msgId:"close"}),onClick:c,bsStyle:"primary"}]},r.createElement("div",{className:"ms-alert",style:{padding:15}},r.createElement("div",{className:"ms-alert-center text-center"},r.createElement("div",null,p))))):null}},3231:function(e,t,n){var r=n(1),o=n(3232),a=n(3239);e.exports=function(e){var t=e.coordinate,n=void 0===t?{}:t,i=e.formatCoord,s=e.edit,l=e.onChange,c=void 0===l?function(){}:l,u=e.onChangeFormat,p=void 0===u?function(){}:u;return s?r.createElement(o,{removeVisible:!1,formatCoord:i,coordinate:n||{lat:"",lon:""},onChange:c,onChangeFormat:p}):r.createElement(a,{className:"text-center",formatCoord:i,coordinate:n||{lat:"",lon:""}})}},3232:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(1),a=n(2672);e.exports=function(e){var t;return o.createElement(a,(r(t={key:"IdentifyEditor",format:e.formatCoord||"decimal",aeronauticalOptions:{seconds:{decimals:4,step:1e-4}},idx:1,onChange:function(t,n,r){e.onChange(n,null===r||""===r?void 0:r)},onChangeFormat:function(t){e.onChangeFormat(t)}},"key","GFI row coord editor"),r(t,"component",e.coordinate||{}),r(t,"customClassName","coord-editor"),r(t,"isDraggable",!1),r(t,"showDraggable",!1),r(t,"formatVisible",!0),r(t,"showLabels",!0),r(t,"removeVisible",!1),t))}},3233:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(1),l=n(407),c=l.compose,u=l.branch,p=n(782).DragSource,f=n(782).DropTarget,d={beginDrag:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}};e.exports=u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isDraggable;return t}),c(p("row",d,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging(),draggingItem:t.getItem()||null}})),f("row",{drop:function(e,t){var n=t.getItem();n.sortId!==e.sortId&&e.onSort(e.sortId,n.sortId,{id:e.id,containerId:e.containerId},{id:n.id,containerId:n.containerId})}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})),(function(e){return function(t){var n=t.connectDragSource,a=t.connectDragPreview,i=t.connectDropTarget,l=t.isDragging,c=t.isOver,u=o(t,["connectDragSource","connectDragPreview","connectDropTarget","isDragging","isOver"]),p=u.draggingItem&&u.draggingItem.sortId<u.sortId,f=u.draggingItem&&u.draggingItem.containerId===u.containerId,d=f&&l?" ms-dragging":"",m=f&&c?" ms-over":"",y=f&&p?" ms-above":" ms-below";return a(i(s.createElement("div",{className:"ms-dragg".concat(d).concat(m," ").concat(y)},s.createElement("div",null,s.createElement(e,r({},u,{connectDragSource:n,isDragging:l,isOver:c,onDrop:function(e){return e.stopPropagation()}}))))))}})))},3234:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(1),f=n(0),d=n(758),m=d.FormGroup,y=d.FormControl,g=n(13).capitalize,b=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"verifyOnKeyDownEvent",(function(e){69===e.keyCode&&e.preventDefault()})),u(l(n),"validateDecimalLon",(function(e){var t=n.props.constraints[n.props.format].lon.min,r=n.props.constraints[n.props.format].lon.max,o=parseFloat(e);return isNaN(o)||o<t||o>r?"error":null})),u(l(n),"validateDecimalLat",(function(e){var t=n.props.constraints[n.props.format].lat.min,r=n.props.constraints[n.props.format].lat.max,o=parseFloat(e);return isNaN(o)||o<t||o>r?"error":null})),n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.coordinate,r=t.value,o=t.onChange,a="validateDecimal"+g(n);return p.createElement(m,{validationState:this[a](r)},p.createElement(y,{key:n,value:r,placeholder:n,onChange:function(t){""===t.target.value&&o(""),null===e[a](t.target.value)&&o(t.target.value)},onKeyDown:function(t){e.verifyOnKeyDownEvent(t),e.props.onKeyDown(t)},step:1,type:"number"}))}}])&&a(n.prototype,r),f&&a(n,f),t}(p.Component);u(b,"propTypes",{idx:f.number,value:f.number,constraints:f.object,format:f.string,coordinate:f.string,onChange:f.func,onKeyDown:f.func}),u(b,"defaultProps",{format:"decimal",coordinate:"lat",constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}},onKeyDown:function(){}}),e.exports=b},3235:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(1),m=n(0),y=n(407).compose,g=n(758),b=g.FormGroup,h=g.FormControl,v=n(13).isNil,S=n(2674),E=n(3236),O=n(3237),w=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return f(u(n=l(this,(e=c(t)).call.apply(e,[this].concat(o)))),"onChange",(function(e,t){var r=n.getUpdatedCoordinateValue(e,t);n.props.onChange(r)})),f(u(n),"getUpdatedCoordinateValue",(function(e,t){try{var r=f({degrees:n.props.degrees,minutes:n.props.minutes,seconds:n.props.seconds,direction:n.props.direction},e,"degrees"===e?Math.min(t,n.props.maxDegrees):t),o=r.seconds,a=r.minutes+n.getSexagesimalStep(o),i=Math.min(n.props.maxDegrees,r.degrees+n.getSexagesimalStep(a)),s=r.direction;return o=n.roundToNextSexagesimalStep(o),a=n.roundToNextSexagesimalStep(a),i===n.props.maxDegrees&&(a=0,o=0),s=i<0?s===n.props.directions[0]?n.props.directions[1]:n.props.directions[0]:s,-1===i&&(r.degrees<0&&r.minutes>=0?i=r.degrees:r.minutes<0&&r.degrees<=0?(i=0,a=r.minutes):(i=0,a=0,o=1e-4)),{degrees:i,minutes:a,seconds:o,direction:s}}catch(e){return null}})),f(u(n),"getSexagesimalStep",(function(e){return e>=60?1:e<0?-1:0})),f(u(n),"getInputStyle",(function(e){return isNaN(e)||""===e?{borderColor:"#a94442"}:{}})),f(u(n),"verifyOnKeyDownEvent",(function(e){69===e.keyCode&&e.preventDefault()})),f(u(n),"roundToNextSexagesimalStep",(function(e){return e<0?60+e:e>=60?e-60:e})),f(u(n),"isValid",(function(e){var t=e.minutes,r=e.seconds,o=e.degrees,a=e.direction;return!v(t)&&t>0&&t<60&&!v(r)&&r>0&&r<60&&!v(o)&&o>0&&o<n.props.maxDegrees&&a})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t={padding:0,textAlign:"center",borderRight:"none"},n=this.getInputStyle(this.props.degrees),r=this.getInputStyle(this.props.minutes),o=this.getInputStyle(this.props.seconds),i={position:"relative",top:0,overflow:"visible",zIndex:3,left:-13,width:0,height:0},s=this.props.aeronauticalOptions.seconds.step;return d.createElement(b,{style:{display:"inline-flex"}},d.createElement("div",{style:{width:50,display:"flex"}},d.createElement(h,{key:this.props.coordinate+"degree",value:this.props.degrees,placeholder:"d",onChange:function(t){return e.onChange("degrees",parseInt(t.target.value,10))},step:1,max:this.props.maxDegrees,min:-1,onKeyDown:function(t){e.verifyOnKeyDownEvent(t),e.props.onKeyDown(t)},style:a({width:"100%"},t,{},n),type:"number"}),d.createElement("span",{style:i},"°")),d.createElement("div",{style:{width:50,display:"flex"}},d.createElement(h,{key:this.props.coordinate+"minutes",placeholder:"m",value:this.props.minutes,onChange:function(t){return e.onChange("minutes",parseInt(t.target.value,10))},max:60,min:-1,onKeyDown:function(t){e.verifyOnKeyDownEvent(t),e.props.onKeyDown(t)},style:a({width:"100%"},t,{},r),step:1,type:"number"}),d.createElement("span",{style:i},"′")),d.createElement("div",{className:"seconds",style:{display:"flex"}},d.createElement(h,{key:this.props.coordinate+"seconds",value:this.props.seconds,placeholder:"s",onChange:function(t){return e.onChange("seconds",parseFloat(t.target.value))},step:s,max:60,onKeyDown:function(t){e.verifyOnKeyDownEvent(t),e.props.onKeyDown(t)},min:-1,style:a({width:"100%"},t,{},o),type:"number"}),d.createElement("span",{style:i},"″")),d.createElement("div",null,d.createElement(h,{componentClass:"select",placeholder:"select",value:this.props.direction,onChange:function(t){return e.onChange("direction",t.target.value)},style:{width:47,paddingLeft:4,paddingRight:4}},this.props.directions.map((function(e){return d.createElement("option",{key:e,value:e},e)})))))}}])&&s(n.prototype,r),o&&s(n,o),t}(d.Component);f(w,"propTypes",{idx:m.number,maxDegrees:m.number,degrees:m.number,minutes:m.number,seconds:m.number,directions:m.array,direction:m.string,aeronauticalOptions:m.object,coordinate:m.string,onChange:m.func,onKeyDown:m.func}),f(w,"defaultProps",{coordinate:"lat",maxDegrees:90,directions:["N","S"],aeronauticalOptions:{seconds:{decimals:4,step:1e-4}},onKeyDown:function(){}}),e.exports=y(E,S,O)(w)},3236:function(e,t,n){var r=n(407).withProps;e.exports=r((function(e){var t=e.coordinate,n=void 0===t?"lat":t;return{maxDegrees:"lat"===n?90:180,directions:"lat"===n?["N","S"]:["E","W"]}}))},3237:function(e,t,n){var r=n(407),o=r.compose,a=r.withHandlers,i=r.withState,s=r.withProps;e.exports=o(s((function(e){return{isValid:""!==e.value}})),i("initial","setInitial",{}),s((function(e){var t=e.isValid,n=e.initial,r=e.degrees,o=e.minutes,a=e.seconds;return t||""===r&&""===o&&""===a?{}:n})),a({onChange:function(e){return function(t){var n=t.degrees,r=t.minutes,o=t.seconds,a=t.direction;isNaN(n)?e.setInitial({degrees:"",minutes:r,seconds:o,direction:a}):isNaN(r)?e.setInitial({degrees:n,minutes:"",seconds:o,direction:a}):isNaN(o)&&e.setInitial({degrees:n,minutes:r,seconds:"",direction:a}),e.onChange({degrees:n,minutes:r,seconds:o,direction:a})}}}))},3238:function(e,t,n){var r=n(407),o=r.compose,a=r.withHandlers;e.exports=o(a({onChange:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.maxLatitude,o=void 0===r?89.9997222222:r,a=e.coordinate;return function(e){return n(Math.abs(parseFloat(e))>o&&"lat"===a?Math.sign(e)*o:e)}}}))},3239:function(e,t,n){var r=n(1),o=n(758),a=o.Row,i=o.Col,s=n(13).isNil,l=n(2210),c=n(2674)((function(e){var t=e.degrees,n=void 0===t?0:t,o=e.minutes,a=void 0===o?0:o,i=e.seconds,s=void 0===i?0:i,c=e.direction,u=e.integerFormat,p=e.decimalFormat;return r.createElement("span",{className:"coordinate-dms"},r.createElement(l,{key:"latD",numberParams:u,value:n}),r.createElement("span",null,"° "),r.createElement(l,{key:"latM",numberParams:u,value:a}),r.createElement("span",null,"' "),r.createElement(l,{key:"latS",numberParams:p,value:s}),r.createElement("span",null,"'' ")," ",r.createElement("span",null,c))}));e.exports=function(e){var t=e.integerFormat,n=void 0===t?{style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0}:t,o=e.decimalFormat,u=void 0===o?{style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:4,minimumFractionDigits:4}:o,p=e.coordinate,f=void 0===p?{}:p,d=e.formatCoord,m=void 0===d?"decimal":d,y=e.className;return r.createElement(a,{className:y},r.createElement(i,{xs:12},s(f.lat)||s(f.lon)?null:"decimal"===m?r.createElement("div",{className:"ms-coordinates-decimal"},"Lat: ",r.createElement(l,{value:Math.round(1e5*f.lat)/1e5})," - Long: ",r.createElement(l,{value:f.lon})):r.createElement("div",{className:"ms-coordinates-aeronautical"},r.createElement("span",null,"Lat: ",r.createElement(c,{integerFormat:n,decimalFormat:u,value:f.lat})),r.createElement("span",null," - "),r.createElement("span",null," Long: ",r.createElement(c,{coordinate:"lon",integerFormat:n,decimalFormat:u,value:f.lon})))))}},3240:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(33),m=n(273),y=n(758),g=y.FormControl,b=y.FormGroup,h=y.ControlLabel,v=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"launchChangeInfoFormatAction",(function(){var e=d.findDOMNode(l(n)).getElementsByTagName("select").item(0);n.props.onInfoFormatChange(e.value)})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=Object.keys(this.props.availableInfoFormat).reduce((function(t,n){return Object.keys(t).map((function(e){return t[e]})).some((function(t){return t===e.props.availableInfoFormat[n]}))||(t[n]=e.props.availableInfoFormat[n]),t}),{}),n=Object.keys(t).map((function(e){var n=t[e],r=e;return f.createElement("option",{value:n,key:n},r)}));return f.createElement(b,{bsSize:"small"},f.createElement(h,null,this.props.label),f.createElement(g,{id:this.props.id,value:this.props.infoFormat,componentClass:"select",onChange:this.launchChangeInfoFormatAction},n))}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(v,"propTypes",{id:p.string,label:p.oneOfType([p.func,p.string,p.object]),availableInfoFormat:p.object,infoFormat:p.string,onInfoFormatChange:p.func}),u(v,"defaultProps",{id:"mapstore-feature-format-selector",availableInfoFormat:m.getAvailableInfoFormat(),infoFormat:m.getDefaultInfoFormatValue(),onInfoFormatChange:function(){}}),e.exports=v},3244:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(15),l=n(13),c=l.get,u=l.find,p=l.isString,f=l.isNil,d=n(71),m=n(2349),y=n(2168),g=y.LOAD_FEATURE_INFO,b=y.ERROR_FEATURE_INFO,h=y.GET_VECTOR_INFO,v=y.FEATURE_INFO_CLICK,S=y.CLOSE_IDENTIFY,E=y.TOGGLE_HIGHLIGHT_FEATURE,O=y.featureInfoClick,w=y.updateCenterToMarker,T=y.purgeMapInfoResults,A=y.exceptionsFeatureInfo,P=y.loadFeatureInfo,C=y.errorFeatureInfo,_=y.noQueryableLayers,x=y.newMapInfoRequest,I=y.getVectorInfo,j=y.showMapinfoMarker,L=y.hideMapinfoMarker,R=n(267).SET_CONTROL_PROPERTIES,D=n(2133).closeFeatureGrid,N=n(409),M=N.CHANGE_MOUSE_POINTER,k=N.CLICK_ON_MAP,G=N.zoomToPoint,F=n(2478).closeAnnotations,U=n(40).MAP_CONFIG_LOADED,B=n(773),H=B.stopGetFeatureInfoSelector,z=B.identifyOptionsSelector,V=B.clickPointSelector,W=B.clickLayerSelector,Y=n(408),q=Y.centerToMarkerSelector,Z=Y.queryableLayersSelector,K=n(2183).modeSelector,Q=n(268),X=Q.mapSelector,J=Q.projectionDefsSelector,$=Q.projectionSelector,ee=n(2140).boundingMapRectSelector,te=n(80),ne=te.centerToVisibleArea,re=te.isInsideVisibleArea,oe=te.isPointInsideExtent,ae=te.reprojectBbox,ie=n(773),se=ie.isHighlightEnabledSelector,le=ie.itemIdSelector,ce=ie.overrideParamsSelector,ue=ie.filterNameListSelector,pe=n(196),fe=pe.getCurrentResolution,de=pe.parseLayoutValue,me=n(273),ye=n(80).parseURN,ge=function(e){return H(e)||function(e){return"EDIT"===K(e)}(e)};e.exports={getFeatureInfoOnFeatureInfoClick:function(e,t){var n=t.getState,o=void 0===n?function(){}:n;return e.ofType(v).switchMap((function(e){var t=e.point,n=e.filterNameList,i=void 0===n?[]:n,l=e.overrideParams,c=void 0===l?{}:l,u=Z(o());if(0===u.length)return s.Observable.of(T(),_());var y=["SLD_BODY"],g=["buffer","cql_filter","filter","propertyName"],b=s.Observable.from(u.filter((function(e){return!i.length||i.filter((function(t){return-1!==t.indexOf(e.name)})).length>0}))).mergeMap((function(e){var t=me.buildIdentifyRequest(e,z(o())),n=t.url,i=t.request,l=t.metadata;return le(o())&&ce(o())&&(i=a({},i,{},ce(o())[e.name])),c[e.name]&&(i=a({},i,{},c[e.name])),n?function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=a({},o,{},t),u=m.v1(),y=function(t){return s.Observable.defer((function(){return d.get(e,{params:t})}))};return(i&&"application/json"!==c.info_format?s.Observable.forkJoin(y(c),y(a({},c,{info_format:"application/json"})).map((function(e){return e.data})).catch((function(){return s.Observable.of({})}))).map((function(e){var t=r(e,2),n=t[0],o=t[1];return a({},n,{features:o&&o.features&&o.features.filter((function(e){return!!f(l)||e.id===l})),featuresCrs:o&&o.crs&&ye(o.crs)})})):y(c).map((function(e){return e.data})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{data:p(e)?e:a({},e,{features:e.features&&e.features.filter((function(e){return!l||e.id===l}))}),features:e.features&&e.features.filter((function(e){return!l||e.id===l})),featuresCrs:e&&e.crs&&ye(e.crs)}}))).map((function(e){return e.data.exceptions?A(u,e.data.exceptions,t,n):P(u,e.data,t,a({},n,{features:e.features,featuresCrs:e.featuresCrs}))})).catch((function(e){return s.Observable.of(C(u,e.data||e.statusText||e.status,t,n))})).startWith(x(u,c))}(n,i,l,me.filterRequestParams(e,g,y),se(o()),le(o())):s.Observable.of(I(e,i,l))}));return t&&t.modifiers&&!0===t.modifiers.ctrl&&t.multiSelection?b:b.startWith(T())}))},handleMapInfoMarker:function(e){return e.ofType(v).map((function(e){return e.layer?L():j()}))},closeFeatureGridFromIdentifyEpic:function(e){return e.ofType(g,h).switchMap((function(){return s.Observable.of(D())}))},closeFeatureAndAnnotationEditing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(S).switchMap((function(){return c(r(),"annotations.editing")?s.Observable.of(F()):s.Observable.of(T())}))},changeMapPointer:function(e,t){return e.ofType(M).filter((function(){return!t.getState().map})).switchMap((function(t){return e.ofType(U).mapTo(t)}))},onMapClick:function(e,t){return e.ofType(k).filter((function(){var e=t.getState().mapInfo.disableAlwaysOn;return void 0!==e&&e||!ge(t.getState()||{})})).map((function(e){var t=e.point,n=e.layer;return O(t,n)}))},featureInfoClickOnHighligh:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(E).filter((function(e){return e.enabled&&V(r())})).switchMap((function(){return s.Observable.from([O(V(r()),W(r()),ue(r()),ce(r()),le(r())),j()])}))},zoomToVisibleAreaEpic:function(e,t){return e.ofType(v).filter((function(){return q(t.getState())})).switchMap((function(n){return e.ofType(g,b).switchMap((function(){var e=t.getState(),r=X(e),o=$(e),a=J(e),i=u(a,{code:o}),l=i&&i.extent,c=l&&ae(l,o,"EPSG:4326"),p=ee(e),f=n.point&&n.point&&n.point.latlng,d=fe(Math.round(r.zoom),0,21,96),m=p&&r&&r.size&&{left:de(p.left,r.size.width),bottom:de(p.bottom,r.size.height),right:de(p.right,r.size.width),top:de(p.top,r.size.height)};if(!r||!m||!f||n.point.cartographic||re(f,r,m,d))return s.Observable.of(w("disabled"));if(c&&!oe(f,c))return s.Observable.empty();var y=ne(f,r,m,d);return s.Observable.of(w("enabled"),G(y.pos,y.zoom,y.crs))}))}))},closeFeatureInfoOnCatalogOpenEpic:function(e){return e.ofType(R).filter((function(e){return"metadataexplorer"===e.control&&e.properties&&e.properties.enabled})).switchMap((function(){return s.Observable.of(T(),L())}))}}},3245:function(e,t,n){var r=n(3246);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3246:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi .mapToolbar {\n    position: absolute;\n    bottom: 5px;\n    right: 0;\n    z-index: 1000;\n    margin-bottom: 35px;\n    margin-right: 5px;\n}\n\n.msgapi .toolbarexpand-enter {\n  opacity: 0.01;\n}\n\n.msgapi .toolbarexpand-enter.toolbarexpand-enter-active {\n  opacity: 1;\n  transition: opacity 500ms ease-in;\n}\n\n.msgapi .toolbarexpand-leave {\n  opacity: 1;\n}\n\n.msgapi .toolbarexpand-leave.toolbarexpand-leave-active {\n  opacity: 0.01;\n  transition: opacity 300ms ease-in;\n}\n\n.msgapi #navigationBar .toolbar-panel {\n    bottom: 80px !important;\n}\n\n.msgapi #identifyBar .mapToolbar {\n    top: auto !important;\n    bottom: 5px;\n    right: 212px !important;\n}\n",""])},3249:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(758),m=d.Button,y=d.Glyphicon,g=d.Tooltip,b=n(2114),h=n(196),v=n(47),S=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"addTooltip",(function(e){var t=f.createElement(g,{id:"locate-tooltip"},n.props.tooltip);return f.createElement(b,{placement:n.props.tooltipPlace,key:"overlay-trigger."+n.props.id,overlay:t},e)})),u(l(n),"zoomToMaxExtent",(function(){var e=n.props.mapConfig.maxExtent,t=n.props.mapConfig.size,r=1,o=n.props.mapConfig.center,a=n.props.mapConfig.projection||"EPSG:3857";e&&"[object Array]"===Object.prototype.toString.call(e)&&(r=h.getZoomForExtent(e,t,0,21),0===(o=h.getCenterForExtent(e,a)).x&&0===o.y||(o=v.getCenter(o,"EPSG:4326")));var i=h.getBbox(o,r,t);n.props.changeMapView(o,r,i,n.props.mapConfig.size,null,n.props.mapConfig.projection)})),u(l(n),"zoomToInitialExtent",(function(){var e=n.props.mapInitialConfig,t=h.getBbox(e.center,e.zoom,n.props.mapConfig.size);n.props.changeMapView(e.center,e.zoom,t,n.props.mapConfig.size,null,n.props.mapConfig.projection)})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return this.addTooltip(f.createElement(m,{id:this.props.id,style:this.props.style,bsSize:this.props.btnSize,onClick:function(){return e.props.useInitialExtent?e.zoomToInitialExtent():e.zoomToMaxExtent()},className:this.props.className,bsStyle:this.props.bsStyle},this.props.glyphicon?f.createElement(y,{glyph:this.props.glyphicon}):null,this.props.glyphicon&&this.props.text?" ":null,this.props.text,this.props.help))}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(S,"propTypes",{id:p.string,image:p.string,glyphicon:p.string,text:p.string,btnSize:p.oneOf(["large","small","xsmall"]),mapConfig:p.object,mapInitialConfig:p.object,changeMapView:p.func,btnType:p.oneOf(["normal","image"]),help:p.oneOfType([p.string,p.element]),tooltip:p.element,tooltipPlace:p.string,className:p.string,useInitialExtent:p.bool,bsStyle:p.string,style:p.object}),u(S,"defaultProps",{id:"mapstore-zoomtomaxextent",glyphicon:"resize-full",text:void 0,btnSize:"xsmall",btnType:"normal",useInitialExtent:!1,tooltipPlace:"left",bsStyle:"default",className:"square-button"}),e.exports=S},3250:function(e,t,n){var r=n(3251);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3251:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi #mapstore-zoomtomaxextent {\n    z-index: 1;\n    position: relative;\n}\n",""])},3252:function(e,t,n){var r=n(3253);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3253:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi #mapstore-globalspinner  {\n    width: 28px;\n    height: 28px;\n    box-shadow: 0px 0px 4px 2px rgba(0, 0, 0, 0.2);\n    background-color: white;\n    background-size: 80px 80px;\n    background-repeat: no-repeat;\n    border-radius: 4px;\n    border: 1px solid #999;\n    z-index: 10;\n    top: 90px;\n    left: 2px;\n    position: absolute;\n    margin: 8px;\n}\n\n.msgapi #mapstore-globalspinner .circle-wrapper {\n    margin-left: 2px;\n    margin-top: 1px;\n}\n\n.msgapi #mapstore-toolbar #mapstore-globalspinner {\n    position: static;\n    width: 42px;\n    margin: 0;\n    margin-top: 0;\n    height: 35px;\n    box-shadow: none;\n}\n\n.msgapi .ms2-loading .sk-circle-wrapper {\n     width: 30px;\n     height: 30px;\n     margin-left: 10px !important;\n     margin-top: 10px !important;\n }\n",""])},3254:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(0),p=n(1),f=n(2145);n(3255);var d=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return this.props.loading?p.createElement("div",{className:this.props.className,id:this.props.id},p.createElement(f,{noFadeIn:!0,overrideSpinnerClassName:"spinner",spinnerName:this.props.spinner})):null}}])&&a(n.prototype,r),c&&a(n,c),t}(p.Component);c(d,"propTypes",{id:u.string,loading:u.bool,className:u.string,spinner:u.string}),c(d,"defaultProps",{id:"mapstore-globalspinner",loading:!1,className:"ms2-loading",spinner:"circle"}),e.exports=d},3255:function(e,t,n){var r=n(3256);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3256:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi #mapstore-globalspinner  {\n    margin: 0 !important;\n    width: 40px !important;\n    position:static !important;\n    border-radius: 0 !important;\n}\n",""])},3257:function(e,t,n){var r=n(3258);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3258:function(e,t,n){(e.exports=n(759)()).push([e.i,"/*viewer navbar */\n.msgapi .navbar-dx{\n\tposition:absolute;\n\tright:0;\n\ttop:0;\n}\n\n.msgapi .navbar-dx > ul{\n\tpadding:0;\n}\n\n.msgapi .navbar-dx > ul > li{\n\tfloat: left;\n\tlist-style:none;\n}\n\n.msgapi .navbar-dx .search-wrap .MapSearchBar{\n    right: 0;\n    top: 0;\n    left: 0;\n}\n\n.msgapi .navbar-dx .search-wrap .form-control,.msgapi .navbar-dx .search-wrap .form-control:focus{\n    border-color: #fff;\n    border-right: 0;\n    webkit-box-shadow: none;\n    box-shadow: none;\n}\n.msgapi .navbar-dx .search-wrap .MapSearchBar .input-group-addon{\n    border: 0;\n}\n.msgapi .navbar-dx .search-result-list{\n    left: 0;\n    max-height: none;\n}\n\n.msgapi .navbar-dx .dropdown-menu {\n\tmargin:0;\n\tpadding-top: 0;\n}\n\n@media (min-width: 1200px) {\n    .msgapi .navbar-dx .search-wrap {\n       width: 500px;\n       height: 50px;\n    }\n}\n\n.msgapi .navbar-dx > * {\n\tdisplay: inline-block;\n}\n/* Page Navbar */\n.msgapi .navbar-home .dropdown {\n\tfloat: right;\n}\n.msgapi .navbar-home .navbar-header {\n\tmargin-top: 7px;\n\tmargin-left: 10px;\n\tmargin-right: 10px;\n\tdisplay: inline-block;\n}\n",""])},3259:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/ROADMAP.jpg"},3260:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/TERRAIN.jpg"},3261:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/SATELLITE.jpg"},3262:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/Aerial.jpg"},3263:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/mapnik.jpg"},3264:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/s2cloudless.jpg"},3265:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAD1APUDAREAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGwgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//EABQQAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQEAAQUCcH//xAAUEQEAAAAAAAAAAAAAAAAAAACQ/9oACAEDAQE/AXB//8QAFBEBAAAAAAAAAAAAAAAAAAAAkP/aAAgBAgEBPwFwf//EABQQAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQEABj8CcH//xAAUEAEAAAAAAAAAAAAAAAAAAACQ/9oACAEBAAE/IXB//9oADAMBAAIAAwAAABCSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSf/8QAFBEBAAAAAAAAAAAAAAAAAAAAkP/aAAgBAwEBPxBwf//EABQRAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQIBAT8QcH//xAAUEAEAAAAAAAAAAAAAAAAAAACQ/9oACAEBAAE/EHB//9k="},3266:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/dafault.jpg"},3267:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/NASA_NIGHT.jpg"},3268:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/AerialWithLabels.jpg"},3269:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/OpenTopoMap.jpg"},3270:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/HYBRID.jpg"},3271:function(e,t,n){e.exports=n.p+"MapStore2/web/client/plugins/background/assets/img/mapquest-osm.jpg"},3272:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1),d=n(26),m=n(2103),y=n(3273),g=n(3276),b=n(3278),h=n(2662),v=n(2688).default,S=n(2357),E=n(0),O=function(e){function t(){var e,n;a(this,t);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return p(c(n=s(this,(e=l(t)).call.apply(e,[this].concat(i)))),"getThumb",(function(e){return e.thumbURL||n.props.thumbs[e.source]&&n.props.thumbs[e.source][e.name]||n.props.thumbs.unknown})),p(c(n),"getIcons",(function(e,t,r,o){return n.props.enabled?n.props.layers.map((function(a,i){var s=n.getThumb(a);return f.createElement("div",{style:{width:(o?r:0)+(o?0:r)+e+t,height:r+e+t},className:"background-preview-container"},"mobile"!==n.props.mode&&f.createElement("div",{style:{width:(o?r:0)+e+t},className:"background-tool-buttons"},n.props.mapIsEditable&&n.props.allowDeletion&&n.props.layers.length>1&&f.createElement(h,{glyph:"trash",className:"square-button-md background-tool-button delete-button",bsStyle:"primary",onClick:function(){n.props.onRemoveBackground(!0,a.title||a.name||"",a.id)}}),n.props.mapIsEditable&&!n.props.enabledCatalog&&!("wms"!==a.type&&"wmts"!==a.type)&&f.createElement(h,{glyph:"wrench",className:"square-button-md background-tool-button edit-button",bsStyle:"primary",onClick:function(){n.props.addBackgroundProperties({layer:a,editing:!0})}})),f.createElement(b,{projection:n.props.projection,vertical:o,key:i,src:s,currentLayer:n.props.currentLayer,margin:r,side:e,frame:t,layer:a,onToggle:n.props.onToggle,onPropertiesChange:n.props.onPropertiesChange,onLayerChange:n.props.onLayerChange,setCurrentBackgroundLayer:n.props.setCurrentBackgroundLayer}))})):[]})),p(c(n),"getDimensions",(function(e,t,r,o,a,i){var s=a/2-(e+2*t+2*r)-o,l=e+2*t+2*r+(e+2*t+r)*i+o>a/2,c=Math.floor(s/(e+2*t+r));return c=c>i?i:c,{pagination:l,listSize:n.props.enabled?(e+t+r)*c+52:0,visibleIconsLength:c}})),p(c(n),"renderBackgroundSelector",(function(){var e=d({side:78,sidePreview:104,frame:3,margin:5,label:!0,vertical:!1},n.props.dimensions),t=2*e.frame,r=e.side-t,a=n.props.enabled?e.sidePreview-t:r,i=e.margin,s=n.props.enabled?a-2*t:0,l=n.props.enabled?n.props.tempLayer:n.props.currentLayer,c=n.getIcons(r,t,i,e.vertical),u=n.getDimensions(r,t,i,0,e.vertical?n.props.size.height:n.props.size.width,c.length),p=u.pagination,b=u.listSize,h=u.visibleIconsLength,E=r+t+i,O=r+t+2*i,w=e.vertical?{bottom:O,left:0,width:O,height:b}:{left:a+2*i+t,width:b,height:E},T=e.vertical?{height:E*h,width:E}:{height:E,width:E*h},A=n.props.modalParams&&n.props.modalParams.layer||{},P=(n.props.backgroundList||[]).find((function(e){return e.id===A.id})),C={title:A.title,format:A.format,style:A.style,additionalParameters:A.params,thumbnail:{data:P&&P.thumbnail,url:n.getThumb(A)}},_=n.props.confirmDeleteBackgroundModal||{show:!1},x=_.show,I=_.layerId,j=_.layerTitle;return h<=0&&n.props.enabled?null:f.createElement("span",null,f.createElement(S,{draggable:!1,modal:!0,show:x,onClose:function(){return n.props.onRemoveBackground(!1)},onConfirm:function(){n.props.removeBackground(I),n.props.onRemoveBackground(!1)},confirmButtonBSStyle:"default",confirmButtonContent:f.createElement(m,{msgId:"confirm"}),closeText:f.createElement(m,{msgId:"cancel"}),closeGlyph:"1-close"},f.createElement(m,{msgId:"backgroundSelector.confirmDelete",msgParams:{title:j}})),n.props.modalParams&&n.props.modalParams.editing&&f.createElement(v,o({onClose:n.props.clearModal,onSave:function(e){n.props.updateNode(e.id,"layers",e),n.props.onBackgroundEdit(e.id)},updateThumbnail:n.props.onUpdateThumbnail},C,n.props.modalParams)),f.createElement("div",{className:"background-plugin-position",style:n.props.style},f.createElement(y,{layers:n.props.layers,enabledCatalog:n.props.enabledCatalog,currentLayer:n.props.currentLayer,onAdd:function(){return n.props.onAdd(n.props.source||"backgroundSelector")},showLabel:e.label,src:n.getThumb(l),side:a,frame:t,margin:i,labelHeight:s,label:l.title,onToggle:n.props.onToggle,mode:n.props.mode,mapIsEditable:n.props.mapIsEditable}),f.createElement("div",{className:"background-list-container",style:w},f.createElement(g,{vertical:e.vertical,start:n.props.start,bottom:0,height:T.height,width:T.width,icons:c,pagination:p,length:h,onStartChange:n.props.onStartChange}))))})),n}var n,r,E;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){this.props.onLayerChange("currentLayer",{}),this.props.onLayerChange("tempLayer",{}),this.props.onStartChange(0)}},{key:"render",value:function(){return this.props.layers.length>0?this.renderBackgroundSelector():null}}])&&i(n.prototype,r),E&&i(n,E),t}(f.Component);p(O,"propTypes",{mode:E.string,backgroundList:E.array,backgrounds:E.array,start:E.number,style:E.object,enabled:E.bool,layers:E.array,currentLayer:E.object,tempLayer:E.object,size:E.object,dimensions:E.object,thumbs:E.object,mapIsEditable:E.bool,onPropertiesChange:E.func,onToggle:E.func,onLayerChange:E.func,onStartChange:E.func,onAdd:E.func,enabledCatalog:E.bool,onRemove:E.func,onBackgroundEdit:E.func,source:E.string,addBackgroundProperties:E.func,onUpdateThumbnail:E.func,removeBackground:E.func,onRemoveBackground:E.func,setCurrentBackgroundLayer:E.func,confirmDeleteBackgroundModal:E.object,deletedId:E.string,modalParams:E.object,updateNode:E.func,clearModal:E.func,allowDeletion:E.bool,projection:E.string}),p(O,"defaultProps",{mode:"desktop",addBackgroundProperties:function(){},onBackgroundEdit:function(){},setCurrentBackgroundLayer:function(){},source:"backgroundSelector",start:0,style:{},enabled:!1,layers:[],currentLayer:{},tempLayer:{},size:{width:0,height:0},dimensions:{},allowDeletion:!0,thumbs:{unknown:n(3292)},mapIsEditable:!0,onRemoveBackground:function(){},onPropertiesChange:function(){},onToggle:function(){},onLayerChange:function(){},onStartChange:function(){},onAdd:function(){},onRemove:function(){},clearModal:function(){}}),e.exports=O},3273:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(1),p=n(0),f=n(2116);n(3274);var d=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return u.createElement("div",{className:"background-preview-button",style:{margin:this.props.margin}},u.createElement("div",{className:"background-preview-button-container bg-body",onClick:this.props.onToggle,style:{padding:this.props.frame/2,width:this.props.side+this.props.frame,height:this.props.side+this.props.frame}},this.props.showLabel?u.createElement("div",{className:"background-preview-button-label",style:{width:this.props.side,height:this.props.labelHeight,marginTop:0,padding:0}},u.createElement("div",{className:"bg-body bg-text",style:{padding:this.props.frame}},this.props.label)):null,u.createElement("div",{className:"background-preview-button-frame",style:{width:this.props.side,height:this.props.side}},u.createElement("img",{src:this.props.src}))),this.props.labelHeight>0?u.createElement(f,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:"mobile"!==this.props.mode&&this.props.mapIsEditable?[{glyph:"plus",tooltipId:"backgroundSelector.addTooltip",onClick:function(){return e.props.onAdd()},visible:!this.props.enabledCatalog}]:[]}):null)}}])&&a(n.prototype,r),c&&a(n,c),t}(u.Component);c(d,"propTypes",{mode:p.string,src:p.string,side:p.number,frame:p.number,margin:p.number,labelHeight:p.number,label:p.string,showLabel:p.bool,onToggle:p.func,onAdd:p.func,currentLayer:p.object,enabledCatalog:p.bool,layers:p.array,mapIsEditable:p.bool}),c(d,"defaultProps",{mode:"desktop",src:"./images/mapthumbs/none.jpg",side:50,frame:4,margin:5,labelHeight:29,label:"",showLabel:!0,onToggle:function(){},onAdd:function(){},currentLayer:{},layers:[]}),e.exports=d},3274:function(e,t,n){var r=n(3275);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3275:function(e,t,n){(e.exports=n(759)()).push([e.i,"\n.msgapi .background-preview-button-label {\n    position: absolute;\n    overflow: hidden;\n    font-weight: bold;\n    font-size: 12px;\n    text-align: center;\n    -webkit-transition: all 0.0s;\n    -moz-transition: all 0.0s;\n    -o-transition: all 0.0s;\n    transition: all 0.0s;\n\n}\n\n.msgapi .background-preview-button-label div {\n    overflow: hidden;\n    opacity: 0.8;\n    box-shadow: 0 7px 14px rgba(0,0,0,0.12), 0 5px 5px rgba(0,0,0,0.11);\n    -webkit-box-shadow:  0 7px 14px rgba(0,0,0,0.12), 0 5px 5px rgba(0,0,0,0.11);\n    -moz-box-shadow:  0 7px 14px rgba(0,0,0,0.12), 0 5px 5px rgba(0,0,0,0.11);\n}\n\n.msgapi .background-preview-button-container {\n    -webkit-transition: all 0.3s;\n    -moz-transition: all 0.3s;\n    -o-transition: all 0.3s;\n    transition: all 0.3s;\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -webkit-box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -moz-box-shadow:  0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n\n.msgapi .background-preview-button-frame {\n    overflow: hidden;\n    -webkit-transition: all 0.3s;\n    -moz-transition: all 0.3s;\n    -o-transition: all 0.3s;\n    transition: all 0.3s;\n}\n\n.msgapi .background-preview-button-frame img{\n    width: 100%;\n    height: 100%;\n}\n\n.msgapi .background-preview-button-container:hover {\n    cursor: pointer;\n    box-shadow: none;\n}\n\n.msgapi .background-preview-button-container:active {\n    opacity: 0.6;\n}\n",""])},3276:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(1),p=n(3277),f=n(0),d=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=[].concat(this.props.icons);t=this.props.pagination?t.slice(this.props.start,this.props.start+this.props.length):t,this.props.vertical&&t.unshift(u.createElement("div",{className:"background-list-arrow-placeholder"})),this.props.pagination&&(0!==this.props.start&&(this.props.vertical&&t.shift(),t.unshift(u.createElement(p,{key:"pagination_0",vertical:this.props.vertical,side:this.props.vertical?this.props.width:this.props.height,direction:!1,onClick:function(){e.props.onStartChange(e.props.start-1)}}))),this.props.start+this.props.length<this.props.icons.length&&t.push(u.createElement(p,{key:"pagination_1",vertical:this.props.vertical,side:this.props.vertical?this.props.width:this.props.height,onClick:function(){e.props.onStartChange(e.props.start+1)}})));var n=this.props.vertical?{height:this.props.pagination?this.props.height+50:this.props.height,width:this.props.width,bottom:this.props.bottom}:{height:this.props.height,width:this.props.pagination?this.props.width+50:this.props.width,bottom:this.props.bottom};return u.createElement("div",{style:n},t)}}])&&a(n.prototype,r),c&&a(n,c),t}(u.Component);c(d,"propTypes",{bottom:f.number,width:f.number,height:f.number,length:f.number,start:f.number,pagination:f.bool,vertical:f.bool,icons:f.array,onStartChange:f.func}),c(d,"defaultProps",{bottom:0,width:0,height:0,length:0,start:0,pagination:!1,vertical:!1,icons:[],onStartChange:function(){}}),e.exports=d},3277:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(1),p=n(758).Glyphicon,f=n(0),d=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.glyphs[this.props.vertical?"vertical":"horizontal"][this.props.direction?"next":"back"],t=this.props.vertical?"background-plugin-pagination-btn-vertical text-center":"background-plugin-pagination-btn-horizontal",n=this.props.vertical?{width:this.props.side}:{height:this.props.side};return u.createElement("div",{className:t+" text-primary",style:n,onClick:this.props.onClick},u.createElement(p,{glyph:e}))}}])&&a(n.prototype,r),c&&a(n,c),t}(u.Component);c(d,"propTypes",{side:f.number,direction:f.bool,vertical:f.bool,glyphs:f.object,onClick:f.func}),c(d,"defaultProps",{side:0,direction:!0,vertical:!1,glyphs:{horizontal:{next:"chevron-right",back:"chevron-left"},vertical:{next:"chevron-down",back:"chevron-up"}},onClick:function(){}}),e.exports=d},3278:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(1),p=n(0),f=n(13),d=f.indexOf,m=f.has;n(3279);var y=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=d(["EPSG:4326","EPSG:3857","EPSG:900913"],this.props.projection)>-1,n="wmts"===this.props.layer.type&&m(this.props.layer.allowedSRS,this.props.projection),r=this.props.vertical?"background-preview-icon-container-vertical":"background-preview-icon-container-horizontal",o=this.props.layer.visibility?" bg-primary":" bg-body",a=(t||n||"wms"===this.props.layer.type||"empty"===this.props.layer.type)&&!this.props.layer.invalid,i=a?function(){e.props.onToggle(),e.props.onPropertiesChange(e.props.layer.id,{visibility:!0}),e.props.setCurrentBackgroundLayer(e.props.layer.id)}:function(){};return u.createElement("div",{className:r+o+(a?"":" disabled-icon"),style:{padding:this.props.frame/2,marginLeft:this.props.vertical?this.props.margin:0,marginRight:this.props.vertical?0:this.props.margin,marginBottom:this.props.margin,width:this.props.side+this.props.frame,height:this.props.side+this.props.frame}},u.createElement("div",{className:"background-preview-icon-frame",style:{width:this.props.side,height:this.props.side}},u.createElement("img",{onMouseOver:function(){e.props.onLayerChange("tempLayer",e.props.layer)},onMouseOut:function(){e.props.onLayerChange("tempLayer",e.props.currentLayer)},onClick:i,src:this.props.src})))}}])&&a(n.prototype,r),c&&a(n,c),t}(u.Component);c(y,"propTypes",{side:p.number,frame:p.number,margin:p.number,src:p.string,vertical:p.bool,layer:p.object,currentLayer:p.object,onPropertiesChange:p.func,onToggle:p.func,onLayerChange:p.func,setCurrentBackgroundLayer:p.func,projection:p.string}),c(y,"defaultProps",{side:50,frame:4,margin:5,src:"",vertical:!1,layer:{},currentLayer:{},onPropertiesChange:function(){},onToggle:function(){},onLayerChange:function(){}}),e.exports=y},3279:function(e,t,n){var r=n(3280);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3280:function(e,t,n){(e.exports=n(759)()).push([e.i,"\n.msgapi .background-preview-icon-frame {\n    overflow: hidden;\n}\n\n.msgapi .background-preview-icon-frame img{\n    width: 100%;\n    height: 100%;\n}\n\n.msgapi .background-preview-icon-container-horizontal {\n    cursor: pointer;\n    float: left;\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -webkit-box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -moz-box-shadow:  0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n\n.msgapi .background-preview-icon-container-horizontal:hover {\n    cursor: pointer;\n    box-shadow: none;\n    opacity: 0.9;\n}\n\n.msgapi .background-preview-icon-container-horizontal:active {\n    opacity: 0.6;\n}\n\n.msgapi .background-preview-icon-container-horizontal.disabled-icon {\n    cursor: not-allowed;\n    float: left;\n    opacity: 0.5;\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -webkit-box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -moz-box-shadow:  0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n\n.msgapi .background-preview-icon-container-vertical {\n    cursor: pointer;\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -webkit-box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -moz-box-shadow:  0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n\n.msgapi .background-preview-icon-container-vertical:hover {\n    cursor: pointer;\n    box-shadow: none;\n    opacity: 0.9;\n}\n\n.msgapi .background-preview-icon-container-vertical:active {\n    opacity: 0.6;\n}\n\n.msgapi .background-preview-icon-container-vertical.disabled-icon {\n    cursor: not-allowed;\n    opacity: 0.5;\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -webkit-box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n    -moz-box-shadow:  0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n",""])},3291:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(758).Glyphicon,m=n(2693),y=n(2145),g=n(2103),b={FORMAT:f.createElement(g,{msgId:"map.errorFormat"}),SIZE:f.createElement(g,{msgId:"map.errorSize"})},h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"state",{}),u(l(n),"onRemoveThumbnail",(function(e){null!==e&&e.stopPropagation(),n.files=null,n.props.onUpdate(null,null),n.props.onRemoveThumbnail(),n.props.onError([],n.props.map.id)})),u(l(n),"getThumbnailUrl",(function(){return n.props.map&&n.props.map.newThumbnail&&"NODATA"!==n.props.map.newThumbnail?decodeURIComponent(n.props.map.newThumbnail):null})),u(l(n),"isImage",(function(e){return e&&"image/png"===e[0].type||e&&"image/jpeg"===e[0].type||e&&"image/jpg"===e[0].type})),u(l(n),"getDataUri",(function(e,t){var n=e;if(n&&n.length>0){var r=n[0],o=new FileReader;return o.onload=function(e){return t(e.target.result,r.size)},o.readAsDataURL(r)}return t(null)})),u(l(n),"onDrop",(function(e){var t=n.isImage(e),r=[];n.getDataUri(e,(function(o,a){t&&o&&a<n.props.maxFileSize?(n.props.onError([],n.props.map.id),n.files=e,n.props.onUpdate(o,e&&e[0].preview)):(t||r.push("FORMAT"),o&&a>=n.props.maxFileSize&&r.push("SIZE"),n.props.onError(r,n.props.map.id),n.files=e,n.props.onUpdate(null,null))}))})),u(l(n),"generateUUID",(function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))})),u(l(n),"processUpdateThumbnail",(function(e,t,r){var o=n.generateUUID();!n.props.map||r||!n.props.map.thumbnail||n.refs.imgThumbnail||t||n.deleteThumbnail(n.props.map.thumbnail,n.props.map.id,!0),n.props.map&&!r&&n.props.map.newThumbnail&&!n.refs.imgThumbnail&&t&&(n.deleteThumbnail(n.props.map.thumbnail,n.props.map.id,!1),n.props.onSaveAll(e,t,o,r,"THUMBNAIL",n.props.map.id)),n.props.map.newThumbnail&&r&&n.refs.imgThumbnail&&(n.deleteThumbnail(n.props.map.thumbnail,null,!1),n.props.onSaveAll(e,t,o,r,"THUMBNAIL",n.props.map.id)),n.props.map.newThumbnail&&!r&&n.refs.imgThumbnail&&n.props.onSaveAll(e,t,o,r,"THUMBNAIL",n.props.map.id),n.props.map.newThumbnail||r||n.refs.imgThumbnail||(n.props.map.thumbnail&&t&&n.deleteThumbnail(n.props.map.thumbnail,n.props.map.id,!1),n.props.onSaveAll(e,t,o,r,"THUMBNAIL",n.props.map.id))})),u(l(n),"updateThumbnail",(function(e,t){n.props.map.errors&&n.props.map.errors.length||n.getDataUri(n.files,(function(r){return n.processUpdateThumbnail(e,t,r),r}))})),u(l(n),"getThumbnailDataUri",(function(e){n.getDataUri(n.files,e)})),u(l(n),"deleteThumbnail",(function(e,t){if(e&&-1!==e.indexOf("geostore")){var r=e.indexOf("data%2F")+7,o=e.indexOf("%2Fraw"),a=e.slice(r,o);a&&n.props.onDeleteThumbnail(a,t)}})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"renderThumbnailErrors",value:function(){return this.props.thumbnailErrors&&this.props.thumbnailErrors.length>0?f.createElement("div",{className:"dropzone-errorBox alert-danger"},f.createElement("p",null,f.createElement(g,{msgId:"map.error"})),this.props.thumbnailErrors.map((function(e){return f.createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},b[e])}))):null}},{key:"render",value:function(){var e=f.createElement("div",{className:"dropzone-content-image"},this.props.message,f.createElement("br",null),this.props.suggestion,f.createElement("div",{className:"dropzone-errors"},this.renderThumbnailErrors()));return this.props.loading?f.createElement("div",{className:"btn btn-info",style:{float:"center"}}," ",f.createElement(y,{spinnerName:"circle",overrideSpinnerClassName:"spinner"})):f.createElement("div",{className:"dropzone-thumbnail-container",style:{pointerEvents:this.props.map.saving?"none":"auto"}},this.props.withLabel&&f.createElement("label",{className:"control-label"},f.createElement(g,{msgId:"map.thumbnail"})),f.createElement(m,{multiple:!1,className:"dropzone alert alert-info",rejectClassName:"alert-danger",onDrop:this.onDrop},this.getThumbnailUrl()?f.createElement("div",null,f.createElement("img",{src:this.getThumbnailUrl(),ref:"imgThumbnail"}),f.createElement("div",{className:"dropzone-content-image-added"},this.props.message,f.createElement("br",null),this.props.suggestion),f.createElement("div",{className:"dropzone-remove",onClick:this.onRemoveThumbnail},f.createElement(d,{glyph:this.props.glyphiconRemove}))):e))}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(h,"propTypes",{glyphiconRemove:p.string,style:p.object,thumbnailErrors:p.array,loading:p.bool,withLabel:p.bool,map:p.object,maxFileSize:p.number,onDrop:p.func,onError:p.func,onUpdate:p.func,onSaveAll:p.func,onCreateThumbnail:p.func,onDeleteThumbnail:p.func,onRemoveThumbnail:p.func,message:p.oneOfType([p.string,p.element]),suggestion:p.oneOfType([p.string,p.element])}),u(h,"contextTypes",{messages:p.object}),u(h,"defaultProps",{loading:!1,withLabel:!0,glyphiconRemove:"remove-circle",maxFileSize:5e5,onDrop:function(){},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemoveThumbnail:function(){},onCreateThumbnail:function(){},onDeleteThumbnail:function(){},message:f.createElement(g,{msgId:"map.message"}),suggestion:f.createElement(g,{msgId:"map.suggestion"}),map:{},thumbnailErrors:[]}),e.exports=h},3292:function(e,t,n){e.exports=n.p+"MapStore2/web/client/components/background/img/default.jpg"},3293:function(e,t,n){var r=n(2303),o=r.ADD_BACKGROUND,a=r.SET_BACKGROUND_MODAL_PARAMS,i=r.UPDATE_BACKGROUND_THUMBNAIL,s=r.BACKGROUNDS_CLEAR,l=r.ALLOW_BACKGROUNDS_DELETION,c=r.REMOVE_BACKGROUND,u=r.CREATE_BACKGROUNDS_LIST,p=r.CLEAR_MODAL_PARAMETERS,f=r.CONFIRM_DELETE_BACKGROUND_MODAL,d=n(2263).RESET_CATALOG,m=n(26);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return m({},e,{source:t.source});case d:return m({},e,{source:"metadataExplorer"});case a:return m({},e,{modalParams:t.modalParams});case s:return m({},e,{backgrounds:[],removedBackgroundsThumbIds:[],modalParams:{},lastRemovedId:void 0});case i:if(t.id){var n=e.backgrounds||[],r=-1===n.findIndex((function(e){return e.id===t.id})),y=r?n.concat({id:t.id}):n,g=y.map((function(e){return e.id===t.id?m({},e,{id:t.id,thumbnail:t.thumbnailData}):m({},e)}));return m({},e,{backgrounds:g})}return e;case p:return m({},e,{modalParams:void 0});case c:var b=e.backgrounds||[],h=e.removedBackgroundsThumbIds||[],v=b.filter((function(e){return e.id!==t.backgroundId})),S=b.filter((function(e){return e.id===t.backgroundId&&!!e.thumbId})).map((function(e){return e.thumbId}));return m({},e,{backgrounds:v,removedBackgroundsThumbIds:h.concat(S),lastRemovedId:t.backgroundId});case u:return m({},e,{backgrounds:t.backgrounds});case f:return m({},e,{confirmDeleteBackgroundModal:{show:t.show,layerTitle:t.layerTitle,layerId:t.layerId}});case l:return m({},e,{allowDeletion:t.allow||!1});default:return e}}},3294:function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(15),l=n(13).head,c=n(2303),u=c.ADD_BACKGROUND,p=c.ADD_BACKGROUND_PROPERTIES,f=c.SET_CURRENT_BACKGROUND_LAYER,d=c.BACKGROUND_ADDED,m=c.BACKGROUND_EDITED,y=c.REMOVE_BACKGROUND,g=c.createBackgroundsList,b=c.clearModalParameters,h=c.setBackgroundModalParams,v=c.setCurrentBackgroundLayer,S=c.allowBackgroundsDeletion,E=n(267).setControlProperty,O=n(40).MAP_CONFIG_LOADED,w=n(2263).changeSelectedService,T=n(269),A=T.changeLayerProperties,P=T.removeNode,C=n(408),_=C.getLayerFromId,x=C.currentBackgroundSelector,I=n(2304).backgroundLayersSelector,j=n(2361).getLayerCapabilities,L=n(137).formatCapabitiliesOptions;e.exports={accessMetadataExplorer:function(e){return e.ofType(u).switchMap((function(){return s.Observable.of(E("metadataexplorer","enabled",!0),S(!1),w("default_map_backgrounds"))}))},addBackgroundPropertiesEpic:function(e){return e.ofType(p).switchMap((function(e){var t=e.modalParams,n=s.Observable.of(h(a({},t,{loading:!1})));return t.layer&&"wms"===t.layer.type?s.Observable.of(h(a({},t,{loading:!0}))).concat(j(t.layer).switchMap((function(e){return s.Observable.of(h(a({},t,{loading:!1,capabilities:L(e)})))})).catch((function(){return n}))):n}))},backgroundsListInit:function(e){return e.ofType(O).switchMap((function(e){var t,n=e.config,o=n.map&&n.map.backgrounds||[],a=o.filter((function(e){return!!e.thumbnail})).map((function(e){return A(e.id,{thumbURL:function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r),a=0;a<t.length;++a)o[a]=t.charCodeAt(a);return URL.createObjectURL(new Blob([r],{type:n}))}(e.thumbnail)})}));return(t=s.Observable).of.apply(t,r(a.concat(g(o))))}))},setCurrentBackgroundLayerEpic:function(e,t){return e.ofType(f).switchMap((function(e){var n,o=e.layerId,a=t.getState(),i=_(a,o);return(n=s.Observable).of.apply(n,r(i&&"background"===i.group?[E("backgroundSelector","tempLayer",i),E("backgroundSelector","currentLayer",i)]:[]))}))},backgroundAddedEpic:function(e,t){return e.ofType(d).mergeMap((function(e){var n=e.layerId,r=t.getState(),o=_(r,n);return o?s.Observable.of(A(o.id,{visibility:!0}),v(o.id),b()):s.Observable.empty()}))},backgroundEditedEpic:function(e,t){return e.ofType(m).mergeMap((function(e){var n=e.layerId,r=t.getState();return _(r,n)?s.Observable.of(b()):s.Observable.empty()}))},backgroundRemovedEpic:function(e,t){return e.ofType(y).mergeMap((function(e){var n=e.backgroundId,r=t.getState(),o=_(r,n),a=I(r)||[],i=x(r)||{},c=n===i.id?l(a.filter((function(e){return e.id!==n&&!e.invalid}))):i;return o?s.Observable.of(P(n,"layers"),A(c.id,{visibility:!0}),v(c.id)):s.Observable.empty()}))}}},3295:function(e,t,n){var r=n(3296),o=n(13),a=o.head,i=o.last,s=n(267).setControlProperty,l=n(2695).TOGGLE_FULLSCREEN,c=n(47),u=n(15);e.exports={toggleFullscreenEpic:function(e){return e.ofType(l).switchMap((function(e){var t=document.querySelector(e&&e.querySelector||"."+(c.getConfigProp("themePrefix")||"ms2")+" > div");return t&&e.enable&&r.enabled?r.request(t):t&&!e.enable&&r.exit(),u.Observable.merge(u.Observable.fromEvent(document,i(a([["exitFullscreen","fullscreenchange"],["webkitExitFullscreen","webkitfullscreenchange"],["webkitCancelFullScreen","webkitfullscreenchange"],["mozCancelFullScreen","mozfullscreenchange"],["msExitFullscreen","MSFullscreenChange"]].filter((function(e){return document[e[0]]}))))).filter((function(){return r.element!==t})).map((function(){return s("fullscreen","enabled",!1)})),u.Observable.of(s("fullscreen","enabled",e.enable)),u.Observable.fromEvent(window,"hashchange").do((function(){return r.exit()})).map((function(){return s("fullscreen","enabled",!1)})))}))}}},3297:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(0),d=n(1),m=n(2479),y=n(758).Tooltip,g=n(2103),b=function(e){function t(){var e,n;a(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(c(n=s(this,(e=l(t)).call.apply(e,[this].concat(o)))),"getButtonProperties",(function(){return["id","btnConfig","options","text","glyphicon","onClick","tooltipPlace","style","btnType","image","pressedStyle","defaultStyle"].reduce((function(e,t){return e[t]=n.props[t],e}),{})})),n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return d.createElement(m,o({},this.getButtonProperties(),{pressed:this.props.active,tooltip:d.createElement(y,{id:"full-screen-button-tip"},d.createElement(g,{msgId:this.props.active?this.props.activeTooltip:this.props.notActiveTooltip}))}))}}])&&i(n.prototype,r),f&&i(n,f),t}(d.Component);p(b,"propTypes",{id:f.string,btnConfig:f.object,options:f.object,text:f.oneOfType([f.string,f.element]),help:f.oneOfType([f.string,f.element]),glyphicon:f.string,active:f.bool,onClick:f.func,activeTooltip:f.string,notActiveTooltip:f.string,tooltipPlace:f.string,style:f.object,btnType:f.oneOf(["normal","image"]),image:f.string,pressedStyle:f.string,defaultStyle:f.string}),p(b,"defaultProps",{id:"fullscreen-btn",activeTooltip:"fullscreen.tooltipDeactivate",notActiveTooltip:"fullscreen.tooltipActivate",tooltipPlace:"left",defaultStyle:"primary",pressedStyle:"success active",glyphicon:"1-full-screen",btnConfig:{className:"square-button"}}),e.exports=b},3298:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),f=n(1),d=n(26),m=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return u(l(n=i(this,(e=s(t)).call.apply(e,[this].concat(a)))),"getStyle",(function(){var e={cursor:n.props.disabled?"not-allowed":"pointer",margin:0,padding:0,display:"inline-block"};return n.props.image?d(e,{overflow:"hidden"}):d(e,{height:"48px",width:"48px",border:"1px solid grey",borderRadius:"4px",backgroundColor:"rgb(250, 250, 250)"}),d(e,n.props.style),e})),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return f.createElement("img",{className:this.props.className,id:this.props.id,title:this.props.tooltip,style:this.getStyle(),src:this.props.image,onClick:this.props.disabled?null:this.props.onClick})}}])&&a(n.prototype,r),p&&a(n,p),t}(f.Component);u(m,"propTypes",{id:p.string,image:p.string,onClick:p.func,style:p.object,disabled:p.bool,tooltip:p.string,className:p.string}),u(m,"defaultProps",{disabled:!1,tooltip:null,className:void 0}),e.exports=m},3299:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi #zoomin-btn, .msgapi #zoomout-btn {\n    z-index: 1;\n    position: relative;\n}\n",""])},3300:function(e,t,n){var r=n(3301);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3301:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi #mapstore-burger-menu {\n    position: absolute;\n    right: 0;\n    top: 0;\n}\n\n.msgapi #mapstore-navbar #mapstore-burger-menu {\n    position: relative;\n    float: right;\n    left: 0;\n}\n",""])},3302:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=n(0),u=n(1),p=n(2682);n(3303);var f,d,m,y=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return u.createElement("div",{id:this.props.id},u.createElement(p,{id:"helpbadge-"+(this.props.children.key||this.props.id),isVisible:this.props.helpEnabled,helpText:this.props.helpText,changeHelpText:this.props.changeHelpText,changeHelpwinVisibility:this.props.changeHelpwinVisibility}),this.props.children)}}])&&a(n.prototype,r),c&&a(n,c),t}(u.Component);f=y,d="propTypes",m={id:c.string,helpText:c.oneOfType([c.string,c.element]),helpEnabled:c.bool,changeHelpText:c.func,changeHelpwinVisibility:c.func},d in f?Object.defineProperty(f,d,{value:m,enumerable:!0,configurable:!0,writable:!0}):f[d]=m,e.exports=y},3303:function(e,t,n){var r=n(3304);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3304:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi .mapToolbar .mapstore-tb-helpbadge {\n    display: block;\n    background-color: #777;\n    position: absolute;\n    z-index: 1000;\n    top : -10px;\n    left: -10px;\n}\n\n\n.msgapi #helpbadge-zoomToMaxExtent {\n    display: inline;\n    position: absolute;\n    left: 34px;\n    top: 72px;\n    z-index: 100000\n}\n\n.msgapi #helpbadge-scaleBox {\n    display: inline;\n    position: absolute;\n    left: 116px;\n    bottom: 48px;\n    z-index: 100000\n}\n\n.msgapi #helpbadge-seachBar {\n    display: inline;\n    position: absolute;\n    left: 46px;\n    top: 10px;\n    z-index: 100000\n}\n\n\n.msgapi .btn .badge {\n    position: absolute;\n    top: -10px;\n    left: -10px;\n}\n\n.msgapi .themed .btn .badge {\n    top: -35px;\n    left: -50px;\n}\n\n.msgapi .badge {\n    cursor: pointer;\n}\n\n.msgapi #helpbadge-scaleBox {\n    left: 0 !important;\n}\n\n.msgapi #mapstore-navbar #helpbadge-search-help {\n    position: absolute;\n    left: -10px;\n    bottom: -8px;\n    z-index: 1;\n}\n",""])},3305:function(e,t,n){var r=n(3306);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3306:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi #mapstore-scalebox {\n    /*z-index: 10;\n    bottom: 6px;\n    left: -2px;\n    position: absolute;\n    margin: 8px;\n    width: 148px;*/\n}\n\n.msgapi #mapstore-scalebox-container {\n    /*z-index: 10;\n    bottom: -16px;\n    right: 55px;\n    left: auto;\n    position: absolute;\n    margin: 8px;\n    width: 148px;*/\n}\n",""])},3307:function(e,t,n){var r=n(3308);"string"==typeof r&&(r=[[e.i,r,""]]);n(760)(r,{});r.locals&&(e.exports=r.locals)},3308:function(e,t,n){(e.exports=n(759)()).push([e.i,".msgapi #mappreview-scalebox {\n    position: relative;\n    top: -36px;\n    width: 150px;\n    left: 10px;\n}\n\n.msgapi .print-error {\n    height: 100px;\n    color: #600;\n    background-color: #E8BABA;\n    border: solid #600 1px;\n    border-radius: 10px;\n    padding: 10px;\n}\n.msgapi .print-error span, .msgapi .print-warning span {\n    display: inline-block;\n    max-height: 80px;\n    overflow: auto;\n    width: 100%;\n}\n.msgapi .print-warning {\n    height: 50px;\n    color: #660;\n    background-color: #E6E8BA;\n    border: solid #660 1px;\n    border-radius: 10px;\n    padding: 10px;\n}\n.msgapi .print-preview-panel .spinner {\n    display: inline-block;\n}\n\n.msgapi .print-mappreview-refresh {\n    position: relative;\n    top: -83px;\n    right: -155px;\n    z-index: 1000;\n}\n.msgapi #mapstore-print-panel.modal-dialog {\n    z-index: 2000;\n}\n\n.msgapi #mapstore-print-panel .modal-body {\n    max-height: calc(100vh - 190px);\n    overflow-y: auto;\n}\n\n.msgapi .mapstore-print-panel {\n    width: 850px;\n    position: absolute;\n    top: 50px;\n    right: 60px;\n    zIndex: 100;\n}\n\n.msgapi .mapstore-print-panel .form-inline label {\n    margin-right: 20px;\n}\n\n.msgapi .mapstore-print-panel .print-download {\n    margin-right: 10px;\n    display: inline-block;\n    width: 30px;\n    height: 34px;\n    border: solid 1px #CCC;\n    padding: 7px;\n    border-radius: 4px;\n    padding-right: 25px;\n    padding-left: 11px;\n    top: 2px;\n    position: relative;\n}\n\n.msgapi .print-layout .panel-title {\n    padding-left: 10px;\n}\n\n.msgapi .print-layout .panel-title a{\n    text-decoration: none;\n}\n\n.msgapi .print-layout .panel-title a:hover{\n    color: #d6d6d6;\n}\n\n.msgapi .print-legend-options .panel-title {\n    padding-left: 10px;\n}\n\n.msgapi .print-legend-options .panel-title a{\n    text-decoration: none;\n}\n\n.msgapi .print-legend-options .panel-title a:hover{\n    color: #d6d6d6;\n}\n\n\n@media (min-width: 992px) {\n    .msgapi #mapstore-print-panel {\n        width: 825px;\n    }\n}\n\n@media (max-width: 991px) {\n    .msgapi #mapstore-print-panel {\n        width: 700px;\n    }\n}\n\n@media (max-width: 767px) {\n    .msgapi #mapstore-print-panel {\n        width: 98%;\n    }\n}\n\n.msgapi #mapstore-print-panel .modal-body .print-mappreview-refresh {\n    top: -96px;\n}\n\n.msgapi #mapstore-print-panel .print-submit {\n    float: right;\n}\n\n@media (min-width: 768px) {\n    .msgapi #mapstore-print-panel input[type=radio] {\n        margin: 0 8px 0 20px;\n    }\n}\n\n.msgapi #mapstore-print-panel .print-map-preview {\n    margin-bottom: 15px;\n}\n\n.msgapi #mapstore-print-panel .panel-default {\n    border: none;\n}\n\n.msgapi #mapstore-print-panel .panel-heading .panel-title {\n    font-weight: bold;\n}\n\n.msgapi #mapstore-print-panel .panel-heading {\n    padding-left: 0;\n    background-color: transparent;\n}\n\n.msgapi #mapstore-print-panel .panel-body {\n    padding: 10px;\n}\n\n.msgapi #mapstore-print-panel .form-control {\n    padding: 0 10px;\n    height: 25px;\n}\n\n.msgapi #mapstore-print-panel .print-download {\n    margin-right: 10px;\n}\n\n.msgapi #mapstore-print-panel .print-download a {\n    color: white;\n}\n\n.msgapi #mapstore-print-panel .print-legend-options .container-fluid {\n    padding-left: 0;\n    padding-right: 0;\n}\n",""])},3309:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(783),a=o.SET_PRINT_PARAMETER,i=o.PRINT_CAPABILITIES_LOADED,s=o.PRINT_CAPABILITIES_ERROR,l=o.CONFIGURE_PRINT_MAP,c=o.CHANGE_PRINT_ZOOM_LEVEL,u=o.CHANGE_MAP_PRINT_PREVIEW,p=o.PRINT_SUBMITTING,f=o.PRINT_CREATED,d=o.PRINT_ERROR,m=o.PRINT_CANCEL,y=n(267).TOGGLE_CONTROL,g=n(13),b=g.isObject,h=g.get,v=n(26),S={antiAliasing:!0,iconSize:24,legendDpi:96,fontFamily:"Verdana",fontSize:8,bold:!1,italic:!1,resolution:96,name:"",description:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split("_")[0]};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{spec:S,capabilities:null,map:null,isLoading:!1,pdfUrl:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return"print"===t.control?v({},e,{pdfUrl:null,isLoading:!1,error:null}):e;case i:var n=h(t,"capabilities.layouts",[{name:"A4"}]),o=n.filter((function(t){return E(t.name)===e.spec.sheet})).length?e.spec.sheet:E(n[0].name);return v({},e,{capabilities:t.capabilities,spec:v({},e.spec||{},{sheet:o,resolution:t.capabilities&&t.capabilities.dpis&&t.capabilities.dpis.length&&t.capabilities.dpis[0].value})});case a:return v({},e,{spec:v({},e.spec,r({},t.name,t.value))});case l:var g=t.layers.map((function(e){return e.title?v({},e,{title:b(e.title)&&t.currentLocale&&e.title[t.currentLocale]||b(e.title)&&e.title.default||e.title}):e}));return v({},e,{map:{center:t.center,zoom:t.zoom,scaleZoom:t.scaleZoom,scale:t.scale,layers:g,projection:t.projection},error:null});case c:var O=t.zoom-e.map.scaleZoom;return v({},e,{map:v({},e.map,{scaleZoom:t.zoom,zoom:e.map.zoom+O,scale:t.scale})});case u:return v({},e,{map:v({},e.map,{size:t.size})});case p:return v({},e,{isLoading:!0,pdfUrl:null,error:null});case f:return v({},e,{isLoading:!1,pdfUrl:t.url,error:null});case d:case s:return v({},e,{isLoading:!1,pdfUrl:null,error:t.error});case m:return v({},e,{isLoading:!1,pdfUrl:null,error:null});default:return e}}},3310:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(88).connect,l=n(13),c=l.isString,u=l.differenceBy,p=l.isNil,f=n(768).currentTimeSelector,d=n(2194),m=d.selectTime,y=d.selectLayer,g=d.onRangeChanged,b=n(2211),h=b.itemsSelector,v=b.loadingSelector,S=b.selectedLayerSelector,E=b.currentTimeRangeSelector,O=b.rangeSelector,w=b.timelineLayersSelector,T=n(775),A=T.moveTime,P=T.setCurrentOffset,C=n(2232).selectPlaybackRange,_=n(2264),x=_.playbackRangeSelector,I=_.statusSelector,j=n(195),L=j.createStructuredSelector,R=j.createSelector,D=n(2480).createShallowSelectorCreator,N=n(407),M=N.compose,k=N.withPropsOnChange,G=N.defaultProps,F=n(2362),U=n(2103),B=n(2262),H=n(3311),z=n(3312),V=n(12),W=M(s(R(O,h,D((function(e,t){return e===t||!p(e)&&!p(t)&&e.id===t.id&&e.title===t.title&&e.name===t.name}))(w,(function(e){return e})),v,(function(e,t,n,r){return{viewRange:e,items:t,layers:n,loading:r}}))),k((function(e,t){var n=e.layers,r=void 0===n?[]:n,o=e.loading,a=e.selectedLayer,i=t.layers,s=t.loading,l=t.selectedLayer,c=e.hideLayersName!==t.hideLayersName;return o!==s||a!==l||c||r&&i&&r.length!==i.length||u(r,i||[],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.title,r=e.name;return t+n+r})).length>0}),(function(e){var t=e.layers,n=void 0===t?[]:t,r=e.loading,o=void 0===r?{}:r,a=e.selectedLayer;return{groups:n.map((function(e){return{id:e.id,className:(o[e.id]?"loading":"")+(e.id&&e.id===a?" selected":""),content:'<div class="timeline-layer-label-container">'+(o[e.id]?'<div class="timeline-layer-icon"><div class="timeline-spinner"></div></div>':'<div class="timeline-layer-icon">'.concat(e.id&&e.id===a?'<i class="glyphicon glyphicon-time"></i>':"","</div>"))+'<div class="timeline-layer-title">'.concat(c(e.title)?e.title:e.name,"</div>")+"</div>"}}))}}))),Y=M(s(R(f,E,(function(e,t){return{currentTime:e,currentTimeRange:t}})),{setCurrentTime:m,moveCurrentRange:A,setOffset:P})),q=M(s(L({playbackRange:x,status:I}),{setPlaybackRange:C})),Z=M(s(R(S,(function(e){return{selectedLayer:e}})),{selectGroup:y})),K=M(s((function(){return{}}),{rangechangedHandler:g})),Q=M(Y,q,Z,H,K,W,G({key:"timeline",options:{maxHeight:"90%",verticalScroll:!0,stack:!1,showMajorLabels:!0,showCurrentTime:!1,zoomMin:10,zoomable:!0,type:"background",margin:{item:0,axis:0},format:{minorLabels:{minute:"h:mma",hour:"ha"}},itemsAlwaysDraggable:!0,moment:function(e){return V(e).utc()}}}),k(["viewRange","options"],(function(e){var t=e.viewRange,n=void 0===t?{}:t;return{options:o({},e.options,{},n)}})),k(["status"],(function(e){return{readOnly:"PLAY"===e.status}})),z,F((function(e){var t=e.loading;return t&&t.timeline}),(function(){return i.createElement("div",{style:{margin:"auto",fontWeight:"bold"}},i.createElement(B,{style:{display:"inline-block",verticalAlign:"middle"}}),i.createElement(U,{msgId:"loading"}))}),{white:!0})),X=n(3313);e.exports=Q(X)},3311:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(407).withHandlers,s=n(13).trim,l=n(12),c=function(e,t){return l(t).diff(e)>0},u=n(770).getStartEnd;e.exports=i({clickHandler:function(e){var t=e.selectedLayer,n=e.offsetEnabled,r=e.status,o=e.setCurrentTime,a=void 0===o?function(){}:o,i=e.selectGroup,l=void 0===i?function(){}:i;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.time,i=e.group,c=e.what,u=e.event;if("PLAY"!==r)switch(c){case"group-label":i&&"PLAY"!==r&&l(i);break;default:var p=u&&u.target&&u.target.closest(".vis-custom-time"),f=p&&p.getAttribute("class"),d=f&&s(f.replace("vis-custom-time",""));o&&!n&&"startPlaybackTime"!==d&&"endPlaybackTime"!==d&&a(o.toISOString(),t)}}},timechangedHandler:function(e){var t=e.currentTime,n=e.setOffset,r=void 0===n?function(){}:n,i=e.setCurrentTime,s=void 0===i?function(){}:i,l=e.currentTimeRange,p=void 0===l?{}:l,f=e.playbackRange,d=e.setPlaybackRange,m=void 0===d?function(){}:d,y=e.selectedLayer;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.time,i=e.id;if("startPlaybackTime"!==i&&"endPlaybackTime"!==i)"currentTime"===i&&(p.end?c(n,p.end)?s(n.toISOString(),null):(s(p.end),r(n.toISOString())):s(n.toISOString(),y)),"offsetTime"===i&&(c(t,n)?r(n.toISOString()):(s(n.toISOString()),r(t)));else{var l=o({},f,a({},i,n.toISOString())),d=u(l.startPlaybackTime,l.endPlaybackTime),g=d.start,b=d.end;c(g,b)&&m({startPlaybackTime:g,endPlaybackTime:b})}}}})},3312:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=n(407),l=s.compose,c=s.withPropsOnChange,u=s.withHandlers,p=n(770).getStartEnd;e.exports=l(c(["rangeItems","playbackRange","playbackEnabled","selectedLayer"],(function(e){var t=e.rangeItems,n=void 0===t?[]:t,r=e.playbackEnabled,a=e.playbackRange;return{rangeItems:r&&a&&void 0!==a.startPlaybackTime&&void 0!==a.endPlaybackTime?[].concat(i(n),[o({id:"playback-range"},p(a.startPlaybackTime,a.endPlaybackTime),{type:"background",className:"ms-playback-range"})]).filter((function(e){return e})):n}})),l(u({onUpdate:function(e){var t=e.moveCurrentRange,n=void 0===t?function(){}:t;return function(e){var t=e.id,r=e.start;"current-range"===t&&n(r.toISOString())}}}),c(["options","onUpdate"],(function(e){var t=e.options,n=void 0===t?{}:t,r=e.onUpdate,a=void 0===r?function(){}:r;return{options:o({},n,{snap:null,editable:{add:!1,updateTime:!1,updateGroup:!1,remove:!1,overrideItems:!1},onMove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;a(e),t(e)}})}})),c(["rangeItems","currentTime","offsetEnabled","selectedLayer","currentTimeRange","readOnly"],(function(e){var t=e.currentTimeRange,n=e.rangeItems,r=void 0===n?[]:n,a=e.readOnly;return{rangeItems:e.offsetEnabled&&void 0!==t.start&&void 0!==t.end?[].concat(i(r),[o({id:"current-range",editable:{updateTime:!a,updateGroup:!1,remove:!1}},p(t.start,t.end),{type:"background",className:"ms-current-range"})]).filter((function(e){return e})):r}}))),c(["currentTime","playbackRange","playbackEnabled","offsetEnabled","currentTimeRange"],(function(e){var t=e.currentTime,n=e.playbackRange,r=e.playbackEnabled,a=e.offsetEnabled,i=e.currentTimeRange;return{customTimes:[t?{currentTime:t}:{},r&&n&&n.startPlaybackTime&&n.endPlaybackTime?n:{},a&&i?{offsetTime:i.end}:{}].reduce((function(e,t){return t?o({},e,{},t):o({},e)}),{})}})))},3313:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(1),p=n(0),f=n(12),d=n(3314);d.timeline.components.items.BackgroundItem.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["timeline-item"]=this,this.dirty=!0)},n(3315);var m=n(13),y=m.difference,g=m.differenceBy,b=m.keys,h=m.intersection,v=m.intersectionBy,S=m.each,E=m.omit,O=m.assign,w=function(){},T=["currentTimeTick","click","contextmenu","doubleClick","groupDragged","changed","rangechange","rangechanged","select","drop","timechange","timechanged","mouseOver","mouseMove","mouseleave","itemover","itemout","mouseDown","mouseUp"],A={},P={};S(T,(function(e){return A[e]=p.func,P["".concat(e,"Handler")]=w,[A,P]}));var C={items:p.array,rangeItems:p.array,groups:p.array,options:p.object,selectionOptions:p.object,selection:p.array,customTimes:p.shape({datetime:p.instanceOf(Date),id:p.string}),animate:p.oneOfType([p.bool,p.object]),currentTime:p.oneOfType([p.string,p.instanceOf(Date),p.number])},_=function(e){function t(e){var n,a,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,l=i(t).call(this,e),n=!l||"object"!==r(l)&&"function"!=typeof l?s(a):l,c(s(n),"setAllItems",(function(e){n.$el.setItems([].concat(o(e||[]),o(n.props.rangeItems||[])))})),c(s(n),"setItems",(function(e){(e.length||0)+(n.props.rangeItems&&n.props.rangeItems.length||0)>0?n.$el.initialFitDone?n.setAllItems(e):(n.setAllItems(e),n.$el.emit("changed")):n.$el.initialRangeChangeDone&&n.setAllItems(e)})),n.state={customTimes:[]},n}var n,p,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(p=[{key:"componentDidMount",value:function(){var e=this,t=this.refs.container;this.$el=new d.Timeline(t,void 0,this.props.options),T.forEach((function(t){return e.$el.on(t,e.props["".concat(t,"Handler")])})),this.init()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.items,r=t.groups,o=t.options,a=t.selection,i=t.customTimes,s=t.readOnly,l=t.rangeItems,c=n!==e.items,u=r!==e.groups,p=o!==e.options,f=i!==e.customTimes,d=a!==e.selection,m=s!==e.readOnly,y=l!==e.rangeItems;return c||u||p||f||d||m||y}},{key:"componentDidUpdate",value:function(e){this.init(e)}},{key:"componentWillUnmount",value:function(){this.$el.destroy()}},{key:"render",value:function(){return u.createElement("div",{ref:"container",className:this.props.readOnly?"read-only-timeline":"",onMouseOut:this.props.onMouseOutHandler})}},{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props,r=n.items,o=n.rangeItems,a=n.groups,i=n.options,s=n.selection,l=n.selectionOptions,c=void 0===l?{}:l,u=n.customTimes,p=n.animate,m=void 0===p||p,O=n.currentTime,w=i;if(m&&(w=E(i,"start","end"),i.start&&i.end?this.$el.setWindow(i.start,i.end,{animation:m}):this.$el.setWindow(f().subtract(1,"month"),f().add(1,"month"),{animation:m})),this.$el.setOptions(w),a.length>0){var T=new d.DataSet;T.add(a),this.$el.setGroups(T)}if(r&&r!==t.items)this.setItems(r);else if(o!==t.rangeItems){var A=this.$el&&this.$el.itemsData&&this.$el.itemsData.getDataSet();if(A){var P=v(o||[],t.rangeItems||[],"id"),C=g(o||[],t.rangeItems||[],"id"),_=g(t.rangeItems||[],o||[],"id");P.map((function(e){return A.update(e)})),C.map((function(e){return A.add(e)})),_.map((function(e){var t=e.id;return A.remove(t)}))}else this.setItems(r)}this.$el.setSelection(s,c),O&&this.$el.setCurrentTime(O);var x=b(this.state.customTimes),I=b(u),j=y(I,x),L=y(x,I),R=h(x,I);S(L,(function(t){return e.$el.removeCustomTime(t)})),S(j,(function(t){var n=u[t];e.$el.addCustomTime(n,t)})),S(R,(function(t){var n=u[t];e.$el.setCustomTime(n,t)})),this.setState({customTimes:u}),(this.props.readOnly!==t.readOnly||this.props.readOnly&&j.length>0)&&S(this.$el.customTimes,(function(n){e.props.readOnly?n.hammer.off("panstart panmove panend"):!0===t.readOnly&&(n.hammer.on("panstart",n._onDragStart.bind(n)),n.hammer.on("panmove",n._onDrag.bind(n)),n.hammer.on("panend",n._onDragEnd.bind(n)))}))}}])&&a(n.prototype,p),m&&a(n,m),t}(u.Component);c(_,"propTypes",O(C,A)),c(_,"defaultProps",O({items:[],groups:[],options:{},selection:[],customTimes:{}},P)),e.exports=_},3318:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(15),l=n(2103),c=n(758),u=c.Button,p=c.Glyphicon,f=n(2194).setCollapsed,d=n(2211),m=d.isCollapsed,y=d.hasLayers,g=n(407),b=g.compose,h=g.withHandlers,v=g.withProps,S=g.renderNothing,E=g.branch,O=g.mapPropsStream,w=n(2135),T=n(195).createSelector,A=n(88).connect,P=n(2709),C=b(v({collapseHintPopoverOptions:{placement:"top",props:{title:i.createElement("span",null,i.createElement(p,{glyph:"time"})," ",i.createElement("strong",null,i.createElement(l,{msgId:"timeline.collapsed.title"})))},content:i.createElement(l,{msgId:"timeline.collapsed.tooltip"})}}),O((function(e){return e.combineLatest(function(e){return e.distinctUntilKeyChanged("collapsed").filter((function(e){return e.collapsed})).take(1).switchMap((function(e){var t=e.collapseHintPopoverOptions;return s.Observable.timer(5e3).startWith({popoverOptions:t}).concat(s.Observable.of({}))})).startWith({})}(e),(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t)}))})),E((function(e){return e.popoverOptions}),P,w))(u);e.exports=b(A(T(m,y,(function(e,t){return{collapsed:e,visible:t}})),{setCollapsed:f}),E((function(e){return!e.visible}),S),h({onClick:function(e){var t=e.collapsed,n=e.setCollapsed;return function(){return n(!t)}}}),v((function(e){var t=e.collapsed;return{bsStyle:t?"primary":"success",tooltipId:t?"timeline.show":"timeline.hide"}})))((function(e){return i.createElement(C,r({},e,{bsSize:"xsmall"}),i.createElement(p,{glyph:"time"}))}))},3319:function(e,t,n){var r=n(2194).RANGE_CHANGED,o=n(269).REMOVE_NODE,a=n(267).RESET_CONTROLS,i=n(2194),s=i.RANGE_DATA_LOADED,l=i.LOADING,c=i.SELECT_LAYER,u=i.SET_COLLAPSED,p=i.SET_MAP_SYNC,f=n(410).set,d=n(13),m=d.assign,y=d.pickBy,g=d.has;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{autoSelect:!0,collapsed:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return f("settings.collapsed",t.collapsed,e);case p:return f("settings.mapSync",t.mapSync,e);case r:return f("range",{start:t.start,end:t.end},e);case s:return f("rangeData[".concat(t.layerId,"]"),{range:t.range,histogram:t.histogram,domain:t.domain},e);case l:return t.layerId?f("loading[".concat(t.layerId,"]"),t.loading,e):f("loading.timeline",t.loading,e);case c:return f("selectedLayer",t.layerId,e);case o:var n=e;return m({},e,{rangeData:g(n.rangeData,t.node)?y(n.rangeData,(function(e,n){return n!==t.node})):n.rangeData,loading:g(n.rangeData,t.node)?y(n.loading,(function(e,n){return n!==t.node})):n.loading,selectedLayer:e.selectedLayer===t.node?void 0:e.selectedLayer});case a:return m({},e,{range:void 0,rangeData:void 0,selectedLayer:void 0,loading:void 0,MouseEvent:void 0});default:return e}}},3320:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n(15),c=n(13),u=c.isString,p=c.get,f=c.head,d=c.castArray,m=n(12),y=n(2712).wrapStartStop,g=n(409).CHANGE_MAP_VIEW,b=n(2194),h=b.SELECT_TIME,v=b.RANGE_CHANGED,S=b.ENABLE_OFFSET,E=b.SET_MAP_SYNC,O=b.timeDataLoading,w=b.rangeDataLoaded,T=b.onRangeChanged,A=b.selectLayer,P=n(775),C=P.setCurrentTime,_=P.UPDATE_LAYER_DIMENSION_DATA,x=P.setCurrentOffset,I=n(269).REMOVE_NODE,j=n(161).error,L=n(408).getLayerFromId,R=n(2211),D=R.rangeSelector,N=R.selectedLayerName,M=R.selectedLayerUrl,k=R.isAutoSelectEnabled,G=R.selectedLayerSelector,F=R.timelineLayersSelector,U=R.multidimOptionsSelectorCreator,B=R.isMapSync,H=n(768),z=H.layerTimeSequenceSelectorCreator,V=H.timeDataSelector,W=H.offsetTimeSelector,Y=H.currentTimeSelector,q=n(770),Z=q.getNearestDate,K=q.roundRangeResolution,Q=q.isTimeDomainInterval,X=n(799),J=X.getHistogram,$=X.describeDomains,ee=X.getDomainValues,te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=G(e),r=N(e),o=M(e),a=U(n)(e);return[o,r,"time",i({limit:1},t),a]},ne=function(e,t,n){if(N(e))return l.Observable.forkJoin(ee.apply(void 0,o(te(e,{sort:"asc",fromValue:n}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return r(e,1)[0]})).catch((function(e){return e&&l.Observable.of(null)})),ee.apply(void 0,o(te(e,{sort:"desc",fromValue:n}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return r(e,1)[0]})).catch((function(e){return e&&l.Observable.of(null)}))).map((function(e){return Z(e.filter((function(e){return!!e})),n)||n}));var a=z(L(e,t))(e);return l.Observable.of(Z(a,n)||n)},re=function(e){return u(e)?e:e.toISOString()},oe=function(e,t,n){var r=t.domain.split("--"),o=D(n())||{start:new Date(r[0]),end:new Date(r[1])},a=K(o,20),c=a.range,u=a.resolution,m=L(n(),e).name,y=s({},"time","".concat(re(c.start),"/").concat(re(c.end)));return J(t.source.url,m,"time",s({},"time","".concat(re(c.start),"/").concat(re(c.end))),u,U(e)(n())).merge($(t.source.url,m,y,i({},U(e)(n()),{expandLimit:20}))).scan((function(e,t){return i({},e,{},t)}),{}).switchMap((function(e){var t,n=e.Histogram,r=e.Domains,o=p(f(d(p(r,"DimensionDomain")||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Identifier;return"time"===t}))),"Domain");try{t=n&&n.Values&&n.Values.split(",").map((function(e){return parseInt(e,10)}))||[]}catch(e){t=[]}var a=o&&o.indexOf("--")<0&&o.split(",");return l.Observable.of({range:c,histogram:n&&n.Domain?{values:t,domain:n.Domain}:void 0,domain:o?{values:a}:void 0})}))};e.exports={setTimelineCurrentTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(h).throttleTime(100).switchMap((function(e){var t=e.time,n=e.group,a=r();return n?ne(a,n,t).switchMap((function(e){var t=D(a)||{},n=t.start,r=t.end,i=[];if(n&&r&&(m(e).isBefore(n)||m(e).isAfter(r))){var s=m(r).diff(n);i=[T({start:m(e).subtract(s/2),end:m(e).add(s/2)})]}return l.Observable.from([].concat(o(i),[C(e)]))})).let(y(O(!1,!0),O(!1,!1))):l.Observable.of(C(t))}))},setupTimelineExistingSettings:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(I,_).exhaustMap((function(){return k(r())&&p(F(r()),"[0].id")&&!G(r())?l.Observable.of(A(p(F(r()),"[0].id"))).concat(l.Observable.of(1).switchMap((function(){return ne(r(),p(F(r()),"[0].id"),Y(r)||(new Date).toISOString()).filter((function(e){return e})).map((function(e){return C(e)}))}))):l.Observable.empty()}))},settingInitialOffsetValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(S).switchMap((function(e){var t=r(),n=Y(t),o=D(t);if(e.enabled){var a=o||{},i=a.start,s=void 0===i?0:i,c=a.end,u=void 0===c?432e6:c,p=W(t),f=m(u).diff(s),d=o?m(s).add(f/2).toISOString():m(new Date).toISOString(),y=m(n||d).add(f/5),g=e.enabled&&!n?l.Observable.of(C(d)):l.Observable.empty(),b=e.enabled&&!p||e.enabled&&m(p).diff(n)<0?l.Observable.of(x(y.toISOString())):l.Observable.empty(),h=o?l.Observable.empty():l.Observable.of(T({start:m(d).add(-1*f/2),end:m(d).add(f/2)}));return g.concat(b).concat(h)}return l.Observable.of(x())}))},updateRangeDataOnRangeChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(v).merge(e.ofType(g).filter((function(){return B(r())})),e.ofType(E)).debounceTime(400).merge(e.ofType(_).debounceTime(50)).switchMap((function(){var e,t=V(r())||{},n=Object.keys(t).filter((function(e){return t[e]&&t[e].domain&&Q(t[e].domain)||B(r())}));return(e=l.Observable).merge.apply(e,o(n.map((function(e){return oe(e,t[e],r).map((function(t){var n=t.range,r=t.histogram,o=t.domain;return w(e,n,r,o)})).startWith(O(e,!0)).catch((function(){return l.Observable.of(j({uid:"error_with_timeline_update",title:"timeline.errors.multidim_error_title",message:"timeline.errors.multidim_error_message"}))})).concat(l.Observable.of(O(e,!1)))}))))}))}}},3321:function(e,t,n){var r=n(1),o=n(88).connect,a=n(195).createSelector,i=n(407),s=i.compose,l=i.withState,c=i.withProps,u=i.withHandlers,p=n(2211).selectedLayerSelector,f=n(2264),d=f.statusSelector,m=f.hasPrevNextAnimationSteps,y=f.playbackMetadataSelector,g=n(2232),b=g.animationStepMove,h=g.STATUS,v=n(2103),S=n(2116),E=n(3322),O=s(l("showSettings","onShowSettings",!1),l("collapsed","setCollapsed",!0),c((function(e){var t=e.setCollapsed;return{buttons:[{glyph:"minus",onClick:function(){return t(!0)}}]}}))),w=s(o(a(d,p,y,m,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return t?e===h.PLAY||e===h.PAUSE?r:{hasNext:!!n.next,hasPrevious:!!n.previous}:{hasNext:!0,hasPrevious:!0}})),{stepMove:b}),u({forward:function(e){var t=e.stepMove,n=void 0===t?function(){}:t;return function(){return n(1)}},backward:function(e){var t=e.stepMove,n=void 0===t?function(){}:t;return function(){return n(-1)}}})),T=s(O,w);e.exports=T((function(e){var t=e.status,n=e.statusMap,o=e.play,a=void 0===o?function(){}:o,i=e.forward,s=void 0===i?function(){}:i,l=e.backward,c=void 0===l?function(){}:l,u=e.pause,p=void 0===u?function(){}:u,f=e.stop,d=void 0===f?function(){}:f,m=e.hasPrevious,y=e.hasNext,g=e.showSettings,b=e.onShowSettings,h=void 0===b?function(){}:b,O=e.settingsStyle,w=void 0===O?{}:O;return r.createElement("div",{style:{display:"flex"}},t!==n.PLAY&&t!==n.PAUSE&&g&&r.createElement(E,{style:w}),r.createElement(S,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"step-backward",key:"back",onClick:c,disabled:!m,tooltip:r.createElement(v,{msgId:"playback.backwardStep"})},{glyph:t===n.PLAY?"pause":"play",key:"play",active:t===n.PLAY||t===n.PAUSE,disabled:!y,bsStyle:t===n.PLAY||t===n.PAUSE?"success":"primary",onClick:function(){return t===n.PLAY?p():a()},tooltipId:y&&(t===n.PLAY?"playback.pause":t===n.PAUSE?"playback.paused":"playback.play")},{glyph:"stop",key:"stop",disabled:t!==n.PLAY&&t!==n.PAUSE,onClick:d,tooltip:!(t!==n.PLAY&&t!==n.PAUSE)&&r.createElement(v,{msgId:"playback.stop"})},{glyph:"step-forward",key:"forward",onClick:s,disabled:!y,tooltip:y&&r.createElement(v,{msgId:"playback.forwardStep"})},{glyph:"cog",key:"settings",bsStyle:t!==n.PLAY&&t!==n.PAUSE&&g?"success":"primary",active:(t!==n.PLAY||t!==n.PAUSE)&&!!g,disabled:t===n.PLAY||t===n.PAUSE,onClick:function(){return t!==n.PLAY&&h(!g)},tooltip:!(t===n.PLAY||t===n.PAUSE)&&r.createElement(v,{msgId:"playback.settings.tooltip"})}]}))}))},3322:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(88).connect,i=n(195).createSelector,s=n(12),l=n(407),c=l.compose,u=l.withProps,p=l.withHandlers,f=n(2264),d=f.playbackSettingsSelector,m=f.playbackRangeSelector,y=n(2211),g=y.selectedLayerSelector,b=y.rangeSelector,h=y.selectedLayerDataRangeSelector,v=n(2232),S=v.selectPlaybackRange,E=v.changeSetting,O=v.toggleAnimationMode,w=n(2194).onRangeChanged;e.exports=c(a(i(d,g,m,(function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({fixedStep:!t,playbackRange:n},e)})),{setPlaybackRange:S,onSettingChange:E,toggleAnimationMode:O}),c(a(i(b,h,(function(e,t){return{layerRange:t,viewRange:e}})),{moveTo:w}),p({toggleAnimationRange:function(e){var t=e.fixedStep,n=e.layerRange,r=e.viewRange,o=void 0===r?{}:r,a=e.setPlaybackRange,i=void 0===a?function(){}:a;return function(e){var r=t?o:n;r={startPlaybackTime:s(r&&r.start||new Date).subtract(1,"days").toISOString(),endPlaybackTime:s(r&&r.end||new Date).add(1,"days").toISOString()},i(e?r:void 0)}},setPlaybackToCurrentViewRange:function(e){var t=e.viewRange,n=void 0===t?{}:t,r=e.setPlaybackRange,o=void 0===r?function(){}:r;return function(){n.start&&n.end&&o({startPlaybackTime:s(n.start).toISOString(),endPlaybackTime:s(n.end).toISOString()})}},setPlaybackToCurrentLayerDataRange:function(e){var t=e.setPlaybackRange,n=void 0===t?function(){}:t,r=e.layerRange;return function(){return r&&n({startPlaybackTime:r.start,endPlaybackTime:r.end})}}}),u((function(e){var t=e.playbackRange,n=e.fixedStep,r=e.moveTo,o=void 0===r?function(){}:r,a=e.setPlaybackToCurrentViewRange,i=void 0===a?function(){}:a,s=e.setPlaybackToCurrentLayerDataRange,l=void 0===s?function(){}:s;return{playbackButtons:[{glyph:"search",tooltipId:"playback.settings.range.zoomToCurrentPlayackRange",onClick:function(){return o({start:t.startPlaybackTime,end:t.endPlaybackTime})}},{glyph:"resize-horizontal",tooltipId:"playback.settings.range.setToCurrentViewRange",onClick:function(){return i()}},{glyph:"1-layer",visible:!n,tooltipId:"playback.settings.range.fitToSelectedLayerRange",onClick:function(){return l()}}]}}))))(n(3323))},3323:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),s=n(12),l=n(13).isNaN,c=n(758),u=c.Form,p=c.FormGroup,f=c.ControlLabel,d=c.FormControl,m=c.InputGroup,y=n(2103),g=n(2265),b=n(2708),h=n(2482),v=n(2233),S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};try{if(!l(parseInt(e,10))){var r=parseInt(e,10);return t(r<1?1:r)}return n()}catch(e){return n(e)}},E=function(e){var t=e.startPlaybackTime,n=e.endPlaybackTime,r=s(t).diff(n);return{startPlaybackTime:r>=0?n:t,endPlaybackTime:r>=0?t:n}};e.exports=function(e){var t=e.following,n=e.frameDuration,r=e.timeStep,a=e.stepUnit,s=e.onSettingChange,l=void 0===s?function(){}:s,c=e.toggleAnimationMode,O=void 0===c?function(){}:c,w=e.toggleAnimationRange,T=void 0===w?function(){}:w,A=e.fixedStep,P=void 0!==A&&A,C=e.playbackRange,_=void 0===C?{}:C,x=e.setPlaybackRange,I=void 0===x?function(){}:x,j=e.playbackButtons,L=e.dateSelectorStyle,R=void 0===L?{padding:0,margin:0,border:"none"}:L,D=e.style,N=void 0===D?{}:D;return i.createElement("div",{className:"ms-playback-settings",style:N},i.createElement("h4",null,i.createElement(y,{msgId:"timeline.settings.title"})),i.createElement(p,{controlId:"timelineSettings"},i.createElement(u,{componentClass:"fieldset",inline:!0},i.createElement(f,null,i.createElement(y,{msgId:"timeline.settings.snapToGuideLayer"})," ",i.createElement(g,{text:i.createElement(y,{msgId:"timeline.settings.snapToGuideLayerTooltip"})})),i.createElement("span",null,i.createElement(h,{checked:!P,onChange:function(){return O()}})))),i.createElement("h4",null,i.createElement(y,{msgId:"playback.settings.title"})),i.createElement(p,{controlId:"frameDuration"},i.createElement(f,null,i.createElement(y,{msgId:"playback.settings.frameDuration"})),i.createElement(m,null,i.createElement(d,{componentClass:"input",type:"number",value:n,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?{}:t;return S(n.value,(function(e){l("frameDuration",e)}))}}),i.createElement(m.Addon,null,"s"))),i.createElement(f,null,i.createElement(y,{msgId:"playback.settings.step.label"})," ",i.createElement(g,{text:i.createElement(y,{msgId:"playback.settings.step.tooltip"})})),i.createElement(p,{controlId:"formPlaybackStep"},i.createElement(u,{componentClass:"fieldset",inline:!0},i.createElement(d,{disabled:!P,componentClass:"input",type:"number",style:{maxWidth:120},value:r,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?{}:t;return S(n.value,(function(e){l("timeStep",e)}))}}),i.createElement(d,{disabled:!P,componentClass:"select",value:a,onChange:function(e){var t=e.target;return l("stepUnit",(void 0===t?{}:t).value)}},i.createElement(y,{msgId:"playback.settings.step.year",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"years"},e)})),i.createElement(y,{msgId:"playback.settings.step.week",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"weeks"},e)})),i.createElement(y,{msgId:"playback.settings.step.day",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"days"},e)})),i.createElement(y,{msgId:"playback.settings.step.hour",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"hour"},e)})),i.createElement(y,{msgId:"playback.settings.step.minute",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"minutes"},e)})),i.createElement(y,{msgId:"playback.settings.step.second",msgParams:{number:r||1}},(function(e){return i.createElement("option",{value:"seconds"},e)}))))),i.createElement(v,{onSwitch:function(e){return T(e)},expanded:_.startPlaybackTime&&_.endPlaybackTime,title:i.createElement(y,{msgId:"playback.settings.range.title"}),buttons:j},i.createElement(p,{controlId:"formPlaybackMode",style:{margin:10}},i.createElement(b,{tooltipId:"playback.settings.range.animationStart",glyph:"play",date:_.startPlaybackTime,onUpdate:function(e){return I(E(o({},_,{startPlaybackTime:e})))},style:R,showButtons:!0}),i.createElement(b,{glyph:"stop",tooltipId:"playback.settings.range.animationEnd",date:_.endPlaybackTime,onUpdate:function(e){return I(E(o({},_,{endPlaybackTime:e})))},style:R,showButtons:!0}))),i.createElement(p,{controlId:"formPlaybackFollowingMode"},i.createElement(u,{componentClass:"fieldset",inline:!0},i.createElement(f,null,i.createElement(y,{msgId:"playback.settings.mode.following"})," ",i.createElement(g,{text:i.createElement(y,{msgId:"playback.settings.mode.followingDescription"})})),i.createElement("span",null,i.createElement(h,{checked:t,onChange:function(e){return l("following",e)}})))))}},3324:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(2116),l=n.n(s),c=n(2103),u=n.n(c);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){return f(this,t),m(this,y(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o.a.createElement(l.a,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:10}},buttons:[{glyph:this.props.checked?"chevron-down":"chevron-left",visible:!0,tooltip:this.props.checked?o.a.createElement(u.a,{msgId:"collapse"}):o.a.createElement(u.a,{msgId:"expand"}),onClick:function(){return e.props.onClick(!e.props.checked)}}]})}}])&&d(n.prototype,r),a&&d(n,a),t}(o.a.Component);b(h,"propTypes",{checked:i.a.bool,onClick:i.a.func}),b(h,"defaultProps",{checked:!1,onClick:function(){}}),t.default=h},3325:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n(12),c=n(13).get,u=n(2232),p=u.PLAY,f=u.PAUSE,d=u.STOP,m=u.STATUS,y=u.SET_FRAMES,g=u.SET_CURRENT_FRAME,b=u.TOGGLE_ANIMATION_MODE,h=u.ANIMATION_STEP_MOVE,v=u.stop,S=u.setFrames,E=u.appendFrames,O=u.setCurrentFrame,w=u.framesLoading,T=u.updateMetadata,A=n(775),P=A.moveTime,C=A.SET_CURRENT_TIME,_=A.MOVE_TIME,x=n(2194),I=x.selectLayer,j=x.onRangeChanged,L=x.timeDataLoading,R=x.SELECT_LAYER,D=x.SET_MAP_SYNC,N=n(269),M=N.changeLayerProperties,k=N.REMOVE_NODE,G=n(161).error,F=n(768),U=F.currentTimeSelector,B=F.layersWithTimeDataSelector,H=F.layerTimeSequenceSelectorCreator,z=n(771).LOCATION_CHANGE,V=n(2264),W=V.currentFrameSelector,Y=V.currentFrameValueSelector,q=V.lastFrameSelector,Z=V.playbackRangeSelector,K=V.playbackSettingsSelector,Q=V.frameDurationSelector,X=V.statusSelector,J=V.playbackMetadataSelector,$=n(2211),ee=$.selectedLayerSelector,te=$.selectedLayerName,ne=$.selectedLayerUrl,re=$.selectedLayerData,oe=$.selectedLayerTimeDimensionConfiguration,ae=$.rangeSelector,ie=$.timelineLayersSelector,se=$.multidimOptionsSelectorCreator,le=n(3326),ce=n(2712).wrapStartStop,ue=n(799).getDomainValues,pe=n(15),fe=function(e,t){return"".concat(e,"/").concat(t)},de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ee(e()),r=te(e()),o=ne(e()),a=Z(e())||{},s=a.startPlaybackTime,l=a.endPlaybackTime,c=X(e())===m.PLAY||X(e())===m.PAUSE;return[o,r,"time",i({limit:20,time:s&&l&&c?fe(s,l):void 0},t),se(n)(e())]},me=function(e,t){if(te(e())){var n=H(re(e()))(e()),r=oe(e());return"multidim-extension"!==c(r,"source.type")&&n&&n.length>0?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.fromValue,o=n.limit,a=void 0===o?20:o,i=Z(t())||{},s=i.startPlaybackTime,c=i.endPlaybackTime;return pe.Observable.of(e.filter((function(e){return!s||!c||l(e).isSameOrAfter(s)&&l(e).isSameOrBefore(c)})).filter((function(e){return!r||l(e).isAfter(r)})).slice(0,a))}(n,e,t):ue.apply(void 0,o(de(e,t))).map((function(e){return e.DomainValues.Domain.split(",")}))}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fromValue,r=t.limit,o=void 0===r?20:r,a=t.sort,i=void 0===a?"asc":a,s=K(e()),c=s.timeStep,u=s.stepUnit,p=l.duration(c,u),f=Z(e())||{},d=f.startPlaybackTime,m=f.endPlaybackTime,y=void 0!==n?n:d||U(e())||(new Date).toString(),g=[];y!==n&&g.push(l(y).toISOString());for(var b=0;b<o&&(y=l(y).add("asc"===i?p:-1*p),!m||y.isBefore(m));b++)g.push(y.toISOString());return pe.Observable.of(g)}(e,t)},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}};return function(t){var n=B(e());return pe.Observable.from(n.map((function(e){return M(e.id,{singleTile:!0})}))).concat(t).concat(pe.Observable.from(n.map((function(e){return M(e.id,{singleTile:e.singleTile})}))))}},ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.start,r=t.end;return n&&r&&(l(e).isBefore(n)||l(e).isAfter(r))};e.exports={retrieveFramesForPlayback:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(p).exhaustMap((function(){return me(r,{fromValue:Z(r())&&Z(r()).startPlaybackTime&&Z(r()).endPlaybackTime?void 0:U(r())}).map((function(e){return S(e)})).let(ce(w(!0),w(!1)),(function(){return pe.Observable.of(G({title:"There was an error retrieving animation",message:"Please contact the administrator"}),v())})).let(ce(L(!1,!0),L(!1,!1))).concat(e.ofType(g).filter((function(e){return e.frame%20==10})).switchMap((function(){return me(r,{fromValue:q(r())}).map(E).let(ce(w(!0),w(!1)))}))).takeUntil(e.ofType(d,z)).concat(pe.Observable.of(L(!1,!1))).let(ye(r))}))},updateCurrentTimeFromAnimation:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(g).map((function(){return Y(r())})).map((function(e){return e?P(e):v()}))},timeDimensionPlayback:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y).exhaustMap((function(){return pe.Observable.interval(1e3*Q(r())).startWith(0).let(le(e.ofType(p,f).map((function(e){return e.type===p})))).map((function(){return O(W(r())+1)})).merge(e.ofType(h).map((function(e){var t=e.direction;return O(Math.max(0,W(r())+t))}))).concat(pe.Observable.of(v())).takeUntil(e.ofType(d,z))}))},playbackToggleGuideLayerToFixedStep:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(b).exhaustMap((function(){return te(r())?pe.Observable.of(I(void 0)):pe.Observable.of(I(c(ie(r()),"[0].id")))}))},playbackMoveStep:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(h).filter((function(){return X(o())!==m.PLAY})).switchMap((function(e){var t=e.direction,n=void 0===t?1:t,a=J(o())||{},i=U(o());return i&&a.forTime===i?pe.Observable.of(n>0?a.next:a.previous):me(o,{limit:1,sort:n>0?"asc":"desc",fromValue:U(o())}).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=r(e,1),n=t[0];return n}))})).filter((function(e){return!!e})).map((function(e){return P(e)}))},playbackCacheNextPreviousTimes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,a=void 0===n?function(){}:n;return e.ofType(C,_,R,d,D).filter((function(){return X(a())!==m.PLAY&&X(a())!==m.PAUSE})).filter((function(){return ee(a())})).filter((function(e){return!!e})).switchMap((function(e){var t=e.time||U(a());return pe.Observable.forkJoin(ue.apply(void 0,o(de(a,{sort:"asc",limit:1,fromValue:t}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return r(e,1)[0]})).catch((function(e){return e&&pe.Observable.of(null)})),ue.apply(void 0,o(de(a,{sort:"desc",limit:1,fromValue:t}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return r(e,1)[0]})).catch((function(e){return e&&pe.Observable.of(null)}))).map((function(e){var n=r(e,2),o=n[0],a=n[1];return T({forTime:t,next:o,previous:a})}))}))},playbackFollowCursor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(_).filter((function(e){return(e.type===_||X(r())===m.PLAY)&&ge(U(r()),ae(r()))})).filter((function(){return c(K(r()),"following")})).switchMap((function(){return pe.Observable.of(j((e=U(r()),t=ae(r()),n=t.start,o=t.end,a=l(o).diff(l(n)),{start:e,end:l(e).add(a).toISOString()})));var e,t,n,o,a}))},playbackStopWhenDeleteLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(k).filter((function(){return!ee(r())&&"PLAY"===X(r())})).switchMap((function(){return pe.Observable.of(v())}))}}},3326:function(e,t){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.exports=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(o){return o.withLatestFrom(e.startWith(t)).filter((function(e){var t=n(e,2)[1];return r(t)})).map((function(e){return n(e,1)[0]}))}}},3327:function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=n(2232),a=o.PLAY,i=o.PAUSE,s=o.STOP,l=o.STATUS,c=o.SET_FRAMES,u=o.APPEND_FRAMES,p=o.FRAMES_LOADING,f=o.SET_CURRENT_FRAME,d=o.SELECT_PLAYBACK_RANGE,m=o.CHANGE_SETTING,y=o.UPDATE_METADATA,g=n(267).RESET_CONTROLS,b=n(410).set,h={timeStep:1,stepUnit:"days",frameDuration:2,following:!0};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:l.STOP,currentFrame:-1,settings:h},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return b("status",l.PLAY,e);case i:return b("status",l.PAUSE,e);case s:return b("status",l.STOP,b("currentFrame",-1,e));case c:return b("frames",t.frames,b("currentFrame",-1,e));case p:return b("framesLoading",t.loading,e);case u:return b("frames",[].concat(r(e.frames||[]),r(t.frames)),e);case f:return b("currentFrame",t.frame,e);case d:return b("playbackRange",t.range,e);case m:return b("settings[".concat(t.name,"]"),t.value,e);case y:return b("metadata",{next:t.next,previous:t.previous,forTime:t.forTime},e);case g:return b("metadata",void 0,b("framesLoading",void 0,b("playbackRange",void 0,b("frames",void 0,b("currentFrame",-1,b("status","STOP",b("settings",h,e)))))));default:return e}}},3328:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(53),s=n(13),l=s.get,c=s.assign;function u(e,t){var n,r,a=t&&t.params;return a&&(n=a.start,r=a.limit),function(a,s){var u=e,p=s&&s();if(p){var f=l(p,"users.searchText");u=e||f||"*",n=null!=n?n:l(p,"users.start")||0,r=r||l(p,"users.limit")||12}return a(function(e,t,n){return{type:"USERMANAGER_GETUSERS",status:"loading",searchText:e,start:t,limit:n}}(u,n,r)),i.getUsers(u,o({},t,{params:{start:n,limit:r}})).then((function(e){var t;t=e&&e.ExtUserList&&e.ExtUserList.User?l(e,"ExtUserList.User"):[];var o=l(e,"ExtUserList.UserCount");t=(t=Array.isArray(t)?t:[t]).map((function(e){var t=l(e,"groups.group");return t=Array.isArray(t)?t:[t],c({},e,{groups:t})})),a(function(e,t,n,r,o){return{type:"USERMANAGER_GETUSERS",status:"success",searchText:e,start:t,limit:n,users:r,totalCount:o}}(u,n,r,t,o))})).catch((function(e){a(function(e,t,n,r){return{type:"USERMANAGER_GETUSERS",status:"error",searchText:e,start:t,limit:n,error:r}}(u,n,r,e))}))}}function p(e){return function(t){return t({type:"USERMANAGER_GETGROUPS",status:"loading"}),i.getAvailableGroups(e).then((function(e){t(function(e){return{type:"USERMANAGER_GETGROUPS",status:"success",groups:e}}(e))})).catch((function(e){t(function(e){return{type:"USERMANAGER_GETGROUPS",status:"error",error:e}}(e))}))}}function f(e){return{type:"USERMANAGER_EDIT_USER",status:"loading",user:e}}function d(e){return{type:"USERMANAGER_EDIT_USER",status:"success",user:e}}function m(e,t){return{type:"USERMANAGER_EDIT_USER",status:"error",user:e,error:t}}function y(e){return{type:"USERMANAGER_EDIT_USER",user:e}}function g(e){return{type:"USERMANAGER_UPDATE_USER",status:"saving",user:e}}function b(e){return{type:"USERMANAGER_UPDATE_USER",status:"saved",user:e&&e.User}}function h(e,t){return{type:"USERMANAGER_UPDATE_USER",status:"error",user:e,error:t}}function v(e){return{type:"USERMANAGER_UPDATE_USER",status:"creating",user:e}}function S(e,t){return{type:"USERMANAGER_UPDATE_USER",status:"created",user:o({},t,{id:e})}}function E(e,t){return{type:"USERMANAGER_UPDATE_USER",status:"error",user:e,error:t}}function O(e){return{type:"USERMANAGER_DELETE_USER",status:"deleting",id:e}}function w(e){return{type:"USERMANAGER_DELETE_USER",status:"deleted",id:e}}function T(e,t){return{type:"USERMANAGER_DELETE_USER",status:"error",id:e,error:t}}function A(e,t){return{type:"USERMANAGER_DELETE_USER",status:e,id:t}}e.exports={getUsers:u,USERMANAGER_GETUSERS:"USERMANAGER_GETUSERS",editUser:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{params:{includeattributes:!0}};return function(n,r){var a=r&&r();if(a&&(!a.users||!a.users.groups)){var s=a.security&&a.security.user;n(p(s||{role:"ADMIN"}))}e&&e.id?(n(f(e)),i.getUser(e.id,t).then((function(t){var r=t.User,a=r.attribute;a&&(r=o({},r,{attribute:Array.isArray(a)?a:[a]})),r&&(r=o({},r,{groups:e.groups})),n(d(r))})).catch((function(t){n(m(e,t))}))):n(y(e))}},USERMANAGER_EDIT_USER:"USERMANAGER_EDIT_USER",changeUserMetadata:function(e,t){return{type:"USERMANAGER_EDIT_USER_DATA",key:e,newValue:t}},USERMANAGER_EDIT_USER_DATA:"USERMANAGER_EDIT_USER_DATA",saveUser:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=c({},o({},e));if(r&&r.lastError&&delete r.lastError,r&&r.id)return n(g(r)),i.updateUser(r.id,o({},r,{groups:{group:r.groups}}),t).then((function(e){n(b(e)),n(u())})).catch((function(e){n(h(r,e))}));n(v(r));var a=o({},r);return r&&r.groups&&(a=o({},r,{groups:{group:r.groups.filter((function(e){return"everyone"!==e.groupName}))}})),i.createUser(a,t).then((function(e){n(S(e,r)),n(u())})).catch((function(e){n(E(r,e))}))}},USERMANAGER_UPDATE_USER:"USERMANAGER_UPDATE_USER",deleteUser:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"confirm";return"confirm"===t||"cancelled"===t?A(t,e):"delete"===t?function(t){t(O(e)),i.deleteUser(e).then((function(){t(w(e)),t(u())})).catch((function(n){t(T(e,n))}))}:function(){}},USERMANAGER_DELETE_USER:"USERMANAGER_DELETE_USER",getGroups:p,USERMANAGER_GETGROUPS:"USERMANAGER_GETGROUPS",usersSearchTextChanged:function(e){return{type:"USERS_SEARCH_TEXT_CHANGED",text:e}},USERS_SEARCH_TEXT_CHANGED:"USERS_SEARCH_TEXT_CHANGED"}}}]);